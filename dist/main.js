// @bun
var aq=Object.create;var{getPrototypeOf:eq,defineProperty:I$,getOwnPropertyNames:$N}=Object;var XN=Object.prototype.hasOwnProperty;var v4=($,X,Y)=>{Y=$!=null?aq(eq($)):{};let Q=X||!$||!$.__esModule?I$(Y,"default",{value:$,enumerable:!0}):Y;for(let W of $N($))if(!XN.call(Q,W))I$(Q,W,{get:()=>$[W],enumerable:!0});return Q};var Q0=($,X)=>()=>(X||$((X={exports:{}}).exports,X),X.exports);var f2=($,X)=>{for(var Y in X)I$($,Y,{get:X[Y],enumerable:!0,configurable:!0,set:(Q)=>X[Y]=()=>Q})};var l0=($,X)=>()=>($&&(X=$($=0)),X);var E0=import.meta.require;var d0,B6;var J9=l0(()=>{d0=class d0 extends Error{constructor(){super("End-Of-Stream");this.name="EndOfStreamError"}};B6=class B6 extends Error{constructor($="The operation was aborted"){super($);this.name="AbortError"}}});class KX{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise(($,X)=>{this.reject=X,this.resolve=$})}}class q6{constructor(){this.endOfStream=!1,this.interrupted=!1,this.peekQueue=[]}async peek($,X=!1){let Y=await this.read($,X);return this.peekQueue.push($.subarray(0,Y)),Y}async read($,X=!1){if($.length===0)return 0;let Y=this.readFromPeekBuffer($);if(!this.endOfStream)Y+=await this.readRemainderFromStream($.subarray(Y),X);if(Y===0&&!X)throw new d0;return Y}readFromPeekBuffer($){let X=$.length,Y=0;while(this.peekQueue.length>0&&X>0){let Q=this.peekQueue.pop();if(!Q)throw new Error("peekData should be defined");let W=Math.min(Q.length,X);if($.set(Q.subarray(0,W),Y),Y+=W,X-=W,W<Q.length)this.peekQueue.push(Q.subarray(W))}return Y}async readRemainderFromStream($,X){let Y=0;while(Y<$.length&&!this.endOfStream){if(this.interrupted)throw new B6;let Q=await this.readFromStream($.subarray(Y),X);if(Q===0)break;Y+=Q}if(!X&&Y<$.length)throw new d0;return Y}}var E7=l0(()=>{J9()});var b7;var HG=l0(()=>{J9();E7();b7=class b7 extends q6{constructor($){super();if(this.s=$,this.deferred=null,!$.read||!$.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>{if(this.endOfStream=!0,this.deferred)this.deferred.resolve(0)}),this.s.once("error",(X)=>this.reject(X)),this.s.once("close",()=>this.abort())}async readFromStream($,X){if($.length===0)return 0;let Y=this.s.read($.length);if(Y)return $.set(Y),Y.length;let Q={buffer:$,mayBeLess:X,deferred:new KX};return this.deferred=Q.deferred,this.s.once("readable",()=>{this.readDeferred(Q)}),Q.deferred.promise}readDeferred($){let X=this.s.read($.buffer.length);if(X)$.buffer.set(X),$.deferred.resolve(X.length),this.deferred=null;else this.s.once("readable",()=>{this.readDeferred($)})}reject($){if(this.interrupted=!0,this.deferred)this.deferred.reject($),this.deferred=null}async abort(){this.reject(new B6)}async close(){return this.abort()}}});var FX;var BG=l0(()=>{E7();FX=class FX extends q6{constructor($){super();this.reader=$}async abort(){return this.close()}async close(){this.reader.releaseLock()}}});var I7;var SX=l0(()=>{BG();I7=class I7 extends FX{async readFromStream($,X){if($.length===0)return 0;let Y=await this.reader.read(new Uint8Array($.length),{min:X?void 0:$.length});if(Y.done)this.endOfStream=Y.done;if(Y.value)return $.set(Y.value),Y.value.length;return 0}}});var G9;var DX=l0(()=>{J9();E7();G9=class G9 extends q6{constructor($){super();this.reader=$,this.buffer=null}writeChunk($,X){let Y=Math.min(X.length,$.length);if($.set(X.subarray(0,Y)),Y<X.length)this.buffer=X.subarray(Y);else this.buffer=null;return Y}async readFromStream($,X){if($.length===0)return 0;let Y=0;if(this.buffer)Y+=this.writeChunk($,this.buffer);while(Y<$.length&&!this.endOfStream){let Q=await this.reader.read();if(Q.done){this.endOfStream=!0;break}if(Q.value)Y+=this.writeChunk($.subarray(Y),Q.value)}if(!X&&Y===0&&this.endOfStream)throw new d0;return Y}abort(){return this.interrupted=!0,this.reader.cancel()}async close(){await this.abort(),this.reader.releaseLock()}}});function _X($){try{let X=$.getReader({mode:"byob"});if(X instanceof ReadableStreamDefaultReader)return new G9(X);return new I7(X)}catch(X){if(X instanceof TypeError)return new G9($.getReader());throw X}}var qG=l0(()=>{SX();DX()});var D8=l0(()=>{J9();HG();SX();DX();qG()});class e2{constructor($){if(this.numBuffer=new Uint8Array(8),this.position=0,this.onClose=$?.onClose,$?.abortSignal)$.abortSignal.addEventListener("abort",()=>{this.abort()})}async readToken($,X=this.position){let Y=new Uint8Array($.len);if(await this.readBuffer(Y,{position:X})<$.len)throw new d0;return $.get(Y,0)}async peekToken($,X=this.position){let Y=new Uint8Array($.len);if(await this.peekBuffer(Y,{position:X})<$.len)throw new d0;return $.get(Y,0)}async readNumber($){if(await this.readBuffer(this.numBuffer,{length:$.len})<$.len)throw new d0;return $.get(this.numBuffer,0)}async peekNumber($){if(await this.peekBuffer(this.numBuffer,{length:$.len})<$.len)throw new d0;return $.get(this.numBuffer,0)}async ignore($){if(this.fileInfo.size!==void 0){let X=this.fileInfo.size-this.position;if($>X)return this.position+=X,X}return this.position+=$,$}async close(){await this.abort(),await this.onClose?.()}normalizeOptions($,X){if(!this.supportsRandomAccess()&&X&&X.position!==void 0&&X.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return{...{mayBeLess:!1,offset:0,length:$.length,position:this.position},...X}}abort(){return Promise.resolve()}}var t6=l0(()=>{D8()});var yF=256000,T7;var NG=l0(()=>{t6();D8();T7=class T7 extends e2{constructor($,X){super(X);this.streamReader=$,this.fileInfo=X?.fileInfo??{}}async readBuffer($,X){let Y=this.normalizeOptions($,X),Q=Y.position-this.position;if(Q>0)return await this.ignore(Q),this.readBuffer($,X);if(Q<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(Y.length===0)return 0;let W=await this.streamReader.read($.subarray(0,Y.length),Y.mayBeLess);if(this.position+=W,(!X||!X.mayBeLess)&&W<Y.length)throw new d0;return W}async peekBuffer($,X){let Y=this.normalizeOptions($,X),Q=0;if(Y.position){let W=Y.position-this.position;if(W>0){let J=new Uint8Array(Y.length+W);return Q=await this.peekBuffer(J,{mayBeLess:Y.mayBeLess}),$.set(J.subarray(W)),Q-W}if(W<0)throw new Error("Cannot peek from a negative offset in a stream")}if(Y.length>0){try{Q=await this.streamReader.peek($.subarray(0,Y.length),Y.mayBeLess)}catch(W){if(X?.mayBeLess&&W instanceof d0)return 0;throw W}if(!Y.mayBeLess&&Q<Y.length)throw new d0}return Q}async ignore($){let X=Math.min(yF,$),Y=new Uint8Array(X),Q=0;while(Q<$){let W=$-Q,J=await this.readBuffer(Y,{length:Math.min(X,W)});if(J<0)return J;Q+=J}return Q}abort(){return this.streamReader.abort()}async close(){return this.streamReader.close()}supportsRandomAccess(){return!1}}});var RX;var zG=l0(()=>{D8();t6();RX=class RX extends e2{constructor($,X){super(X);this.uint8Array=$,this.fileInfo={...X?.fileInfo??{},...{size:$.length}}}async readBuffer($,X){if(X?.position)this.position=X.position;let Y=await this.peekBuffer($,X);return this.position+=Y,Y}async peekBuffer($,X){let Y=this.normalizeOptions($,X),Q=Math.min(this.uint8Array.length-Y.position,Y.length);if(!Y.mayBeLess&&Q<Y.length)throw new d0;return $.set(this.uint8Array.subarray(Y.position,Y.position+Q)),Q}close(){return super.close()}supportsRandomAccess(){return!0}setPosition($){this.position=$}}});var OG=l0(()=>{D8();t6()});function wG($,X){let Y=new b7($),Q=X??{},W=Q.onClose;return Q.onClose=async()=>{if(await Y.close(),W)return W()},new T7(Y,Q)}function x7($,X){let Y=_X($),Q=X??{},W=Q.onClose;return Q.onClose=async()=>{if(await Y.close(),W)return W()},new T7(Y,Q)}function AG($,X){return new RX($,X)}var k7=l0(()=>{D8();NG();zG();OG();D8();t6()});import{open as dF}from"fs/promises";var M9;var PX=l0(()=>{t6();D8();M9=class M9 extends e2{static async fromFile($){let X=await dF($,"r"),Y=await X.stat();return new M9(X,{fileInfo:{path:$,size:Y.size}})}constructor($,X){super(X);this.fileHandle=$,this.fileInfo=X.fileInfo}async readBuffer($,X){let Y=this.normalizeOptions($,X);if(this.position=Y.position,Y.length===0)return 0;let Q=await this.fileHandle.read($,0,Y.length,Y.position);if(this.position+=Q.bytesRead,Q.bytesRead<Y.length&&(!X||!X.mayBeLess))throw new d0;return Q.bytesRead}async peekBuffer($,X){let Y=this.normalizeOptions($,X),Q=await this.fileHandle.read($,0,Y.length,Y.position);if(!Y.mayBeLess&&Q.bytesRead<Y.length)throw new d0;return Q.bytesRead}async close(){return await this.fileHandle.close(),super.close()}setPosition($){this.position=$}supportsRandomAccess(){return!0}}});import{stat as cF}from"fs/promises";async function ZG($,X){let Y=wG($,X);if($.path){let Q=await cF($.path);Y.fileInfo.path=$.path,Y.fileInfo.size=Q.size}return Y}var LG;var jG=l0(()=>{k7();PX();PX();k7();LG=M9.fromFile});var KG=l0(()=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */});function Y5($){return new DataView($.buffer,$.byteOffset)}class S5{constructor($,X){this.len=$,this.encoding=X,this.textDecoder=new TextDecoder(X)}get($,X){return this.textDecoder.decode($.subarray(X,X+this.len))}}var FG,a0,a6,z1,SG,DG,_G;var U9=l0(()=>{KG();FG={len:1,get($,X){return Y5($).getUint8(X)},put($,X,Y){return Y5($).setUint8(X,Y),X+1}},a0={len:2,get($,X){return Y5($).getUint16(X,!0)},put($,X,Y){return Y5($).setUint16(X,Y,!0),X+2}},a6={len:2,get($,X){return Y5($).getUint16(X)},put($,X,Y){return Y5($).setUint16(X,Y),X+2}},z1={len:4,get($,X){return Y5($).getUint32(X,!0)},put($,X,Y){return Y5($).setUint32(X,Y,!0),X+4}},SG={len:4,get($,X){return Y5($).getUint32(X)},put($,X,Y){return Y5($).setUint32(X,Y),X+4}},DG={len:4,get($,X){return Y5($).getInt32(X)},put($,X,Y){return Y5($).setInt32(X,Y),X+4}},_G={len:8,get($,X){return Y5($).getBigUint64(X,!0)},put($,X,Y){return Y5($).setBigUint64(X,Y,!0),X+8}}});import{createRequire as pF}from"module";function MS($,X){return bX($,{i:2},X&&X.out,X&&X.dictionary)}function US($,X){var Y=WS($);if(Y+8>$.length)D5(6,"invalid gzip data");return bX($.subarray(Y,-8),{i:2},X&&X.out||new _5(JS($)),X&&X.dictionary)}function HS($,X){return bX($.subarray(GS($,X&&X.dictionary),-4),{i:2},X&&X.out,X&&X.dictionary)}function TG($,X){return $[0]==31&&$[1]==139&&$[2]==8?US($,X):($[0]&15)!=8||$[0]>>4>7||($[0]<<8|$[1])%31?MS($,X):HS($,X)}var iF,nF,_5,e6,oF,RG,PG,rF,VG=function($,X){var Y=new e6(31);for(var Q=0;Q<31;++Q)Y[Q]=X+=1<<$[Q-1];var W=new oF(Y[30]);for(var Q=1;Q<30;++Q)for(var J=Y[Q];J<Y[Q+1];++J)W[J]=J-Y[Q]<<5|Q;return{b:Y,r:W}},CG,EG,sF,bG,tF,Wl,EX,D2,z0,H9=function($,X,Y){var Q=$.length,W=0,J=new e6(X);for(;W<Q;++W)if($[W])++J[$[W]-1];var G=new e6(X);for(W=1;W<X;++W)G[W]=G[W-1]+J[W-1]<<1;var U;if(Y){U=new e6(1<<X);var H=15-X;for(W=0;W<Q;++W)if($[W]){var B=W<<4|$[W],q=X-$[W],O=G[$[W]-1]++<<q;for(var A=O|(1<<q)-1;O<=A;++O)U[EX[O]>>H]=B}}else{U=new e6(Q);for(W=0;W<Q;++W)if($[W])U[W]=EX[G[$[W]-1]++]>>15-$[W]}return U},B9,z0,z0,z0,z0,IG,z0,aF,eF,VX=function($){var X=$[0];for(var Y=1;Y<$.length;++Y)if($[Y]>X)X=$[Y];return X},W2=function($,X,Y){var Q=X/8|0;return($[Q]|$[Q+1]<<8)>>(X&7)&Y},CX=function($,X){var Y=X/8|0;return($[Y]|$[Y+1]<<8|$[Y+2]<<16)>>(X&7)},$S=function($){return($+7)/8|0},XS=function($,X,Y){if(X==null||X<0)X=0;if(Y==null||Y>$.length)Y=$.length;return new _5($.subarray(X,Y))},YS,D5=function($,X,Y){var Q=new Error(X||YS[$]);if(Q.code=$,Error.captureStackTrace)Error.captureStackTrace(Q,D5);if(!Y)throw Q;return Q},bX=function($,X,Y,Q){var W=$.length,J=Q?Q.length:0;if(!W||X.f&&!X.l)return Y||new _5(0);var G=!Y,U=G||X.i!=2,H=X.i;if(G)Y=new _5(W*3);var B=function(z){var S=Y.length;if(z>S){var Z=new _5(Math.max(S*2,z));Z.set(Y),Y=Z}},q=X.f||0,O=X.p||0,A=X.b||0,w=X.l,N=X.d,L=X.m,K=X.n,h=W*8;do{if(!w){q=W2($,O,1);var D=W2($,O+1,3);if(O+=3,!D){var b=$S(O)+4,l=$[b-4]|$[b-3]<<8,s=b+l;if(s>W){if(H)D5(0);break}if(U)B(A+l);Y.set($.subarray(b,s),A),X.b=A+=l,X.p=O=s*8,X.f=q;continue}else if(D==1)w=aF,N=eF,L=9,K=5;else if(D==2){var x=W2($,O,31)+257,g=W2($,O+10,15)+4,v=x+W2($,O+5,31)+1;O+=14;var E=new _5(v),i=new _5(19);for(var Y0=0;Y0<g;++Y0)i[rF[Y0]]=W2($,O+Y0*3,7);O+=g*3;var B0=VX(i),w0=(1<<B0)-1,N5=H9(i,B0,1);for(var Y0=0;Y0<v;){var _0=N5[W2($,O,w0)];O+=_0&15;var b=_0>>4;if(b<16)E[Y0++]=b;else{var o1=0,x2=0;if(b==16)x2=3+W2($,O,3),O+=2,o1=E[Y0-1];else if(b==17)x2=3+W2($,O,7),O+=3;else if(b==18)x2=11+W2($,O,127),O+=7;while(x2--)E[Y0++]=o1}}var k2=E.subarray(0,x),P5=E.subarray(x);L=VX(k2),K=VX(P5),w=H9(k2,L,1),N=H9(P5,K,1)}else D5(1);if(O>h){if(H)D5(0);break}}if(U)B(A+131072);var w2=(1<<L)-1,G1=(1<<K)-1,O1=O;for(;;O1=O){var o1=w[CX($,O)&w2],P1=o1>>4;if(O+=o1&15,O>h){if(H)D5(0);break}if(!o1)D5(2);if(P1<256)Y[A++]=P1;else if(P1==256){O1=O,w=null;break}else{var c5=P1-254;if(P1>264){var Y0=P1-257,c1=RG[Y0];c5=W2($,O,(1<<c1)-1)+EG[Y0],O+=c1}var V5=N[CX($,O)&G1],z8=V5>>4;if(!V5)D5(3);O+=V5&15;var P5=tF[z8];if(z8>3){var c1=PG[z8];P5+=CX($,O)&(1<<c1)-1,O+=c1}if(O>h){if(H)D5(0);break}if(U)B(A+131072);var m5=A+c5;if(A<P5){var c=J-P5,I=Math.min(P5,m5);if(c+A<0)D5(3);for(;A<I;++A)Y[A]=Q[c+A]}for(;A<m5;++A)Y[A]=Y[A-P5]}}if(X.l=w,X.p=O1,X.b=A,X.f=q,w)q=1,X.m=L,X.d=N,X.n=K}while(!q);return A!=Y.length&&G?XS(Y,0,A):Y.subarray(0,A)},QS,WS=function($){if($[0]!=31||$[1]!=139||$[2]!=8)D5(6,"invalid gzip data");var X=$[3],Y=10;if(X&4)Y+=($[10]|$[11]<<8)+2;for(var Q=(X>>3&1)+(X>>4&1);Q>0;Q-=!$[Y++]);return Y+(X&2)},JS=function($){var X=$.length;return($[X-4]|$[X-3]<<8|$[X-2]<<16|$[X-1]<<24)>>>0},GS=function($,X){if(($[0]&15)!=8||$[0]>>4>7||($[0]<<8|$[1])%31)D5(6,"invalid zlib data");if(($[1]>>5&1)==+!X)D5(6,"invalid zlib data: "+($[1]&32?"need":"unexpected")+" dictionary");return($[1]>>3&4)+2},BS,qS=0;var xG=l0(()=>{iF=pF("/");try{nF=iF("worker_threads").Worker}catch($){}_5=Uint8Array,e6=Uint16Array,oF=Int32Array,RG=new _5([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),PG=new _5([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rF=new _5([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),CG=VG(RG,2),EG=CG.b,sF=CG.r;EG[28]=258,sF[258]=28;bG=VG(PG,0),tF=bG.b,Wl=bG.r,EX=new e6(32768);for(z0=0;z0<32768;++z0)D2=(z0&43690)>>1|(z0&21845)<<1,D2=(D2&52428)>>2|(D2&13107)<<2,D2=(D2&61680)>>4|(D2&3855)<<4,EX[z0]=((D2&65280)>>8|(D2&255)<<8)>>1;B9=new _5(288);for(z0=0;z0<144;++z0)B9[z0]=8;for(z0=144;z0<256;++z0)B9[z0]=9;for(z0=256;z0<280;++z0)B9[z0]=7;for(z0=280;z0<288;++z0)B9[z0]=8;IG=new _5(32);for(z0=0;z0<32;++z0)IG[z0]=5;aF=H9(B9,9,1),eF=H9(IG,5,1),YS=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],QS=new _5(0);BS=typeof TextDecoder!="undefined"&&new TextDecoder;try{BS.decode(QS,{stream:!0}),qS=1}catch($){}});var gG=Q0((Gl,kG)=>{var $4=1000,X4=$4*60,Y4=X4*60,N6=Y4*24,NS=N6*7,zS=N6*365.25;kG.exports=function($,X){X=X||{};var Y=typeof $;if(Y==="string"&&$.length>0)return OS($);else if(Y==="number"&&isFinite($))return X.long?AS($):wS($);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))};function OS($){if($=String($),$.length>100)return;var X=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec($);if(!X)return;var Y=parseFloat(X[1]),Q=(X[2]||"ms").toLowerCase();switch(Q){case"years":case"year":case"yrs":case"yr":case"y":return Y*zS;case"weeks":case"week":case"w":return Y*NS;case"days":case"day":case"d":return Y*N6;case"hours":case"hour":case"hrs":case"hr":case"h":return Y*Y4;case"minutes":case"minute":case"mins":case"min":case"m":return Y*X4;case"seconds":case"second":case"secs":case"sec":case"s":return Y*$4;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Y;default:return}}function wS($){var X=Math.abs($);if(X>=N6)return Math.round($/N6)+"d";if(X>=Y4)return Math.round($/Y4)+"h";if(X>=X4)return Math.round($/X4)+"m";if(X>=$4)return Math.round($/$4)+"s";return $+"ms"}function AS($){var X=Math.abs($);if(X>=N6)return g7($,X,N6,"day");if(X>=Y4)return g7($,X,Y4,"hour");if(X>=X4)return g7($,X,X4,"minute");if(X>=$4)return g7($,X,$4,"second");return $+" ms"}function g7($,X,Y,Q){var W=X>=Y*1.5;return Math.round($/Y)+" "+Q+(W?"s":"")}});var IX=Q0((Ml,fG)=>{function ZS($){Y.debug=Y,Y.default=Y,Y.coerce=H,Y.disable=G,Y.enable=W,Y.enabled=U,Y.humanize=gG(),Y.destroy=B,Object.keys($).forEach((q)=>{Y[q]=$[q]}),Y.names=[],Y.skips=[],Y.formatters={};function X(q){let O=0;for(let A=0;A<q.length;A++)O=(O<<5)-O+q.charCodeAt(A),O|=0;return Y.colors[Math.abs(O)%Y.colors.length]}Y.selectColor=X;function Y(q){let O,A=null,w,N;function L(...K){if(!L.enabled)return;let h=L,D=Number(new Date),b=D-(O||D);if(h.diff=b,h.prev=O,h.curr=D,O=D,K[0]=Y.coerce(K[0]),typeof K[0]!=="string")K.unshift("%O");let l=0;K[0]=K[0].replace(/%([a-zA-Z%])/g,(x,g)=>{if(x==="%%")return"%";l++;let v=Y.formatters[g];if(typeof v==="function"){let E=K[l];x=v.call(h,E),K.splice(l,1),l--}return x}),Y.formatArgs.call(h,K),(h.log||Y.log).apply(h,K)}if(L.namespace=q,L.useColors=Y.useColors(),L.color=Y.selectColor(q),L.extend=Q,L.destroy=Y.destroy,Object.defineProperty(L,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(A!==null)return A;if(w!==Y.namespaces)w=Y.namespaces,N=Y.enabled(q);return N},set:(K)=>{A=K}}),typeof Y.init==="function")Y.init(L);return L}function Q(q,O){let A=Y(this.namespace+(typeof O==="undefined"?":":O)+q);return A.log=this.log,A}function W(q){Y.save(q),Y.namespaces=q,Y.names=[],Y.skips=[];let O=(typeof q==="string"?q:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let A of O)if(A[0]==="-")Y.skips.push(A.slice(1));else Y.names.push(A)}function J(q,O){let A=0,w=0,N=-1,L=0;while(A<q.length)if(w<O.length&&(O[w]===q[A]||O[w]==="*"))if(O[w]==="*")N=w,L=A,w++;else A++,w++;else if(N!==-1)w=N+1,L++,A=L;else return!1;while(w<O.length&&O[w]==="*")w++;return w===O.length}function G(){let q=[...Y.names,...Y.skips.map((O)=>"-"+O)].join(",");return Y.enable(""),q}function U(q){for(let O of Y.skips)if(J(q,O))return!1;for(let O of Y.names)if(J(q,O))return!0;return!1}function H(q){if(q instanceof Error)return q.stack||q.message;return q}function B(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return Y.enable(Y.load()),Y}fG.exports=ZS});var yG=Q0((vG,f7)=>{vG.formatArgs=jS;vG.save=KS;vG.load=FS;vG.useColors=LS;vG.storage=SS();vG.destroy=(()=>{let $=!1;return()=>{if(!$)$=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();vG.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function LS(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let $;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&($=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt($[1],10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function jS($){if($[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+$[0]+(this.useColors?"%c ":" ")+"+"+f7.exports.humanize(this.diff),!this.useColors)return;let X="color: "+this.color;$.splice(1,0,X,"color: inherit");let Y=0,Q=0;$[0].replace(/%[a-zA-Z%]/g,(W)=>{if(W==="%%")return;if(Y++,W==="%c")Q=Y}),$.splice(Q,0,X)}vG.log=console.debug||console.log||(()=>{});function KS($){try{if($)vG.storage.setItem("debug",$);else vG.storage.removeItem("debug")}catch(X){}}function FS(){let $;try{$=vG.storage.getItem("debug")||vG.storage.getItem("DEBUG")}catch(X){}if(!$&&typeof process!=="undefined"&&"env"in process)$=process.env.DEBUG;return $}function SS(){try{return localStorage}catch($){}}f7.exports=IX()(vG);var{formatters:DS}=f7.exports;DS.j=function($){try{return JSON.stringify($)}catch(X){return"[UnexpectedJSONParseError]: "+X.message}}});var dG=Q0((Hl,hG)=>{hG.exports=($,X)=>{X=X||process.argv;let Y=$.startsWith("-")?"":$.length===1?"-":"--",Q=X.indexOf(Y+$),W=X.indexOf("--");return Q!==-1&&(W===-1?!0:Q<W)}});var mG=Q0((Bl,cG)=>{var IS=E0("os"),J2=dG(),y1=process.env,Q4;if(J2("no-color")||J2("no-colors")||J2("color=false"))Q4=!1;else if(J2("color")||J2("colors")||J2("color=true")||J2("color=always"))Q4=!0;if("FORCE_COLOR"in y1)Q4=y1.FORCE_COLOR.length===0||parseInt(y1.FORCE_COLOR,10)!==0;function TS($){if($===0)return!1;return{level:$,hasBasic:!0,has256:$>=2,has16m:$>=3}}function xS($){if(Q4===!1)return 0;if(J2("color=16m")||J2("color=full")||J2("color=truecolor"))return 3;if(J2("color=256"))return 2;if($&&!$.isTTY&&Q4!==!0)return 0;let X=Q4?1:0;if(process.platform==="win32"){let Y=IS.release().split(".");if(Number(process.versions.node.split(".")[0])>=8&&Number(Y[0])>=10&&Number(Y[2])>=10586)return Number(Y[2])>=14931?3:2;return 1}if("CI"in y1){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((Y)=>(Y in y1))||y1.CI_NAME==="codeship")return 1;return X}if("TEAMCITY_VERSION"in y1)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(y1.TEAMCITY_VERSION)?1:0;if(y1.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in y1){let Y=parseInt((y1.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(y1.TERM_PROGRAM){case"iTerm.app":return Y>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(y1.TERM))return 2;if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(y1.TERM))return 1;if("COLORTERM"in y1)return 1;if(y1.TERM==="dumb")return X;return X}function TX($){let X=xS($);return TS(X)}cG.exports={supportsColor:TX,stdout:TX(process.stdout),stderr:TX(process.stderr)}});var iG=Q0((lG,y7)=>{var kS=E0("tty"),v7=E0("util");lG.init=cS;lG.log=yS;lG.formatArgs=fS;lG.save=hS;lG.load=dS;lG.useColors=gS;lG.destroy=v7.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");lG.colors=[6,2,3,4,5,1];try{let $=mG();if($&&($.stderr||$).level>=2)lG.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch($){}lG.inspectOpts=Object.keys(process.env).filter(($)=>{return/^debug_/i.test($)}).reduce(($,X)=>{let Y=X.substring(6).toLowerCase().replace(/_([a-z])/g,(W,J)=>{return J.toUpperCase()}),Q=process.env[X];if(/^(yes|on|true|enabled)$/i.test(Q))Q=!0;else if(/^(no|off|false|disabled)$/i.test(Q))Q=!1;else if(Q==="null")Q=null;else Q=Number(Q);return $[Y]=Q,$},{});function gS(){return"colors"in lG.inspectOpts?Boolean(lG.inspectOpts.colors):kS.isatty(process.stderr.fd)}function fS($){let{namespace:X,useColors:Y}=this;if(Y){let Q=this.color,W="\x1B[3"+(Q<8?Q:"8;5;"+Q),J=`  ${W};1m${X} \x1B[0m`;$[0]=J+$[0].split(`
`).join(`
`+J),$.push(W+"m+"+y7.exports.humanize(this.diff)+"\x1B[0m")}else $[0]=vS()+X+" "+$[0]}function vS(){if(lG.inspectOpts.hideDate)return"";return new Date().toISOString()+" "}function yS(...$){return process.stderr.write(v7.formatWithOptions(lG.inspectOpts,...$)+`
`)}function hS($){if($)process.env.DEBUG=$;else delete process.env.DEBUG}function dS(){return process.env.DEBUG}function cS($){$.inspectOpts={};let X=Object.keys(lG.inspectOpts);for(let Y=0;Y<X.length;Y++)$.inspectOpts[X[Y]]=lG.inspectOpts[X[Y]]}y7.exports=IX()(lG);var{formatters:uG}=y7.exports;uG.o=function($){return this.inspectOpts.colors=this.useColors,v7.inspect($,this.inspectOpts).split(`
`).map((X)=>X.trim()).join(" ")};uG.O=function($){return this.inspectOpts.colors=this.useColors,v7.inspect($,this.inspectOpts)}});var nG=Q0((Nl,xX)=>{if(typeof process==="undefined"||process.type==="renderer"||!1||process.__nwjs)xX.exports=yG();else xX.exports=iG()});var O6,kX,oG,rG,sG;var tG=l0(()=>{U9();O6={LocalFileHeader:67324752,DataDescriptor:134695760,CentralFileHeader:33639248,EndOfCentralDirectory:101010256},kX={get($){let X=a0.get($,6);return{signature:z1.get($,0),compressedSize:z1.get($,8),uncompressedSize:z1.get($,12)}},len:16},oG={get($){let X=a0.get($,6);return{signature:z1.get($,0),minVersion:a0.get($,4),dataDescriptor:!!(X&8),compressedMethod:a0.get($,8),compressedSize:z1.get($,18),uncompressedSize:z1.get($,22),filenameLength:a0.get($,26),extraFieldLength:a0.get($,28),filename:null}},len:30},rG={get($){return{signature:z1.get($,0),nrOfThisDisk:a0.get($,4),nrOfThisDiskWithTheStart:a0.get($,6),nrOfEntriesOnThisDisk:a0.get($,8),nrOfEntriesOfSize:a0.get($,10),sizeOfCd:z1.get($,12),offsetOfStartOfCd:z1.get($,16),zipFileCommentLength:a0.get($,20)}},len:22},sG={get($){let X=a0.get($,8);return{signature:z1.get($,0),minVersion:a0.get($,6),dataDescriptor:!!(X&8),compressedMethod:a0.get($,10),compressedSize:z1.get($,20),uncompressedSize:z1.get($,24),filenameLength:a0.get($,28),extraFieldLength:a0.get($,30),fileCommentLength:a0.get($,32),relativeOffsetOfLocalHeader:z1.get($,42),filename:null}},len:46}});function eG($){let X=new Uint8Array(z1.len);return z1.put(X,0,$),X}class fX{constructor($){this.tokenizer=$,this.syncBuffer=new Uint8Array(gX)}async isZip(){return await this.peekSignature()===O6.LocalFileHeader}peekSignature(){return this.tokenizer.peekToken(z1)}async findEndOfCentralDirectoryLocator(){let $=this.tokenizer,X=Math.min(16384,$.fileInfo.size),Y=this.syncBuffer.subarray(0,X);await this.tokenizer.readBuffer(Y,{position:$.fileInfo.size-X});for(let Q=Y.length-4;Q>=0;Q--)if(Y[Q]===h7[0]&&Y[Q+1]===h7[1]&&Y[Q+2]===h7[2]&&Y[Q+3]===h7[3])return $.fileInfo.size-X+Q;return-1}async readCentralDirectory(){if(!this.tokenizer.supportsRandomAccess()){_2("Cannot reading central-directory without random-read support");return}_2("Reading central-directory...");let $=this.tokenizer.position,X=await this.findEndOfCentralDirectoryLocator();if(X>0){_2("Central-directory 32-bit signature found");let Y=await this.tokenizer.readToken(rG,X),Q=[];this.tokenizer.setPosition(Y.offsetOfStartOfCd);for(let W=0;W<Y.nrOfEntriesOfSize;++W){let J=await this.tokenizer.readToken(sG);if(J.signature!==O6.CentralFileHeader)throw new Error("Expected Central-File-Header signature");J.filename=await this.tokenizer.readToken(new S5(J.filenameLength,"utf-8")),await this.tokenizer.ignore(J.extraFieldLength),await this.tokenizer.ignore(J.fileCommentLength),Q.push(J),_2(`Add central-directory file-entry: n=${W+1}/${Q.length}: filename=${Q[W].filename}`)}return this.tokenizer.setPosition($),Q}this.tokenizer.setPosition($)}async unzip($){let X=await this.readCentralDirectory();if(X)return this.iterateOverCentralDirectory(X,$);let Y=!1;do{let Q=await this.readLocalFileHeader();if(!Q)break;let W=$(Q);Y=!!W.stop;let J=void 0;if(await this.tokenizer.ignore(Q.extraFieldLength),Q.dataDescriptor&&Q.compressedSize===0){let G=[],U=gX;_2("Compressed-file-size unknown, scanning for next data-descriptor-signature....");let H=-1;while(H<0&&U===gX){U=await this.tokenizer.peekBuffer(this.syncBuffer,{mayBeLess:!0}),H=sS(this.syncBuffer.subarray(0,U),rS);let B=H>=0?H:U;if(W.handler){let q=new Uint8Array(B);await this.tokenizer.readBuffer(q),G.push(q)}else await this.tokenizer.ignore(B)}if(_2(`Found data-descriptor-signature at pos=${this.tokenizer.position}`),W.handler)await this.inflate(Q,tS(G),W.handler)}else if(W.handler)_2(`Reading compressed-file-data: ${Q.compressedSize} bytes`),J=new Uint8Array(Q.compressedSize),await this.tokenizer.readBuffer(J),await this.inflate(Q,J,W.handler);else _2(`Ignoring compressed-file-data: ${Q.compressedSize} bytes`),await this.tokenizer.ignore(Q.compressedSize);if(_2(`Reading data-descriptor at pos=${this.tokenizer.position}`),Q.dataDescriptor){if((await this.tokenizer.readToken(kX)).signature!==134695760)throw new Error(`Expected data-descriptor-signature at position ${this.tokenizer.position-kX.len}`)}}while(!Y)}async iterateOverCentralDirectory($,X){for(let Y of $){let Q=X(Y);if(Q.handler){this.tokenizer.setPosition(Y.relativeOffsetOfLocalHeader);let W=await this.readLocalFileHeader();if(W){await this.tokenizer.ignore(W.extraFieldLength);let J=new Uint8Array(Y.compressedSize);await this.tokenizer.readBuffer(J),await this.inflate(W,J,Q.handler)}}if(Q.stop)break}}inflate($,X,Y){if($.compressedMethod===0)return Y(X);_2(`Decompress filename=${$.filename}, compressed-size=${X.length}`);let Q=TG(X);return Y(Q)}async readLocalFileHeader(){let $=await this.tokenizer.peekToken(z1);if($===O6.LocalFileHeader){let X=await this.tokenizer.readToken(oG);return X.filename=await this.tokenizer.readToken(new S5(X.filenameLength,"utf-8")),X}if($===O6.CentralFileHeader)return!1;if($===3759263696)throw new Error("Encrypted ZIP");throw new Error("Unexpected signature")}}function sS($,X){let Y=$.length,Q=X.length;if(Q>Y)return-1;for(let W=0;W<=Y-Q;W++){let J=!0;for(let G=0;G<Q;G++)if($[W+G]!==X[G]){J=!1;break}if(J)return W}return-1}function tS($){let X=$.reduce((W,J)=>W+J.length,0),Y=new Uint8Array(X),Q=0;for(let W of $)Y.set(W,Q),Q+=W.length;return Y}var aG,_2,gX=262144,rS,h7;var $M=l0(()=>{U9();xG();aG=v4(nG(),1);tG();_2=aG.default("tokenizer:inflate"),rS=eG(O6.DataDescriptor),h7=eG(O6.EndOfCentralDirectory)});function vX($){let{byteLength:X}=$;if(X===6)return $.getUint16(0)*4294967296+$.getUint32(2);if(X===5)return $.getUint8(0)*4294967296+$.getUint32(1);if(X===4)return $.getUint32(0);if(X===3)return $.getUint8(0)*65536+$.getUint16(1);if(X===2)return $.getUint16(0);if(X===1)return $.getUint8(0)}var jl,Kl,Fl;var XM=l0(()=>{jl={utf8:new globalThis.TextDecoder("utf8")},Kl=new globalThis.TextEncoder,Fl=Array.from({length:256},($,X)=>X.toString(16).padStart(2,"0"))});function YM($){return[...$].map((X)=>X.charCodeAt(0))}function QM($,X=0){let Y=Number.parseInt(new S5(6).get($,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(Y))return!1;let Q=256;for(let W=X;W<X+148;W++)Q+=$[W];for(let W=X+156;W<X+512;W++)Q+=$[W];return Y===Q}var WM;var JM=l0(()=>{U9();WM={get:($,X)=>$[X+3]&127|$[X+2]<<7|$[X+1]<<14|$[X]<<21,len:4}});var GM,MM;var UM=l0(()=>{GM=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ttc","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx","vtt","apk","drc","lz4","potx","xltx","dotx","xltm","ott","ots","otp","odg","otg","xlsm","docm","dotm","potm","pptm","jar","rm","ppsm","ppsx"],MM=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/vnd.apache.arrow.file","video/mp4","audio/midi","video/matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","video/ogg","audio/ogg","audio/ogg; codecs=opus","application/ogg","audio/flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","font/collection","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","text/vtt","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/vnd.apache.parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio","application/vnd.android.package-archive","application/vnd.google.draco","application/x-lz4","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-excel.template.macroenabled.12","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.presentation-template","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.graphics-template","application/vnd.ms-excel.sheet.macroenabled.12","application/vnd.ms-word.document.macroenabled.12","application/vnd.ms-word.template.macroenabled.12","application/vnd.ms-powerpoint.template.macroenabled.12","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/java-archive","application/vnd.rn-realmedia"]});async function HM($,X){return new W4(X).fromBuffer($)}async function BM($,X){return new W4(X).fromBlob($)}function yX($){switch($=$.toLowerCase(),$){case"application/epub+zip":return{ext:"epub",mime:$};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:$};case"application/vnd.oasis.opendocument.text-template":return{ext:"ott",mime:$};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:$};case"application/vnd.oasis.opendocument.spreadsheet-template":return{ext:"ots",mime:$};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:$};case"application/vnd.oasis.opendocument.presentation-template":return{ext:"otp",mime:$};case"application/vnd.oasis.opendocument.graphics":return{ext:"odg",mime:$};case"application/vnd.oasis.opendocument.graphics-template":return{ext:"otg",mime:$};case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":return{ext:"ppsx",mime:$};case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return{ext:"xlsx",mime:$};case"application/vnd.ms-excel.sheet.macroenabled":return{ext:"xlsm",mime:"application/vnd.ms-excel.sheet.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":return{ext:"xltx",mime:$};case"application/vnd.ms-excel.template.macroenabled":return{ext:"xltm",mime:"application/vnd.ms-excel.template.macroenabled.12"};case"application/vnd.ms-powerpoint.slideshow.macroenabled":return{ext:"ppsm",mime:"application/vnd.ms-powerpoint.slideshow.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return{ext:"docx",mime:$};case"application/vnd.ms-word.document.macroenabled":return{ext:"docm",mime:"application/vnd.ms-word.document.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":return{ext:"dotx",mime:$};case"application/vnd.ms-word.template.macroenabledtemplate":return{ext:"dotm",mime:"application/vnd.ms-word.template.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.presentationml.template":return{ext:"potx",mime:$};case"application/vnd.ms-powerpoint.template.macroenabled":return{ext:"potm",mime:"application/vnd.ms-powerpoint.template.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return{ext:"pptx",mime:$};case"application/vnd.ms-powerpoint.presentation.macroenabled":return{ext:"pptm",mime:"application/vnd.ms-powerpoint.presentation.macroenabled.12"};case"application/vnd.ms-visio.drawing":return{ext:"vsdx",mime:"application/vnd.visio"};case"application/vnd.ms-package.3dmanufacturing-3dmodel+xml":return{ext:"3mf",mime:"model/3mf"};default:}}function R2($,X,Y){Y={offset:0,...Y};for(let[Q,W]of X.entries())if(Y.mask){if(W!==(Y.mask[Q]&$[Q+Y.offset]))return!1}else if(W!==$[Q+Y.offset])return!1;return!0}async function qM($,X){return new W4(X).fromTokenizer($)}class W4{constructor($){this.options={mpegOffsetTolerance:0,...$},this.detectors=[...$?.customDetectors??[],{id:"core",detect:this.detectConfident},{id:"core.imprecise",detect:this.detectImprecise}],this.tokenizerOptions={abortSignal:$?.signal}}async fromTokenizer($){let X=$.position;for(let Y of this.detectors){let Q=await Y.detect($);if(Q)return Q;if(X!==$.position)return}}async fromBuffer($){if(!($ instanceof Uint8Array||$ instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof $}\``);let X=$ instanceof Uint8Array?$:new Uint8Array($);if(!(X?.length>1))return;return this.fromTokenizer(AG(X,this.tokenizerOptions))}async fromBlob($){return this.fromStream($.stream())}async fromStream($){let X=await x7($,this.tokenizerOptions);try{return await this.fromTokenizer(X)}finally{await X.close()}}async toDetectionStream($,X){let{sampleSize:Y=N9}=X,Q,W,J=$.getReader({mode:"byob"});try{let{value:H,done:B}=await J.read(new Uint8Array(Y));if(W=H,!B&&H)try{Q=await this.fromBuffer(H.subarray(0,Y))}catch(q){if(!(q instanceof d0))throw q;Q=void 0}W=H}finally{J.releaseLock()}let G=new TransformStream({async start(H){H.enqueue(W)},transform(H,B){B.enqueue(H)}}),U=$.pipeThrough(G);return U.fileType=Q,U}check($,X){return R2(this.buffer,$,X)}checkString($,X){return this.check(YM($),X)}detectConfident=async($)=>{if(this.buffer=new Uint8Array(N9),$.fileInfo.size===void 0)$.fileInfo.size=Number.MAX_SAFE_INTEGER;if(this.tokenizer=$,await $.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33])){if(await $.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14}))return{ext:"eps",mime:"application/eps"};return{ext:"ps",mime:"application/postscript"}}if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.detectConfident($);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await $.ignore(6);let X=await $.readToken(WM);if($.position+X>$.fileInfo.size)return{ext:"mp3",mime:"audio/mpeg"};return await $.ignore(X),this.fromTokenizer($)}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255])){if(this.check([247],{offset:3}))return{ext:"jls",mime:"image/jls"};return{ext:"jpg",mime:"image/jpeg"}}if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){let X;return await new fX($).unzip((Y)=>{switch(Y.filename){case"META-INF/mozilla.rsa":return X={ext:"xpi",mime:"application/x-xpinstall"},{stop:!0};case"META-INF/MANIFEST.MF":return X={ext:"jar",mime:"application/java-archive"},{stop:!0};case"mimetype":return{async handler(Q){let W=new TextDecoder("utf-8").decode(Q).trim();X=yX(W)},stop:!0};case"[Content_Types].xml":return{async handler(Q){let W=new TextDecoder("utf-8").decode(Q),J=W.indexOf('.main+xml"');if(J===-1){if(W.includes('ContentType="application/vnd.ms-package.3dmanufacturing-3dmodel+xml"'))X=yX("application/vnd.ms-package.3dmanufacturing-3dmodel+xml")}else{W=W.slice(0,Math.max(0,J));let G=W.lastIndexOf('"'),U=W.slice(Math.max(0,G+1));X=yX(U)}},stop:!0};default:if(/classes\d*\.dex/.test(Y.filename))return X={ext:"apk",mime:"application/vnd.android.package-archive"},{stop:!0};return{}}}),X??{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await $.ignore(28);let X=new Uint8Array(8);if(await $.readBuffer(X),R2(X,[79,112,117,115,72,101,97,100]))return{ext:"opus",mime:"audio/ogg; codecs=opus"};if(R2(X,[128,116,104,101,111,114,97]))return{ext:"ogv",mime:"video/ogg"};if(R2(X,[1,118,105,100,101,111,0]))return{ext:"ogm",mime:"video/ogg"};if(R2(X,[127,70,76,65,67]))return{ext:"oga",mime:"audio/ogg"};if(R2(X,[83,112,101,101,120,32,32]))return{ext:"spx",mime:"audio/ogg"};if(R2(X,[1,118,111,114,98,105,115]))return{ext:"ogg",mime:"audio/ogg"};return{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF"))return{ext:"pdf",mime:"application/pdf"};if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){let X=await this.readTiffHeader(!1);if(X)return X}if(this.check([77,77])){let X=await this.readTiffHeader(!0);if(X)return X}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function X(){let G=await $.peekNumber(FG),U=128,H=0;while((G&U)===0&&U!==0)++H,U>>=1;let B=new Uint8Array(H+1);return await $.readBuffer(B),B}async function Y(){let G=await X(),U=await X();U[0]^=128>>U.length-1;let H=Math.min(6,U.length),B=new DataView(G.buffer),q=new DataView(U.buffer,U.length-H,H);return{id:vX(B),len:vX(q)}}async function Q(G){while(G>0){let U=await Y();if(U.id===17026)return(await $.readToken(new S5(U.len))).replaceAll(/\00.*$/g,"");await $.ignore(U.len),--G}}let W=await Y();switch(await Q(W.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/matroska"};default:return}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1")||this.checkString("PARE"))return{ext:"parquet",mime:"application/vnd.apache.parquet"};if(this.checkString("ttcf"))return{ext:"ttc",mime:"font/collection"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([4,34,77,24]))return{ext:"lz4",mime:"application/x-lz4"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.checkString(".RMF"))return{ext:"rm",mime:"application/vnd.rn-realmedia"};if(this.checkString("DRACO"))return{ext:"drc",mime:"application/vnd.google.draco"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){let X=new S5(4,"latin1").get(this.buffer,2);if(X.match("^d*")&&X>=1000&&X<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>")){if(await $.ignore(8),await $.readToken(new S5(13,"ascii"))==="debian-binary")return{ext:"deb",mime:"application/x-deb"};return{ext:"ar",mime:"application/x-unix-archive"}}if(this.checkString("WEBVTT")&&[`
`,"\r","\t"," ","\x00"].some((X)=>this.checkString(X,{offset:6})))return{ext:"vtt",mime:"text/vtt"};if(this.check([137,80,78,71,13,10,26,10])){await $.ignore(8);async function X(){return{length:await $.readToken(DG),type:await $.readToken(new S5(4,"latin1"))}}do{let Y=await X();if(Y.length<0)return;switch(Y.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await $.ignore(Y.length+4)}}while($.position+8<$.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/vnd.apache.arrow.file"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.checkString("ftyp",{offset:4})&&(this.buffer[8]&96)!==0){let X=new S5(4,"latin1").get(this.buffer,8).replace("\x00"," ").trim();switch(X){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:if(X.startsWith("3g")){if(X.startsWith("3g2"))return{ext:"3g2",mime:"video/3gpp2"};return{ext:"3gp",mime:"video/3gpp"}}return{ext:"mp4",mime:"video/mp4"}}}if(this.check([82,73,70,70])){if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function X(){let Y=new Uint8Array(16);return await $.readBuffer(Y),{id:Y,size:Number(await $.readToken(_G))}}await $.ignore(30);while($.position+24<$.fileInfo.size){let Y=await X(),Q=Y.size-24;if(R2(Y.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let W=new Uint8Array(16);if(Q-=await $.readBuffer(W),R2(W,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(R2(W,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await $.ignore(Q)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await $.ignore(20),await $.readToken(new S5(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255])){if(this.check([0,60,0,63,0,120,0,109,0,108],{offset:2}))return{ext:"xml",mime:"application/xml"};return}if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await $.peekBuffer(this.buffer,{length:Math.min(256,$.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("**ACE",{offset:7})&&this.checkString("**",{offset:12}))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){let X=new DataView(this.buffer.buffer).getUint32(12,!0);if(X>12&&this.buffer.length>=X+16)try{let Y=new TextDecoder().decode(this.buffer.subarray(16,X+16));if(JSON.parse(Y).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \x00"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await $.peekBuffer(this.buffer,{length:Math.min(512,$.fileInfo.size),mayBeLess:!0}),this.checkString("ustar",{offset:257})&&(this.checkString("\x00",{offset:262})||this.checkString(" ",{offset:262}))||this.check([0,0,0,0,0,0],{offset:257})&&QM(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254])){if(this.check([60,0,63,0,120,0,109,0,108,0],{offset:2}))return{ext:"xml",mime:"application/xml"};if(this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2}))return{ext:"skp",mime:"application/vnd.sketchup.skp"};return}if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"}};detectImprecise=async($)=>{if(this.buffer=new Uint8Array(N9),await $.peekBuffer(this.buffer,{length:Math.min(8,$.fileInfo.size),mayBeLess:!0}),this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(await $.peekBuffer(this.buffer,{length:Math.min(2+this.options.mpegOffsetTolerance,$.fileInfo.size),mayBeLess:!0}),this.buffer.length>=2+this.options.mpegOffsetTolerance)for(let X=0;X<=this.options.mpegOffsetTolerance;++X){let Y=this.scanMpeg(X);if(Y)return Y}};async readTiffTag($){let X=await this.tokenizer.readToken($?a6:a0);switch(this.tokenizer.ignore(10),X){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"};default:}}async readTiffIFD($){let X=await this.tokenizer.readToken($?a6:a0);for(let Y=0;Y<X;++Y){let Q=await this.readTiffTag($);if(Q)return Q}}async readTiffHeader($){let X=($?a6:a0).get(this.buffer,2),Y=($?SG:z1).get(this.buffer,4);if(X===42){if(Y>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(Y>=8){let W=($?a6:a0).get(this.buffer,8),J=($?a6:a0).get(this.buffer,10);if(W===28&&J===254||W===31&&J===11)return{ext:"nef",mime:"image/x-nikon-nef"}}}return await this.tokenizer.ignore(Y),await this.readTiffIFD($)??{ext:"tif",mime:"image/tiff"}}if(X===43)return{ext:"tif",mime:"image/tiff"}}scanMpeg($){if(this.check([255,224],{offset:$,mask:[255,224]})){if(this.check([16],{offset:$+1,mask:[22]})){if(this.check([8],{offset:$+1,mask:[8]}))return{ext:"aac",mime:"audio/aac"};return{ext:"aac",mime:"audio/aac"}}if(this.check([2],{offset:$+1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:$+1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:$+1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}}var N9=4100,NM,zM;var hX=l0(()=>{U9();k7();$M();XM();JM();UM();NM=new Set(GM),zM=new Set(MM)});var wM={};f2(wM,{supportedMimeTypes:()=>zM,supportedExtensions:()=>NM,fileTypeStream:()=>Q3,fileTypeFromTokenizer:()=>qM,fileTypeFromStream:()=>Y3,fileTypeFromFile:()=>X3,fileTypeFromBuffer:()=>HM,fileTypeFromBlob:()=>BM,FileTypeParser:()=>z9});import{ReadableStream as aS}from"stream/web";import{pipeline as OM,PassThrough as eS,Readable as $3}from"stream";async function X3($,X){return new z9(X).fromFile($,X)}async function Y3($,X){return new z9(X).fromStream($)}async function Q3($,X={}){return new z9(X).toDetectionStream($,X)}var z9;var AM=l0(()=>{jG();hX();hX();z9=class z9 extends W4{async fromStream($){let X=await($ instanceof aS?x7($,this.tokenizerOptions):ZG($,this.tokenizerOptions));try{return await super.fromTokenizer(X)}finally{await X.close()}}async fromFile($){let X=await LG($);try{return await super.fromTokenizer(X)}finally{await X.close()}}async toDetectionStream($,X={}){if(!($ instanceof $3))return super.toDetectionStream($,X);let{sampleSize:Y=N9}=X;return new Promise((Q,W)=>{$.on("error",W),$.once("readable",()=>{(async()=>{try{let J=new eS,G=OM?OM($,J,()=>{}):$.pipe(J),U=$.read(Y)??$.read()??new Uint8Array(0);try{J.fileType=await this.fromBuffer(U)}catch(H){if(H instanceof d0)J.fileType=void 0;else W(H)}Q(G)}catch(J){W(J)}})()})})}}});var LY=Q0((s_)=>{s_.parse=function($,X){return new ZY($,X).parse()};class ZY{constructor($,X){this.source=$,this.transform=X||r_,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var $=this.source[this.position++];if($==="\\")return{value:this.source[this.position++],escaped:!0};return{value:$,escaped:!1}}record($){this.recorded.push($)}newEntry($){var X;if(this.recorded.length>0||$){if(X=this.recorded.join(""),X==="NULL"&&!$)X=null;if(X!==null)X=this.transform(X);this.entries.push(X),this.recorded=[]}}consumeDimensions(){if(this.source[0]==="[")while(!this.isEof()){var $=this.nextCharacter();if($.value==="=")break}}parse($){var X,Y,Q;this.consumeDimensions();while(!this.isEof())if(X=this.nextCharacter(),X.value==="{"&&!Q){if(this.dimension++,this.dimension>1)Y=new ZY(this.source.substr(this.position-1),this.transform),this.entries.push(Y.parse(!0)),this.position+=Y.position-2}else if(X.value==="}"&&!Q){if(this.dimension--,!this.dimension){if(this.newEntry(),$)return this.entries}}else if(X.value==='"'&&!X.escaped){if(Q)this.newEntry(!0);Q=!Q}else if(X.value===","&&!Q)this.newEntry();else this.record(X.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}}function r_($){return $}});var jY=Q0((Vi,eU)=>{var a_=LY();eU.exports={create:function($,X){return{parse:function(){return a_.parse($,X)}}}}});var YH=Q0((Ci,XH)=>{var e_=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,$R=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,XR=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,YR=/^-?infinity$/;XH.exports=function $(X){if(YR.test(X))return Number(X.replace("i","I"));var Y=e_.exec(X);if(!Y)return QR(X)||null;var Q=!!Y[8],W=parseInt(Y[1],10);if(Q)W=$H(W);var J=parseInt(Y[2],10)-1,G=Y[3],U=parseInt(Y[4],10),H=parseInt(Y[5],10),B=parseInt(Y[6],10),q=Y[7];q=q?1000*parseFloat(q):0;var O,A=WR(X);if(A!=null){if(O=new Date(Date.UTC(W,J,G,U,H,B,q)),KY(W))O.setUTCFullYear(W);if(A!==0)O.setTime(O.getTime()-A)}else if(O=new Date(W,J,G,U,H,B,q),KY(W))O.setFullYear(W);return O};function QR($){var X=$R.exec($);if(!X)return;var Y=parseInt(X[1],10),Q=!!X[4];if(Q)Y=$H(Y);var W=parseInt(X[2],10)-1,J=X[3],G=new Date(Y,W,J);if(KY(Y))G.setFullYear(Y);return G}function WR($){if($.endsWith("+00"))return 0;var X=XR.exec($.split(" ")[1]);if(!X)return;var Y=X[1];if(Y==="Z")return 0;var Q=Y==="-"?-1:1,W=parseInt(X[2],10)*3600+parseInt(X[3]||0,10)*60+parseInt(X[4]||0,10);return W*Q*1000}function $H($){return-($-1)}function KY($){return $>=0&&$<100}});var WH=Q0((Ei,QH)=>{QH.exports=GR;var JR=Object.prototype.hasOwnProperty;function GR($){for(var X=1;X<arguments.length;X++){var Y=arguments[X];for(var Q in Y)if(JR.call(Y,Q))$[Q]=Y[Q]}return $}});var MH=Q0((bi,GH)=>{var MR=WH();GH.exports=V4;function V4($){if(!(this instanceof V4))return new V4($);MR(this,jR($))}var UR=["seconds","minutes","hours","days","months","years"];V4.prototype.toPostgres=function(){var $=UR.filter(this.hasOwnProperty,this);if(this.milliseconds&&$.indexOf("seconds")<0)$.push("seconds");if($.length===0)return"0";return $.map(function(X){var Y=this[X]||0;if(X==="seconds"&&this.milliseconds)Y=(Y+this.milliseconds/1000).toFixed(6).replace(/\.?0+$/,"");return Y+" "+X},this).join(" ")};var HR={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},BR=["years","months","days"],qR=["hours","minutes","seconds"];V4.prototype.toISOString=V4.prototype.toISO=function(){var $=BR.map(Y,this).join(""),X=qR.map(Y,this).join("");return"P"+$+"T"+X;function Y(Q){var W=this[Q]||0;if(Q==="seconds"&&this.milliseconds)W=(W+this.milliseconds/1000).toFixed(6).replace(/0+$/,"");return W+HR[Q]}};var FY="([+-]?\\d+)",NR=FY+"\\s+years?",zR=FY+"\\s+mons?",OR=FY+"\\s+days?",wR="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",AR=new RegExp([NR,zR,OR,wR].map(function($){return"("+$+")?"}).join("\\s*")),JH={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},ZR=["hours","minutes","seconds","milliseconds"];function LR($){var X=$+"000000".slice($.length);return parseInt(X,10)/1000}function jR($){if(!$)return{};var X=AR.exec($),Y=X[8]==="-";return Object.keys(JH).reduce(function(Q,W){var J=JH[W],G=X[J];if(!G)return Q;if(G=W==="milliseconds"?LR(G):parseInt(G,10),!G)return Q;if(Y&&~ZR.indexOf(W))G*=-1;return Q[W]=G,Q},{})}});var HH=Q0((Ii,UH)=>{UH.exports=function $(X){if(/^\\x/.test(X))return new Buffer(X.substr(2),"hex");var Y="",Q=0;while(Q<X.length)if(X[Q]!=="\\")Y+=X[Q],++Q;else if(/[0-7]{3}/.test(X.substr(Q+1,3)))Y+=String.fromCharCode(parseInt(X.substr(Q+1,3),8)),Q+=4;else{var W=1;while(Q+W<X.length&&X[Q+W]==="\\")W++;for(var J=0;J<Math.floor(W/2);++J)Y+="\\";Q+=Math.floor(W/2)*2}return new Buffer(Y,"binary")}});var AH=Q0((Ti,wH)=>{var k9=LY(),g9=jY(),Z$=YH(),qH=MH(),NH=HH();function L$($){return function X(Y){if(Y===null)return Y;return $(Y)}}function zH($){if($===null)return $;return $==="TRUE"||$==="t"||$==="true"||$==="y"||$==="yes"||$==="on"||$==="1"}function KR($){if(!$)return null;return k9.parse($,zH)}function FR($){return parseInt($,10)}function SY($){if(!$)return null;return k9.parse($,L$(FR))}function SR($){if(!$)return null;return k9.parse($,L$(function(X){return OH(X).trim()}))}var DR=function($){if(!$)return null;var X=g9.create($,function(Y){if(Y!==null)Y=PY(Y);return Y});return X.parse()},DY=function($){if(!$)return null;var X=g9.create($,function(Y){if(Y!==null)Y=parseFloat(Y);return Y});return X.parse()},y5=function($){if(!$)return null;var X=g9.create($);return X.parse()},_Y=function($){if(!$)return null;var X=g9.create($,function(Y){if(Y!==null)Y=Z$(Y);return Y});return X.parse()},_R=function($){if(!$)return null;var X=g9.create($,function(Y){if(Y!==null)Y=qH(Y);return Y});return X.parse()},RR=function($){if(!$)return null;return k9.parse($,L$(NH))},RY=function($){return parseInt($,10)},OH=function($){var X=String($);if(/^\d+$/.test(X))return X;return $},BH=function($){if(!$)return null;return k9.parse($,L$(JSON.parse))},PY=function($){if($[0]!=="(")return null;return $=$.substring(1,$.length-1).split(","),{x:parseFloat($[0]),y:parseFloat($[1])}},PR=function($){if($[0]!=="<"&&$[1]!=="(")return null;var X="(",Y="",Q=!1;for(var W=2;W<$.length-1;W++){if(!Q)X+=$[W];if($[W]===")"){Q=!0;continue}else if(!Q)continue;if($[W]===",")continue;Y+=$[W]}var J=PY(X);return J.radius=parseFloat(Y),J},VR=function($){$(20,OH),$(21,RY),$(23,RY),$(26,RY),$(700,parseFloat),$(701,parseFloat),$(16,zH),$(1082,Z$),$(1114,Z$),$(1184,Z$),$(600,PY),$(651,y5),$(718,PR),$(1000,KR),$(1001,RR),$(1005,SY),$(1007,SY),$(1028,SY),$(1016,SR),$(1017,DR),$(1021,DY),$(1022,DY),$(1231,DY),$(1014,y5),$(1015,y5),$(1008,y5),$(1009,y5),$(1040,y5),$(1041,y5),$(1115,_Y),$(1182,_Y),$(1185,_Y),$(1186,qH),$(1187,_R),$(17,NH),$(114,JSON.parse.bind(JSON)),$(3802,JSON.parse.bind(JSON)),$(199,BH),$(3807,BH),$(3907,y5),$(2951,y5),$(791,y5),$(1183,y5),$(1270,y5)};wH.exports={init:VR}});var LH=Q0((xi,ZH)=>{var H5=1e6;function CR($){var X=$.readInt32BE(0),Y=$.readUInt32BE(4),Q="";if(X<0)X=~X+(Y===0),Y=~Y+1>>>0,Q="-";var W="",J,G,U,H,B,q;{if(J=X%H5,X=X/H5>>>0,G=4294967296*J+Y,Y=G/H5>>>0,U=""+(G-H5*Y),Y===0&&X===0)return Q+U+W;H="",B=6-U.length;for(q=0;q<B;q++)H+="0";W=H+U+W}{if(J=X%H5,X=X/H5>>>0,G=4294967296*J+Y,Y=G/H5>>>0,U=""+(G-H5*Y),Y===0&&X===0)return Q+U+W;H="",B=6-U.length;for(q=0;q<B;q++)H+="0";W=H+U+W}{if(J=X%H5,X=X/H5>>>0,G=4294967296*J+Y,Y=G/H5>>>0,U=""+(G-H5*Y),Y===0&&X===0)return Q+U+W;H="",B=6-U.length;for(q=0;q<B;q++)H+="0";W=H+U+W}return J=X%H5,G=4294967296*J+Y,U=""+G%H5,Q+U+W}ZH.exports=CR});var DH=Q0((ki,SH)=>{var ER=LH(),Q1=function($,X,Y,Q,W){Y=Y||0,Q=Q||!1,W=W||function(w,N,L){return w*Math.pow(2,L)+N};var J=Y>>3,G=function(w){if(Q)return~w&255;return w},U=255,H=8-Y%8;if(X<H)U=255<<8-X&255,H=X;if(Y)U=U>>Y%8;var B=0;if(Y%8+X>=8)B=W(0,G($[J])&U,H);var q=X+Y>>3;for(var O=J+1;O<q;O++)B=W(B,G($[O]),8);var A=(X+Y)%8;if(A>0)B=W(B,G($[q])>>8-A,A);return B},FH=function($,X,Y){var Q=Math.pow(2,Y-1)-1,W=Q1($,1),J=Q1($,Y,1);if(J===0)return 0;var G=1,U=function(B,q,O){if(B===0)B=1;for(var A=1;A<=O;A++)if(G/=2,(q&1<<O-A)>0)B+=G;return B},H=Q1($,X,Y+1,!1,U);if(J==Math.pow(2,Y+1)-1){if(H===0)return W===0?1/0:-1/0;return NaN}return(W===0?1:-1)*Math.pow(2,J-Q)*H},bR=function($){if(Q1($,1)==1)return-1*(Q1($,15,1,!0)+1);return Q1($,15,1)},jH=function($){if(Q1($,1)==1)return-1*(Q1($,31,1,!0)+1);return Q1($,31,1)},IR=function($){return FH($,23,8)},TR=function($){return FH($,52,11)},xR=function($){var X=Q1($,16,32);if(X==49152)return NaN;var Y=Math.pow(1e4,Q1($,16,16)),Q=0,W=[],J=Q1($,16);for(var G=0;G<J;G++)Q+=Q1($,16,64+16*G)*Y,Y/=1e4;var U=Math.pow(10,Q1($,16,48));return(X===0?1:-1)*Math.round(Q*U)/U},KH=function($,X){var Y=Q1(X,1),Q=Q1(X,63,1),W=new Date((Y===0?1:-1)*Q/1000+946684800000);if(!$)W.setTime(W.getTime()+W.getTimezoneOffset()*60000);return W.usec=Q%1000,W.getMicroSeconds=function(){return this.usec},W.setMicroSeconds=function(J){this.usec=J},W.getUTCMicroSeconds=function(){return this.usec},W},f9=function($){var X=Q1($,32),Y=Q1($,32,32),Q=Q1($,32,64),W=96,J=[];for(var G=0;G<X;G++)J[G]=Q1($,32,W),W+=32,W+=32;var U=function(B){var q=Q1($,32,W);if(W+=32,q==4294967295)return null;var O;if(B==23||B==20)return O=Q1($,q*8,W),W+=q*8,O;else if(B==25)return O=$.toString(this.encoding,W>>3,(W+=q<<3)>>3),O;else console.log("ERROR: ElementType not implemented: "+B)},H=function(B,q){var O=[],A;if(B.length>1){var w=B.shift();for(A=0;A<w;A++)O[A]=H(B,q);B.unshift(w)}else for(A=0;A<B[0];A++)O[A]=U(q);return O};return H(J,Q)},kR=function($){return $.toString("utf8")},gR=function($){if($===null)return null;return Q1($,8)>0},fR=function($){$(20,ER),$(21,bR),$(23,jH),$(26,jH),$(1700,xR),$(700,IR),$(701,TR),$(16,gR),$(1114,KH.bind(null,!1)),$(1184,KH.bind(null,!0)),$(1000,f9),$(1007,f9),$(1016,f9),$(1008,f9),$(1009,f9),$(25,kR)};SH.exports={init:fR}});var RH=Q0((gi,_H)=>{_H.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var y9=Q0((uR)=>{var vR=AH(),yR=DH(),hR=jY(),dR=RH();uR.getTypeParser=cR;uR.setTypeParser=mR;uR.arrayParser=hR;uR.builtins=dR;var v9={text:{},binary:{}};function PH($){return String($)}function cR($,X){if(X=X||"text",!v9[X])return PH;return v9[X][$]||PH}function mR($,X,Y){if(typeof X=="function")Y=X,X="text";v9[X][$]=Y}vR.init(function($,X){v9.text[$]=X});yR.init(function($,X){v9.binary[$]=X})});var h9=Q0((vi,VY)=>{VY.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:30000,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var C4=y9(),oR=C4.getTypeParser(20,"text"),rR=C4.getTypeParser(1016,"text");VY.exports.__defineSetter__("parseInt8",function($){C4.setTypeParser(20,"text",$?C4.getTypeParser(23,"text"):oR),C4.setTypeParser(1016,"text",$?C4.getTypeParser(1007,"text"):rR)})});var E4=Q0((yi,CH)=>{var sR=h9();function tR($){return'"'+$.replace(/\\/g,"\\\\").replace(/"/g,"\\\"")+'"'}function VH($){let X="{";for(let Y=0;Y<$.length;Y++){if(Y>0)X=X+",";if($[Y]===null||typeof $[Y]==="undefined")X=X+"NULL";else if(Array.isArray($[Y]))X=X+VH($[Y]);else if(ArrayBuffer.isView($[Y])){let Q=$[Y];if(!(Q instanceof Buffer)){let W=Buffer.from(Q.buffer,Q.byteOffset,Q.byteLength);if(W.length===Q.byteLength)Q=W;else Q=W.slice(Q.byteOffset,Q.byteOffset+Q.byteLength)}X+="\\\\x"+Q.toString("hex")}else X+=tR(j$($[Y]))}return X=X+"}",X}var j$=function($,X){if($==null)return null;if(typeof $==="object"){if($ instanceof Buffer)return $;if(ArrayBuffer.isView($)){let Y=Buffer.from($.buffer,$.byteOffset,$.byteLength);if(Y.length===$.byteLength)return Y;return Y.slice($.byteOffset,$.byteOffset+$.byteLength)}if($ instanceof Date)if(sR.parseInputDatesAsUTC)return $P($);else return eR($);if(Array.isArray($))return VH($);return aR($,X)}return $.toString()};function aR($,X){if($&&typeof $.toPostgres==="function"){if(X=X||[],X.indexOf($)!==-1)throw new Error('circular reference detected while preparing "'+$+'" for query');return X.push($),j$($.toPostgres(j$),X)}return JSON.stringify($)}function eR($){let X=-$.getTimezoneOffset(),Y=$.getFullYear(),Q=Y<1;if(Q)Y=Math.abs(Y)+1;let W=String(Y).padStart(4,"0")+"-"+String($.getMonth()+1).padStart(2,"0")+"-"+String($.getDate()).padStart(2,"0")+"T"+String($.getHours()).padStart(2,"0")+":"+String($.getMinutes()).padStart(2,"0")+":"+String($.getSeconds()).padStart(2,"0")+"."+String($.getMilliseconds()).padStart(3,"0");if(X<0)W+="-",X*=-1;else W+="+";if(W+=String(Math.floor(X/60)).padStart(2,"0")+":"+String(X%60).padStart(2,"0"),Q)W+=" BC";return W}function $P($){let X=$.getUTCFullYear(),Y=X<1;if(Y)X=Math.abs(X)+1;let Q=String(X).padStart(4,"0")+"-"+String($.getUTCMonth()+1).padStart(2,"0")+"-"+String($.getUTCDate()).padStart(2,"0")+"T"+String($.getUTCHours()).padStart(2,"0")+":"+String($.getUTCMinutes()).padStart(2,"0")+":"+String($.getUTCSeconds()).padStart(2,"0")+"."+String($.getUTCMilliseconds()).padStart(3,"0");if(Q+="+00:00",Y)Q+=" BC";return Q}function XP($,X,Y){if($=typeof $==="string"?{text:$}:$,X)if(typeof X==="function")$.callback=X;else $.values=X;if(Y)$.callback=Y;return $}var YP=function($){return'"'+$.replace(/"/g,'""')+'"'},QP=function($){let X=!1,Y="'";for(let Q=0;Q<$.length;Q++){let W=$[Q];if(W==="'")Y+=W+W;else if(W==="\\")Y+=W+W,X=!0;else Y+=W}if(Y+="'",X===!0)Y=" E"+Y;return Y};CH.exports={prepareValue:function $(X){return j$(X)},normalizeQueryConfig:XP,escapeIdentifier:YP,escapeLiteral:QP}});var bH=Q0((hi,EH)=>{var b4=E0("crypto");function CY($){return b4.createHash("md5").update($,"utf-8").digest("hex")}function WP($,X,Y){let Q=CY(X+$);return"md5"+CY(Buffer.concat([Buffer.from(Q),Y]))}function JP($){return b4.createHash("sha256").update($).digest()}function GP($,X){return $=$.replace(/(\D)-/,"$1"),b4.createHash($).update(X).digest()}function MP($,X){return b4.createHmac("sha256",$).update(X).digest()}async function UP($,X,Y){return b4.pbkdf2Sync($,X,Y,32,"sha256")}EH.exports={postgresMd5PasswordHash:WP,randomBytes:b4.randomBytes,deriveKey:UP,sha256:JP,hashByName:GP,hmacSha256:MP,md5:CY}});var kH=Q0((di,xH)=>{var IH=E0("crypto");xH.exports={postgresMd5PasswordHash:BP,randomBytes:HP,deriveKey:OP,sha256:qP,hashByName:NP,hmacSha256:zP,md5:EY};var TH=IH.webcrypto||globalThis.crypto,D6=TH.subtle,bY=new TextEncoder;function HP($){return TH.getRandomValues(Buffer.alloc($))}async function EY($){try{return IH.createHash("md5").update($,"utf-8").digest("hex")}catch(X){let Y=typeof $==="string"?bY.encode($):$,Q=await D6.digest("MD5",Y);return Array.from(new Uint8Array(Q)).map((W)=>W.toString(16).padStart(2,"0")).join("")}}async function BP($,X,Y){let Q=await EY(X+$);return"md5"+await EY(Buffer.concat([Buffer.from(Q),Y]))}async function qP($){return await D6.digest("SHA-256",$)}async function NP($,X){return await D6.digest($,X)}async function zP($,X){let Y=await D6.importKey("raw",$,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await D6.sign("HMAC",Y,bY.encode(X))}async function OP($,X,Y){let Q=await D6.importKey("raw",bY.encode($),"PBKDF2",!1,["deriveBits"]),W={name:"PBKDF2",hash:"SHA-256",salt:X,iterations:Y};return await D6.deriveBits(W,Q,256,["deriveBits"])}});var TY=Q0((ci,IY)=>{var wP=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;if(wP)IY.exports=bH();else IY.exports=kH()});var vH=Q0((mi,fH)=>{function _6($,X){return new Error("SASL channel binding: "+$+" when parsing public certificate "+X.toString("base64"))}function xY($,X){let Y=$[X++];if(Y<128)return{length:Y,index:X};let Q=Y&127;if(Q>4)throw _6("bad length",$);Y=0;for(let W=0;W<Q;W++)Y=Y<<8|$[X++];return{length:Y,index:X}}function gH($,X){if($[X++]!==6)throw _6("non-OID data",$);let{length:Y,index:Q}=xY($,X);X=Q;let W=X+Y,J=$[X++],G=(J/40>>0)+"."+J%40;while(X<W){let U=0;while(X<W){let H=$[X++];if(U=U<<7|H&127,H<128)break}G+="."+U}return{oid:G,index:X}}function d9($,X){if($[X++]!==48)throw _6("non-sequence data",$);return xY($,X)}function AP($,X){if(X===void 0)X=0;X=d9($,X).index;let{length:Y,index:Q}=d9($,X);X=Q+Y,X=d9($,X).index;let{oid:W,index:J}=gH($,X);switch(W){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(X=J,X=d9($,X).index,$[X++]!==160)throw _6("non-tag data",$);X=xY($,X).index,X=d9($,X).index;let{oid:G}=gH($,X);switch(G){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw _6("unknown hash OID "+G,$)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw _6("Ed448 certificate channel binding is not currently supported by Postgres")}throw _6("unknown OID "+W,$)}fH.exports={signatureAlgorithmHashFromCertificate:AP}});var cH=Q0((ui,dH)=>{var y8=TY(),{signatureAlgorithmHashFromCertificate:ZP}=vH();function LP($,X){let Y=["SCRAM-SHA-256"];if(X)Y.unshift("SCRAM-SHA-256-PLUS");let Q=Y.find((G)=>$.includes(G));if(!Q)throw new Error("SASL: Only mechanism(s) "+Y.join(" and ")+" are supported");if(Q==="SCRAM-SHA-256-PLUS"&&typeof X.getPeerCertificate!=="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let W=y8.randomBytes(18).toString("base64");return{mechanism:Q,clientNonce:W,response:(Q==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":X?"y":"n")+",,n=*,r="+W,message:"SASLInitialResponse"}}async function jP($,X,Y,Q){if($.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof X!=="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(X==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof Y!=="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let W=SP(Y);if(!W.nonce.startsWith($.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");else if(W.nonce.length===$.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let J="n=*,r="+$.clientNonce,G="r="+W.nonce+",s="+W.salt+",i="+W.iteration,U=Q?"eSws":"biws";if($.mechanism==="SCRAM-SHA-256-PLUS"){let D=Q.getPeerCertificate().raw,b=ZP(D);if(b==="MD5"||b==="SHA-1")b="SHA-256";let l=await y8.hashByName(b,D);U=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(l)]).toString("base64")}let H="c="+U+",r="+W.nonce,B=J+","+G+","+H,q=Buffer.from(W.salt,"base64"),O=await y8.deriveKey(X,q,W.iteration),A=await y8.hmacSha256(O,"Client Key"),w=await y8.sha256(A),N=await y8.hmacSha256(w,B),L=_P(Buffer.from(A),Buffer.from(N)).toString("base64"),K=await y8.hmacSha256(O,"Server Key"),h=await y8.hmacSha256(K,B);$.message="SASLResponse",$.serverSignature=Buffer.from(h).toString("base64"),$.response=H+",p="+L}function KP($,X){if($.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof X!=="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:Y}=DP(X);if(Y!==$.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function FP($){if(typeof $!=="string")throw new TypeError("SASL: text must be a string");return $.split("").map((X,Y)=>$.charCodeAt(Y)).every((X)=>X>=33&&X<=43||X>=45&&X<=126)}function yH($){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test($)}function hH($){if(typeof $!=="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map($.split(",").map((X)=>{if(!/^.=/.test(X))throw new Error("SASL: Invalid attribute pair entry");let Y=X[0],Q=X.substring(2);return[Y,Q]}))}function SP($){let X=hH($),Y=X.get("r");if(!Y)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");else if(!FP(Y))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters");let Q=X.get("s");if(!Q)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");else if(!yH(Q))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64");let W=X.get("i");if(!W)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");else if(!/^[1-9][0-9]*$/.test(W))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count");let J=parseInt(W,10);return{nonce:Y,salt:Q,iteration:J}}function DP($){let Y=hH($).get("v");if(!Y)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");else if(!yH(Y))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64");return{serverSignature:Y}}function _P($,X){if(!Buffer.isBuffer($))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(X))throw new TypeError("second argument must be a Buffer");if($.length!==X.length)throw new Error("Buffer lengths must match");if($.length===0)throw new Error("Buffers cannot be empty");return Buffer.from($.map((Y,Q)=>$[Q]^X[Q]))}dH.exports={startSession:LP,continueSession:jP,finalizeSession:KP}});var F$=Q0((li,mH)=>{var RP=y9();function K$($){this._types=$||RP,this.text={},this.binary={}}K$.prototype.getOverrides=function($){switch($){case"text":return this.text;case"binary":return this.binary;default:return{}}};K$.prototype.setTypeParser=function($,X,Y){if(typeof X==="function")Y=X,X="text";this.getOverrides(X)[$]=Y};K$.prototype.getTypeParser=function($,X){return X=X||"text",this.getOverrides(X)[$]||this._types.getTypeParser($,X)};mH.exports=K$});var pH=Q0((pi,lH)=>{function I4($,X={}){if($.charAt(0)==="/"){let H=$.split(" ");return{host:H[0],database:H[1]}}let Y={},Q,W=!1;if(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test($))$=encodeURI($).replace(/%25(\d\d)/g,"%$1");try{Q=new URL($,"postgres://base")}catch(H){Q=new URL($.replace("@/","@___DUMMY___/"),"postgres://base"),W=!0}for(let H of Q.searchParams.entries())Y[H[0]]=H[1];if(Y.user=Y.user||decodeURIComponent(Q.username),Y.password=Y.password||decodeURIComponent(Q.password),Q.protocol=="socket:")return Y.host=decodeURI(Q.pathname),Y.database=Q.searchParams.get("db"),Y.client_encoding=Q.searchParams.get("encoding"),Y;let J=W?"":Q.hostname;if(!Y.host)Y.host=decodeURIComponent(J);else if(J&&/^%2f/i.test(J))Q.pathname=J+Q.pathname;if(!Y.port)Y.port=Q.port;let G=Q.pathname.slice(1)||null;if(Y.database=G?decodeURI(G):null,Y.ssl==="true"||Y.ssl==="1")Y.ssl=!0;if(Y.ssl==="0")Y.ssl=!1;if(Y.sslcert||Y.sslkey||Y.sslrootcert||Y.sslmode)Y.ssl={};let U=Y.sslcert||Y.sslkey||Y.sslrootcert?E0("fs"):null;if(Y.sslcert)Y.ssl.cert=U.readFileSync(Y.sslcert).toString();if(Y.sslkey)Y.ssl.key=U.readFileSync(Y.sslkey).toString();if(Y.sslrootcert)Y.ssl.ca=U.readFileSync(Y.sslrootcert).toString();if(X.useLibpqCompat&&Y.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(Y.uselibpqcompat==="true"||X.useLibpqCompat)switch(Y.sslmode){case"disable":{Y.ssl=!1;break}case"prefer":{Y.ssl.rejectUnauthorized=!1;break}case"require":{if(Y.sslrootcert)Y.ssl.checkServerIdentity=function(){};else Y.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!Y.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");Y.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(Y.sslmode){case"disable":{Y.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{Y.ssl.rejectUnauthorized=!1;break}}return Y}function PP($){return Object.entries($).reduce((Y,[Q,W])=>{if(W!==void 0&&W!==null)Y[Q]=W;return Y},{})}function uH($){return Object.entries($).reduce((Y,[Q,W])=>{if(Q==="ssl"){let J=W;if(typeof J==="boolean")Y[Q]=J;if(typeof J==="object")Y[Q]=PP(J)}else if(W!==void 0&&W!==null)if(Q==="port"){if(W!==""){let J=parseInt(W,10);if(isNaN(J))throw new Error(`Invalid ${Q}: ${W}`);Y[Q]=J}}else Y[Q]=W;return Y},{})}function VP($){return uH(I4($))}lH.exports=I4;I4.parse=I4;I4.toClientConfig=uH;I4.parseIntoClientConfig=VP});var kY=Q0((ii,rH)=>{var CP=E0("dns"),nH=h9(),iH=pH().parse,n1=function($,X,Y){if(Y===void 0)Y=process.env["PG"+$.toUpperCase()];else if(Y===!1);else Y=process.env[Y];return X[$]||Y||nH[$]},EP=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return nH.ssl},T4=function($){return"'"+(""+$).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},h5=function($,X,Y){let Q=X[Y];if(Q!==void 0&&Q!==null)$.push(Y+"="+T4(Q))};class oH{constructor($){if($=typeof $==="string"?iH($):$||{},$.connectionString)$=Object.assign({},$,iH($.connectionString));if(this.user=n1("user",$),this.database=n1("database",$),this.database===void 0)this.database=this.user;if(this.port=parseInt(n1("port",$),10),this.host=n1("host",$),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:n1("password",$)}),this.binary=n1("binary",$),this.options=n1("options",$),this.ssl=typeof $.ssl==="undefined"?EP():$.ssl,typeof this.ssl==="string"){if(this.ssl==="true")this.ssl=!0}if(this.ssl==="no-verify")this.ssl={rejectUnauthorized:!1};if(this.ssl&&this.ssl.key)Object.defineProperty(this.ssl,"key",{enumerable:!1});if(this.client_encoding=n1("client_encoding",$),this.replication=n1("replication",$),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=n1("application_name",$,"PGAPPNAME"),this.fallback_application_name=n1("fallback_application_name",$,!1),this.statement_timeout=n1("statement_timeout",$,!1),this.lock_timeout=n1("lock_timeout",$,!1),this.idle_in_transaction_session_timeout=n1("idle_in_transaction_session_timeout",$,!1),this.query_timeout=n1("query_timeout",$,!1),$.connectionTimeoutMillis===void 0)this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0;else this.connect_timeout=Math.floor($.connectionTimeoutMillis/1000);if($.keepAlive===!1)this.keepalives=0;else if($.keepAlive===!0)this.keepalives=1;if(typeof $.keepAliveInitialDelayMillis==="number")this.keepalives_idle=Math.floor($.keepAliveInitialDelayMillis/1000)}getLibpqConnectionString($){let X=[];h5(X,this,"user"),h5(X,this,"password"),h5(X,this,"port"),h5(X,this,"application_name"),h5(X,this,"fallback_application_name"),h5(X,this,"connect_timeout"),h5(X,this,"options");let Y=typeof this.ssl==="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(h5(X,Y,"sslmode"),h5(X,Y,"sslca"),h5(X,Y,"sslkey"),h5(X,Y,"sslcert"),h5(X,Y,"sslrootcert"),this.database)X.push("dbname="+T4(this.database));if(this.replication)X.push("replication="+T4(this.replication));if(this.host)X.push("host="+T4(this.host));if(this.isDomainSocket)return $(null,X.join(" "));if(this.client_encoding)X.push("client_encoding="+T4(this.client_encoding));CP.lookup(this.host,function(Q,W){if(Q)return $(Q,null);return X.push("hostaddr="+T4(W)),$(null,X.join(" "))})}}rH.exports=oH});var gY=Q0((ni,aH)=>{var bP=y9(),sH=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/;class tH{constructor($,X){if(this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=X,this.RowCtor=null,this.rowAsArray=$==="array",this.rowAsArray)this.parseRow=this._parseRowAsArray;this._prebuiltEmptyResultObject=null}addCommandComplete($){let X;if($.text)X=sH.exec($.text);else X=sH.exec($.command);if(X){if(this.command=X[1],X[3])this.oid=parseInt(X[2],10),this.rowCount=parseInt(X[3],10);else if(X[2])this.rowCount=parseInt(X[2],10)}}_parseRowAsArray($){let X=new Array($.length);for(let Y=0,Q=$.length;Y<Q;Y++){let W=$[Y];if(W!==null)X[Y]=this._parsers[Y](W);else X[Y]=null}return X}parseRow($){let X={...this._prebuiltEmptyResultObject};for(let Y=0,Q=$.length;Y<Q;Y++){let W=$[Y],J=this.fields[Y].name;if(W!==null)X[J]=this._parsers[Y](W);else X[J]=null}return X}addRow($){this.rows.push($)}addFields($){if(this.fields=$,this.fields.length)this._parsers=new Array($.length);let X={};for(let Y=0;Y<$.length;Y++){let Q=$[Y];if(X[Q.name]=null,this._types)this._parsers[Y]=this._types.getTypeParser(Q.dataTypeID,Q.format||"text");else this._parsers[Y]=bP.getTypeParser(Q.dataTypeID,Q.format||"text")}this._prebuiltEmptyResultObject={...X}}}aH.exports=tH});var QB=Q0((oi,YB)=>{var{EventEmitter:IP}=E0("events"),eH=gY(),$B=E4();class XB extends IP{constructor($,X,Y){super();if($=$B.normalizeQueryConfig($,X,Y),this.text=$.text,this.values=$.values,this.rows=$.rows,this.types=$.types,this.name=$.name,this.queryMode=$.queryMode,this.binary=$.binary,this.portal=$.portal||"",this.callback=$.callback,this._rowMode=$.rowMode,process.domain&&$.callback)this.callback=process.domain.bind($.callback);this._result=new eH(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){if(this.queryMode==="extended")return!0;if(this.name)return!0;if(this.rows)return!0;if(!this.text)return!1;if(!this.values)return!1;return this.values.length>0}_checkForMultirow(){if(this._result.command){if(!Array.isArray(this._results))this._results=[this._result];this._result=new eH(this._rowMode,this._result._types),this._results.push(this._result)}}handleRowDescription($){this._checkForMultirow(),this._result.addFields($.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow($){let X;if(this._canceledDueToError)return;try{X=this._result.parseRow($.fields)}catch(Y){this._canceledDueToError=Y;return}if(this.emit("row",X,this._result),this._accumulateRows)this._result.addRow(X)}handleCommandComplete($,X){if(this._checkForMultirow(),this._result.addCommandComplete($),this.rows)X.sync()}handleEmptyQuery($){if(this.rows)$.sync()}handleError($,X){if(this._canceledDueToError)$=this._canceledDueToError,this._canceledDueToError=!1;if(this.callback)return this.callback($);this.emit("error",$)}handleReadyForQuery($){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,$);if(this.callback)try{this.callback(null,this._results)}catch(X){process.nextTick(()=>{throw X})}this.emit("end",this._results)}submit($){if(typeof this.text!=="string"&&typeof this.name!=="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let X=$.parsedStatements[this.name];if(this.text&&X&&this.text!==X)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){$.stream.cork&&$.stream.cork();try{this.prepare($)}finally{$.stream.uncork&&$.stream.uncork()}}else $.query(this.text);return null}hasBeenParsed($){return this.name&&$.parsedStatements[this.name]}handlePortalSuspended($){this._getRows($,this.rows)}_getRows($,X){if($.execute({portal:this.portal,rows:X}),!X)$.sync();else $.flush()}prepare($){if(!this.hasBeenParsed($))$.parse({text:this.text,name:this.name,types:this.types});try{$.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:$B.prepareValue})}catch(X){this.handleError(X,$);return}$.describe({type:"P",name:this.portal||""}),this._getRows($,this.rows)}handleCopyInResponse($){$.sendCopyFail("No source stream defined")}handleCopyData($,X){}}YB.exports=XB});var fY=Q0((LB)=>{Object.defineProperty(LB,"__esModule",{value:!0});LB.NoticeMessage=LB.DataRowMessage=LB.CommandCompleteMessage=LB.ReadyForQueryMessage=LB.NotificationResponseMessage=LB.BackendKeyDataMessage=LB.AuthenticationMD5Password=LB.ParameterStatusMessage=LB.ParameterDescriptionMessage=LB.RowDescriptionMessage=LB.Field=LB.CopyResponse=LB.CopyDataMessage=LB.DatabaseError=LB.copyDone=LB.emptyQuery=LB.replicationStart=LB.portalSuspended=LB.noData=LB.closeComplete=LB.bindComplete=LB.parseComplete=void 0;LB.parseComplete={name:"parseComplete",length:5};LB.bindComplete={name:"bindComplete",length:5};LB.closeComplete={name:"closeComplete",length:5};LB.noData={name:"noData",length:5};LB.portalSuspended={name:"portalSuspended",length:5};LB.replicationStart={name:"replicationStart",length:4};LB.emptyQuery={name:"emptyQuery",length:4};LB.copyDone={name:"copyDone",length:4};class WB extends Error{constructor($,X,Y){super($);this.length=X,this.name=Y}}LB.DatabaseError=WB;class JB{constructor($,X){this.length=$,this.chunk=X,this.name="copyData"}}LB.CopyDataMessage=JB;class GB{constructor($,X,Y,Q){this.length=$,this.name=X,this.binary=Y,this.columnTypes=new Array(Q)}}LB.CopyResponse=GB;class MB{constructor($,X,Y,Q,W,J,G){this.name=$,this.tableID=X,this.columnID=Y,this.dataTypeID=Q,this.dataTypeSize=W,this.dataTypeModifier=J,this.format=G}}LB.Field=MB;class UB{constructor($,X){this.length=$,this.fieldCount=X,this.name="rowDescription",this.fields=new Array(this.fieldCount)}}LB.RowDescriptionMessage=UB;class HB{constructor($,X){this.length=$,this.parameterCount=X,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}}LB.ParameterDescriptionMessage=HB;class BB{constructor($,X,Y){this.length=$,this.parameterName=X,this.parameterValue=Y,this.name="parameterStatus"}}LB.ParameterStatusMessage=BB;class qB{constructor($,X){this.length=$,this.salt=X,this.name="authenticationMD5Password"}}LB.AuthenticationMD5Password=qB;class NB{constructor($,X,Y){this.length=$,this.processID=X,this.secretKey=Y,this.name="backendKeyData"}}LB.BackendKeyDataMessage=NB;class zB{constructor($,X,Y,Q){this.length=$,this.processId=X,this.channel=Y,this.payload=Q,this.name="notification"}}LB.NotificationResponseMessage=zB;class OB{constructor($,X){this.length=$,this.status=X,this.name="readyForQuery"}}LB.ReadyForQueryMessage=OB;class wB{constructor($,X){this.length=$,this.text=X,this.name="commandComplete"}}LB.CommandCompleteMessage=wB;class AB{constructor($,X){this.length=$,this.fields=X,this.name="dataRow",this.fieldCount=X.length}}LB.DataRowMessage=AB;class ZB{constructor($,X){this.length=$,this.message=X,this.name="notice"}}LB.NoticeMessage=ZB});var DB=Q0((FB)=>{Object.defineProperty(FB,"__esModule",{value:!0});FB.Writer=void 0;class KB{constructor($=256){this.size=$,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe($)}ensure($){if(this.buffer.length-this.offset<$){let Y=this.buffer,Q=Y.length+(Y.length>>1)+$;this.buffer=Buffer.allocUnsafe(Q),Y.copy(this.buffer)}}addInt32($){return this.ensure(4),this.buffer[this.offset++]=$>>>24&255,this.buffer[this.offset++]=$>>>16&255,this.buffer[this.offset++]=$>>>8&255,this.buffer[this.offset++]=$>>>0&255,this}addInt16($){return this.ensure(2),this.buffer[this.offset++]=$>>>8&255,this.buffer[this.offset++]=$>>>0&255,this}addCString($){if(!$)this.ensure(1);else{let X=Buffer.byteLength($);this.ensure(X+1),this.buffer.write($,this.offset,"utf-8"),this.offset+=X}return this.buffer[this.offset++]=0,this}addString($=""){let X=Buffer.byteLength($);return this.ensure(X),this.buffer.write($,this.offset),this.offset+=X,this}add($){return this.ensure($.length),$.copy(this.buffer,this.offset),this.offset+=$.length,this}join($){if($){this.buffer[this.headerPosition]=$;let X=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(X,this.headerPosition+1)}return this.buffer.slice($?0:5,this.offset)}flush($){let X=this.join($);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),X}}FB.Writer=KB});var VB=Q0((RB)=>{Object.defineProperty(RB,"__esModule",{value:!0});RB.serialize=void 0;var vY=DB(),W1=new vY.Writer,eP=($)=>{W1.addInt16(3).addInt16(0);for(let Q of Object.keys($))W1.addCString(Q).addCString($[Q]);W1.addCString("client_encoding").addCString("UTF8");let X=W1.addCString("").flush(),Y=X.length+4;return new vY.Writer().addInt32(Y).add(X).flush()},$V=()=>{let $=Buffer.allocUnsafe(8);return $.writeInt32BE(8,0),$.writeInt32BE(80877103,4),$},XV=($)=>{return W1.addCString($).flush(112)},YV=function($,X){return W1.addCString($).addInt32(Buffer.byteLength(X)).addString(X),W1.flush(112)},QV=function($){return W1.addString($).flush(112)},WV=($)=>{return W1.addCString($).flush(81)},_B=[],JV=($)=>{let X=$.name||"";if(X.length>63)console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",X,X.length),console.error("This can cause conflicts and silent errors executing queries");let Y=$.types||_B,Q=Y.length,W=W1.addCString(X).addCString($.text).addInt16(Q);for(let J=0;J<Q;J++)W.addInt32(Y[J]);return W1.flush(80)},x4=new vY.Writer,GV=function($,X){for(let Y=0;Y<$.length;Y++){let Q=X?X($[Y],Y):$[Y];if(Q==null)W1.addInt16(0),x4.addInt32(-1);else if(Q instanceof Buffer)W1.addInt16(1),x4.addInt32(Q.length),x4.add(Q);else W1.addInt16(0),x4.addInt32(Buffer.byteLength(Q)),x4.addString(Q)}},MV=($={})=>{let X=$.portal||"",Y=$.statement||"",Q=$.binary||!1,W=$.values||_B,J=W.length;return W1.addCString(X).addCString(Y),W1.addInt16(J),GV(W,$.valueMapper),W1.addInt16(J),W1.add(x4.flush()),W1.addInt16(Q?1:0),W1.flush(66)},UV=Buffer.from([69,0,0,0,9,0,0,0,0,0]),HV=($)=>{if(!$||!$.portal&&!$.rows)return UV;let X=$.portal||"",Y=$.rows||0,Q=Buffer.byteLength(X),W=4+Q+1+4,J=Buffer.allocUnsafe(1+W);return J[0]=69,J.writeInt32BE(W,1),J.write(X,5,"utf-8"),J[Q+5]=0,J.writeUInt32BE(Y,J.length-4),J},BV=($,X)=>{let Y=Buffer.allocUnsafe(16);return Y.writeInt32BE(16,0),Y.writeInt16BE(1234,4),Y.writeInt16BE(5678,6),Y.writeInt32BE($,8),Y.writeInt32BE(X,12),Y},yY=($,X)=>{let Q=4+Buffer.byteLength(X)+1,W=Buffer.allocUnsafe(1+Q);return W[0]=$,W.writeInt32BE(Q,1),W.write(X,5,"utf-8"),W[Q]=0,W},qV=W1.addCString("P").flush(68),NV=W1.addCString("S").flush(68),zV=($)=>{return $.name?yY(68,`${$.type}${$.name||""}`):$.type==="P"?qV:NV},OV=($)=>{let X=`${$.type}${$.name||""}`;return yY(67,X)},wV=($)=>{return W1.add($).flush(100)},AV=($)=>{return yY(102,$)},S$=($)=>Buffer.from([$,0,0,0,4]),ZV=S$(72),LV=S$(83),jV=S$(88),KV=S$(99),FV={startup:eP,password:XV,requestSsl:$V,sendSASLInitialResponseMessage:YV,sendSCRAMClientFinalMessage:QV,query:WV,parse:JV,bind:MV,execute:HV,describe:zV,close:OV,flush:()=>ZV,sync:()=>LV,end:()=>jV,copyData:wV,copyDone:()=>KV,copyFail:AV,cancel:BV};RB.serialize=FV});var IB=Q0((EB)=>{Object.defineProperty(EB,"__esModule",{value:!0});EB.BufferReader=void 0;var SV=Buffer.allocUnsafe(0);class CB{constructor($=0){this.offset=$,this.buffer=SV,this.encoding="utf-8"}setBuffer($,X){this.offset=$,this.buffer=X}int16(){let $=this.buffer.readInt16BE(this.offset);return this.offset+=2,$}byte(){let $=this.buffer[this.offset];return this.offset++,$}int32(){let $=this.buffer.readInt32BE(this.offset);return this.offset+=4,$}uint32(){let $=this.buffer.readUInt32BE(this.offset);return this.offset+=4,$}string($){let X=this.buffer.toString(this.encoding,this.offset,this.offset+$);return this.offset+=$,X}cstring(){let $=this.offset,X=$;while(this.buffer[X++]!==0);return this.offset=X,this.buffer.toString(this.encoding,$,X-1)}bytes($){let X=this.buffer.slice(this.offset,this.offset+$);return this.offset+=$,X}}EB.BufferReader=CB});var vB=Q0((gB)=>{Object.defineProperty(gB,"__esModule",{value:!0});gB.Parser=void 0;var J1=fY(),DV=IB(),hY=1,_V=4,TB=hY+_V,xB=Buffer.allocUnsafe(0);class kB{constructor($){if(this.buffer=xB,this.bufferLength=0,this.bufferOffset=0,this.reader=new DV.BufferReader,($===null||$===void 0?void 0:$.mode)==="binary")throw new Error("Binary mode not supported yet");this.mode=($===null||$===void 0?void 0:$.mode)||"text"}parse($,X){this.mergeBuffer($);let Y=this.bufferOffset+this.bufferLength,Q=this.bufferOffset;while(Q+TB<=Y){let W=this.buffer[Q],J=this.buffer.readUInt32BE(Q+hY),G=hY+J;if(G+Q<=Y){let U=this.handlePacket(Q+TB,W,J,this.buffer);X(U),Q+=G}else break}if(Q===Y)this.buffer=xB,this.bufferLength=0,this.bufferOffset=0;else this.bufferLength=Y-Q,this.bufferOffset=Q}mergeBuffer($){if(this.bufferLength>0){let X=this.bufferLength+$.byteLength;if(X+this.bufferOffset>this.buffer.byteLength){let Q;if(X<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)Q=this.buffer;else{let W=this.buffer.byteLength*2;while(X>=W)W*=2;Q=Buffer.allocUnsafe(W)}this.buffer.copy(Q,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=Q,this.bufferOffset=0}$.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=X}else this.buffer=$,this.bufferOffset=0,this.bufferLength=$.byteLength}handlePacket($,X,Y,Q){switch(X){case 50:return J1.bindComplete;case 49:return J1.parseComplete;case 51:return J1.closeComplete;case 110:return J1.noData;case 115:return J1.portalSuspended;case 99:return J1.copyDone;case 87:return J1.replicationStart;case 73:return J1.emptyQuery;case 68:return this.parseDataRowMessage($,Y,Q);case 67:return this.parseCommandCompleteMessage($,Y,Q);case 90:return this.parseReadyForQueryMessage($,Y,Q);case 65:return this.parseNotificationMessage($,Y,Q);case 82:return this.parseAuthenticationResponse($,Y,Q);case 83:return this.parseParameterStatusMessage($,Y,Q);case 75:return this.parseBackendKeyData($,Y,Q);case 69:return this.parseErrorMessage($,Y,Q,"error");case 78:return this.parseErrorMessage($,Y,Q,"notice");case 84:return this.parseRowDescriptionMessage($,Y,Q);case 116:return this.parseParameterDescriptionMessage($,Y,Q);case 71:return this.parseCopyInMessage($,Y,Q);case 72:return this.parseCopyOutMessage($,Y,Q);case 100:return this.parseCopyData($,Y,Q);default:return new J1.DatabaseError("received invalid response: "+X.toString(16),Y,"error")}}parseReadyForQueryMessage($,X,Y){this.reader.setBuffer($,Y);let Q=this.reader.string(1);return new J1.ReadyForQueryMessage(X,Q)}parseCommandCompleteMessage($,X,Y){this.reader.setBuffer($,Y);let Q=this.reader.cstring();return new J1.CommandCompleteMessage(X,Q)}parseCopyData($,X,Y){let Q=Y.slice($,$+(X-4));return new J1.CopyDataMessage(X,Q)}parseCopyInMessage($,X,Y){return this.parseCopyMessage($,X,Y,"copyInResponse")}parseCopyOutMessage($,X,Y){return this.parseCopyMessage($,X,Y,"copyOutResponse")}parseCopyMessage($,X,Y,Q){this.reader.setBuffer($,Y);let W=this.reader.byte()!==0,J=this.reader.int16(),G=new J1.CopyResponse(X,Q,W,J);for(let U=0;U<J;U++)G.columnTypes[U]=this.reader.int16();return G}parseNotificationMessage($,X,Y){this.reader.setBuffer($,Y);let Q=this.reader.int32(),W=this.reader.cstring(),J=this.reader.cstring();return new J1.NotificationResponseMessage(X,Q,W,J)}parseRowDescriptionMessage($,X,Y){this.reader.setBuffer($,Y);let Q=this.reader.int16(),W=new J1.RowDescriptionMessage(X,Q);for(let J=0;J<Q;J++)W.fields[J]=this.parseField();return W}parseField(){let $=this.reader.cstring(),X=this.reader.uint32(),Y=this.reader.int16(),Q=this.reader.uint32(),W=this.reader.int16(),J=this.reader.int32(),G=this.reader.int16()===0?"text":"binary";return new J1.Field($,X,Y,Q,W,J,G)}parseParameterDescriptionMessage($,X,Y){this.reader.setBuffer($,Y);let Q=this.reader.int16(),W=new J1.ParameterDescriptionMessage(X,Q);for(let J=0;J<Q;J++)W.dataTypeIDs[J]=this.reader.int32();return W}parseDataRowMessage($,X,Y){this.reader.setBuffer($,Y);let Q=this.reader.int16(),W=new Array(Q);for(let J=0;J<Q;J++){let G=this.reader.int32();W[J]=G===-1?null:this.reader.string(G)}return new J1.DataRowMessage(X,W)}parseParameterStatusMessage($,X,Y){this.reader.setBuffer($,Y);let Q=this.reader.cstring(),W=this.reader.cstring();return new J1.ParameterStatusMessage(X,Q,W)}parseBackendKeyData($,X,Y){this.reader.setBuffer($,Y);let Q=this.reader.int32(),W=this.reader.int32();return new J1.BackendKeyDataMessage(X,Q,W)}parseAuthenticationResponse($,X,Y){this.reader.setBuffer($,Y);let Q=this.reader.int32(),W={name:"authenticationOk",length:X};switch(Q){case 0:break;case 3:if(W.length===8)W.name="authenticationCleartextPassword";break;case 5:if(W.length===12){W.name="authenticationMD5Password";let J=this.reader.bytes(4);return new J1.AuthenticationMD5Password(X,J)}break;case 10:{W.name="authenticationSASL",W.mechanisms=[];let J;do if(J=this.reader.cstring(),J)W.mechanisms.push(J);while(J)}break;case 11:W.name="authenticationSASLContinue",W.data=this.reader.string(X-8);break;case 12:W.name="authenticationSASLFinal",W.data=this.reader.string(X-8);break;default:throw new Error("Unknown authenticationOk message type "+Q)}return W}parseErrorMessage($,X,Y,Q){this.reader.setBuffer($,Y);let W={},J=this.reader.string(1);while(J!=="\x00")W[J]=this.reader.cstring(),J=this.reader.string(1);let G=W.M,U=Q==="notice"?new J1.NoticeMessage(X,G):new J1.DatabaseError(G,X,Q);return U.severity=W.S,U.code=W.C,U.detail=W.D,U.hint=W.H,U.position=W.P,U.internalPosition=W.p,U.internalQuery=W.q,U.where=W.W,U.schema=W.s,U.table=W.t,U.column=W.c,U.dataType=W.d,U.constraint=W.n,U.file=W.F,U.line=W.L,U.routine=W.R,U}}gB.Parser=kB});var dY=Q0((D$)=>{Object.defineProperty(D$,"__esModule",{value:!0});D$.DatabaseError=D$.serialize=D$.parse=void 0;var RV=fY();Object.defineProperty(D$,"DatabaseError",{enumerable:!0,get:function(){return RV.DatabaseError}});var PV=VB();Object.defineProperty(D$,"serialize",{enumerable:!0,get:function(){return PV.serialize}});var VV=vB();function CV($,X){let Y=new VV.Parser;return $.on("data",(Q)=>Y.parse(Q,X)),new Promise((Q)=>$.on("end",()=>Q()))}D$.parse=CV});var cB=Q0((hB)=>{Object.defineProperty(hB,"__esModule",{value:!0});hB.CloudflareSocket=void 0;var IV=E0("events");class yB extends IV.EventEmitter{constructor($){super();this.ssl=$,this.writable=!1,this.destroyed=!1,this._upgrading=!1,this._upgraded=!1,this._cfSocket=null,this._cfWriter=null,this._cfReader=null}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}async connect($,X,Y){try{if(R5("connecting"),Y)this.once("connect",Y);let Q=this.ssl?{secureTransport:"starttls"}:{},J=(await import("cloudflare:sockets")).connect;if(this._cfSocket=J(`${X}:${$}`,Q),this._cfWriter=this._cfSocket.writable.getWriter(),this._addClosedHandler(),this._cfReader=this._cfSocket.readable.getReader(),this.ssl)this._listenOnce().catch((G)=>this.emit("error",G));else this._listen().catch((G)=>this.emit("error",G));return await this._cfWriter.ready,R5("socket ready"),this.writable=!0,this.emit("connect"),this}catch(Q){this.emit("error",Q)}}async _listen(){while(!0){R5("awaiting receive from CF socket");let{done:$,value:X}=await this._cfReader.read();if(R5("CF socket received:",$,X),$){R5("done");break}this.emit("data",Buffer.from(X))}}async _listenOnce(){R5("awaiting first receive from CF socket");let{done:$,value:X}=await this._cfReader.read();R5("First CF socket received:",$,X),this.emit("data",Buffer.from(X))}write($,X="utf8",Y=()=>{}){if($.length===0)return Y();if(typeof $==="string")$=Buffer.from($,X);return R5("sending data direct:",$),this._cfWriter.write($).then(()=>{R5("data sent"),Y()},(Q)=>{R5("send error",Q),Y(Q)}),!0}end($=Buffer.alloc(0),X="utf8",Y=()=>{}){return R5("ending CF socket"),this.write($,X,(Q)=>{if(this._cfSocket.close(),Y)Y(Q)}),this}destroy($){return R5("destroying CF socket",$),this.destroyed=!0,this.end()}startTls($){if(this._upgraded){this.emit("error","Cannot call `startTls()` more than once on a socket");return}this._cfWriter.releaseLock(),this._cfReader.releaseLock(),this._upgrading=!0,this._cfSocket=this._cfSocket.startTls($),this._cfWriter=this._cfSocket.writable.getWriter(),this._cfReader=this._cfSocket.readable.getReader(),this._addClosedHandler(),this._listen().catch((X)=>this.emit("error",X))}_addClosedHandler(){this._cfSocket.closed.then(()=>{if(!this._upgrading)R5("CF socket closed"),this._cfSocket=null,this.emit("close");else this._upgrading=!1,this._upgraded=!0}).catch(($)=>this.emit("error",$))}}hB.CloudflareSocket=yB;var TV=!1;function xV($){if($ instanceof Uint8Array||$ instanceof ArrayBuffer){let X=Buffer.from($).toString("hex");return`
>>> STR: "${new TextDecoder().decode($).replace(/\n/g,"\\n")}"
>>> HEX: ${X}
`}else return $}function R5(...$){TV&&console.log(...$.map(xV))}});var uB=Q0((Qn,mB)=>{var{getStream:kV,getSecureStream:gV}=hV();mB.exports={getStream:kV,getSecureStream:gV};function fV(){function $(Y){return new(E0("net")).Socket}function X(Y){return E0("tls").connect(Y)}return{getStream:$,getSecureStream:X}}function vV(){function $(Y){let{CloudflareSocket:Q}=cB();return new Q(Y)}function X(Y){return Y.socket.startTls(Y),Y.socket}return{getStream:$,getSecureStream:X}}function yV(){if(typeof navigator==="object"&&navigator!==null&&typeof navigator.userAgent==="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response==="function"){let $=new Response(null,{cf:{thing:!0}});if(typeof $.cf==="object"&&$.cf!==null&&$.cf.thing)return!0}return!1}function hV(){if(yV())return vV();return fV()}});var cY=Q0((Wn,pB)=>{var dV=E0("events").EventEmitter,{parse:cV,serialize:R1}=dY(),{getStream:mV,getSecureStream:uV}=uB(),lV=R1.flush(),pV=R1.sync(),iV=R1.end();class lB extends dV{constructor($){super();if($=$||{},this.stream=$.stream||mV($.ssl),typeof this.stream==="function")this.stream=this.stream($);this._keepAlive=$.keepAlive,this._keepAliveInitialDelayMillis=$.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=$.ssl||!1,this._ending=!1,this._emitMessage=!1;let X=this;this.on("newListener",function(Y){if(Y==="message")X._emitMessage=!0})}connect($,X){let Y=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect($,X),this.stream.once("connect",function(){if(Y._keepAlive)Y.stream.setKeepAlive(!0,Y._keepAliveInitialDelayMillis);Y.emit("connect")});let Q=function(W){if(Y._ending&&(W.code==="ECONNRESET"||W.code==="EPIPE"))return;Y.emit("error",W)};if(this.stream.on("error",Q),this.stream.on("close",function(){Y.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(W){switch(W.toString("utf8")){case"S":break;case"N":return Y.stream.end(),Y.emit("error",new Error("The server does not support SSL connections"));default:return Y.stream.end(),Y.emit("error",new Error("There was an error establishing an SSL connection"))}let G={socket:Y.stream};if(Y.ssl!==!0){if(Object.assign(G,Y.ssl),"key"in Y.ssl)G.key=Y.ssl.key}let U=E0("net");if(U.isIP&&U.isIP(X)===0)G.servername=X;try{Y.stream=uV(G)}catch(H){return Y.emit("error",H)}Y.attachListeners(Y.stream),Y.stream.on("error",Q),Y.emit("sslconnect")})}attachListeners($){cV($,(X)=>{let Y=X.name==="error"?"errorMessage":X.name;if(this._emitMessage)this.emit("message",X);this.emit(Y,X)})}requestSsl(){this.stream.write(R1.requestSsl())}startup($){this.stream.write(R1.startup($))}cancel($,X){this._send(R1.cancel($,X))}password($){this._send(R1.password($))}sendSASLInitialResponseMessage($,X){this._send(R1.sendSASLInitialResponseMessage($,X))}sendSCRAMClientFinalMessage($){this._send(R1.sendSCRAMClientFinalMessage($))}_send($){if(!this.stream.writable)return!1;return this.stream.write($)}query($){this._send(R1.query($))}parse($){this._send(R1.parse($))}bind($){this._send(R1.bind($))}execute($){this._send(R1.execute($))}flush(){if(this.stream.writable)this.stream.write(lV)}sync(){this._ending=!0,this._send(pV)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(iV,()=>{this.stream.end()})}close($){this._send(R1.close($))}describe($){this._send(R1.describe($))}sendCopyFromChunk($){this._send(R1.copyData($))}endCopyFrom(){this._send(R1.copyDone())}sendCopyFail($){this._send(R1.copyFail($))}}pB.exports=lB});var rB=Q0((Jn,oB)=>{var{Transform:nV}=E0("stream"),{StringDecoder:oV}=E0("string_decoder"),h8=Symbol("last"),_$=Symbol("decoder");function rV($,X,Y){let Q;if(this.overflow){if(Q=this[_$].write($).split(this.matcher),Q.length===1)return Y();Q.shift(),this.overflow=!1}else this[h8]+=this[_$].write($),Q=this[h8].split(this.matcher);this[h8]=Q.pop();for(let W=0;W<Q.length;W++)try{nB(this,this.mapper(Q[W]))}catch(J){return Y(J)}if(this.overflow=this[h8].length>this.maxLength,this.overflow&&!this.skipOverflow){Y(new Error("maximum buffer reached"));return}Y()}function sV($){if(this[h8]+=this[_$].end(),this[h8])try{nB(this,this.mapper(this[h8]))}catch(X){return $(X)}$()}function nB($,X){if(X!==void 0)$.push(X)}function iB($){return $}function tV($,X,Y){switch($=$||/\r?\n/,X=X||iB,Y=Y||{},arguments.length){case 1:if(typeof $==="function")X=$,$=/\r?\n/;else if(typeof $==="object"&&!($ instanceof RegExp)&&!$[Symbol.split])Y=$,$=/\r?\n/;break;case 2:if(typeof $==="function")Y=X,X=$,$=/\r?\n/;else if(typeof X==="object")Y=X,X=iB}Y=Object.assign({},Y),Y.autoDestroy=!0,Y.transform=rV,Y.flush=sV,Y.readableObjectMode=!0;let Q=new nV(Y);return Q[h8]="",Q[_$]=new oV("utf8"),Q.matcher=$,Q.mapper=X,Q.maxLength=Y.maxLength,Q.skipOverflow=Y.skipOverflow||!1,Q.overflow=!1,Q._destroy=function(W,J){this._writableState.errorEmitted=!1,J(W)},Q}oB.exports=tV});var aB=Q0((BC,B8)=>{var sB=E0("path"),aV=E0("stream").Stream,eV=rB(),tB=E0("util"),$C=5432,R$=process.platform==="win32",c9=process.stderr,XC=56,YC=7,QC=61440,WC=32768;function JC($){return($&QC)==WC}var k4=["host","port","database","user","password"],mY=k4.length,GC=k4[mY-1];function uY(){var $=c9 instanceof aV&&c9.writable===!0;if($){var X=Array.prototype.slice.call(arguments).concat(`
`);c9.write(tB.format.apply(tB,X))}}Object.defineProperty(BC,"isWin",{get:function(){return R$},set:function($){R$=$}});BC.warnTo=function($){var X=c9;return c9=$,X};BC.getFileName=function($){var X=$||process.env,Y=X.PGPASSFILE||(R$?sB.join(X.APPDATA||"./","postgresql","pgpass.conf"):sB.join(X.HOME||"./",".pgpass"));return Y};BC.usePgPass=function($,X){if(Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD"))return!1;if(R$)return!0;if(X=X||"<unkn>",!JC($.mode))return uY('WARNING: password file "%s" is not a plain file',X),!1;if($.mode&(XC|YC))return uY('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',X),!1;return!0};var MC=BC.match=function($,X){return k4.slice(0,-1).reduce(function(Y,Q,W){if(W==1){if(Number($[Q]||$C)===Number(X[Q]))return Y&&!0}return Y&&(X[Q]==="*"||X[Q]===$[Q])},!0)};BC.getPassword=function($,X,Y){var Q,W=X.pipe(eV());function J(H){var B=UC(H);if(B&&HC(B)&&MC($,B))Q=B[GC],W.end()}var G=function(){X.destroy(),Y(Q)},U=function(H){X.destroy(),uY("WARNING: error on reading file: %s",H),Y(void 0)};X.on("error",U),W.on("data",J).on("end",G).on("error",U)};var UC=BC.parseLine=function($){if($.length<11||$.match(/^\s+#/))return null;var X="",Y="",Q=0,W=0,J=0,G={},U=!1,H=function(q,O,A){var w=$.substring(O,A);if(!Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE"))w=w.replace(/\\([:\\])/g,"$1");G[k4[q]]=w};for(var B=0;B<$.length-1;B+=1){if(X=$.charAt(B+1),Y=$.charAt(B),U=Q==mY-1,U){H(Q,W);break}if(B>=0&&X==":"&&Y!=="\\")H(Q,W,B+1),W=B+2,Q+=1}return G=Object.keys(G).length===mY?G:null,G},HC=BC.isValidEntry=function($){var X={0:function(G){return G.length>0},1:function(G){if(G==="*")return!0;return G=Number(G),isFinite(G)&&G>0&&G<9007199254740992&&Math.floor(G)===G},2:function(G){return G.length>0},3:function(G){return G.length>0},4:function(G){return G.length>0}};for(var Y=0;Y<k4.length;Y+=1){var Q=X[Y],W=$[k4[Y]]||"",J=Q(W);if(!J)return!1}return!0}});var $q=Q0((Bn,lY)=>{var Hn=E0("path"),eB=E0("fs"),P$=aB();lY.exports=function($,X){var Y=P$.getFileName();eB.stat(Y,function(Q,W){if(Q||!P$.usePgPass(W,Y))return X(void 0);var J=eB.createReadStream(Y);P$.getPassword($,J,X)})};lY.exports.warnTo=P$.warnTo});var Wq=Q0((qn,Qq)=>{var wC=E0("events").EventEmitter,Xq=E4(),pY=cH(),AC=F$(),ZC=kY(),Yq=QB(),LC=h9(),jC=cY(),KC=TY();class iY extends wC{constructor($){super();this.connectionParameters=new ZC($),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let X=$||{};if(this._Promise=X.Promise||global.Promise,this._types=new AC(X.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=Boolean(X.enableChannelBinding),this.connection=X.connection||new jC({stream:X.stream,ssl:this.connectionParameters.ssl,keepAlive:X.keepAlive||!1,keepAliveInitialDelayMillis:X.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=X.binary||LC.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key)Object.defineProperty(this.ssl,"key",{enumerable:!1});this._connectionTimeoutMillis=X.connectionTimeoutMillis||0}_errorAllQueries($){let X=(Y)=>{process.nextTick(()=>{Y.handleError($,this.connection)})};if(this.activeQuery)X(this.activeQuery),this.activeQuery=null;this.queryQueue.forEach(X),this.queryQueue.length=0}_connect($){let X=this,Y=this.connection;if(this._connectionCallback=$,this._connecting||this._connected){let Q=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{$(Q)});return}if(this._connecting=!0,this._connectionTimeoutMillis>0){if(this.connectionTimeoutHandle=setTimeout(()=>{Y._ending=!0,Y.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref)this.connectionTimeoutHandle.unref()}if(this.host&&this.host.indexOf("/")===0)Y.connect(this.host+"/.s.PGSQL."+this.port);else Y.connect(this.port,this.host);Y.on("connect",function(){if(X.ssl)Y.requestSsl();else Y.startup(X.getStartupConf())}),Y.on("sslconnect",function(){Y.startup(X.getStartupConf())}),this._attachListeners(Y),Y.once("end",()=>{let Q=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");if(clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(Q),this._ended=!0,!this._ending){if(this._connecting&&!this._connectionError)if(this._connectionCallback)this._connectionCallback(Q);else this._handleErrorEvent(Q);else if(!this._connectionError)this._handleErrorEvent(Q)}process.nextTick(()=>{this.emit("end")})})}connect($){if($){this._connect($);return}return new this._Promise((X,Y)=>{this._connect((Q)=>{if(Q)Y(Q);else X()})})}_attachListeners($){$.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),$.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),$.on("authenticationSASL",this._handleAuthSASL.bind(this)),$.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),$.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),$.on("backendKeyData",this._handleBackendKeyData.bind(this)),$.on("error",this._handleErrorEvent.bind(this)),$.on("errorMessage",this._handleErrorMessage.bind(this)),$.on("readyForQuery",this._handleReadyForQuery.bind(this)),$.on("notice",this._handleNotice.bind(this)),$.on("rowDescription",this._handleRowDescription.bind(this)),$.on("dataRow",this._handleDataRow.bind(this)),$.on("portalSuspended",this._handlePortalSuspended.bind(this)),$.on("emptyQuery",this._handleEmptyQuery.bind(this)),$.on("commandComplete",this._handleCommandComplete.bind(this)),$.on("parseComplete",this._handleParseComplete.bind(this)),$.on("copyInResponse",this._handleCopyInResponse.bind(this)),$.on("copyData",this._handleCopyData.bind(this)),$.on("notification",this._handleNotification.bind(this))}_checkPgPass($){let X=this.connection;if(typeof this.password==="function")this._Promise.resolve().then(()=>this.password()).then((Y)=>{if(Y!==void 0){if(typeof Y!=="string"){X.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=Y}else this.connectionParameters.password=this.password=null;$()}).catch((Y)=>{X.emit("error",Y)});else if(this.password!==null)$();else try{$q()(this.connectionParameters,(Q)=>{if(Q!==void 0)this.connectionParameters.password=this.password=Q;$()})}catch(Y){this.emit("error",Y)}}_handleAuthCleartextPassword($){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password($){this._checkPgPass(async()=>{try{let X=await KC.postgresMd5PasswordHash(this.user,this.password,$.salt);this.connection.password(X)}catch(X){this.emit("error",X)}})}_handleAuthSASL($){this._checkPgPass(()=>{try{this.saslSession=pY.startSession($.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(X){this.connection.emit("error",X)}})}async _handleAuthSASLContinue($){try{await pY.continueSession(this.saslSession,this.password,$.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(X){this.connection.emit("error",X)}}_handleAuthSASLFinal($){try{pY.finalizeSession(this.saslSession,$.data),this.saslSession=null}catch(X){this.connection.emit("error",X)}}_handleBackendKeyData($){this.processID=$.processID,this.secretKey=$.secretKey}_handleReadyForQuery($){if(this._connecting){if(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)this._connectionCallback(null,this),this._connectionCallback=null;this.emit("connect")}let{activeQuery:X}=this;if(this.activeQuery=null,this.readyForQuery=!0,X)X.handleReadyForQuery(this.connection);this._pulseQueryQueue()}_handleErrorWhileConnecting($){if(this._connectionError)return;if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback($);this.emit("error",$)}_handleErrorEvent($){if(this._connecting)return this._handleErrorWhileConnecting($);this._queryable=!1,this._errorAllQueries($),this.emit("error",$)}_handleErrorMessage($){if(this._connecting)return this._handleErrorWhileConnecting($);let X=this.activeQuery;if(!X){this._handleErrorEvent($);return}this.activeQuery=null,X.handleError($,this.connection)}_handleRowDescription($){this.activeQuery.handleRowDescription($)}_handleDataRow($){this.activeQuery.handleDataRow($)}_handlePortalSuspended($){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery($){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete($){if(this.activeQuery==null){let X=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(X);return}this.activeQuery.handleCommandComplete($,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let $=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent($);return}if(this.activeQuery.name)this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text}_handleCopyInResponse($){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData($){this.activeQuery.handleCopyData($,this.connection)}_handleNotification($){this.emit("notification",$)}_handleNotice($){this.emit("notice",$)}getStartupConf(){let $=this.connectionParameters,X={user:$.user,database:$.database},Y=$.application_name||$.fallback_application_name;if(Y)X.application_name=Y;if($.replication)X.replication=""+$.replication;if($.statement_timeout)X.statement_timeout=String(parseInt($.statement_timeout,10));if($.lock_timeout)X.lock_timeout=String(parseInt($.lock_timeout,10));if($.idle_in_transaction_session_timeout)X.idle_in_transaction_session_timeout=String(parseInt($.idle_in_transaction_session_timeout,10));if($.options)X.options=$.options;return X}cancel($,X){if($.activeQuery===X){let Y=this.connection;if(this.host&&this.host.indexOf("/")===0)Y.connect(this.host+"/.s.PGSQL."+this.port);else Y.connect(this.port,this.host);Y.on("connect",function(){Y.cancel($.processID,$.secretKey)})}else if($.queryQueue.indexOf(X)!==-1)$.queryQueue.splice($.queryQueue.indexOf(X),1)}setTypeParser($,X,Y){return this._types.setTypeParser($,X,Y)}getTypeParser($,X){return this._types.getTypeParser($,X)}escapeIdentifier($){return Xq.escapeIdentifier($)}escapeLiteral($){return Xq.escapeLiteral($)}_pulseQueryQueue(){if(this.readyForQuery===!0){if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let $=this.activeQuery.submit(this.connection);if($)process.nextTick(()=>{this.activeQuery.handleError($,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else if(this.hasExecuted)this.activeQuery=null,this.emit("drain")}}query($,X,Y){let Q,W,J,G,U;if($===null||$===void 0)throw new TypeError("Client was passed a null or undefined query");else if(typeof $.submit==="function"){if(J=$.query_timeout||this.connectionParameters.query_timeout,W=Q=$,typeof X==="function")Q.callback=Q.callback||X}else if(J=$.query_timeout||this.connectionParameters.query_timeout,Q=new Yq($,X,Y),!Q.callback)W=new this._Promise((H,B)=>{Q.callback=(q,O)=>q?B(q):H(O)}).catch((H)=>{throw Error.captureStackTrace(H),H});if(J)U=Q.callback,G=setTimeout(()=>{let H=new Error("Query read timeout");process.nextTick(()=>{Q.handleError(H,this.connection)}),U(H),Q.callback=()=>{};let B=this.queryQueue.indexOf(Q);if(B>-1)this.queryQueue.splice(B,1);this._pulseQueryQueue()},J),Q.callback=(H,B)=>{clearTimeout(G),U(H,B)};if(this.binary&&!Q.binary)Q.binary=!0;if(Q._result&&!Q._result._types)Q._result._types=this._types;if(!this._queryable)return process.nextTick(()=>{Q.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),W;if(this._ending)return process.nextTick(()=>{Q.handleError(new Error("Client was closed and is not queryable"),this.connection)}),W;return this.queryQueue.push(Q),this._pulseQueryQueue(),W}ref(){this.connection.ref()}unref(){this.connection.unref()}end($){if(this._ending=!0,!this.connection._connecting||this._ended)if($)$();else return this._Promise.resolve();if(this.activeQuery||!this._queryable)this.connection.stream.destroy();else this.connection.end();if($)this.connection.once("end",$);else return new this._Promise((X)=>{this.connection.once("end",X)})}}iY.Query=Yq;Qq.exports=iY});var Bq=Q0((Nn,Hq)=>{var FC=E0("events").EventEmitter,Jq=function(){},Gq=($,X)=>{let Y=$.findIndex(X);return Y===-1?void 0:$.splice(Y,1)[0]};class Mq{constructor($,X,Y){this.client=$,this.idleListener=X,this.timeoutId=Y}}class m9{constructor($){this.callback=$}}function SC(){throw new Error("Release called on client which has already been released to the pool.")}function V$($,X){if(X)return{callback:X,result:void 0};let Y,Q,W=function(G,U){G?Y(G):Q(U)},J=new $(function(G,U){Q=G,Y=U}).catch((G)=>{throw Error.captureStackTrace(G),G});return{callback:W,result:J}}function DC($,X){return function Y(Q){Q.client=X,X.removeListener("error",Y),X.on("error",()=>{$.log("additional client error after disconnection due to error",Q)}),$._remove(X),$.emit("error",Q,X)}}class Uq extends FC{constructor($,X){super();if(this.options=Object.assign({},$),$!=null&&"password"in $)Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:$.password});if($!=null&&$.ssl&&$.ssl.key)Object.defineProperty(this.options.ssl,"key",{enumerable:!1});if(this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||X||nY().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis==="undefined")this.options.idleTimeoutMillis=1e4;this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){if(this.log("pulse queue on ending"),this._idle.length)this._idle.slice().map((X)=>{this._remove(X.client)});if(!this._clients.length)this.ended=!0,this._endCallback();return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let $=this._pendingQueue.shift();if(this._idle.length){let X=this._idle.pop();clearTimeout(X.timeoutId);let Y=X.client;Y.ref&&Y.ref();let Q=X.idleListener;return this._acquireClient(Y,$,Q,!1)}if(!this._isFull())return this.newClient($);throw new Error("unexpected condition")}_remove($){let X=Gq(this._idle,(Y)=>Y.client===$);if(X!==void 0)clearTimeout(X.timeoutId);this._clients=this._clients.filter((Y)=>Y!==$),$.end(),this.emit("remove",$)}connect($){if(this.ending){let Q=new Error("Cannot use a pool after calling end on the pool");return $?$(Q):this.Promise.reject(Q)}let X=V$(this.Promise,$),Y=X.result;if(this._isFull()||this._idle.length){if(this._idle.length)process.nextTick(()=>this._pulseQueue());if(!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new m9(X.callback)),Y;let Q=(G,U,H)=>{clearTimeout(J),X.callback(G,U,H)},W=new m9(Q),J=setTimeout(()=>{Gq(this._pendingQueue,(G)=>G.callback===Q),W.timedOut=!0,X.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);if(J.unref)J.unref();return this._pendingQueue.push(W),Y}return this.newClient(new m9(X.callback)),Y}newClient($){let X=new this.Client(this.options);this._clients.push(X);let Y=DC(this,X);this.log("checking client timeout");let Q,W=!1;if(this.options.connectionTimeoutMillis)Q=setTimeout(()=>{this.log("ending client due to timeout"),W=!0,X.connection?X.connection.stream.destroy():X.end()},this.options.connectionTimeoutMillis);this.log("connecting new client"),X.connect((J)=>{if(Q)clearTimeout(Q);if(X.on("error",Y),J){if(this.log("client failed to connect",J),this._clients=this._clients.filter((G)=>G!==X),W)J=new Error("Connection terminated due to connection timeout",{cause:J});if(this._pulseQueue(),!$.timedOut)$.callback(J,void 0,Jq)}else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let G=setTimeout(()=>{if(this.log("ending client due to expired lifetime"),this._expired.add(X),this._idle.findIndex((H)=>H.client===X)!==-1)this._acquireClient(X,new m9((H,B,q)=>q()),Y,!1)},this.options.maxLifetimeSeconds*1000);G.unref(),X.once("end",()=>clearTimeout(G))}return this._acquireClient(X,$,Y,!0)}})}_acquireClient($,X,Y,Q){if(Q)this.emit("connect",$);if(this.emit("acquire",$),$.release=this._releaseOnce($,Y),$.removeListener("error",Y),!X.timedOut)if(Q&&this.options.verify)this.options.verify($,(W)=>{if(W)return $.release(W),X.callback(W,void 0,Jq);X.callback(void 0,$,$.release)});else X.callback(void 0,$,$.release);else if(Q&&this.options.verify)this.options.verify($,$.release);else $.release()}_releaseOnce($,X){let Y=!1;return(Q)=>{if(Y)SC();Y=!0,this._release($,X,Q)}}_release($,X,Y){if($.on("error",X),$._poolUseCount=($._poolUseCount||0)+1,this.emit("release",Y,$),Y||this.ending||!$._queryable||$._ending||$._poolUseCount>=this.options.maxUses){if($._poolUseCount>=this.options.maxUses)this.log("remove expended client");this._remove($),this._pulseQueue();return}if(this._expired.has($)){this.log("remove expired client"),this._expired.delete($),this._remove($),this._pulseQueue();return}let W;if(this.options.idleTimeoutMillis&&this._isAboveMin()){if(W=setTimeout(()=>{this.log("remove idle client"),this._remove($)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle)W.unref()}if(this.options.allowExitOnIdle)$.unref();this._idle.push(new Mq($,X,W)),this._pulseQueue()}query($,X,Y){if(typeof $==="function"){let W=V$(this.Promise,$);return setImmediate(function(){return W.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),W.result}if(typeof X==="function")Y=X,X=void 0;let Q=V$(this.Promise,Y);return Y=Q.callback,this.connect((W,J)=>{if(W)return Y(W);let G=!1,U=(H)=>{if(G)return;G=!0,J.release(H),Y(H)};J.once("error",U),this.log("dispatching query");try{J.query($,X,(H,B)=>{if(this.log("query dispatched"),J.removeListener("error",U),G)return;if(G=!0,J.release(H),H)return Y(H);return Y(void 0,B)})}catch(H){return J.release(H),Y(H)}}),Q.result}end($){if(this.log("ending"),this.ending){let Y=new Error("Called end on pool more than once");return $?$(Y):this.Promise.reject(Y)}this.ending=!0;let X=V$(this.Promise,$);return this._endCallback=X.callback,this._pulseQueue(),X.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce(($,X)=>$+(this._expired.has(X)?1:0),0)}get totalCount(){return this._clients.length}}Hq.exports=Uq});var zq=Q0((zn,Nq)=>{var qq=E0("events").EventEmitter,_C=E0("util"),oY=E4(),g4=Nq.exports=function($,X,Y){qq.call(this),$=oY.normalizeQueryConfig($,X,Y),this.text=$.text,this.values=$.values,this.name=$.name,this.queryMode=$.queryMode,this.callback=$.callback,this.state="new",this._arrayMode=$.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(Q){if(Q==="row")this._emitRowEvents=!0}.bind(this))};_C.inherits(g4,qq);var RC={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};g4.prototype.handleError=function($){let X=this.native.pq.resultErrorFields();if(X)for(let Y in X){let Q=RC[Y]||Y;$[Q]=X[Y]}if(this.callback)this.callback($);else this.emit("error",$);this.state="error"};g4.prototype.then=function($,X){return this._getPromise().then($,X)};g4.prototype.catch=function($){return this._getPromise().catch($)};g4.prototype._getPromise=function(){if(this._promise)return this._promise;return this._promise=new Promise(function($,X){this._once("end",$),this._once("error",X)}.bind(this)),this._promise};g4.prototype.submit=function($){this.state="running";let X=this;this.native=$.native,$.native.arrayMode=this._arrayMode;let Y=function(Q,W,J){if($.native.arrayMode=!1,setImmediate(function(){X.emit("_done")}),Q)return X.handleError(Q);if(X._emitRowEvents)if(J.length>1)W.forEach((G,U)=>{G.forEach((H)=>{X.emit("row",H,J[U])})});else W.forEach(function(G){X.emit("row",G,J)});if(X.state="end",X.emit("end",J),X.callback)X.callback(null,J)};if(process.domain)Y=process.domain.bind(Y);if(this.name){if(this.name.length>63)console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries");let Q=(this.values||[]).map(oY.prepareValue);if($.namedQueries[this.name]){if(this.text&&$.namedQueries[this.name]!==this.text){let W=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return Y(W)}return $.native.execute(this.name,Q,Y)}return $.native.prepare(this.name,this.text,Q.length,function(W){if(W)return Y(W);return $.namedQueries[X.name]=X.text,X.native.execute(X.name,Q,Y)})}else if(this.values){if(!Array.isArray(this.values)){let W=new Error("Query values must be an array");return Y(W)}let Q=this.values.map(oY.prepareValue);$.native.query(this.text,Q,Y)}else if(this.queryMode==="extended")$.native.query(this.text,[],Y);else $.native.query(this.text,Y)}});var rY=Q0((On,Zq)=>{var Oq;try{Oq=(()=>{throw new Error("Cannot require module "+"pg-native");})()}catch($){throw $}var PC=F$(),wq=E0("events").EventEmitter,VC=E0("util"),CC=kY(),Aq=zq(),B5=Zq.exports=function($){wq.call(this),$=$||{},this._Promise=$.Promise||global.Promise,this._types=new PC($.types),this.native=new Oq({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let X=this.connectionParameters=new CC($);if($.nativeConnectionString)X.nativeConnectionString=$.nativeConnectionString;this.user=X.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:X.password}),this.database=X.database,this.host=X.host,this.port=X.port,this.namedQueries={}};B5.Query=Aq;VC.inherits(B5,wq);B5.prototype._errorAllQueries=function($){let X=(Y)=>{process.nextTick(()=>{Y.native=this.native,Y.handleError($)})};if(this._hasActiveQuery())X(this._activeQuery),this._activeQuery=null;this._queryQueue.forEach(X),this._queryQueue.length=0};B5.prototype._connect=function($){let X=this;if(this._connecting){process.nextTick(()=>$(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(Y,Q){if(X.connectionParameters.nativeConnectionString)Q=X.connectionParameters.nativeConnectionString;if(Y)return $(Y);X.native.connect(Q,function(W){if(W)return X.native.end(),$(W);X._connected=!0,X.native.on("error",function(J){X._queryable=!1,X._errorAllQueries(J),X.emit("error",J)}),X.native.on("notification",function(J){X.emit("notification",{channel:J.relname,payload:J.extra})}),X.emit("connect"),X._pulseQueryQueue(!0),$()})})};B5.prototype.connect=function($){if($){this._connect($);return}return new this._Promise((X,Y)=>{this._connect((Q)=>{if(Q)Y(Q);else X()})})};B5.prototype.query=function($,X,Y){let Q,W,J,G,U;if($===null||$===void 0)throw new TypeError("Client was passed a null or undefined query");else if(typeof $.submit==="function"){if(J=$.query_timeout||this.connectionParameters.query_timeout,W=Q=$,typeof X==="function")$.callback=X}else if(J=$.query_timeout||this.connectionParameters.query_timeout,Q=new Aq($,X,Y),!Q.callback){let H,B;W=new this._Promise((q,O)=>{H=q,B=O}).catch((q)=>{throw Error.captureStackTrace(q),q}),Q.callback=(q,O)=>q?B(q):H(O)}if(J)U=Q.callback,G=setTimeout(()=>{let H=new Error("Query read timeout");process.nextTick(()=>{Q.handleError(H,this.connection)}),U(H),Q.callback=()=>{};let B=this._queryQueue.indexOf(Q);if(B>-1)this._queryQueue.splice(B,1);this._pulseQueryQueue()},J),Q.callback=(H,B)=>{clearTimeout(G),U(H,B)};if(!this._queryable)return Q.native=this.native,process.nextTick(()=>{Q.handleError(new Error("Client has encountered a connection error and is not queryable"))}),W;if(this._ending)return Q.native=this.native,process.nextTick(()=>{Q.handleError(new Error("Client was closed and is not queryable"))}),W;return this._queryQueue.push(Q),this._pulseQueryQueue(),W};B5.prototype.end=function($){let X=this;if(this._ending=!0,!this._connected)this.once("connect",this.end.bind(this,$));let Y;if(!$)Y=new this._Promise(function(Q,W){$=(J)=>J?W(J):Q()});return this.native.end(function(){X._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{if(X.emit("end"),$)$()})}),Y};B5.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};B5.prototype._pulseQueryQueue=function($){if(!this._connected)return;if(this._hasActiveQuery())return;let X=this._queryQueue.shift();if(!X){if(!$)this.emit("drain");return}this._activeQuery=X,X.submit(this);let Y=this;X.once("_done",function(){Y._pulseQueryQueue()})};B5.prototype.cancel=function($){if(this._activeQuery===$)this.native.cancel(function(){});else if(this._queryQueue.indexOf($)!==-1)this._queryQueue.splice(this._queryQueue.indexOf($),1)};B5.prototype.ref=function(){};B5.prototype.unref=function(){};B5.prototype.setTypeParser=function($,X,Y){return this._types.setTypeParser($,X,Y)};B5.prototype.getTypeParser=function($,X){return this._types.getTypeParser($,X)}});var nY=Q0((wn,u9)=>{var EC=Wq(),bC=h9(),IC=cY(),TC=gY(),xC=E4(),kC=Bq(),gC=F$(),{DatabaseError:fC}=dY(),{escapeIdentifier:vC,escapeLiteral:yC}=E4(),hC=($)=>{return class X extends kC{constructor(Y){super(Y,$)}}},sY=function($){this.defaults=bC,this.Client=$,this.Query=this.Client.Query,this.Pool=hC(this.Client),this._pools=[],this.Connection=IC,this.types=y9(),this.DatabaseError=fC,this.TypeOverrides=gC,this.escapeIdentifier=vC,this.escapeLiteral=yC,this.Result=TC,this.utils=xC};if(typeof process.env.NODE_PG_FORCE_NATIVE!=="undefined")u9.exports=new sY(rY());else u9.exports=new sY(EC),Object.defineProperty(u9.exports,"native",{configurable:!0,enumerable:!1,get(){let $=null;try{$=new sY(rY())}catch(X){if(X.code!=="MODULE_NOT_FOUND")throw X}return Object.defineProperty(u9.exports,"native",{value:$}),$}})});var x1={};f2(x1,{IsUndefined:()=>B1,IsUint8Array:()=>y2,IsSymbol:()=>f$,IsString:()=>y0,IsRegExp:()=>h4,IsObject:()=>I0,IsNumber:()=>O5,IsNull:()=>g$,IsIterator:()=>k$,IsFunction:()=>x$,IsDate:()=>a8,IsBoolean:()=>v2,IsBigInt:()=>y4,IsAsyncIterator:()=>T$,IsArray:()=>H1,HasPropertyKey:()=>l9});function l9($,X){return X in $}function T$($){return I0($)&&!H1($)&&!y2($)&&Symbol.asyncIterator in $}function H1($){return Array.isArray($)}function y4($){return typeof $==="bigint"}function v2($){return typeof $==="boolean"}function a8($){return $ instanceof globalThis.Date}function x$($){return typeof $==="function"}function k$($){return I0($)&&!H1($)&&!y2($)&&Symbol.iterator in $}function g$($){return $===null}function O5($){return typeof $==="number"}function I0($){return typeof $==="object"&&$!==null}function h4($){return $ instanceof globalThis.RegExp}function y0($){return typeof $==="string"}function f$($){return typeof $==="symbol"}function y2($){return $ instanceof globalThis.Uint8Array}function B1($){return $===void 0}function YN($){return $.map((X)=>p9(X))}function QN($){return new Date($.getTime())}function WN($){return new Uint8Array($)}function JN($){return new RegExp($.source,$.flags)}function GN($){let X={};for(let Y of Object.getOwnPropertyNames($))X[Y]=p9($[Y]);for(let Y of Object.getOwnPropertySymbols($))X[Y]=p9($[Y]);return X}function p9($){return H1($)?YN($):a8($)?QN($):y2($)?WN($):h4($)?JN($):I0($)?GN($):$}function p0($){return p9($)}function P6($,X){return X===void 0?p0($):p0({...X,...$})}function i9($){return G0($)&&globalThis.Symbol.asyncIterator in $}function n9($){return G0($)&&globalThis.Symbol.iterator in $}function v$($){return G0($)&&(globalThis.Object.getPrototypeOf($)===Object.prototype||globalThis.Object.getPrototypeOf($)===null)}function o9($){return $ instanceof globalThis.Promise}function m1($){return $ instanceof Date&&globalThis.Number.isFinite($.getTime())}function HQ($){return $ instanceof globalThis.Map}function BQ($){return $ instanceof globalThis.Set}function C5($){return globalThis.ArrayBuffer.isView($)}function V6($){return $ instanceof globalThis.Uint8Array}function e($,X){return X in $}function G0($){return $!==null&&typeof $==="object"}function $0($){return globalThis.Array.isArray($)&&!globalThis.ArrayBuffer.isView($)}function i0($){return $===void 0}function h2($){return $===null}function A2($){return typeof $==="boolean"}function r($){return typeof $==="number"}function r9($){return globalThis.Number.isInteger($)}function C1($){return typeof $==="bigint"}function L0($){return typeof $==="string"}function O8($){return typeof $==="function"}function d2($){return typeof $==="symbol"}function w5($){return C1($)||A2($)||h2($)||r($)||L0($)||d2($)||i0($)}var c0;(function($){$.InstanceMode="default",$.ExactOptionalPropertyTypes=!1,$.AllowArrayObject=!1,$.AllowNaN=!1,$.AllowNullVoid=!1;function X(G,U){return $.ExactOptionalPropertyTypes?U in G:G[U]!==void 0}$.IsExactOptionalProperty=X;function Y(G){let U=G0(G);return $.AllowArrayObject?U:U&&!$0(G)}$.IsObjectLike=Y;function Q(G){return Y(G)&&!(G instanceof Date)&&!(G instanceof Uint8Array)}$.IsRecordLike=Q;function W(G){return $.AllowNaN?r(G):Number.isFinite(G)}$.IsNumberLike=W;function J(G){let U=i0(G);return $.AllowNullVoid?U||G===null:U}$.IsVoidLike=J})(c0||(c0={}));function MN($){return globalThis.Object.freeze($).map((X)=>d4(X))}function UN($){return $}function HN($){return $}function BN($){return $}function qN($){let X={};for(let Y of Object.getOwnPropertyNames($))X[Y]=d4($[Y]);for(let Y of Object.getOwnPropertySymbols($))X[Y]=d4($[Y]);return globalThis.Object.freeze(X)}function d4($){return H1($)?MN($):a8($)?UN($):y2($)?HN($):h4($)?BN($):I0($)?qN($):$}function V($,X){let Y=X!==void 0?{...X,...$}:$;switch(c0.InstanceMode){case"freeze":return d4(Y);case"clone":return p0(Y);default:return Y}}class t extends Error{constructor($){super($)}}var k0=Symbol.for("TypeBox.Transform"),u5=Symbol.for("TypeBox.Readonly"),q1=Symbol.for("TypeBox.Optional"),E5=Symbol.for("TypeBox.Hint"),F=Symbol.for("TypeBox.Kind");function C6($){return I0($)&&$[u5]==="Readonly"}function r1($){return I0($)&&$[q1]==="Optional"}function y$($){return A0($,"Any")}function h$($){return A0($,"Argument")}function l5($){return A0($,"Array")}function e8($){return A0($,"AsyncIterator")}function $6($){return A0($,"BigInt")}function c2($){return A0($,"Boolean")}function p5($){return A0($,"Computed")}function i5($){return A0($,"Constructor")}function NN($){return A0($,"Date")}function n5($){return A0($,"Function")}function o5($){return A0($,"Integer")}function e0($){return A0($,"Intersect")}function X6($){return A0($,"Iterator")}function A0($,X){return I0($)&&F in $&&$[F]===X}function s9($){return v2($)||O5($)||y0($)}function A5($){return A0($,"Literal")}function Z5($){return A0($,"MappedKey")}function n0($){return A0($,"MappedResult")}function w8($){return A0($,"Never")}function zN($){return A0($,"Not")}function c4($){return A0($,"Null")}function r5($){return A0($,"Number")}function N1($){return A0($,"Object")}function Y6($){return A0($,"Promise")}function Q6($){return A0($,"Record")}function M1($){return A0($,"Ref")}function d$($){return A0($,"RegExp")}function m2($){return A0($,"String")}function m4($){return A0($,"Symbol")}function L5($){return A0($,"TemplateLiteral")}function ON($){return A0($,"This")}function R0($){return I0($)&&k0 in $}function j5($){return A0($,"Tuple")}function u2($){return A0($,"Undefined")}function j0($){return A0($,"Union")}function wN($){return A0($,"Uint8Array")}function AN($){return A0($,"Unknown")}function ZN($){return A0($,"Unsafe")}function LN($){return A0($,"Void")}function A8($){return I0($)&&F in $&&y0($[F])}function s0($){return y$($)||h$($)||l5($)||c2($)||$6($)||e8($)||p5($)||i5($)||NN($)||n5($)||o5($)||e0($)||X6($)||A5($)||Z5($)||n0($)||w8($)||zN($)||c4($)||r5($)||N1($)||Y6($)||Q6($)||M1($)||d$($)||m2($)||m4($)||L5($)||ON($)||j5($)||u2($)||j0($)||wN($)||AN($)||ZN($)||LN($)||A8($)}var j={};f2(j,{TypeGuardUnknownTypeError:()=>qQ,IsVoid:()=>aQ,IsUnsafe:()=>tQ,IsUnknown:()=>sQ,IsUnionLiteral:()=>VN,IsUnion:()=>u$,IsUndefined:()=>oQ,IsUint8Array:()=>rQ,IsTuple:()=>nQ,IsTransform:()=>iQ,IsThis:()=>pQ,IsTemplateLiteral:()=>lQ,IsSymbol:()=>uQ,IsString:()=>mQ,IsSchema:()=>o0,IsRegExp:()=>cQ,IsRef:()=>dQ,IsRecursive:()=>PN,IsRecord:()=>hQ,IsReadonly:()=>SN,IsProperties:()=>t9,IsPromise:()=>yQ,IsOptional:()=>DN,IsObject:()=>vQ,IsNumber:()=>fQ,IsNull:()=>gQ,IsNot:()=>kQ,IsNever:()=>xQ,IsMappedResult:()=>TQ,IsMappedKey:()=>IQ,IsLiteralValue:()=>bQ,IsLiteralString:()=>CQ,IsLiteralNumber:()=>EQ,IsLiteralBoolean:()=>RN,IsLiteral:()=>l4,IsKindOf:()=>H0,IsKind:()=>eQ,IsIterator:()=>VQ,IsIntersect:()=>PQ,IsInteger:()=>RQ,IsImport:()=>_N,IsFunction:()=>_Q,IsDate:()=>DQ,IsConstructor:()=>SQ,IsComputed:()=>FQ,IsBoolean:()=>KQ,IsBigInt:()=>jQ,IsAsyncIterator:()=>LQ,IsArray:()=>ZQ,IsArgument:()=>AQ,IsAny:()=>wQ});class qQ extends t{}var jN=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function NQ($){try{return new RegExp($),!0}catch{return!1}}function c$($){if(!y0($))return!1;for(let X=0;X<$.length;X++){let Y=$.charCodeAt(X);if(Y>=7&&Y<=13||Y===27||Y===127)return!1}return!0}function zQ($){return m$($)||o0($)}function u4($){return B1($)||y4($)}function h0($){return B1($)||O5($)}function m$($){return B1($)||v2($)}function T0($){return B1($)||y0($)}function KN($){return B1($)||y0($)&&c$($)&&NQ($)}function FN($){return B1($)||y0($)&&c$($)}function OQ($){return B1($)||o0($)}function SN($){return I0($)&&$[u5]==="Readonly"}function DN($){return I0($)&&$[q1]==="Optional"}function wQ($){return H0($,"Any")&&T0($.$id)}function AQ($){return H0($,"Argument")&&O5($.index)}function ZQ($){return H0($,"Array")&&$.type==="array"&&T0($.$id)&&o0($.items)&&h0($.minItems)&&h0($.maxItems)&&m$($.uniqueItems)&&OQ($.contains)&&h0($.minContains)&&h0($.maxContains)}function LQ($){return H0($,"AsyncIterator")&&$.type==="AsyncIterator"&&T0($.$id)&&o0($.items)}function jQ($){return H0($,"BigInt")&&$.type==="bigint"&&T0($.$id)&&u4($.exclusiveMaximum)&&u4($.exclusiveMinimum)&&u4($.maximum)&&u4($.minimum)&&u4($.multipleOf)}function KQ($){return H0($,"Boolean")&&$.type==="boolean"&&T0($.$id)}function FQ($){return H0($,"Computed")&&y0($.target)&&H1($.parameters)&&$.parameters.every((X)=>o0(X))}function SQ($){return H0($,"Constructor")&&$.type==="Constructor"&&T0($.$id)&&H1($.parameters)&&$.parameters.every((X)=>o0(X))&&o0($.returns)}function DQ($){return H0($,"Date")&&$.type==="Date"&&T0($.$id)&&h0($.exclusiveMaximumTimestamp)&&h0($.exclusiveMinimumTimestamp)&&h0($.maximumTimestamp)&&h0($.minimumTimestamp)&&h0($.multipleOfTimestamp)}function _Q($){return H0($,"Function")&&$.type==="Function"&&T0($.$id)&&H1($.parameters)&&$.parameters.every((X)=>o0(X))&&o0($.returns)}function _N($){return H0($,"Import")&&l9($,"$defs")&&I0($.$defs)&&t9($.$defs)&&l9($,"$ref")&&y0($.$ref)&&$.$ref in $.$defs}function RQ($){return H0($,"Integer")&&$.type==="integer"&&T0($.$id)&&h0($.exclusiveMaximum)&&h0($.exclusiveMinimum)&&h0($.maximum)&&h0($.minimum)&&h0($.multipleOf)}function t9($){return I0($)&&Object.entries($).every(([X,Y])=>c$(X)&&o0(Y))}function PQ($){return H0($,"Intersect")&&(y0($.type)&&$.type!=="object"?!1:!0)&&H1($.allOf)&&$.allOf.every((X)=>o0(X)&&!iQ(X))&&T0($.type)&&(m$($.unevaluatedProperties)||OQ($.unevaluatedProperties))&&T0($.$id)}function VQ($){return H0($,"Iterator")&&$.type==="Iterator"&&T0($.$id)&&o0($.items)}function H0($,X){return I0($)&&F in $&&$[F]===X}function CQ($){return l4($)&&y0($.const)}function EQ($){return l4($)&&O5($.const)}function RN($){return l4($)&&v2($.const)}function l4($){return H0($,"Literal")&&T0($.$id)&&bQ($.const)}function bQ($){return v2($)||O5($)||y0($)}function IQ($){return H0($,"MappedKey")&&H1($.keys)&&$.keys.every((X)=>O5(X)||y0(X))}function TQ($){return H0($,"MappedResult")&&t9($.properties)}function xQ($){return H0($,"Never")&&I0($.not)&&Object.getOwnPropertyNames($.not).length===0}function kQ($){return H0($,"Not")&&o0($.not)}function gQ($){return H0($,"Null")&&$.type==="null"&&T0($.$id)}function fQ($){return H0($,"Number")&&$.type==="number"&&T0($.$id)&&h0($.exclusiveMaximum)&&h0($.exclusiveMinimum)&&h0($.maximum)&&h0($.minimum)&&h0($.multipleOf)}function vQ($){return H0($,"Object")&&$.type==="object"&&T0($.$id)&&t9($.properties)&&zQ($.additionalProperties)&&h0($.minProperties)&&h0($.maxProperties)}function yQ($){return H0($,"Promise")&&$.type==="Promise"&&T0($.$id)&&o0($.item)}function hQ($){return H0($,"Record")&&$.type==="object"&&T0($.$id)&&zQ($.additionalProperties)&&I0($.patternProperties)&&((X)=>{let Y=Object.getOwnPropertyNames(X.patternProperties);return Y.length===1&&NQ(Y[0])&&I0(X.patternProperties)&&o0(X.patternProperties[Y[0]])})($)}function PN($){return I0($)&&E5 in $&&$[E5]==="Recursive"}function dQ($){return H0($,"Ref")&&T0($.$id)&&y0($.$ref)}function cQ($){return H0($,"RegExp")&&T0($.$id)&&y0($.source)&&y0($.flags)&&h0($.maxLength)&&h0($.minLength)}function mQ($){return H0($,"String")&&$.type==="string"&&T0($.$id)&&h0($.minLength)&&h0($.maxLength)&&KN($.pattern)&&FN($.format)}function uQ($){return H0($,"Symbol")&&$.type==="symbol"&&T0($.$id)}function lQ($){return H0($,"TemplateLiteral")&&$.type==="string"&&y0($.pattern)&&$.pattern[0]==="^"&&$.pattern[$.pattern.length-1]==="$"}function pQ($){return H0($,"This")&&T0($.$id)&&y0($.$ref)}function iQ($){return I0($)&&k0 in $}function nQ($){return H0($,"Tuple")&&$.type==="array"&&T0($.$id)&&O5($.minItems)&&O5($.maxItems)&&$.minItems===$.maxItems&&(B1($.items)&&B1($.additionalItems)&&$.minItems===0||H1($.items)&&$.items.every((X)=>o0(X)))}function oQ($){return H0($,"Undefined")&&$.type==="undefined"&&T0($.$id)}function VN($){return u$($)&&$.anyOf.every((X)=>CQ(X)||EQ(X))}function u$($){return H0($,"Union")&&T0($.$id)&&I0($)&&H1($.anyOf)&&$.anyOf.every((X)=>o0(X))}function rQ($){return H0($,"Uint8Array")&&$.type==="Uint8Array"&&T0($.$id)&&h0($.minByteLength)&&h0($.maxByteLength)}function sQ($){return H0($,"Unknown")&&T0($.$id)}function tQ($){return H0($,"Unsafe")}function aQ($){return H0($,"Void")&&$.type==="void"&&T0($.$id)}function eQ($){return I0($)&&F in $&&y0($[F])&&!jN.includes($[F])}function o0($){return I0($)&&(wQ($)||AQ($)||ZQ($)||KQ($)||jQ($)||LQ($)||FQ($)||SQ($)||DQ($)||_Q($)||RQ($)||PQ($)||VQ($)||l4($)||IQ($)||TQ($)||xQ($)||kQ($)||gQ($)||fQ($)||vQ($)||yQ($)||hQ($)||dQ($)||cQ($)||mQ($)||uQ($)||lQ($)||pQ($)||nQ($)||oQ($)||u$($)||rQ($)||sQ($)||tQ($)||aQ($)||eQ($))}var $W="(true|false)",a9="(0|[1-9][0-9]*)",XW="(.*)";var Z2="^(0|[1-9][0-9]*)$",L2="^(.*)$",YW="^(?!.*)$";var b0={};f2(b0,{Set:()=>TN,Has:()=>IN,Get:()=>xN,Entries:()=>CN,Delete:()=>bN,Clear:()=>EN});var E6=new Map;function CN(){return new Map(E6)}function EN(){return E6.clear()}function bN($){return E6.delete($)}function IN($){return E6.has($)}function TN($,X){E6.set($,X)}function xN($){return E6.get($)}var L1={};f2(L1,{Set:()=>yN,Has:()=>vN,Get:()=>hN,Entries:()=>kN,Delete:()=>fN,Clear:()=>gN});var b6=new Map;function kN(){return new Map(b6)}function gN(){return b6.clear()}function fN($){return b6.delete($)}function vN($){return b6.has($)}function yN($,X){b6.set($,X)}function hN($){return b6.get($)}function QW($,X){return $.includes(X)}function WW($){return[...new Set($)]}function dN($,X){return $.filter((Y)=>X.includes(Y))}function cN($,X){return $.reduce((Y,Q)=>{return dN(Y,Q)},X)}function JW($){return $.length===1?$[0]:$.length>1?cN($.slice(1),$[0]):[]}function GW($){let X=[];for(let Y of $)X.push(...Y);return X}function Z8($){return V({[F]:"Any"},$)}function I6($,X){return V({[F]:"Array",type:"array",items:$},X)}function MW($){return V({[F]:"Argument",index:$})}function T6($,X){return V({[F]:"AsyncIterator",type:"AsyncIterator",items:$},X)}function m0($,X,Y){return V({[F]:"Computed",target:$,parameters:X},Y)}function mN($,X){let{[X]:Y,...Q}=$;return Q}function $1($,X){return X.reduce((Y,Q)=>mN(Y,Q),$)}function J0($){return V({[F]:"Never",not:{}},$)}function K0($){return V({[F]:"MappedResult",properties:$})}function x6($,X,Y){return V({[F]:"Constructor",type:"Constructor",parameters:$,returns:X},Y)}function j2($,X,Y){return V({[F]:"Function",type:"Function",parameters:$,returns:X},Y)}function p4($,X){return V({[F]:"Union",anyOf:$},X)}function uN($){return $.some((X)=>r1(X))}function UW($){return $.map((X)=>r1(X)?lN(X):X)}function lN($){return $1($,[q1])}function pN($,X){return uN($)?k1(p4(UW($),X)):p4(UW($),X)}function K2($,X){return $.length===1?V($[0],X):$.length===0?J0(X):pN($,X)}function P0($,X){return $.length===0?J0(X):$.length===1?V($[0],X):p4($,X)}class l$ extends t{}function iN($){return $.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}function p$($,X,Y){return $[X]===Y&&$.charCodeAt(X-1)!==92}function p2($,X){return p$($,X,"(")}function i4($,X){return p$($,X,")")}function HW($,X){return p$($,X,"|")}function nN($){if(!(p2($,0)&&i4($,$.length-1)))return!1;let X=0;for(let Y=0;Y<$.length;Y++){if(p2($,Y))X+=1;if(i4($,Y))X-=1;if(X===0&&Y!==$.length-1)return!1}return!0}function oN($){return $.slice(1,$.length-1)}function rN($){let X=0;for(let Y=0;Y<$.length;Y++){if(p2($,Y))X+=1;if(i4($,Y))X-=1;if(HW($,Y)&&X===0)return!0}return!1}function sN($){for(let X=0;X<$.length;X++)if(p2($,X))return!0;return!1}function tN($){let[X,Y]=[0,0],Q=[];for(let J=0;J<$.length;J++){if(p2($,J))X+=1;if(i4($,J))X-=1;if(HW($,J)&&X===0){let G=$.slice(Y,J);if(G.length>0)Q.push(k6(G));Y=J+1}}let W=$.slice(Y);if(W.length>0)Q.push(k6(W));if(Q.length===0)return{type:"const",const:""};if(Q.length===1)return Q[0];return{type:"or",expr:Q}}function aN($){function X(W,J){if(!p2(W,J))throw new l$("TemplateLiteralParser: Index must point to open parens");let G=0;for(let U=J;U<W.length;U++){if(p2(W,U))G+=1;if(i4(W,U))G-=1;if(G===0)return[J,U]}throw new l$("TemplateLiteralParser: Unclosed group parens in expression")}function Y(W,J){for(let G=J;G<W.length;G++)if(p2(W,G))return[J,G];return[J,W.length]}let Q=[];for(let W=0;W<$.length;W++)if(p2($,W)){let[J,G]=X($,W),U=$.slice(J,G+1);Q.push(k6(U)),W=G}else{let[J,G]=Y($,W),U=$.slice(J,G);if(U.length>0)Q.push(k6(U));W=G-1}return Q.length===0?{type:"const",const:""}:Q.length===1?Q[0]:{type:"and",expr:Q}}function k6($){return nN($)?k6(oN($)):rN($)?tN($):sN($)?aN($):{type:"const",const:iN($)}}function g6($){return k6($.slice(1,$.length-1))}class BW extends t{}function eN($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="0"&&$.expr[1].type==="const"&&$.expr[1].const==="[1-9][0-9]*"}function $z($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="true"&&$.expr[1].type==="const"&&$.expr[1].const==="false"}function Xz($){return $.type==="const"&&$.const===".*"}function W6($){return eN($)||Xz($)?!1:$z($)?!0:$.type==="and"?$.expr.every((X)=>W6(X)):$.type==="or"?$.expr.every((X)=>W6(X)):$.type==="const"?!0:(()=>{throw new BW("Unknown expression type")})()}function e9($){let X=g6($.pattern);return W6(X)}class qW extends t{}function*NW($){if($.length===1)return yield*$[0];for(let X of $[0])for(let Y of NW($.slice(1)))yield`${X}${Y}`}function*Yz($){return yield*NW($.expr.map((X)=>[...n4(X)]))}function*Qz($){for(let X of $.expr)yield*n4(X)}function*Wz($){return yield $.const}function*n4($){return $.type==="and"?yield*Yz($):$.type==="or"?yield*Qz($):$.type==="const"?yield*Wz($):(()=>{throw new qW("Unknown expression")})()}function f6($){let X=g6($.pattern);return W6(X)?[...n4(X)]:[]}function Z0($,X){return V({[F]:"Literal",const:$,type:typeof $},X)}function $7($){return V({[F]:"Boolean",type:"boolean"},$)}function v6($){return V({[F]:"BigInt",type:"bigint"},$)}function b5($){return V({[F]:"Number",type:"number"},$)}function u1($){return V({[F]:"String",type:"string"},$)}function*Jz($){let X=$.trim().replace(/"|'/g,"");return X==="boolean"?yield $7():X==="number"?yield b5():X==="bigint"?yield v6():X==="string"?yield u1():yield(()=>{let Y=X.split("|").map((Q)=>Z0(Q.trim()));return Y.length===0?J0():Y.length===1?Y[0]:K2(Y)})()}function*Gz($){if($[1]!=="{"){let X=Z0("$"),Y=i$($.slice(1));return yield*[X,...Y]}for(let X=2;X<$.length;X++)if($[X]==="}"){let Y=Jz($.slice(2,X)),Q=i$($.slice(X+1));return yield*[...Y,...Q]}yield Z0($)}function*i$($){for(let X=0;X<$.length;X++)if($[X]==="$"){let Y=Z0($.slice(0,X)),Q=Gz($.slice(X));return yield*[Y,...Q]}yield Z0($)}function zW($){return[...i$($)]}class OW extends t{}function Mz($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function wW($,X){return L5($)?$.pattern.slice(1,$.pattern.length-1):j0($)?`(${$.anyOf.map((Y)=>wW(Y,X)).join("|")})`:r5($)?`${X}${a9}`:o5($)?`${X}${a9}`:$6($)?`${X}${a9}`:m2($)?`${X}${XW}`:A5($)?`${X}${Mz($.const.toString())}`:c2($)?`${X}${$W}`:(()=>{throw new OW(`Unexpected Kind '${$[F]}'`)})()}function n$($){return`^${$.map((X)=>wW(X,"")).join("")}$`}function J6($){let Y=f6($).map((Q)=>Z0(Q));return K2(Y)}function X7($,X){let Y=y0($)?n$(zW($)):n$($);return V({[F]:"TemplateLiteral",type:"string",pattern:Y},X)}function Uz($){return f6($).map((Y)=>Y.toString())}function Hz($){let X=[];for(let Y of $)X.push(...s1(Y));return X}function Bz($){return[$.toString()]}function s1($){return[...new Set(L5($)?Uz($):j0($)?Hz($.anyOf):A5($)?Bz($.const):r5($)?["[number]"]:o5($)?["[number]"]:[])]}function qz($,X,Y){let Q={};for(let W of Object.getOwnPropertyNames(X))Q[W]=L8($,s1(X[W]),Y);return Q}function Nz($,X,Y){return qz($,X.properties,Y)}function AW($,X,Y){let Q=Nz($,X,Y);return K0(Q)}function LW($,X){return $.map((Y)=>jW(Y,X))}function zz($){return $.filter((X)=>!w8(X))}function Oz($,X){return Y7(zz(LW($,X)))}function wz($){return $.some((X)=>w8(X))?[]:$}function Az($,X){return K2(wz(LW($,X)))}function Zz($,X){return X in $?$[X]:X==="[number]"?K2($):J0()}function Lz($,X){return X==="[number]"?$:J0()}function jz($,X){return X in $?$[X]:J0()}function jW($,X){return e0($)?Oz($.allOf,X):j0($)?Az($.anyOf,X):j5($)?Zz($.items??[],X):l5($)?Lz($.items,X):N1($)?jz($.properties,X):J0()}function o4($,X){return X.map((Y)=>jW($,Y))}function ZW($,X){return K2(o4($,X))}function L8($,X,Y){if(M1($)||M1(X)){if(!s0($)||!s0(X))throw new t("Index types using Ref parameters require both Type and Key to be of TSchema");return m0("Index",[$,X])}if(n0(X))return AW($,X,Y);if(Z5(X))return KW($,X,Y);return V(s0(X)?ZW($,s1(X)):ZW($,X),Y)}function Kz($,X,Y){return{[X]:L8($,[X],p0(Y))}}function Fz($,X,Y){return X.reduce((Q,W)=>{return{...Q,...Kz($,W,Y)}},{})}function Sz($,X,Y){return Fz($,X.keys,Y)}function KW($,X,Y){let Q=Sz($,X,Y);return K0(Q)}function y6($,X){return V({[F]:"Iterator",type:"Iterator",items:$},X)}function Dz($){let X=[];for(let Y in $)if(!r1($[Y]))X.push(Y);return X}function _z($,X){let Y=Dz($),Q=Y.length>0?{[F]:"Object",type:"object",properties:$,required:Y}:{[F]:"Object",type:"object",properties:$};return V(Q,X)}var V0=_z;function Q7($,X){return V({[F]:"Promise",type:"Promise",item:$},X)}function Rz($){return V($1($,[u5]))}function Pz($){return V({...$,[u5]:"Readonly"})}function Vz($,X){return X===!1?Rz($):Pz($)}function t1($,X){let Y=X??!0;return n0($)?FW($,Y):Vz($,Y)}function Cz($,X){let Y={};for(let Q of globalThis.Object.getOwnPropertyNames($))Y[Q]=t1($[Q],X);return Y}function Ez($,X){return Cz($.properties,X)}function FW($,X){let Y=Ez($,X);return K0(Y)}function I5($,X){return V($.length>0?{[F]:"Tuple",type:"array",items:$,additionalItems:!1,minItems:$.length,maxItems:$.length}:{[F]:"Tuple",type:"array",minItems:$.length,maxItems:$.length},X)}function SW($,X){return $ in X?T5($,X[$]):K0(X)}function bz($){return{[$]:Z0($)}}function Iz($){let X={};for(let Y of $)X[Y]=Z0(Y);return X}function Tz($,X){return QW(X,$)?bz($):Iz(X)}function xz($,X){let Y=Tz($,X);return SW($,Y)}function r4($,X){return X.map((Y)=>T5($,Y))}function kz($,X){let Y={};for(let Q of globalThis.Object.getOwnPropertyNames(X))Y[Q]=T5($,X[Q]);return Y}function T5($,X){let Y={...X};return r1(X)?k1(T5($,$1(X,[q1]))):C6(X)?t1(T5($,$1(X,[u5]))):n0(X)?SW($,X.properties):Z5(X)?xz($,X.keys):i5(X)?x6(r4($,X.parameters),T5($,X.returns),Y):n5(X)?j2(r4($,X.parameters),T5($,X.returns),Y):e8(X)?T6(T5($,X.items),Y):X6(X)?y6(T5($,X.items),Y):e0(X)?g1(r4($,X.allOf),Y):j0(X)?P0(r4($,X.anyOf),Y):j5(X)?I5(r4($,X.items??[]),Y):N1(X)?V0(kz($,X.properties),Y):l5(X)?I6(T5($,X.items),Y):Y6(X)?Q7(T5($,X.item),Y):X}function gz($,X){let Y={};for(let Q of $)Y[Q]=T5(Q,X);return Y}function DW($,X,Y){let Q=s0($)?s1($):$,W=X({[F]:"MappedKey",keys:Q}),J=gz(Q,W);return V0(J,Y)}function fz($){return V($1($,[q1]))}function vz($){return V({...$,[q1]:"Optional"})}function yz($,X){return X===!1?fz($):vz($)}function k1($,X){let Y=X??!0;return n0($)?_W($,Y):yz($,Y)}function hz($,X){let Y={};for(let Q of globalThis.Object.getOwnPropertyNames($))Y[Q]=k1($[Q],X);return Y}function dz($,X){return hz($.properties,X)}function _W($,X){let Y=dz($,X);return K0(Y)}function s4($,X={}){let Y=$.every((W)=>N1(W)),Q=s0(X.unevaluatedProperties)?{unevaluatedProperties:X.unevaluatedProperties}:{};return V(X.unevaluatedProperties===!1||s0(X.unevaluatedProperties)||Y?{...Q,[F]:"Intersect",type:"object",allOf:$}:{...Q,[F]:"Intersect",allOf:$},X)}function cz($){return $.every((X)=>r1(X))}function mz($){return $1($,[q1])}function RW($){return $.map((X)=>r1(X)?mz(X):X)}function uz($,X){return cz($)?k1(s4(RW($),X)):s4(RW($),X)}function Y7($,X={}){if($.length===1)return V($[0],X);if($.length===0)return J0(X);if($.some((Y)=>R0(Y)))throw new Error("Cannot intersect transform types");return uz($,X)}function g1($,X){if($.length===1)return V($[0],X);if($.length===0)return J0(X);if($.some((Y)=>R0(Y)))throw new Error("Cannot intersect transform types");return s4($,X)}function x5(...$){let[X,Y]=typeof $[0]==="string"?[$[0],$[1]]:[$[0].$id,$[1]];if(typeof X!=="string")throw new t("Ref: $ref must be a string");return V({[F]:"Ref",$ref:X},Y)}function lz($,X){return m0("Awaited",[m0($,X)])}function pz($){return m0("Awaited",[x5($)])}function iz($){return g1(PW($))}function nz($){return P0(PW($))}function oz($){return h6($)}function PW($){return $.map((X)=>h6(X))}function h6($,X){return V(p5($)?lz($.target,$.parameters):e0($)?iz($.allOf):j0($)?nz($.anyOf):Y6($)?oz($.item):M1($)?pz($.$ref):$,X)}function VW($){let X=[];for(let Y of $)X.push(a1(Y));return X}function rz($){let X=VW($);return GW(X)}function sz($){let X=VW($);return JW(X)}function tz($){return $.map((X,Y)=>Y.toString())}function az($){return["[number]"]}function ez($){return globalThis.Object.getOwnPropertyNames($)}function $O($){if(!o$)return[];return globalThis.Object.getOwnPropertyNames($).map((Y)=>{return Y[0]==="^"&&Y[Y.length-1]==="$"?Y.slice(1,Y.length-1):Y})}function a1($){return e0($)?rz($.allOf):j0($)?sz($.anyOf):j5($)?tz($.items??[]):l5($)?az($.items):N1($)?ez($.properties):Q6($)?$O($.patternProperties):[]}var o$=!1;function i2($){o$=!0;let X=a1($);return o$=!1,`^(${X.map((Q)=>`(${Q})`).join("|")})$`}function XO($,X){return m0("KeyOf",[m0($,X)])}function YO($){return m0("KeyOf",[x5($)])}function QO($,X){let Y=a1($),Q=WO(Y),W=K2(Q);return V(W,X)}function WO($){return $.map((X)=>X==="[number]"?b5():Z0(X))}function d6($,X){return p5($)?XO($.target,$.parameters):M1($)?YO($.$ref):n0($)?CW($,X):QO($,X)}function JO($,X){let Y={};for(let Q of globalThis.Object.getOwnPropertyNames($))Y[Q]=d6($[Q],p0(X));return Y}function GO($,X){return JO($.properties,X)}function CW($,X){let Y=GO($,X);return K0(Y)}function W7($){let X=a1($),Y=o4($,X);return X.map((Q,W)=>[X[W],Y[W]])}function MO($){let X=[];for(let Y of $)X.push(...a1(Y));return WW(X)}function UO($){return $.filter((X)=>!w8(X))}function HO($,X){let Y=[];for(let Q of $)Y.push(...o4(Q,[X]));return UO(Y)}function BO($,X){let Y={};for(let Q of X)Y[Q]=Y7(HO($,Q));return Y}function EW($,X){let Y=MO($),Q=BO($,Y);return V0(Q,X)}function J7($){return V({[F]:"Date",type:"Date"},$)}function G7($){return V({[F]:"Null",type:"null"},$)}function M7($){return V({[F]:"Symbol",type:"symbol"},$)}function U7($){return V({[F]:"Undefined",type:"undefined"},$)}function H7($){return V({[F]:"Uint8Array",type:"Uint8Array"},$)}function s5($){return V({[F]:"Unknown"},$)}function qO($){return $.map((X)=>r$(X,!1))}function NO($){let X={};for(let Y of globalThis.Object.getOwnPropertyNames($))X[Y]=t1(r$($[Y],!1));return X}function B7($,X){return X===!0?$:t1($)}function r$($,X){return T$($)?B7(Z8(),X):k$($)?B7(Z8(),X):H1($)?t1(I5(qO($))):y2($)?H7():a8($)?J7():I0($)?B7(V0(NO($)),X):x$($)?B7(j2([],s5()),X):B1($)?U7():g$($)?G7():f$($)?M7():y4($)?v6():O5($)?Z0($):v2($)?Z0($):y0($)?Z0($):V0({})}function bW($,X){return V(r$($,!0),X)}function IW($,X){return i5($)?I5($.parameters,X):J0(X)}function TW($,X){if(B1($))throw new Error("Enum undefined or empty");let Y=globalThis.Object.getOwnPropertyNames($).filter((J)=>isNaN(J)).map((J)=>$[J]),W=[...new Set(Y)].map((J)=>Z0(J));return P0(W,{...X,[E5]:"Enum"})}class vW extends t{}var C;(function($){$[$.Union=0]="Union",$[$.True=1]="True",$[$.False=2]="False"})(C||(C={}));function k5($){return $===C.False?$:C.True}function c6($){throw new vW($)}function w1($){return j.IsNever($)||j.IsIntersect($)||j.IsUnion($)||j.IsUnknown($)||j.IsAny($)}function A1($,X){return j.IsNever(X)?dW($,X):j.IsIntersect(X)?q7($,X):j.IsUnion(X)?$X($,X):j.IsUnknown(X)?lW($,X):j.IsAny(X)?e$($,X):c6("StructuralRight")}function e$($,X){return C.True}function zO($,X){return j.IsIntersect(X)?q7($,X):j.IsUnion(X)&&X.anyOf.some((Y)=>j.IsAny(Y)||j.IsUnknown(Y))?C.True:j.IsUnion(X)?C.Union:j.IsUnknown(X)?C.True:j.IsAny(X)?C.True:C.Union}function OO($,X){return j.IsUnknown($)?C.False:j.IsAny($)?C.Union:j.IsNever($)?C.True:C.False}function wO($,X){return j.IsObject(X)&&N7(X)?C.True:w1(X)?A1($,X):!j.IsArray(X)?C.False:k5(x0($.items,X.items))}function AO($,X){return w1(X)?A1($,X):!j.IsAsyncIterator(X)?C.False:k5(x0($.items,X.items))}function ZO($,X){return w1(X)?A1($,X):j.IsObject(X)?f1($,X):j.IsRecord(X)?g5($,X):j.IsBigInt(X)?C.True:C.False}function yW($,X){return j.IsLiteralBoolean($)?C.True:j.IsBoolean($)?C.True:C.False}function LO($,X){return w1(X)?A1($,X):j.IsObject(X)?f1($,X):j.IsRecord(X)?g5($,X):j.IsBoolean(X)?C.True:C.False}function jO($,X){return w1(X)?A1($,X):j.IsObject(X)?f1($,X):!j.IsConstructor(X)?C.False:$.parameters.length>X.parameters.length?C.False:!$.parameters.every((Y,Q)=>k5(x0(X.parameters[Q],Y))===C.True)?C.False:k5(x0($.returns,X.returns))}function KO($,X){return w1(X)?A1($,X):j.IsObject(X)?f1($,X):j.IsRecord(X)?g5($,X):j.IsDate(X)?C.True:C.False}function FO($,X){return w1(X)?A1($,X):j.IsObject(X)?f1($,X):!j.IsFunction(X)?C.False:$.parameters.length>X.parameters.length?C.False:!$.parameters.every((Y,Q)=>k5(x0(X.parameters[Q],Y))===C.True)?C.False:k5(x0($.returns,X.returns))}function hW($,X){return j.IsLiteral($)&&x1.IsNumber($.const)?C.True:j.IsNumber($)||j.IsInteger($)?C.True:C.False}function SO($,X){return j.IsInteger(X)||j.IsNumber(X)?C.True:w1(X)?A1($,X):j.IsObject(X)?f1($,X):j.IsRecord(X)?g5($,X):C.False}function q7($,X){return X.allOf.every((Y)=>x0($,Y)===C.True)?C.True:C.False}function DO($,X){return $.allOf.some((Y)=>x0(Y,X)===C.True)?C.True:C.False}function _O($,X){return w1(X)?A1($,X):!j.IsIterator(X)?C.False:k5(x0($.items,X.items))}function RO($,X){return j.IsLiteral(X)&&X.const===$.const?C.True:w1(X)?A1($,X):j.IsObject(X)?f1($,X):j.IsRecord(X)?g5($,X):j.IsString(X)?uW($,X):j.IsNumber(X)?cW($,X):j.IsInteger(X)?hW($,X):j.IsBoolean(X)?yW($,X):C.False}function dW($,X){return C.False}function PO($,X){return C.True}function xW($){let[X,Y]=[$,0];while(!0){if(!j.IsNot(X))break;X=X.not,Y+=1}return Y%2===0?X:s5()}function VO($,X){return j.IsNot($)?x0(xW($),X):j.IsNot(X)?x0($,xW(X)):c6("Invalid fallthrough for Not")}function CO($,X){return w1(X)?A1($,X):j.IsObject(X)?f1($,X):j.IsRecord(X)?g5($,X):j.IsNull(X)?C.True:C.False}function cW($,X){return j.IsLiteralNumber($)?C.True:j.IsNumber($)||j.IsInteger($)?C.True:C.False}function EO($,X){return w1(X)?A1($,X):j.IsObject(X)?f1($,X):j.IsRecord(X)?g5($,X):j.IsInteger(X)||j.IsNumber(X)?C.True:C.False}function e1($,X){return Object.getOwnPropertyNames($.properties).length===X}function kW($){return N7($)}function gW($){return e1($,0)||e1($,1)&&"description"in $.properties&&j.IsUnion($.properties.description)&&$.properties.description.anyOf.length===2&&(j.IsString($.properties.description.anyOf[0])&&j.IsUndefined($.properties.description.anyOf[1])||j.IsString($.properties.description.anyOf[1])&&j.IsUndefined($.properties.description.anyOf[0]))}function s$($){return e1($,0)}function fW($){return e1($,0)}function bO($){return e1($,0)}function IO($){return e1($,0)}function TO($){return N7($)}function xO($){let X=b5();return e1($,0)||e1($,1)&&"length"in $.properties&&k5(x0($.properties.length,X))===C.True}function kO($){return e1($,0)}function N7($){let X=b5();return e1($,0)||e1($,1)&&"length"in $.properties&&k5(x0($.properties.length,X))===C.True}function gO($){let X=j2([Z8()],Z8());return e1($,0)||e1($,1)&&"then"in $.properties&&k5(x0($.properties.then,X))===C.True}function mW($,X){return x0($,X)===C.False?C.False:j.IsOptional($)&&!j.IsOptional(X)?C.False:C.True}function f1($,X){return j.IsUnknown($)?C.False:j.IsAny($)?C.Union:j.IsNever($)||j.IsLiteralString($)&&kW(X)||j.IsLiteralNumber($)&&s$(X)||j.IsLiteralBoolean($)&&fW(X)||j.IsSymbol($)&&gW(X)||j.IsBigInt($)&&bO(X)||j.IsString($)&&kW(X)||j.IsSymbol($)&&gW(X)||j.IsNumber($)&&s$(X)||j.IsInteger($)&&s$(X)||j.IsBoolean($)&&fW(X)||j.IsUint8Array($)&&TO(X)||j.IsDate($)&&IO(X)||j.IsConstructor($)&&kO(X)||j.IsFunction($)&&xO(X)?C.True:j.IsRecord($)&&j.IsString(t$($))?(()=>{return X[E5]==="Record"?C.True:C.False})():j.IsRecord($)&&j.IsNumber(t$($))?(()=>{return e1(X,0)?C.True:C.False})():C.False}function fO($,X){return w1(X)?A1($,X):j.IsRecord(X)?g5($,X):!j.IsObject(X)?C.False:(()=>{for(let Y of Object.getOwnPropertyNames(X.properties)){if(!(Y in $.properties)&&!j.IsOptional(X.properties[Y]))return C.False;if(j.IsOptional(X.properties[Y]))return C.True;if(mW($.properties[Y],X.properties[Y])===C.False)return C.False}return C.True})()}function vO($,X){return w1(X)?A1($,X):j.IsObject(X)&&gO(X)?C.True:!j.IsPromise(X)?C.False:k5(x0($.item,X.item))}function t$($){return Z2 in $.patternProperties?b5():(L2 in $.patternProperties)?u1():c6("Unknown record key pattern")}function a$($){return Z2 in $.patternProperties?$.patternProperties[Z2]:(L2 in $.patternProperties)?$.patternProperties[L2]:c6("Unable to get record value schema")}function g5($,X){let[Y,Q]=[t$(X),a$(X)];return j.IsLiteralString($)&&j.IsNumber(Y)&&k5(x0($,Q))===C.True?C.True:j.IsUint8Array($)&&j.IsNumber(Y)?x0($,Q):j.IsString($)&&j.IsNumber(Y)?x0($,Q):j.IsArray($)&&j.IsNumber(Y)?x0($,Q):j.IsObject($)?(()=>{for(let W of Object.getOwnPropertyNames($.properties))if(mW(Q,$.properties[W])===C.False)return C.False;return C.True})():C.False}function yO($,X){return w1(X)?A1($,X):j.IsObject(X)?f1($,X):!j.IsRecord(X)?C.False:x0(a$($),a$(X))}function hO($,X){let Y=j.IsRegExp($)?u1():$,Q=j.IsRegExp(X)?u1():X;return x0(Y,Q)}function uW($,X){return j.IsLiteral($)&&x1.IsString($.const)?C.True:j.IsString($)?C.True:C.False}function dO($,X){return w1(X)?A1($,X):j.IsObject(X)?f1($,X):j.IsRecord(X)?g5($,X):j.IsString(X)?C.True:C.False}function cO($,X){return w1(X)?A1($,X):j.IsObject(X)?f1($,X):j.IsRecord(X)?g5($,X):j.IsSymbol(X)?C.True:C.False}function mO($,X){return j.IsTemplateLiteral($)?x0(J6($),X):j.IsTemplateLiteral(X)?x0($,J6(X)):c6("Invalid fallthrough for TemplateLiteral")}function uO($,X){return j.IsArray(X)&&$.items!==void 0&&$.items.every((Y)=>x0(Y,X.items)===C.True)}function lO($,X){return j.IsNever($)?C.True:j.IsUnknown($)?C.False:j.IsAny($)?C.Union:C.False}function pO($,X){return w1(X)?A1($,X):j.IsObject(X)&&N7(X)?C.True:j.IsArray(X)&&uO($,X)?C.True:!j.IsTuple(X)?C.False:x1.IsUndefined($.items)&&!x1.IsUndefined(X.items)||!x1.IsUndefined($.items)&&x1.IsUndefined(X.items)?C.False:x1.IsUndefined($.items)&&!x1.IsUndefined(X.items)?C.True:$.items.every((Y,Q)=>x0(Y,X.items[Q])===C.True)?C.True:C.False}function iO($,X){return w1(X)?A1($,X):j.IsObject(X)?f1($,X):j.IsRecord(X)?g5($,X):j.IsUint8Array(X)?C.True:C.False}function nO($,X){return w1(X)?A1($,X):j.IsObject(X)?f1($,X):j.IsRecord(X)?g5($,X):j.IsVoid(X)?sO($,X):j.IsUndefined(X)?C.True:C.False}function $X($,X){return X.anyOf.some((Y)=>x0($,Y)===C.True)?C.True:C.False}function oO($,X){return $.anyOf.every((Y)=>x0(Y,X)===C.True)?C.True:C.False}function lW($,X){return C.True}function rO($,X){return j.IsNever(X)?dW($,X):j.IsIntersect(X)?q7($,X):j.IsUnion(X)?$X($,X):j.IsAny(X)?e$($,X):j.IsString(X)?uW($,X):j.IsNumber(X)?cW($,X):j.IsInteger(X)?hW($,X):j.IsBoolean(X)?yW($,X):j.IsArray(X)?OO($,X):j.IsTuple(X)?lO($,X):j.IsObject(X)?f1($,X):j.IsUnknown(X)?C.True:C.False}function sO($,X){return j.IsUndefined($)?C.True:j.IsUndefined($)?C.True:C.False}function tO($,X){return j.IsIntersect(X)?q7($,X):j.IsUnion(X)?$X($,X):j.IsUnknown(X)?lW($,X):j.IsAny(X)?e$($,X):j.IsObject(X)?f1($,X):j.IsVoid(X)?C.True:C.False}function x0($,X){return j.IsTemplateLiteral($)||j.IsTemplateLiteral(X)?mO($,X):j.IsRegExp($)||j.IsRegExp(X)?hO($,X):j.IsNot($)||j.IsNot(X)?VO($,X):j.IsAny($)?zO($,X):j.IsArray($)?wO($,X):j.IsBigInt($)?ZO($,X):j.IsBoolean($)?LO($,X):j.IsAsyncIterator($)?AO($,X):j.IsConstructor($)?jO($,X):j.IsDate($)?KO($,X):j.IsFunction($)?FO($,X):j.IsInteger($)?SO($,X):j.IsIntersect($)?DO($,X):j.IsIterator($)?_O($,X):j.IsLiteral($)?RO($,X):j.IsNever($)?PO($,X):j.IsNull($)?CO($,X):j.IsNumber($)?EO($,X):j.IsObject($)?fO($,X):j.IsRecord($)?yO($,X):j.IsString($)?dO($,X):j.IsSymbol($)?cO($,X):j.IsTuple($)?pO($,X):j.IsPromise($)?vO($,X):j.IsUint8Array($)?iO($,X):j.IsUndefined($)?nO($,X):j.IsUnion($)?oO($,X):j.IsUnknown($)?rO($,X):j.IsVoid($)?tO($,X):c6(`Unknown left type operand '${$[F]}'`)}function j8($,X){return x0($,X)}function aO($,X,Y,Q,W){let J={};for(let G of globalThis.Object.getOwnPropertyNames($))J[G]=m6($[G],X,Y,Q,p0(W));return J}function eO($,X,Y,Q,W){return aO($.properties,X,Y,Q,W)}function pW($,X,Y,Q,W){let J=eO($,X,Y,Q,W);return K0(J)}function $w($,X,Y,Q){let W=j8($,X);return W===C.Union?P0([Y,Q]):W===C.True?Y:Q}function m6($,X,Y,Q,W){return n0($)?pW($,X,Y,Q,W):Z5($)?V(iW($,X,Y,Q,W)):V($w($,X,Y,Q),W)}function Xw($,X,Y,Q,W){return{[$]:m6(Z0($),X,Y,Q,p0(W))}}function Yw($,X,Y,Q,W){return $.reduce((J,G)=>{return{...J,...Xw(G,X,Y,Q,W)}},{})}function Qw($,X,Y,Q,W){return Yw($.keys,X,Y,Q,W)}function iW($,X,Y,Q,W){let J=Qw($,X,Y,Q,W);return K0(J)}function Ww($){return $.allOf.every((X)=>n2(X))}function Jw($){return $.anyOf.some((X)=>n2(X))}function Gw($){return!n2($.not)}function n2($){return $[F]==="Intersect"?Ww($):$[F]==="Union"?Jw($):$[F]==="Not"?Gw($):$[F]==="Undefined"?!0:!1}function nW($,X){return u6(J6($),X)}function Mw($,X){let Y=$.filter((Q)=>j8(Q,X)===C.False);return Y.length===1?Y[0]:P0(Y)}function u6($,X,Y={}){if(L5($))return V(nW($,X),Y);if(n0($))return V(oW($,X),Y);return V(j0($)?Mw($.anyOf,X):j8($,X)!==C.False?J0():$,Y)}function Uw($,X){let Y={};for(let Q of globalThis.Object.getOwnPropertyNames($))Y[Q]=u6($[Q],X);return Y}function Hw($,X){return Uw($.properties,X)}function oW($,X){let Y=Hw($,X);return K0(Y)}function rW($,X){return l6(J6($),X)}function Bw($,X){let Y=$.filter((Q)=>j8(Q,X)!==C.False);return Y.length===1?Y[0]:P0(Y)}function l6($,X,Y){if(L5($))return V(rW($,X),Y);if(n0($))return V(sW($,X),Y);return V(j0($)?Bw($.anyOf,X):j8($,X)!==C.False?$:J0(),Y)}function qw($,X){let Y={};for(let Q of globalThis.Object.getOwnPropertyNames($))Y[Q]=l6($[Q],X);return Y}function Nw($,X){return qw($.properties,X)}function sW($,X){let Y=Nw($,X);return K0(Y)}function tW($,X){return i5($)?V($.returns,X):J0(X)}function z7($){return t1(k1($))}function G6($,X,Y){return V({[F]:"Record",type:"object",patternProperties:{[$]:X}},Y)}function XX($,X,Y){let Q={};for(let W of $)Q[W]=X;return V0(Q,{...Y,[E5]:"Record"})}function zw($,X,Y){return e9($)?XX(s1($),X,Y):G6($.pattern,X,Y)}function Ow($,X,Y){return XX(s1(P0($)),X,Y)}function ww($,X,Y){return XX([$.toString()],X,Y)}function Aw($,X,Y){return G6($.source,X,Y)}function Zw($,X,Y){let Q=B1($.pattern)?L2:$.pattern;return G6(Q,X,Y)}function Lw($,X,Y){return G6(L2,X,Y)}function jw($,X,Y){return G6(YW,X,Y)}function Kw($,X,Y){return V0({true:X,false:X},Y)}function Fw($,X,Y){return G6(Z2,X,Y)}function Sw($,X,Y){return G6(Z2,X,Y)}function O7($,X,Y={}){return j0($)?Ow($.anyOf,X,Y):L5($)?zw($,X,Y):A5($)?ww($.const,X,Y):c2($)?Kw($,X,Y):o5($)?Fw($,X,Y):r5($)?Sw($,X,Y):d$($)?Aw($,X,Y):m2($)?Zw($,X,Y):y$($)?Lw($,X,Y):w8($)?jw($,X,Y):J0(Y)}function w7($){return globalThis.Object.getOwnPropertyNames($.patternProperties)[0]}function aW($){let X=w7($);return X===L2?u1():X===Z2?b5():u1({pattern:X})}function A7($){return $.patternProperties[w7($)]}function Dw($,X){return X.parameters=t4($,X.parameters),X.returns=t5($,X.returns),X}function _w($,X){return X.parameters=t4($,X.parameters),X.returns=t5($,X.returns),X}function Rw($,X){return X.allOf=t4($,X.allOf),X}function Pw($,X){return X.anyOf=t4($,X.anyOf),X}function Vw($,X){if(B1(X.items))return X;return X.items=t4($,X.items),X}function Cw($,X){return X.items=t5($,X.items),X}function Ew($,X){return X.items=t5($,X.items),X}function bw($,X){return X.items=t5($,X.items),X}function Iw($,X){return X.item=t5($,X.item),X}function Tw($,X){let Y=fw($,X.properties);return{...X,...V0(Y)}}function xw($,X){let Y=t5($,aW(X)),Q=t5($,A7(X)),W=O7(Y,Q);return{...X,...W}}function kw($,X){return X.index in $?$[X.index]:s5()}function gw($,X){let Y=C6(X),Q=r1(X),W=t5($,X);return Y&&Q?z7(W):Y&&!Q?t1(W):!Y&&Q?k1(W):W}function fw($,X){return globalThis.Object.getOwnPropertyNames(X).reduce((Y,Q)=>{return{...Y,[Q]:gw($,X[Q])}},{})}function t4($,X){return X.map((Y)=>t5($,Y))}function t5($,X){return i5(X)?Dw($,X):n5(X)?_w($,X):e0(X)?Rw($,X):j0(X)?Pw($,X):j5(X)?Vw($,X):l5(X)?Cw($,X):e8(X)?Ew($,X):X6(X)?bw($,X):Y6(X)?Iw($,X):N1(X)?Tw($,X):Q6(X)?xw($,X):h$(X)?kw($,X):X}function eW($,X){return t5(X,P6($))}function $J($){return V({[F]:"Integer",type:"integer"},$)}function vw($,X,Y){return{[$]:a5(Z0($),X,p0(Y))}}function yw($,X,Y){return $.reduce((W,J)=>{return{...W,...vw(J,X,Y)}},{})}function hw($,X,Y){return yw($.keys,X,Y)}function XJ($,X,Y){let Q=hw($,X,Y);return K0(Q)}function dw($){let[X,Y]=[$.slice(0,1),$.slice(1)];return[X.toLowerCase(),Y].join("")}function cw($){let[X,Y]=[$.slice(0,1),$.slice(1)];return[X.toUpperCase(),Y].join("")}function mw($){return $.toUpperCase()}function uw($){return $.toLowerCase()}function lw($,X,Y){let Q=g6($.pattern);if(!W6(Q))return{...$,pattern:YJ($.pattern,X)};let G=[...n4(Q)].map((B)=>Z0(B)),U=QJ(G,X),H=P0(U);return X7([H],Y)}function YJ($,X){return typeof $==="string"?X==="Uncapitalize"?dw($):X==="Capitalize"?cw($):X==="Uppercase"?mw($):X==="Lowercase"?uw($):$:$.toString()}function QJ($,X){return $.map((Y)=>a5(Y,X))}function a5($,X,Y={}){return Z5($)?XJ($,X,Y):L5($)?lw($,X,Y):j0($)?P0(QJ($.anyOf,X),Y):A5($)?Z0(YJ($.const,X),Y):V($,Y)}function WJ($,X={}){return a5($,"Capitalize",X)}function JJ($,X={}){return a5($,"Lowercase",X)}function GJ($,X={}){return a5($,"Uncapitalize",X)}function MJ($,X={}){return a5($,"Uppercase",X)}function pw($,X,Y){let Q={};for(let W of globalThis.Object.getOwnPropertyNames($))Q[W]=K8($[W],X,p0(Y));return Q}function iw($,X,Y){return pw($.properties,X,Y)}function UJ($,X,Y){let Q=iw($,X,Y);return K0(Q)}function nw($,X){return $.map((Y)=>YX(Y,X))}function ow($,X){return $.map((Y)=>YX(Y,X))}function rw($,X){let{[X]:Y,...Q}=$;return Q}function sw($,X){return X.reduce((Y,Q)=>rw(Y,Q),$)}function tw($,X){let Y=$1($,[k0,"$id","required","properties"]),Q=sw($.properties,X);return V0(Q,Y)}function aw($){let X=$.reduce((Y,Q)=>s9(Q)?[...Y,Z0(Q)]:Y,[]);return P0(X)}function YX($,X){return e0($)?g1(nw($.allOf,X)):j0($)?P0(ow($.anyOf,X)):N1($)?tw($,X):V0({})}function K8($,X,Y){let Q=H1(X)?aw(X):X,W=s0(X)?s1(X):X,J=M1($),G=M1(X);return n0($)?UJ($,W,Y):Z5(X)?HJ($,X,Y):J&&G?m0("Omit",[$,Q],Y):!J&&G?m0("Omit",[$,Q],Y):J&&!G?m0("Omit",[$,Q],Y):V({...YX($,W),...Y})}function ew($,X,Y){return{[X]:K8($,[X],p0(Y))}}function $A($,X,Y){return X.reduce((Q,W)=>{return{...Q,...ew($,W,Y)}},{})}function XA($,X,Y){return $A($,X.keys,Y)}function HJ($,X,Y){let Q=XA($,X,Y);return K0(Q)}function YA($,X,Y){let Q={};for(let W of globalThis.Object.getOwnPropertyNames($))Q[W]=F8($[W],X,p0(Y));return Q}function QA($,X,Y){return YA($.properties,X,Y)}function BJ($,X,Y){let Q=QA($,X,Y);return K0(Q)}function WA($,X){return $.map((Y)=>QX(Y,X))}function JA($,X){return $.map((Y)=>QX(Y,X))}function GA($,X){let Y={};for(let Q of X)if(Q in $)Y[Q]=$[Q];return Y}function MA($,X){let Y=$1($,[k0,"$id","required","properties"]),Q=GA($.properties,X);return V0(Q,Y)}function UA($){let X=$.reduce((Y,Q)=>s9(Q)?[...Y,Z0(Q)]:Y,[]);return P0(X)}function QX($,X){return e0($)?g1(WA($.allOf,X)):j0($)?P0(JA($.anyOf,X)):N1($)?MA($,X):V0({})}function F8($,X,Y){let Q=H1(X)?UA(X):X,W=s0(X)?s1(X):X,J=M1($),G=M1(X);return n0($)?BJ($,W,Y):Z5(X)?qJ($,X,Y):J&&G?m0("Pick",[$,Q],Y):!J&&G?m0("Pick",[$,Q],Y):J&&!G?m0("Pick",[$,Q],Y):V({...QX($,W),...Y})}function HA($,X,Y){return{[X]:F8($,[X],p0(Y))}}function BA($,X,Y){return X.reduce((Q,W)=>{return{...Q,...HA($,W,Y)}},{})}function qA($,X,Y){return BA($,X.keys,Y)}function qJ($,X,Y){let Q=qA($,X,Y);return K0(Q)}function NA($,X){return m0("Partial",[m0($,X)])}function zA($){return m0("Partial",[x5($)])}function OA($){let X={};for(let Y of globalThis.Object.getOwnPropertyNames($))X[Y]=k1($[Y]);return X}function wA($){let X=$1($,[k0,"$id","required","properties"]),Y=OA($.properties);return V0(Y,X)}function NJ($){return $.map((X)=>zJ(X))}function zJ($){return p5($)?NA($.target,$.parameters):M1($)?zA($.$ref):e0($)?g1(NJ($.allOf)):j0($)?P0(NJ($.anyOf)):N1($)?wA($):$6($)?$:c2($)?$:o5($)?$:A5($)?$:c4($)?$:r5($)?$:m2($)?$:m4($)?$:u2($)?$:V0({})}function p6($,X){if(n0($))return OJ($,X);else return V({...zJ($),...X})}function AA($,X){let Y={};for(let Q of globalThis.Object.getOwnPropertyNames($))Y[Q]=p6($[Q],p0(X));return Y}function ZA($,X){return AA($.properties,X)}function OJ($,X){let Y=ZA($,X);return K0(Y)}function LA($,X){return m0("Required",[m0($,X)])}function jA($){return m0("Required",[x5($)])}function KA($){let X={};for(let Y of globalThis.Object.getOwnPropertyNames($))X[Y]=$1($[Y],[q1]);return X}function FA($){let X=$1($,[k0,"$id","required","properties"]),Y=KA($.properties);return V0(Y,X)}function wJ($){return $.map((X)=>AJ(X))}function AJ($){return p5($)?LA($.target,$.parameters):M1($)?jA($.$ref):e0($)?g1(wJ($.allOf)):j0($)?P0(wJ($.anyOf)):N1($)?FA($):$6($)?$:c2($)?$:o5($)?$:A5($)?$:c4($)?$:r5($)?$:m2($)?$:m4($)?$:u2($)?$:V0({})}function i6($,X){if(n0($))return ZJ($,X);else return V({...AJ($),...X})}function SA($,X){let Y={};for(let Q of globalThis.Object.getOwnPropertyNames($))Y[Q]=i6($[Q],X);return Y}function DA($,X){return SA($.properties,X)}function ZJ($,X){let Y=DA($,X);return K0(Y)}function _A($,X){return X.map((Y)=>{return M1(Y)?WX($,Y.$ref):K5($,Y)})}function WX($,X){return X in $?M1($[X])?WX($,$[X].$ref):K5($,$[X]):J0()}function RA($){return h6($[0])}function PA($){return L8($[0],$[1])}function VA($){return d6($[0])}function CA($){return p6($[0])}function EA($){return K8($[0],$[1])}function bA($){return F8($[0],$[1])}function IA($){return i6($[0])}function TA($,X,Y){let Q=_A($,Y);return X==="Awaited"?RA(Q):X==="Index"?PA(Q):X==="KeyOf"?VA(Q):X==="Partial"?CA(Q):X==="Omit"?EA(Q):X==="Pick"?bA(Q):X==="Required"?IA(Q):J0()}function xA($,X){return I6(K5($,X))}function kA($,X){return T6(K5($,X))}function gA($,X,Y){return x6(a4($,X),K5($,Y))}function fA($,X,Y){return j2(a4($,X),K5($,Y))}function vA($,X){return g1(a4($,X))}function yA($,X){return y6(K5($,X))}function hA($,X){return V0(globalThis.Object.keys(X).reduce((Y,Q)=>{return{...Y,[Q]:K5($,X[Q])}},{}))}function dA($,X){let[Y,Q]=[K5($,A7(X)),w7(X)],W=P6(X);return W.patternProperties[Q]=Y,W}function cA($,X){return M1(X)?{...WX($,X.$ref),[k0]:X[k0]}:X}function mA($,X){return I5(a4($,X))}function uA($,X){return P0(a4($,X))}function a4($,X){return X.map((Y)=>K5($,Y))}function K5($,X){return r1(X)?V(K5($,$1(X,[q1])),X):C6(X)?V(K5($,$1(X,[u5])),X):R0(X)?V(cA($,X),X):l5(X)?V(xA($,X.items),X):e8(X)?V(kA($,X.items),X):p5(X)?V(TA($,X.target,X.parameters)):i5(X)?V(gA($,X.parameters,X.returns),X):n5(X)?V(fA($,X.parameters,X.returns),X):e0(X)?V(vA($,X.allOf),X):X6(X)?V(yA($,X.items),X):N1(X)?V(hA($,X.properties),X):Q6(X)?V(dA($,X)):j5(X)?V(mA($,X.items||[]),X):j0(X)?V(uA($,X.anyOf),X):X}function lA($,X){return X in $?K5($,$[X]):J0()}function LJ($){return globalThis.Object.getOwnPropertyNames($).reduce((X,Y)=>{return{...X,[Y]:lA($,Y)}},{})}class jJ{constructor($){let X=LJ($),Y=this.WithIdentifiers(X);this.$defs=Y}Import($,X){let Y={...this.$defs,[$]:V(this.$defs[$],X)};return V({[F]:"Import",$defs:Y,$ref:$})}WithIdentifiers($){return globalThis.Object.getOwnPropertyNames($).reduce((X,Y)=>{return{...X,[Y]:{...$[Y],$id:Y}}},{})}}function KJ($){return new jJ($)}function FJ($,X){return V({[F]:"Not",not:$},X)}function SJ($,X){return n5($)?I5($.parameters,X):J0()}var pA=0;function DJ($,X={}){if(B1(X.$id))X.$id=`T${pA++}`;let Y=P6($({[F]:"This",$ref:`${X.$id}`}));return Y.$id=X.$id,V({[E5]:"Recursive",...Y},X)}function _J($,X){let Y=y0($)?new globalThis.RegExp($):$;return V({[F]:"RegExp",type:"RegExp",source:Y.source,flags:Y.flags},X)}function iA($){return e0($)?$.allOf:j0($)?$.anyOf:j5($)?$.items??[]:[]}function RJ($){return iA($)}function PJ($,X){return n5($)?V($.returns,X):J0(X)}class VJ{constructor($){this.schema=$}Decode($){return new CJ(this.schema,$)}}class CJ{constructor($,X){this.schema=$,this.decode=X}EncodeTransform($,X){let W={Encode:(J)=>X[k0].Encode($(J)),Decode:(J)=>this.decode(X[k0].Decode(J))};return{...X,[k0]:W}}EncodeSchema($,X){let Y={Decode:this.decode,Encode:$};return{...X,[k0]:Y}}Encode($){return R0(this.schema)?this.EncodeTransform($,this.schema):this.EncodeSchema($,this.schema)}}function EJ($){return new VJ($)}function Z7($={}){return V({[F]:$[F]??"Unsafe"},$)}function bJ($){return V({[F]:"Void",type:"void"},$)}var JX={};f2(JX,{Void:()=>bJ,Uppercase:()=>MJ,Unsafe:()=>Z7,Unknown:()=>s5,Union:()=>P0,Undefined:()=>U7,Uncapitalize:()=>GJ,Uint8Array:()=>H7,Tuple:()=>I5,Transform:()=>EJ,TemplateLiteral:()=>X7,Symbol:()=>M7,String:()=>u1,ReturnType:()=>PJ,Rest:()=>RJ,Required:()=>i6,RegExp:()=>_J,Ref:()=>x5,Recursive:()=>DJ,Record:()=>O7,ReadonlyOptional:()=>z7,Readonly:()=>t1,Promise:()=>Q7,Pick:()=>F8,Partial:()=>p6,Parameters:()=>SJ,Optional:()=>k1,Omit:()=>K8,Object:()=>V0,Number:()=>b5,Null:()=>G7,Not:()=>FJ,Never:()=>J0,Module:()=>KJ,Mapped:()=>DW,Lowercase:()=>JJ,Literal:()=>Z0,KeyOf:()=>d6,Iterator:()=>y6,Intersect:()=>g1,Integer:()=>$J,Instantiate:()=>eW,InstanceType:()=>tW,Index:()=>L8,Function:()=>j2,Extract:()=>l6,Extends:()=>m6,Exclude:()=>u6,Enum:()=>TW,Date:()=>J7,ConstructorParameters:()=>IW,Constructor:()=>x6,Const:()=>bW,Composite:()=>EW,Capitalize:()=>WJ,Boolean:()=>$7,BigInt:()=>v6,Awaited:()=>h6,AsyncIterator:()=>T6,Array:()=>I6,Argument:()=>MW,Any:()=>Z8});var o2=JX;function nA($){switch($.errorType){case R.ArrayContains:return"Expected array to contain at least one matching value";case R.ArrayMaxContains:return`Expected array to contain no more than ${$.schema.maxContains} matching values`;case R.ArrayMinContains:return`Expected array to contain at least ${$.schema.minContains} matching values`;case R.ArrayMaxItems:return`Expected array length to be less or equal to ${$.schema.maxItems}`;case R.ArrayMinItems:return`Expected array length to be greater or equal to ${$.schema.minItems}`;case R.ArrayUniqueItems:return"Expected array elements to be unique";case R.Array:return"Expected array";case R.AsyncIterator:return"Expected AsyncIterator";case R.BigIntExclusiveMaximum:return`Expected bigint to be less than ${$.schema.exclusiveMaximum}`;case R.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${$.schema.exclusiveMinimum}`;case R.BigIntMaximum:return`Expected bigint to be less or equal to ${$.schema.maximum}`;case R.BigIntMinimum:return`Expected bigint to be greater or equal to ${$.schema.minimum}`;case R.BigIntMultipleOf:return`Expected bigint to be a multiple of ${$.schema.multipleOf}`;case R.BigInt:return"Expected bigint";case R.Boolean:return"Expected boolean";case R.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${$.schema.exclusiveMinimumTimestamp}`;case R.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${$.schema.exclusiveMaximumTimestamp}`;case R.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${$.schema.minimumTimestamp}`;case R.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${$.schema.maximumTimestamp}`;case R.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${$.schema.multipleOfTimestamp}`;case R.Date:return"Expected Date";case R.Function:return"Expected function";case R.IntegerExclusiveMaximum:return`Expected integer to be less than ${$.schema.exclusiveMaximum}`;case R.IntegerExclusiveMinimum:return`Expected integer to be greater than ${$.schema.exclusiveMinimum}`;case R.IntegerMaximum:return`Expected integer to be less or equal to ${$.schema.maximum}`;case R.IntegerMinimum:return`Expected integer to be greater or equal to ${$.schema.minimum}`;case R.IntegerMultipleOf:return`Expected integer to be a multiple of ${$.schema.multipleOf}`;case R.Integer:return"Expected integer";case R.IntersectUnevaluatedProperties:return"Unexpected property";case R.Intersect:return"Expected all values to match";case R.Iterator:return"Expected Iterator";case R.Literal:return`Expected ${typeof $.schema.const==="string"?`'${$.schema.const}'`:$.schema.const}`;case R.Never:return"Never";case R.Not:return"Value should not match";case R.Null:return"Expected null";case R.NumberExclusiveMaximum:return`Expected number to be less than ${$.schema.exclusiveMaximum}`;case R.NumberExclusiveMinimum:return`Expected number to be greater than ${$.schema.exclusiveMinimum}`;case R.NumberMaximum:return`Expected number to be less or equal to ${$.schema.maximum}`;case R.NumberMinimum:return`Expected number to be greater or equal to ${$.schema.minimum}`;case R.NumberMultipleOf:return`Expected number to be a multiple of ${$.schema.multipleOf}`;case R.Number:return"Expected number";case R.Object:return"Expected object";case R.ObjectAdditionalProperties:return"Unexpected property";case R.ObjectMaxProperties:return`Expected object to have no more than ${$.schema.maxProperties} properties`;case R.ObjectMinProperties:return`Expected object to have at least ${$.schema.minProperties} properties`;case R.ObjectRequiredProperty:return"Expected required property";case R.Promise:return"Expected Promise";case R.RegExp:return"Expected string to match regular expression";case R.StringFormatUnknown:return`Unknown format '${$.schema.format}'`;case R.StringFormat:return`Expected string to match '${$.schema.format}' format`;case R.StringMaxLength:return`Expected string length less or equal to ${$.schema.maxLength}`;case R.StringMinLength:return`Expected string length greater or equal to ${$.schema.minLength}`;case R.StringPattern:return`Expected string to match '${$.schema.pattern}'`;case R.String:return"Expected string";case R.Symbol:return"Expected symbol";case R.TupleLength:return`Expected tuple to have ${$.schema.maxItems||0} elements`;case R.Tuple:return"Expected tuple";case R.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${$.schema.maxByteLength}`;case R.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${$.schema.minByteLength}`;case R.Uint8Array:return"Expected Uint8Array";case R.Undefined:return"Expected undefined";case R.Union:return"Expected union value";case R.Void:return"Expected void";case R.Kind:return`Expected kind '${$.schema[F]}'`;default:return"Unknown error type"}}var oA=nA;function IJ(){return oA}class TJ extends t{constructor($){super(`Unable to dereference schema with $id '${$.$ref}'`);this.schema=$}}function rA($,X){let Y=X.find((Q)=>Q.$id===$.$ref);if(Y===void 0)throw new TJ($);return F0(Y,X)}function F1($,X){if(!L0($.$id)||X.some((Y)=>Y.$id===$.$id))return X;return X.push($),X}function F0($,X){return $[F]==="This"||$[F]==="Ref"?rA($,X):$}class xJ extends t{constructor($){super("Unable to hash value");this.value=$}}var F5;(function($){$[$.Undefined=0]="Undefined",$[$.Null=1]="Null",$[$.Boolean=2]="Boolean",$[$.Number=3]="Number",$[$.String=4]="String",$[$.Object=5]="Object",$[$.Array=6]="Array",$[$.Date=7]="Date",$[$.Uint8Array=8]="Uint8Array",$[$.Symbol=9]="Symbol",$[$.BigInt=10]="BigInt"})(F5||(F5={}));var n6=BigInt("14695981039346656037"),[sA,tA]=[BigInt("1099511628211"),BigInt("18446744073709551616")],aA=Array.from({length:256}).map(($,X)=>BigInt(X)),kJ=new Float64Array(1),gJ=new DataView(kJ.buffer),fJ=new Uint8Array(kJ.buffer);function*eA($){let X=$===0?1:Math.ceil(Math.floor(Math.log2($)+1)/8);for(let Y=0;Y<X;Y++)yield $>>8*(X-1-Y)&255}function $Z($){v1(F5.Array);for(let X of $)o6(X)}function XZ($){v1(F5.Boolean),v1($?1:0)}function YZ($){v1(F5.BigInt),gJ.setBigInt64(0,$);for(let X of fJ)v1(X)}function QZ($){v1(F5.Date),o6($.getTime())}function WZ($){v1(F5.Null)}function JZ($){v1(F5.Number),gJ.setFloat64(0,$);for(let X of fJ)v1(X)}function GZ($){v1(F5.Object);for(let X of globalThis.Object.getOwnPropertyNames($).sort())o6(X),o6($[X])}function MZ($){v1(F5.String);for(let X=0;X<$.length;X++)for(let Y of eA($.charCodeAt(X)))v1(Y)}function UZ($){v1(F5.Symbol),o6($.description)}function HZ($){v1(F5.Uint8Array);for(let X=0;X<$.length;X++)v1($[X])}function BZ($){return v1(F5.Undefined)}function o6($){if($0($))return $Z($);if(A2($))return XZ($);if(C1($))return YZ($);if(m1($))return QZ($);if(h2($))return WZ($);if(r($))return JZ($);if(G0($))return GZ($);if(L0($))return MZ($);if(d2($))return UZ($);if(V6($))return HZ($);if(i0($))return BZ($);throw new xJ($)}function v1($){n6=n6^aA[$],n6=n6*sA%tA}function S8($){return n6=BigInt("14695981039346656037"),o6($),n6}class vJ extends t{constructor($){super("Unknown type");this.schema=$}}function qZ($){return $[F]==="Any"||$[F]==="Unknown"}function q0($){return $!==void 0}function NZ($,X,Y){return!0}function zZ($,X,Y){return!0}function OZ($,X,Y){if(!$0(Y))return!1;if(q0($.minItems)&&!(Y.length>=$.minItems))return!1;if(q0($.maxItems)&&!(Y.length<=$.maxItems))return!1;if(!Y.every((J)=>S1($.items,X,J)))return!1;if($.uniqueItems===!0&&!function(){let J=new Set;for(let G of Y){let U=S8(G);if(J.has(U))return!1;else J.add(U)}return!0}())return!1;if(!(q0($.contains)||r($.minContains)||r($.maxContains)))return!0;let Q=q0($.contains)?$.contains:J0(),W=Y.reduce((J,G)=>S1(Q,X,G)?J+1:J,0);if(W===0)return!1;if(r($.minContains)&&W<$.minContains)return!1;if(r($.maxContains)&&W>$.maxContains)return!1;return!0}function wZ($,X,Y){return i9(Y)}function AZ($,X,Y){if(!C1(Y))return!1;if(q0($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))return!1;if(q0($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))return!1;if(q0($.maximum)&&!(Y<=$.maximum))return!1;if(q0($.minimum)&&!(Y>=$.minimum))return!1;if(q0($.multipleOf)&&Y%$.multipleOf!==BigInt(0))return!1;return!0}function ZZ($,X,Y){return A2(Y)}function LZ($,X,Y){return S1($.returns,X,Y.prototype)}function jZ($,X,Y){if(!m1(Y))return!1;if(q0($.exclusiveMaximumTimestamp)&&!(Y.getTime()<$.exclusiveMaximumTimestamp))return!1;if(q0($.exclusiveMinimumTimestamp)&&!(Y.getTime()>$.exclusiveMinimumTimestamp))return!1;if(q0($.maximumTimestamp)&&!(Y.getTime()<=$.maximumTimestamp))return!1;if(q0($.minimumTimestamp)&&!(Y.getTime()>=$.minimumTimestamp))return!1;if(q0($.multipleOfTimestamp)&&Y.getTime()%$.multipleOfTimestamp!==0)return!1;return!0}function KZ($,X,Y){return O8(Y)}function FZ($,X,Y){let Q=globalThis.Object.values($.$defs),W=$.$defs[$.$ref];return S1(W,[...X,...Q],Y)}function SZ($,X,Y){if(!r9(Y))return!1;if(q0($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))return!1;if(q0($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))return!1;if(q0($.maximum)&&!(Y<=$.maximum))return!1;if(q0($.minimum)&&!(Y>=$.minimum))return!1;if(q0($.multipleOf)&&Y%$.multipleOf!==0)return!1;return!0}function DZ($,X,Y){let Q=$.allOf.every((W)=>S1(W,X,Y));if($.unevaluatedProperties===!1){let W=new RegExp(i2($)),J=Object.getOwnPropertyNames(Y).every((G)=>W.test(G));return Q&&J}else if(s0($.unevaluatedProperties)){let W=new RegExp(i2($)),J=Object.getOwnPropertyNames(Y).every((G)=>W.test(G)||S1($.unevaluatedProperties,X,Y[G]));return Q&&J}else return Q}function _Z($,X,Y){return n9(Y)}function RZ($,X,Y){return Y===$.const}function PZ($,X,Y){return!1}function VZ($,X,Y){return!S1($.not,X,Y)}function CZ($,X,Y){return h2(Y)}function EZ($,X,Y){if(!c0.IsNumberLike(Y))return!1;if(q0($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))return!1;if(q0($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))return!1;if(q0($.minimum)&&!(Y>=$.minimum))return!1;if(q0($.maximum)&&!(Y<=$.maximum))return!1;if(q0($.multipleOf)&&Y%$.multipleOf!==0)return!1;return!0}function bZ($,X,Y){if(!c0.IsObjectLike(Y))return!1;if(q0($.minProperties)&&!(Object.getOwnPropertyNames(Y).length>=$.minProperties))return!1;if(q0($.maxProperties)&&!(Object.getOwnPropertyNames(Y).length<=$.maxProperties))return!1;let Q=Object.getOwnPropertyNames($.properties);for(let W of Q){let J=$.properties[W];if($.required&&$.required.includes(W)){if(!S1(J,X,Y[W]))return!1;if((n2(J)||qZ(J))&&!(W in Y))return!1}else if(c0.IsExactOptionalProperty(Y,W)&&!S1(J,X,Y[W]))return!1}if($.additionalProperties===!1){let W=Object.getOwnPropertyNames(Y);if($.required&&$.required.length===Q.length&&W.length===Q.length)return!0;else return W.every((J)=>Q.includes(J))}else if(typeof $.additionalProperties==="object")return Object.getOwnPropertyNames(Y).every((J)=>Q.includes(J)||S1($.additionalProperties,X,Y[J]));else return!0}function IZ($,X,Y){return o9(Y)}function TZ($,X,Y){if(!c0.IsRecordLike(Y))return!1;if(q0($.minProperties)&&!(Object.getOwnPropertyNames(Y).length>=$.minProperties))return!1;if(q0($.maxProperties)&&!(Object.getOwnPropertyNames(Y).length<=$.maxProperties))return!1;let[Q,W]=Object.entries($.patternProperties)[0],J=new RegExp(Q),G=Object.entries(Y).every(([B,q])=>{return J.test(B)?S1(W,X,q):!0}),U=typeof $.additionalProperties==="object"?Object.entries(Y).every(([B,q])=>{return!J.test(B)?S1($.additionalProperties,X,q):!0}):!0,H=$.additionalProperties===!1?Object.getOwnPropertyNames(Y).every((B)=>{return J.test(B)}):!0;return G&&U&&H}function xZ($,X,Y){return S1(F0($,X),X,Y)}function kZ($,X,Y){let Q=new RegExp($.source,$.flags);if(q0($.minLength)){if(!(Y.length>=$.minLength))return!1}if(q0($.maxLength)){if(!(Y.length<=$.maxLength))return!1}return Q.test(Y)}function gZ($,X,Y){if(!L0(Y))return!1;if(q0($.minLength)){if(!(Y.length>=$.minLength))return!1}if(q0($.maxLength)){if(!(Y.length<=$.maxLength))return!1}if(q0($.pattern)){if(!new RegExp($.pattern).test(Y))return!1}if(q0($.format)){if(!b0.Has($.format))return!1;return b0.Get($.format)(Y)}return!0}function fZ($,X,Y){return d2(Y)}function vZ($,X,Y){return L0(Y)&&new RegExp($.pattern).test(Y)}function yZ($,X,Y){return S1(F0($,X),X,Y)}function hZ($,X,Y){if(!$0(Y))return!1;if($.items===void 0&&Y.length!==0)return!1;if(Y.length!==$.maxItems)return!1;if(!$.items)return!0;for(let Q=0;Q<$.items.length;Q++)if(!S1($.items[Q],X,Y[Q]))return!1;return!0}function dZ($,X,Y){return i0(Y)}function cZ($,X,Y){return $.anyOf.some((Q)=>S1(Q,X,Y))}function mZ($,X,Y){if(!V6(Y))return!1;if(q0($.maxByteLength)&&!(Y.length<=$.maxByteLength))return!1;if(q0($.minByteLength)&&!(Y.length>=$.minByteLength))return!1;return!0}function uZ($,X,Y){return!0}function lZ($,X,Y){return c0.IsVoidLike(Y)}function pZ($,X,Y){if(!L1.Has($[F]))return!1;return L1.Get($[F])($,Y)}function S1($,X,Y){let Q=q0($.$id)?F1($,X):X,W=$;switch(W[F]){case"Any":return NZ(W,Q,Y);case"Argument":return zZ(W,Q,Y);case"Array":return OZ(W,Q,Y);case"AsyncIterator":return wZ(W,Q,Y);case"BigInt":return AZ(W,Q,Y);case"Boolean":return ZZ(W,Q,Y);case"Constructor":return LZ(W,Q,Y);case"Date":return jZ(W,Q,Y);case"Function":return KZ(W,Q,Y);case"Import":return FZ(W,Q,Y);case"Integer":return SZ(W,Q,Y);case"Intersect":return DZ(W,Q,Y);case"Iterator":return _Z(W,Q,Y);case"Literal":return RZ(W,Q,Y);case"Never":return PZ(W,Q,Y);case"Not":return VZ(W,Q,Y);case"Null":return CZ(W,Q,Y);case"Number":return EZ(W,Q,Y);case"Object":return bZ(W,Q,Y);case"Promise":return IZ(W,Q,Y);case"Record":return TZ(W,Q,Y);case"Ref":return xZ(W,Q,Y);case"RegExp":return kZ(W,Q,Y);case"String":return gZ(W,Q,Y);case"Symbol":return fZ(W,Q,Y);case"TemplateLiteral":return vZ(W,Q,Y);case"This":return yZ(W,Q,Y);case"Tuple":return hZ(W,Q,Y);case"Undefined":return dZ(W,Q,Y);case"Union":return cZ(W,Q,Y);case"Uint8Array":return mZ(W,Q,Y);case"Unknown":return uZ(W,Q,Y);case"Void":return lZ(W,Q,Y);default:if(!L1.Has(W[F]))throw new vJ(W);return pZ(W,Q,Y)}}function M0(...$){return $.length===3?S1($[0],$[1],$[2]):S1($[0],[],$[1])}var R;(function($){$[$.ArrayContains=0]="ArrayContains",$[$.ArrayMaxContains=1]="ArrayMaxContains",$[$.ArrayMaxItems=2]="ArrayMaxItems",$[$.ArrayMinContains=3]="ArrayMinContains",$[$.ArrayMinItems=4]="ArrayMinItems",$[$.ArrayUniqueItems=5]="ArrayUniqueItems",$[$.Array=6]="Array",$[$.AsyncIterator=7]="AsyncIterator",$[$.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",$[$.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",$[$.BigIntMaximum=10]="BigIntMaximum",$[$.BigIntMinimum=11]="BigIntMinimum",$[$.BigIntMultipleOf=12]="BigIntMultipleOf",$[$.BigInt=13]="BigInt",$[$.Boolean=14]="Boolean",$[$.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",$[$.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",$[$.DateMaximumTimestamp=17]="DateMaximumTimestamp",$[$.DateMinimumTimestamp=18]="DateMinimumTimestamp",$[$.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",$[$.Date=20]="Date",$[$.Function=21]="Function",$[$.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",$[$.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",$[$.IntegerMaximum=24]="IntegerMaximum",$[$.IntegerMinimum=25]="IntegerMinimum",$[$.IntegerMultipleOf=26]="IntegerMultipleOf",$[$.Integer=27]="Integer",$[$.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",$[$.Intersect=29]="Intersect",$[$.Iterator=30]="Iterator",$[$.Kind=31]="Kind",$[$.Literal=32]="Literal",$[$.Never=33]="Never",$[$.Not=34]="Not",$[$.Null=35]="Null",$[$.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",$[$.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",$[$.NumberMaximum=38]="NumberMaximum",$[$.NumberMinimum=39]="NumberMinimum",$[$.NumberMultipleOf=40]="NumberMultipleOf",$[$.Number=41]="Number",$[$.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",$[$.ObjectMaxProperties=43]="ObjectMaxProperties",$[$.ObjectMinProperties=44]="ObjectMinProperties",$[$.ObjectRequiredProperty=45]="ObjectRequiredProperty",$[$.Object=46]="Object",$[$.Promise=47]="Promise",$[$.RegExp=48]="RegExp",$[$.StringFormatUnknown=49]="StringFormatUnknown",$[$.StringFormat=50]="StringFormat",$[$.StringMaxLength=51]="StringMaxLength",$[$.StringMinLength=52]="StringMinLength",$[$.StringPattern=53]="StringPattern",$[$.String=54]="String",$[$.Symbol=55]="Symbol",$[$.TupleLength=56]="TupleLength",$[$.Tuple=57]="Tuple",$[$.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",$[$.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",$[$.Uint8Array=60]="Uint8Array",$[$.Undefined=61]="Undefined",$[$.Union=62]="Union",$[$.Void=63]="Void"})(R||(R={}));class yJ extends t{constructor($){super("Unknown type");this.schema=$}}function r2($){return $.replace(/~/g,"~0").replace(/\//g,"~1")}function N0($){return $!==void 0}class M6{constructor($){this.iterator=$}[Symbol.iterator](){return this.iterator}First(){let $=this.iterator.next();return $.done?void 0:$.value}}function u($,X,Y,Q,W=[]){return{type:$,schema:X,path:Y,value:Q,message:IJ()({errorType:$,path:Y,schema:X,value:Q,errors:W}),errors:W}}function*iZ($,X,Y,Q){}function*nZ($,X,Y,Q){}function*oZ($,X,Y,Q){if(!$0(Q))return yield u(R.Array,$,Y,Q);if(N0($.minItems)&&!(Q.length>=$.minItems))yield u(R.ArrayMinItems,$,Y,Q);if(N0($.maxItems)&&!(Q.length<=$.maxItems))yield u(R.ArrayMaxItems,$,Y,Q);for(let G=0;G<Q.length;G++)yield*D1($.items,X,`${Y}/${G}`,Q[G]);if($.uniqueItems===!0&&!function(){let G=new Set;for(let U of Q){let H=S8(U);if(G.has(H))return!1;else G.add(H)}return!0}())yield u(R.ArrayUniqueItems,$,Y,Q);if(!(N0($.contains)||N0($.minContains)||N0($.maxContains)))return;let W=N0($.contains)?$.contains:J0(),J=Q.reduce((G,U,H)=>D1(W,X,`${Y}${H}`,U).next().done===!0?G+1:G,0);if(J===0)yield u(R.ArrayContains,$,Y,Q);if(r($.minContains)&&J<$.minContains)yield u(R.ArrayMinContains,$,Y,Q);if(r($.maxContains)&&J>$.maxContains)yield u(R.ArrayMaxContains,$,Y,Q)}function*rZ($,X,Y,Q){if(!i9(Q))yield u(R.AsyncIterator,$,Y,Q)}function*sZ($,X,Y,Q){if(!C1(Q))return yield u(R.BigInt,$,Y,Q);if(N0($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield u(R.BigIntExclusiveMaximum,$,Y,Q);if(N0($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield u(R.BigIntExclusiveMinimum,$,Y,Q);if(N0($.maximum)&&!(Q<=$.maximum))yield u(R.BigIntMaximum,$,Y,Q);if(N0($.minimum)&&!(Q>=$.minimum))yield u(R.BigIntMinimum,$,Y,Q);if(N0($.multipleOf)&&Q%$.multipleOf!==BigInt(0))yield u(R.BigIntMultipleOf,$,Y,Q)}function*tZ($,X,Y,Q){if(!A2(Q))yield u(R.Boolean,$,Y,Q)}function*aZ($,X,Y,Q){yield*D1($.returns,X,Y,Q.prototype)}function*eZ($,X,Y,Q){if(!m1(Q))return yield u(R.Date,$,Y,Q);if(N0($.exclusiveMaximumTimestamp)&&!(Q.getTime()<$.exclusiveMaximumTimestamp))yield u(R.DateExclusiveMaximumTimestamp,$,Y,Q);if(N0($.exclusiveMinimumTimestamp)&&!(Q.getTime()>$.exclusiveMinimumTimestamp))yield u(R.DateExclusiveMinimumTimestamp,$,Y,Q);if(N0($.maximumTimestamp)&&!(Q.getTime()<=$.maximumTimestamp))yield u(R.DateMaximumTimestamp,$,Y,Q);if(N0($.minimumTimestamp)&&!(Q.getTime()>=$.minimumTimestamp))yield u(R.DateMinimumTimestamp,$,Y,Q);if(N0($.multipleOfTimestamp)&&Q.getTime()%$.multipleOfTimestamp!==0)yield u(R.DateMultipleOfTimestamp,$,Y,Q)}function*$L($,X,Y,Q){if(!O8(Q))yield u(R.Function,$,Y,Q)}function*XL($,X,Y,Q){let W=globalThis.Object.values($.$defs),J=$.$defs[$.$ref];yield*D1(J,[...X,...W],Y,Q)}function*YL($,X,Y,Q){if(!r9(Q))return yield u(R.Integer,$,Y,Q);if(N0($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield u(R.IntegerExclusiveMaximum,$,Y,Q);if(N0($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield u(R.IntegerExclusiveMinimum,$,Y,Q);if(N0($.maximum)&&!(Q<=$.maximum))yield u(R.IntegerMaximum,$,Y,Q);if(N0($.minimum)&&!(Q>=$.minimum))yield u(R.IntegerMinimum,$,Y,Q);if(N0($.multipleOf)&&Q%$.multipleOf!==0)yield u(R.IntegerMultipleOf,$,Y,Q)}function*QL($,X,Y,Q){let W=!1;for(let J of $.allOf)for(let G of D1(J,X,Y,Q))W=!0,yield G;if(W)return yield u(R.Intersect,$,Y,Q);if($.unevaluatedProperties===!1){let J=new RegExp(i2($));for(let G of Object.getOwnPropertyNames(Q))if(!J.test(G))yield u(R.IntersectUnevaluatedProperties,$,`${Y}/${G}`,Q)}if(typeof $.unevaluatedProperties==="object"){let J=new RegExp(i2($));for(let G of Object.getOwnPropertyNames(Q))if(!J.test(G)){let U=D1($.unevaluatedProperties,X,`${Y}/${G}`,Q[G]).next();if(!U.done)yield U.value}}}function*WL($,X,Y,Q){if(!n9(Q))yield u(R.Iterator,$,Y,Q)}function*JL($,X,Y,Q){if(Q!==$.const)yield u(R.Literal,$,Y,Q)}function*GL($,X,Y,Q){yield u(R.Never,$,Y,Q)}function*ML($,X,Y,Q){if(D1($.not,X,Y,Q).next().done===!0)yield u(R.Not,$,Y,Q)}function*UL($,X,Y,Q){if(!h2(Q))yield u(R.Null,$,Y,Q)}function*HL($,X,Y,Q){if(!c0.IsNumberLike(Q))return yield u(R.Number,$,Y,Q);if(N0($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield u(R.NumberExclusiveMaximum,$,Y,Q);if(N0($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield u(R.NumberExclusiveMinimum,$,Y,Q);if(N0($.maximum)&&!(Q<=$.maximum))yield u(R.NumberMaximum,$,Y,Q);if(N0($.minimum)&&!(Q>=$.minimum))yield u(R.NumberMinimum,$,Y,Q);if(N0($.multipleOf)&&Q%$.multipleOf!==0)yield u(R.NumberMultipleOf,$,Y,Q)}function*BL($,X,Y,Q){if(!c0.IsObjectLike(Q))return yield u(R.Object,$,Y,Q);if(N0($.minProperties)&&!(Object.getOwnPropertyNames(Q).length>=$.minProperties))yield u(R.ObjectMinProperties,$,Y,Q);if(N0($.maxProperties)&&!(Object.getOwnPropertyNames(Q).length<=$.maxProperties))yield u(R.ObjectMaxProperties,$,Y,Q);let W=Array.isArray($.required)?$.required:[],J=Object.getOwnPropertyNames($.properties),G=Object.getOwnPropertyNames(Q);for(let U of W){if(G.includes(U))continue;yield u(R.ObjectRequiredProperty,$.properties[U],`${Y}/${r2(U)}`,void 0)}if($.additionalProperties===!1){for(let U of G)if(!J.includes(U))yield u(R.ObjectAdditionalProperties,$,`${Y}/${r2(U)}`,Q[U])}if(typeof $.additionalProperties==="object")for(let U of G){if(J.includes(U))continue;yield*D1($.additionalProperties,X,`${Y}/${r2(U)}`,Q[U])}for(let U of J){let H=$.properties[U];if($.required&&$.required.includes(U)){if(yield*D1(H,X,`${Y}/${r2(U)}`,Q[U]),n2($)&&!(U in Q))yield u(R.ObjectRequiredProperty,H,`${Y}/${r2(U)}`,void 0)}else if(c0.IsExactOptionalProperty(Q,U))yield*D1(H,X,`${Y}/${r2(U)}`,Q[U])}}function*qL($,X,Y,Q){if(!o9(Q))yield u(R.Promise,$,Y,Q)}function*NL($,X,Y,Q){if(!c0.IsRecordLike(Q))return yield u(R.Object,$,Y,Q);if(N0($.minProperties)&&!(Object.getOwnPropertyNames(Q).length>=$.minProperties))yield u(R.ObjectMinProperties,$,Y,Q);if(N0($.maxProperties)&&!(Object.getOwnPropertyNames(Q).length<=$.maxProperties))yield u(R.ObjectMaxProperties,$,Y,Q);let[W,J]=Object.entries($.patternProperties)[0],G=new RegExp(W);for(let[U,H]of Object.entries(Q))if(G.test(U))yield*D1(J,X,`${Y}/${r2(U)}`,H);if(typeof $.additionalProperties==="object"){for(let[U,H]of Object.entries(Q))if(!G.test(U))yield*D1($.additionalProperties,X,`${Y}/${r2(U)}`,H)}if($.additionalProperties===!1)for(let[U,H]of Object.entries(Q)){if(G.test(U))continue;return yield u(R.ObjectAdditionalProperties,$,`${Y}/${r2(U)}`,H)}}function*zL($,X,Y,Q){yield*D1(F0($,X),X,Y,Q)}function*OL($,X,Y,Q){if(!L0(Q))return yield u(R.String,$,Y,Q);if(N0($.minLength)&&!(Q.length>=$.minLength))yield u(R.StringMinLength,$,Y,Q);if(N0($.maxLength)&&!(Q.length<=$.maxLength))yield u(R.StringMaxLength,$,Y,Q);if(!new RegExp($.source,$.flags).test(Q))return yield u(R.RegExp,$,Y,Q)}function*wL($,X,Y,Q){if(!L0(Q))return yield u(R.String,$,Y,Q);if(N0($.minLength)&&!(Q.length>=$.minLength))yield u(R.StringMinLength,$,Y,Q);if(N0($.maxLength)&&!(Q.length<=$.maxLength))yield u(R.StringMaxLength,$,Y,Q);if(L0($.pattern)){if(!new RegExp($.pattern).test(Q))yield u(R.StringPattern,$,Y,Q)}if(L0($.format)){if(!b0.Has($.format))yield u(R.StringFormatUnknown,$,Y,Q);else if(!b0.Get($.format)(Q))yield u(R.StringFormat,$,Y,Q)}}function*AL($,X,Y,Q){if(!d2(Q))yield u(R.Symbol,$,Y,Q)}function*ZL($,X,Y,Q){if(!L0(Q))return yield u(R.String,$,Y,Q);if(!new RegExp($.pattern).test(Q))yield u(R.StringPattern,$,Y,Q)}function*LL($,X,Y,Q){yield*D1(F0($,X),X,Y,Q)}function*jL($,X,Y,Q){if(!$0(Q))return yield u(R.Tuple,$,Y,Q);if($.items===void 0&&Q.length!==0)return yield u(R.TupleLength,$,Y,Q);if(Q.length!==$.maxItems)return yield u(R.TupleLength,$,Y,Q);if(!$.items)return;for(let W=0;W<$.items.length;W++)yield*D1($.items[W],X,`${Y}/${W}`,Q[W])}function*KL($,X,Y,Q){if(!i0(Q))yield u(R.Undefined,$,Y,Q)}function*FL($,X,Y,Q){if(M0($,X,Q))return;let W=$.anyOf.map((J)=>new M6(D1(J,X,Y,Q)));yield u(R.Union,$,Y,Q,W)}function*SL($,X,Y,Q){if(!V6(Q))return yield u(R.Uint8Array,$,Y,Q);if(N0($.maxByteLength)&&!(Q.length<=$.maxByteLength))yield u(R.Uint8ArrayMaxByteLength,$,Y,Q);if(N0($.minByteLength)&&!(Q.length>=$.minByteLength))yield u(R.Uint8ArrayMinByteLength,$,Y,Q)}function*DL($,X,Y,Q){}function*_L($,X,Y,Q){if(!c0.IsVoidLike(Q))yield u(R.Void,$,Y,Q)}function*RL($,X,Y,Q){if(!L1.Get($[F])($,Q))yield u(R.Kind,$,Y,Q)}function*D1($,X,Y,Q){let W=N0($.$id)?[...X,$]:X,J=$;switch(J[F]){case"Any":return yield*iZ(J,W,Y,Q);case"Argument":return yield*nZ(J,W,Y,Q);case"Array":return yield*oZ(J,W,Y,Q);case"AsyncIterator":return yield*rZ(J,W,Y,Q);case"BigInt":return yield*sZ(J,W,Y,Q);case"Boolean":return yield*tZ(J,W,Y,Q);case"Constructor":return yield*aZ(J,W,Y,Q);case"Date":return yield*eZ(J,W,Y,Q);case"Function":return yield*$L(J,W,Y,Q);case"Import":return yield*XL(J,W,Y,Q);case"Integer":return yield*YL(J,W,Y,Q);case"Intersect":return yield*QL(J,W,Y,Q);case"Iterator":return yield*WL(J,W,Y,Q);case"Literal":return yield*JL(J,W,Y,Q);case"Never":return yield*GL(J,W,Y,Q);case"Not":return yield*ML(J,W,Y,Q);case"Null":return yield*UL(J,W,Y,Q);case"Number":return yield*HL(J,W,Y,Q);case"Object":return yield*BL(J,W,Y,Q);case"Promise":return yield*qL(J,W,Y,Q);case"Record":return yield*NL(J,W,Y,Q);case"Ref":return yield*zL(J,W,Y,Q);case"RegExp":return yield*OL(J,W,Y,Q);case"String":return yield*wL(J,W,Y,Q);case"Symbol":return yield*AL(J,W,Y,Q);case"TemplateLiteral":return yield*ZL(J,W,Y,Q);case"This":return yield*LL(J,W,Y,Q);case"Tuple":return yield*jL(J,W,Y,Q);case"Undefined":return yield*KL(J,W,Y,Q);case"Union":return yield*FL(J,W,Y,Q);case"Uint8Array":return yield*SL(J,W,Y,Q);case"Unknown":return yield*DL(J,W,Y,Q);case"Void":return yield*_L(J,W,Y,Q);default:if(!L1.Has(J[F]))throw new yJ($);return yield*RL(J,W,Y,Q)}}function F2(...$){let X=$.length===3?D1($[0],$[1],"",$[2]):D1($[0],[],"",$[1]);return new M6(X)}var PL=function($,X,Y,Q,W){if(Q==="m")throw new TypeError("Private method is not writable");if(Q==="a"&&!W)throw new TypeError("Private accessor was defined without a setter");if(typeof X==="function"?$!==X||!W:!X.has($))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Q==="a"?W.call($,Y):W?W.value=Y:X.set($,Y),Y},dJ=function($,X,Y,Q){if(Y==="a"&&!Q)throw new TypeError("Private accessor was defined without a getter");if(typeof X==="function"?$!==X||!Q:!X.has($))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Y==="m"?Q:Y==="a"?Q.call($):Q?Q.value:X.get($)},GX,L7,cJ;class mJ extends t{constructor($){let X=$.First();super(X===void 0?"Invalid Value":X.message);GX.add(this),L7.set(this,void 0),PL(this,L7,$,"f"),this.error=X}Errors(){return new M6(dJ(this,GX,"m",cJ).call(this))}}L7=new WeakMap,GX=new WeakSet,cJ=function*$(){if(this.error)yield this.error;yield*dJ(this,L7,"f")};function hJ($,X,Y){if(M0($,X,Y))return;throw new mJ(F2($,X,Y))}function j7(...$){return $.length===3?hJ($[0],$[1],$[2]):hJ($[0],[],$[1])}function VL($){let X={};for(let Y of Object.getOwnPropertyNames($))X[Y]=S0($[Y]);for(let Y of Object.getOwnPropertySymbols($))X[Y]=S0($[Y]);return X}function CL($){return $.map((X)=>S0(X))}function EL($){return $.slice()}function bL($){return new Map(S0([...$.entries()]))}function IL($){return new Set(S0([...$.entries()]))}function TL($){return new Date($.toISOString())}function xL($){return $}function S0($){if($0($))return CL($);if(m1($))return TL($);if(C5($))return EL($);if(HQ($))return bL($);if(BQ($))return IL($);if(G0($))return VL($);if(w5($))return xL($);throw new Error("ValueClone: Unable to clone value")}class f5 extends t{constructor($,X){super(X);this.schema=$}}function D0($){return O8($)?$():S0($)}function kL($,X){if(e($,"default"))return D0($.default);else return{}}function gL($,X){return{}}function fL($,X){if($.uniqueItems===!0&&!e($,"default"))throw new f5($,"Array with the uniqueItems constraint requires a default value");else if("contains"in $&&!e($,"default"))throw new f5($,"Array with the contains constraint requires a default value");else if("default"in $)return D0($.default);else if($.minItems!==void 0)return Array.from({length:$.minItems}).map((Y)=>{return $5($.items,X)});else return[]}function vL($,X){if(e($,"default"))return D0($.default);else return async function*(){}()}function yL($,X){if(e($,"default"))return D0($.default);else return BigInt(0)}function hL($,X){if(e($,"default"))return D0($.default);else return!1}function dL($,X){if(e($,"default"))return D0($.default);else{let Y=$5($.returns,X);if(typeof Y==="object"&&!Array.isArray(Y))return class{constructor(){for(let[Q,W]of Object.entries(Y)){let J=this;J[Q]=W}}};else return class{}}}function cL($,X){if(e($,"default"))return D0($.default);else if($.minimumTimestamp!==void 0)return new Date($.minimumTimestamp);else return new Date}function mL($,X){if(e($,"default"))return D0($.default);else return()=>$5($.returns,X)}function uL($,X){let Y=globalThis.Object.values($.$defs),Q=$.$defs[$.$ref];return $5(Q,[...X,...Y])}function lL($,X){if(e($,"default"))return D0($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function pL($,X){if(e($,"default"))return D0($.default);else{let Y=$.allOf.reduce((Q,W)=>{let J=$5(W,X);return typeof J==="object"?{...Q,...J}:J},{});if(!M0($,X,Y))throw new f5($,"Intersect produced invalid value. Consider using a default value.");return Y}}function iL($,X){if(e($,"default"))return D0($.default);else return function*(){}()}function nL($,X){if(e($,"default"))return D0($.default);else return $.const}function oL($,X){if(e($,"default"))return D0($.default);else throw new f5($,"Never types cannot be created. Consider using a default value.")}function rL($,X){if(e($,"default"))return D0($.default);else throw new f5($,"Not types must have a default value")}function sL($,X){if(e($,"default"))return D0($.default);else return null}function tL($,X){if(e($,"default"))return D0($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function aL($,X){if(e($,"default"))return D0($.default);else{let Y=new Set($.required),Q={};for(let[W,J]of Object.entries($.properties)){if(!Y.has(W))continue;Q[W]=$5(J,X)}return Q}}function eL($,X){if(e($,"default"))return D0($.default);else return Promise.resolve($5($.item,X))}function $j($,X){let[Y,Q]=Object.entries($.patternProperties)[0];if(e($,"default"))return D0($.default);else if(!(Y===L2||Y===Z2)){let W=Y.slice(1,Y.length-1).split("|"),J={};for(let G of W)J[G]=$5(Q,X);return J}else return{}}function Xj($,X){if(e($,"default"))return D0($.default);else return $5(F0($,X),X)}function Yj($,X){if(e($,"default"))return D0($.default);else throw new f5($,"RegExp types cannot be created. Consider using a default value.")}function Qj($,X){if($.pattern!==void 0)if(!e($,"default"))throw new f5($,"String types with patterns must specify a default value");else return D0($.default);else if($.format!==void 0)if(!e($,"default"))throw new f5($,"String types with formats must specify a default value");else return D0($.default);else if(e($,"default"))return D0($.default);else if($.minLength!==void 0)return Array.from({length:$.minLength}).map(()=>" ").join("");else return""}function Wj($,X){if(e($,"default"))return D0($.default);else if("value"in $)return Symbol.for($.value);else return Symbol()}function Jj($,X){if(e($,"default"))return D0($.default);if(!e9($))throw new f5($,"Can only create template literals that produce a finite variants. Consider using a default value.");return f6($)[0]}function Gj($,X){if(uJ++>Oj)throw new f5($,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");if(e($,"default"))return D0($.default);else return $5(F0($,X),X)}function Mj($,X){if(e($,"default"))return D0($.default);if($.items===void 0)return[];else return Array.from({length:$.minItems}).map((Y,Q)=>$5($.items[Q],X))}function Uj($,X){if(e($,"default"))return D0($.default);else return}function Hj($,X){if(e($,"default"))return D0($.default);else if($.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");else return $5($.anyOf[0],X)}function Bj($,X){if(e($,"default"))return D0($.default);else if($.minByteLength!==void 0)return new Uint8Array($.minByteLength);else return new Uint8Array(0)}function qj($,X){if(e($,"default"))return D0($.default);else return{}}function Nj($,X){if(e($,"default"))return D0($.default);else return}function zj($,X){if(e($,"default"))return D0($.default);else throw new Error("User defined types must specify a default value")}function $5($,X){let Y=F1($,X),Q=$;switch(Q[F]){case"Any":return kL(Q,Y);case"Argument":return gL(Q,Y);case"Array":return fL(Q,Y);case"AsyncIterator":return vL(Q,Y);case"BigInt":return yL(Q,Y);case"Boolean":return hL(Q,Y);case"Constructor":return dL(Q,Y);case"Date":return cL(Q,Y);case"Function":return mL(Q,Y);case"Import":return uL(Q,Y);case"Integer":return lL(Q,Y);case"Intersect":return pL(Q,Y);case"Iterator":return iL(Q,Y);case"Literal":return nL(Q,Y);case"Never":return oL(Q,Y);case"Not":return rL(Q,Y);case"Null":return sL(Q,Y);case"Number":return tL(Q,Y);case"Object":return aL(Q,Y);case"Promise":return eL(Q,Y);case"Record":return $j(Q,Y);case"Ref":return Xj(Q,Y);case"RegExp":return Yj(Q,Y);case"String":return Qj(Q,Y);case"Symbol":return Wj(Q,Y);case"TemplateLiteral":return Jj(Q,Y);case"This":return Gj(Q,Y);case"Tuple":return Mj(Q,Y);case"Undefined":return Uj(Q,Y);case"Union":return Hj(Q,Y);case"Uint8Array":return Bj(Q,Y);case"Unknown":return qj(Q,Y);case"Void":return Nj(Q,Y);default:if(!L1.Has(Q[F]))throw new f5(Q,"Unknown type");return zj(Q,Y)}}var Oj=512,uJ=0;function v5(...$){return uJ=0,$.length===2?$5($[0],$[1]):$5($[0],[])}class MX extends t{constructor($,X){super(X);this.schema=$}}function wj($,X,Y){if($[F]==="Object"&&typeof Y==="object"&&!h2(Y)){let Q=$,W=Object.getOwnPropertyNames(Y),J=Object.entries(Q.properties),[G,U]=[1/J.length,J.length];return J.reduce((H,[B,q])=>{let O=q[F]==="Literal"&&q.const===Y[B]?U:0,A=M0(q,X,Y[B])?G:0,w=W.includes(B)?G:0;return H+(O+A+w)},0)}else return M0($,X,Y)?1:0}function Aj($,X,Y){let Q=$.anyOf.map((G)=>F0(G,X)),[W,J]=[Q[0],0];for(let G of Q){let U=wj(G,X,Y);if(U>J)W=G,J=U}return W}function Zj($,X,Y){if("default"in $)return typeof Y==="function"?$.default:S0($.default);else{let Q=Aj($,X,Y);return e4(Q,X,Y)}}function Lj($,X,Y){return M0($,X,Y)?S0(Y):v5($,X)}function jj($,X,Y){return M0($,X,Y)?Y:v5($,X)}function Kj($,X,Y){if(M0($,X,Y))return S0(Y);let Q=$0(Y)?S0(Y):v5($,X),W=r($.minItems)&&Q.length<$.minItems?[...Q,...Array.from({length:$.minItems-Q.length},()=>null)]:Q,G=(r($.maxItems)&&W.length>$.maxItems?W.slice(0,$.maxItems):W).map((H)=>e5($.items,X,H));if($.uniqueItems!==!0)return G;let U=[...new Set(G)];if(!M0($,X,U))throw new MX($,"Array cast produced invalid data due to uniqueItems constraint");return U}function Fj($,X,Y){if(M0($,X,Y))return v5($,X);let Q=new Set($.returns.required||[]),W=function(){};for(let[J,G]of Object.entries($.returns.properties)){if(!Q.has(J)&&Y.prototype[J]===void 0)continue;W.prototype[J]=e5(G,X,Y.prototype[J])}return W}function Sj($,X,Y){let Q=globalThis.Object.values($.$defs),W=$.$defs[$.$ref];return e5(W,[...X,...Q],Y)}function Dj($,X,Y){let Q=v5($,X),W=G0(Q)&&G0(Y)?{...Q,...Y}:Y;return M0($,X,W)?W:v5($,X)}function _j($,X,Y){throw new MX($,"Never types cannot be cast")}function Rj($,X,Y){if(M0($,X,Y))return Y;if(Y===null||typeof Y!=="object")return v5($,X);let Q=new Set($.required||[]),W={};for(let[J,G]of Object.entries($.properties)){if(!Q.has(J)&&Y[J]===void 0)continue;W[J]=e5(G,X,Y[J])}if(typeof $.additionalProperties==="object"){let J=Object.getOwnPropertyNames($.properties);for(let G of Object.getOwnPropertyNames(Y)){if(J.includes(G))continue;W[G]=e5($.additionalProperties,X,Y[G])}}return W}function Pj($,X,Y){if(M0($,X,Y))return S0(Y);if(Y===null||typeof Y!=="object"||Array.isArray(Y)||Y instanceof Date)return v5($,X);let Q=Object.getOwnPropertyNames($.patternProperties)[0],W=$.patternProperties[Q],J={};for(let[G,U]of Object.entries(Y))J[G]=e5(W,X,U);return J}function Vj($,X,Y){return e5(F0($,X),X,Y)}function Cj($,X,Y){return e5(F0($,X),X,Y)}function Ej($,X,Y){if(M0($,X,Y))return S0(Y);if(!$0(Y))return v5($,X);if($.items===void 0)return[];return $.items.map((Q,W)=>e5(Q,X,Y[W]))}function bj($,X,Y){return M0($,X,Y)?S0(Y):Zj($,X,Y)}function e5($,X,Y){let Q=L0($.$id)?F1($,X):X,W=$;switch($[F]){case"Array":return Kj(W,Q,Y);case"Constructor":return Fj(W,Q,Y);case"Import":return Sj(W,Q,Y);case"Intersect":return Dj(W,Q,Y);case"Never":return _j(W,Q,Y);case"Object":return Rj(W,Q,Y);case"Record":return Pj(W,Q,Y);case"Ref":return Vj(W,Q,Y);case"This":return Cj(W,Q,Y);case"Tuple":return Ej(W,Q,Y);case"Union":return bj(W,Q,Y);case"Date":case"Symbol":case"Uint8Array":return Lj($,X,Y);default:return jj(W,Q,Y)}}function e4(...$){return $.length===3?e5($[0],$[1],$[2]):e5($[0],[],$[1])}function Ij($){return A8($)&&$[F]!=="Unsafe"}function Tj($,X,Y){if(!$0(Y))return Y;return Y.map((Q)=>X5($.items,X,Q))}function xj($,X,Y){let Q=globalThis.Object.values($.$defs),W=$.$defs[$.$ref];return X5(W,[...X,...Q],Y)}function kj($,X,Y){let Q=$.unevaluatedProperties,J=$.allOf.map((U)=>X5(U,X,S0(Y))).reduce((U,H)=>G0(H)?{...U,...H}:H,{});if(!G0(Y)||!G0(J)||!A8(Q))return J;let G=a1($);for(let U of Object.getOwnPropertyNames(Y)){if(G.includes(U))continue;if(M0(Q,X,Y[U]))J[U]=X5(Q,X,Y[U])}return J}function gj($,X,Y){if(!G0(Y)||$0(Y))return Y;let Q=$.additionalProperties;for(let W of Object.getOwnPropertyNames(Y)){if(e($.properties,W)){Y[W]=X5($.properties[W],X,Y[W]);continue}if(A8(Q)&&M0(Q,X,Y[W])){Y[W]=X5(Q,X,Y[W]);continue}delete Y[W]}return Y}function fj($,X,Y){if(!G0(Y))return Y;let Q=$.additionalProperties,W=Object.getOwnPropertyNames(Y),[J,G]=Object.entries($.patternProperties)[0],U=new RegExp(J);for(let H of W){if(U.test(H)){Y[H]=X5(G,X,Y[H]);continue}if(A8(Q)&&M0(Q,X,Y[H])){Y[H]=X5(Q,X,Y[H]);continue}delete Y[H]}return Y}function vj($,X,Y){return X5(F0($,X),X,Y)}function yj($,X,Y){return X5(F0($,X),X,Y)}function hj($,X,Y){if(!$0(Y))return Y;if(i0($.items))return[];let Q=Math.min(Y.length,$.items.length);for(let W=0;W<Q;W++)Y[W]=X5($.items[W],X,Y[W]);return Y.length>Q?Y.slice(0,Q):Y}function dj($,X,Y){for(let Q of $.anyOf)if(Ij(Q)&&M0(Q,X,Y))return X5(Q,X,Y);return Y}function X5($,X,Y){let Q=L0($.$id)?F1($,X):X,W=$;switch(W[F]){case"Array":return Tj(W,Q,Y);case"Import":return xj(W,Q,Y);case"Intersect":return kj(W,Q,Y);case"Object":return gj(W,Q,Y);case"Record":return fj(W,Q,Y);case"Ref":return vj(W,Q,Y);case"This":return yj(W,Q,Y);case"Tuple":return hj(W,Q,Y);case"Union":return dj(W,Q,Y);default:return Y}}function K7(...$){return $.length===3?X5($[0],$[1],$[2]):X5($[0],[],$[1])}function F7($){return L0($)&&!isNaN($)&&!isNaN(parseFloat($))}function cj($){return C1($)||A2($)||r($)}function $9($){return $===!0||r($)&&$===1||C1($)&&$===BigInt("1")||L0($)&&($.toLowerCase()==="true"||$==="1")}function X9($){return $===!1||r($)&&($===0||Object.is($,-0))||C1($)&&$===BigInt("0")||L0($)&&($.toLowerCase()==="false"||$==="0"||$==="-0")}function mj($){return L0($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function uj($){return L0($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function lj($){return L0($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function pj($){return L0($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function ij($){return L0($)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test($)}function nj($,X){let Y=pJ($);return Y===X?Y:$}function oj($,X){let Y=iJ($);return Y===X?Y:$}function rj($,X){let Y=lJ($);return Y===X?Y:$}function sj($,X){return L0($.const)?nj(X,$.const):r($.const)?oj(X,$.const):A2($.const)?rj(X,$.const):X}function lJ($){return $9($)?!0:X9($)?!1:$}function tj($){let X=(Y)=>Y.split(".")[0];return F7($)?BigInt(X($)):r($)?BigInt(Math.trunc($)):X9($)?BigInt(0):$9($)?BigInt(1):$}function pJ($){return d2($)&&$.description!==void 0?$.description.toString():cj($)?$.toString():$}function iJ($){return F7($)?parseFloat($):$9($)?1:X9($)?0:$}function aj($){return F7($)?parseInt($):r($)?Math.trunc($):$9($)?1:X9($)?0:$}function ej($){return L0($)&&$.toLowerCase()==="null"?null:$}function $K($){return L0($)&&$==="undefined"?void 0:$}function XK($){return m1($)?$:r($)?new Date($):$9($)?new Date(1):X9($)?new Date(0):F7($)?new Date(parseInt($)):uj($)?new Date(`1970-01-01T${$}.000Z`):mj($)?new Date(`1970-01-01T${$}`):pj($)?new Date(`${$}.000Z`):lj($)?new Date($):ij($)?new Date(`${$}T00:00:00.000Z`):$}function YK($){return $}function QK($,X,Y){return($0(Y)?Y:[Y]).map((W)=>$2($.items,X,W))}function WK($,X,Y){return tj(Y)}function JK($,X,Y){return lJ(Y)}function GK($,X,Y){return XK(Y)}function MK($,X,Y){let Q=globalThis.Object.values($.$defs),W=$.$defs[$.$ref];return $2(W,[...X,...Q],Y)}function UK($,X,Y){return aj(Y)}function HK($,X,Y){return $.allOf.reduce((Q,W)=>$2(W,X,Q),Y)}function BK($,X,Y){return sj($,Y)}function qK($,X,Y){return ej(Y)}function NK($,X,Y){return iJ(Y)}function zK($,X,Y){if(!G0(Y))return Y;for(let Q of Object.getOwnPropertyNames($.properties)){if(!e(Y,Q))continue;Y[Q]=$2($.properties[Q],X,Y[Q])}return Y}function OK($,X,Y){if(!G0(Y))return Y;let W=Object.getOwnPropertyNames($.patternProperties)[0],J=$.patternProperties[W];for(let[G,U]of Object.entries(Y))Y[G]=$2(J,X,U);return Y}function wK($,X,Y){return $2(F0($,X),X,Y)}function AK($,X,Y){return pJ(Y)}function ZK($,X,Y){return L0(Y)||r(Y)?Symbol(Y):Y}function LK($,X,Y){return $2(F0($,X),X,Y)}function jK($,X,Y){if(!($0(Y)&&!i0($.items)))return Y;return Y.map((W,J)=>{return J<$.items.length?$2($.items[J],X,W):W})}function KK($,X,Y){return $K(Y)}function FK($,X,Y){for(let Q of $.anyOf){let W=$2(Q,X,S0(Y));if(!M0(Q,X,W))continue;return W}return Y}function $2($,X,Y){let Q=F1($,X),W=$;switch($[F]){case"Array":return QK(W,Q,Y);case"BigInt":return WK(W,Q,Y);case"Boolean":return JK(W,Q,Y);case"Date":return GK(W,Q,Y);case"Import":return MK(W,Q,Y);case"Integer":return UK(W,Q,Y);case"Intersect":return HK(W,Q,Y);case"Literal":return BK(W,Q,Y);case"Null":return qK(W,Q,Y);case"Number":return NK(W,Q,Y);case"Object":return zK(W,Q,Y);case"Record":return OK(W,Q,Y);case"Ref":return wK(W,Q,Y);case"String":return AK(W,Q,Y);case"Symbol":return ZK(W,Q,Y);case"This":return LK(W,Q,Y);case"Tuple":return jK(W,Q,Y);case"Undefined":return KK(W,Q,Y);case"Union":return FK(W,Q,Y);default:return YK(Y)}}function S7(...$){return $.length===3?$2($[0],$[1],$[2]):$2($[0],[],$[1])}class Y9 extends t{constructor($,X,Y){super("Unable to decode value as it does not match the expected schema");this.schema=$,this.value=X,this.error=Y}}class D7 extends t{constructor($,X,Y,Q){super(Q instanceof Error?Q.message:"Unknown error");this.schema=$,this.path=X,this.value=Y,this.error=Q}}function t0($,X,Y){try{return R0($)?$[k0].Decode(Y):Y}catch(Q){throw new D7($,X,Y,Q)}}function SK($,X,Y,Q){return $0(Q)?t0($,Y,Q.map((W,J)=>X2($.items,X,`${Y}/${J}`,W))):t0($,Y,Q)}function DK($,X,Y,Q){if(!G0(Q)||w5(Q))return t0($,Y,Q);let W=W7($),J=W.map((q)=>q[0]),G={...Q};for(let[q,O]of W)if(q in G)G[q]=X2(O,X,`${Y}/${q}`,G[q]);if(!R0($.unevaluatedProperties))return t0($,Y,G);let U=Object.getOwnPropertyNames(G),H=$.unevaluatedProperties,B={...G};for(let q of U)if(!J.includes(q))B[q]=t0(H,`${Y}/${q}`,B[q]);return t0($,Y,B)}function _K($,X,Y,Q){let W=globalThis.Object.values($.$defs),J=$.$defs[$.$ref],G=X2(J,[...X,...W],Y,Q);return t0($,Y,G)}function RK($,X,Y,Q){return t0($,Y,X2($.not,X,Y,Q))}function PK($,X,Y,Q){if(!G0(Q))return t0($,Y,Q);let W=a1($),J={...Q};for(let B of W){if(!e(J,B))continue;if(i0(J[B])&&(!u2($.properties[B])||c0.IsExactOptionalProperty(J,B)))continue;J[B]=X2($.properties[B],X,`${Y}/${B}`,J[B])}if(!s0($.additionalProperties))return t0($,Y,J);let G=Object.getOwnPropertyNames(J),U=$.additionalProperties,H={...J};for(let B of G)if(!W.includes(B))H[B]=t0(U,`${Y}/${B}`,H[B]);return t0($,Y,H)}function VK($,X,Y,Q){if(!G0(Q))return t0($,Y,Q);let W=Object.getOwnPropertyNames($.patternProperties)[0],J=new RegExp(W),G={...Q};for(let q of Object.getOwnPropertyNames(Q))if(J.test(q))G[q]=X2($.patternProperties[W],X,`${Y}/${q}`,G[q]);if(!s0($.additionalProperties))return t0($,Y,G);let U=Object.getOwnPropertyNames(G),H=$.additionalProperties,B={...G};for(let q of U)if(!J.test(q))B[q]=t0(H,`${Y}/${q}`,B[q]);return t0($,Y,B)}function CK($,X,Y,Q){let W=F0($,X);return t0($,Y,X2(W,X,Y,Q))}function EK($,X,Y,Q){let W=F0($,X);return t0($,Y,X2(W,X,Y,Q))}function bK($,X,Y,Q){return $0(Q)&&$0($.items)?t0($,Y,$.items.map((W,J)=>X2(W,X,`${Y}/${J}`,Q[J]))):t0($,Y,Q)}function IK($,X,Y,Q){for(let W of $.anyOf){if(!M0(W,X,Q))continue;let J=X2(W,X,Y,Q);return t0($,Y,J)}return t0($,Y,Q)}function X2($,X,Y,Q){let W=F1($,X),J=$;switch($[F]){case"Array":return SK(J,W,Y,Q);case"Import":return _K(J,W,Y,Q);case"Intersect":return DK(J,W,Y,Q);case"Not":return RK(J,W,Y,Q);case"Object":return PK(J,W,Y,Q);case"Record":return VK(J,W,Y,Q);case"Ref":return CK(J,W,Y,Q);case"Symbol":return t0(J,Y,Q);case"This":return EK(J,W,Y,Q);case"Tuple":return bK(J,W,Y,Q);case"Union":return IK(J,W,Y,Q);default:return t0(J,Y,Q)}}function r6($,X,Y){return X2($,X,"",Y)}class Q9 extends t{constructor($,X,Y){super("The encoded value does not match the expected schema");this.schema=$,this.value=X,this.error=Y}}class nJ extends t{constructor($,X,Y,Q){super(`${Q instanceof Error?Q.message:"Unknown error"}`);this.schema=$,this.path=X,this.value=Y,this.error=Q}}function E1($,X,Y){try{return R0($)?$[k0].Encode(Y):Y}catch(Q){throw new nJ($,X,Y,Q)}}function TK($,X,Y,Q){let W=E1($,Y,Q);return $0(W)?W.map((J,G)=>Y2($.items,X,`${Y}/${G}`,J)):W}function xK($,X,Y,Q){let W=globalThis.Object.values($.$defs),J=$.$defs[$.$ref],G=E1($,Y,Q);return Y2(J,[...X,...W],Y,G)}function kK($,X,Y,Q){let W=E1($,Y,Q);if(!G0(Q)||w5(Q))return W;let J=W7($),G=J.map((O)=>O[0]),U={...W};for(let[O,A]of J)if(O in U)U[O]=Y2(A,X,`${Y}/${O}`,U[O]);if(!R0($.unevaluatedProperties))return U;let H=Object.getOwnPropertyNames(U),B=$.unevaluatedProperties,q={...U};for(let O of H)if(!G.includes(O))q[O]=E1(B,`${Y}/${O}`,q[O]);return q}function gK($,X,Y,Q){return E1($.not,Y,E1($,Y,Q))}function fK($,X,Y,Q){let W=E1($,Y,Q);if(!G0(W))return W;let J=a1($),G={...W};for(let q of J){if(!e(G,q))continue;if(i0(G[q])&&(!u2($.properties[q])||c0.IsExactOptionalProperty(G,q)))continue;G[q]=Y2($.properties[q],X,`${Y}/${q}`,G[q])}if(!s0($.additionalProperties))return G;let U=Object.getOwnPropertyNames(G),H=$.additionalProperties,B={...G};for(let q of U)if(!J.includes(q))B[q]=E1(H,`${Y}/${q}`,B[q]);return B}function vK($,X,Y,Q){let W=E1($,Y,Q);if(!G0(Q))return W;let J=Object.getOwnPropertyNames($.patternProperties)[0],G=new RegExp(J),U={...W};for(let O of Object.getOwnPropertyNames(Q))if(G.test(O))U[O]=Y2($.patternProperties[J],X,`${Y}/${O}`,U[O]);if(!s0($.additionalProperties))return U;let H=Object.getOwnPropertyNames(U),B=$.additionalProperties,q={...U};for(let O of H)if(!G.test(O))q[O]=E1(B,`${Y}/${O}`,q[O]);return q}function yK($,X,Y,Q){let W=F0($,X),J=Y2(W,X,Y,Q);return E1($,Y,J)}function hK($,X,Y,Q){let W=F0($,X),J=Y2(W,X,Y,Q);return E1($,Y,J)}function dK($,X,Y,Q){let W=E1($,Y,Q);return $0($.items)?$.items.map((J,G)=>Y2(J,X,`${Y}/${G}`,W[G])):[]}function cK($,X,Y,Q){for(let W of $.anyOf){if(!M0(W,X,Q))continue;let J=Y2(W,X,Y,Q);return E1($,Y,J)}for(let W of $.anyOf){let J=Y2(W,X,Y,Q);if(!M0($,X,J))continue;return E1($,Y,J)}return E1($,Y,Q)}function Y2($,X,Y,Q){let W=F1($,X),J=$;switch($[F]){case"Array":return TK(J,W,Y,Q);case"Import":return xK(J,W,Y,Q);case"Intersect":return kK(J,W,Y,Q);case"Not":return gK(J,W,Y,Q);case"Object":return fK(J,W,Y,Q);case"Record":return vK(J,W,Y,Q);case"Ref":return yK(J,W,Y,Q);case"This":return hK(J,W,Y,Q);case"Tuple":return dK(J,W,Y,Q);case"Union":return cK(J,W,Y,Q);default:return E1(J,Y,Q)}}function s6($,X,Y){return Y2($,X,"",Y)}function mK($,X){return R0($)||j1($.items,X)}function uK($,X){return R0($)||j1($.items,X)}function lK($,X){return R0($)||j1($.returns,X)||$.parameters.some((Y)=>j1(Y,X))}function pK($,X){return R0($)||j1($.returns,X)||$.parameters.some((Y)=>j1(Y,X))}function iK($,X){return R0($)||R0($.unevaluatedProperties)||$.allOf.some((Y)=>j1(Y,X))}function nK($,X){let Y=globalThis.Object.getOwnPropertyNames($.$defs).reduce((W,J)=>[...W,$.$defs[J]],[]),Q=$.$defs[$.$ref];return R0($)||j1(Q,[...Y,...X])}function oK($,X){return R0($)||j1($.items,X)}function rK($,X){return R0($)||j1($.not,X)}function sK($,X){return R0($)||Object.values($.properties).some((Y)=>j1(Y,X))||s0($.additionalProperties)&&j1($.additionalProperties,X)}function tK($,X){return R0($)||j1($.item,X)}function aK($,X){let Y=Object.getOwnPropertyNames($.patternProperties)[0],Q=$.patternProperties[Y];return R0($)||j1(Q,X)||s0($.additionalProperties)&&R0($.additionalProperties)}function eK($,X){if(R0($))return!0;return j1(F0($,X),X)}function $F($,X){if(R0($))return!0;return j1(F0($,X),X)}function XF($,X){return R0($)||!i0($.items)&&$.items.some((Y)=>j1(Y,X))}function YF($,X){return R0($)||$.anyOf.some((Y)=>j1(Y,X))}function j1($,X){let Y=F1($,X),Q=$;if($.$id&&UX.has($.$id))return!1;if($.$id)UX.add($.$id);switch($[F]){case"Array":return mK(Q,Y);case"AsyncIterator":return uK(Q,Y);case"Constructor":return lK(Q,Y);case"Function":return pK(Q,Y);case"Import":return nK(Q,Y);case"Intersect":return iK(Q,Y);case"Iterator":return oK(Q,Y);case"Not":return rK(Q,Y);case"Object":return sK(Q,Y);case"Promise":return tK(Q,Y);case"Record":return aK(Q,Y);case"Ref":return eK(Q,Y);case"This":return $F(Q,Y);case"Tuple":return XF(Q,Y);case"Union":return YF(Q,Y);default:return R0($)}}var UX=new Set;function s2($,X){return UX.clear(),j1($,X)}function oJ(...$){let[X,Y,Q]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]];if(!M0(X,Y,Q))throw new Y9(X,Q,F2(X,Y,Q).First());return s2(X,Y)?r6(X,Y,Q):Q}function t2($,X){let Y=e($,"default")?$.default:void 0,Q=O8(Y)?Y():S0(Y);return i0(X)?Q:G0(X)&&G0(Q)?Object.assign(Q,X):X}function HX($){return A8($)&&"default"in $}function QF($,X,Y){if($0(Y)){for(let W=0;W<Y.length;W++)Y[W]=l1($.items,X,Y[W]);return Y}let Q=t2($,Y);if(!$0(Q))return Q;for(let W=0;W<Q.length;W++)Q[W]=l1($.items,X,Q[W]);return Q}function WF($,X,Y){return m1(Y)?Y:t2($,Y)}function JF($,X,Y){let Q=globalThis.Object.values($.$defs),W=$.$defs[$.$ref];return l1(W,[...X,...Q],Y)}function GF($,X,Y){let Q=t2($,Y);return $.allOf.reduce((W,J)=>{let G=l1(J,X,Q);return G0(G)?{...W,...G}:G},{})}function MF($,X,Y){let Q=t2($,Y);if(!G0(Q))return Q;let W=Object.getOwnPropertyNames($.properties);for(let J of W){let G=l1($.properties[J],X,Q[J]);if(i0(G))continue;Q[J]=l1($.properties[J],X,Q[J])}if(!HX($.additionalProperties))return Q;for(let J of Object.getOwnPropertyNames(Q)){if(W.includes(J))continue;Q[J]=l1($.additionalProperties,X,Q[J])}return Q}function UF($,X,Y){let Q=t2($,Y);if(!G0(Q))return Q;let W=$.additionalProperties,[J,G]=Object.entries($.patternProperties)[0],U=new RegExp(J);for(let H of Object.getOwnPropertyNames(Q)){if(!(U.test(H)&&HX(G)))continue;Q[H]=l1(G,X,Q[H])}if(!HX(W))return Q;for(let H of Object.getOwnPropertyNames(Q)){if(U.test(H))continue;Q[H]=l1(W,X,Q[H])}return Q}function HF($,X,Y){return l1(F0($,X),X,t2($,Y))}function BF($,X,Y){return l1(F0($,X),X,Y)}function qF($,X,Y){let Q=t2($,Y);if(!$0(Q)||i0($.items))return Q;let[W,J]=[$.items,Math.max($.items.length,Q.length)];for(let G=0;G<J;G++)if(G<W.length)Q[G]=l1(W[G],X,Q[G]);return Q}function NF($,X,Y){let Q=t2($,Y);for(let W of $.anyOf){let J=l1(W,X,S0(Q));if(M0(W,X,J))return J}return Q}function l1($,X,Y){let Q=F1($,X),W=$;switch(W[F]){case"Array":return QF(W,Q,Y);case"Date":return WF(W,Q,Y);case"Import":return JF(W,Q,Y);case"Intersect":return GF(W,Q,Y);case"Object":return MF(W,Q,Y);case"Record":return UF(W,Q,Y);case"Ref":return HF(W,Q,Y);case"This":return BF(W,Q,Y);case"Tuple":return qF(W,Q,Y);case"Union":return NF(W,Q,Y);default:return t2(W,Y)}}function _7(...$){return $.length===3?l1($[0],$[1],$[2]):l1($[0],[],$[1])}var Q2={};f2(Q2,{ValuePointerRootSetError:()=>BX,ValuePointerRootDeleteError:()=>qX,Set:()=>zF,Has:()=>wF,Get:()=>AF,Format:()=>W9,Delete:()=>OF});class BX extends t{constructor($,X,Y){super("Cannot set root value");this.value=$,this.path=X,this.update=Y}}class qX extends t{constructor($,X){super("Cannot delete root value");this.value=$,this.path=X}}function rJ($){return $.indexOf("~")===-1?$:$.replace(/~1/g,"/").replace(/~0/g,"~")}function*W9($){if($==="")return;let[X,Y]=[0,0];for(let Q=0;Q<$.length;Q++)if($.charAt(Q)==="/")if(Q===0)X=Q+1;else Y=Q,yield rJ($.slice(X,Y)),X=Q+1;else Y=Q;yield rJ($.slice(X))}function zF($,X,Y){if(X==="")throw new BX($,X,Y);let[Q,W,J]=[null,$,""];for(let G of W9(X)){if(W[G]===void 0)W[G]={};Q=W,W=W[G],J=G}Q[J]=Y}function OF($,X){if(X==="")throw new qX($,X);let[Y,Q,W]=[null,$,""];for(let J of W9(X)){if(Q[J]===void 0||Q[J]===null)return;Y=Q,Q=Q[J],W=J}if(Array.isArray(Y)){let J=parseInt(W);Y.splice(J,1)}else delete Y[W]}function wF($,X){if(X==="")return!0;let[Y,Q,W]=[null,$,""];for(let J of W9(X)){if(Q[J]===void 0)return!1;Y=Q,Q=Q[J],W=J}return Object.getOwnPropertyNames(Y).includes(W)}function AF($,X){if(X==="")return $;let Y=$;for(let Q of W9(X)){if(Y[Q]===void 0)return;Y=Y[Q]}return Y}function ZF($,X){if(!G0(X))return!1;let Y=[...Object.keys($),...Object.getOwnPropertySymbols($)],Q=[...Object.keys(X),...Object.getOwnPropertySymbols(X)];if(Y.length!==Q.length)return!1;return Y.every((W)=>U6($[W],X[W]))}function LF($,X){return m1(X)&&$.getTime()===X.getTime()}function jF($,X){if(!$0(X)||$.length!==X.length)return!1;return $.every((Y,Q)=>U6(Y,X[Q]))}function KF($,X){if(!C5(X)||$.length!==X.length||Object.getPrototypeOf($).constructor.name!==Object.getPrototypeOf(X).constructor.name)return!1;return $.every((Y,Q)=>U6(Y,X[Q]))}function FF($,X){return $===X}function U6($,X){if(m1($))return LF($,X);if(C5($))return KF($,X);if($0($))return jF($,X);if(G0($))return ZF($,X);if(w5($))return FF($,X);throw new Error("ValueEquals: Unable to compare value")}var SF=V0({type:Z0("insert"),path:u1(),value:s5()}),DF=V0({type:Z0("update"),path:u1(),value:s5()}),_F=V0({type:Z0("delete"),path:u1()}),tJ=P0([SF,DF,_F]);class NX extends t{constructor($,X){super(X);this.value=$}}function R7($,X){return{type:"update",path:$,value:X}}function aJ($,X){return{type:"insert",path:$,value:X}}function eJ($){return{type:"delete",path:$}}function sJ($){if(globalThis.Object.getOwnPropertySymbols($).length>0)throw new NX($,"Cannot diff objects with symbols")}function*RF($,X,Y){if(sJ(X),sJ(Y),!v$(Y))return yield R7($,Y);let Q=globalThis.Object.getOwnPropertyNames(X),W=globalThis.Object.getOwnPropertyNames(Y);for(let J of W){if(e(X,J))continue;yield aJ(`${$}/${J}`,Y[J])}for(let J of Q){if(!e(Y,J))continue;if(U6(X,Y))continue;yield*P7(`${$}/${J}`,X[J],Y[J])}for(let J of Q){if(e(Y,J))continue;yield eJ(`${$}/${J}`)}}function*PF($,X,Y){if(!$0(Y))return yield R7($,Y);for(let Q=0;Q<Math.min(X.length,Y.length);Q++)yield*P7(`${$}/${Q}`,X[Q],Y[Q]);for(let Q=0;Q<Y.length;Q++){if(Q<X.length)continue;yield aJ(`${$}/${Q}`,Y[Q])}for(let Q=X.length-1;Q>=0;Q--){if(Q<Y.length)continue;yield eJ(`${$}/${Q}`)}}function*VF($,X,Y){if(!C5(Y)||X.length!==Y.length||globalThis.Object.getPrototypeOf(X).constructor.name!==globalThis.Object.getPrototypeOf(Y).constructor.name)return yield R7($,Y);for(let Q=0;Q<Math.min(X.length,Y.length);Q++)yield*P7(`${$}/${Q}`,X[Q],Y[Q])}function*CF($,X,Y){if(X===Y)return;yield R7($,Y)}function*P7($,X,Y){if(v$(X))return yield*RF($,X,Y);if($0(X))return yield*PF($,X,Y);if(C5(X))return yield*VF($,X,Y);if(w5(X))return yield*CF($,X,Y);throw new NX(X,"Unable to diff value")}function $G($,X){return[...P7("",$,X)]}function EF($){return $.length>0&&$[0].path===""&&$[0].type==="update"}function bF($){return $.length===0}function XG($,X){if(EF(X))return S0(X[0].value);if(bF(X))return S0($);let Y=S0($);for(let Q of X)switch(Q.type){case"insert":{Q2.Set(Y,Q.path,Q.value);break}case"update":{Q2.Set(Y,Q.path,Q.value);break}case"delete":{Q2.Delete(Y,Q.path);break}}return Y}function YG(...$){let[X,Y,Q]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]],W=s2(X,Y)?s6(X,Y,Q):Q;if(!M0(X,Y,W))throw new Q9(X,W,F2(X,Y,W).First());return W}function V7($){return G0($)&&!$0($)}class zX extends t{constructor($){super($)}}function IF($,X,Y,Q){if(!V7(Y))Q2.Set($,X,S0(Q));else{let W=Object.getOwnPropertyNames(Y),J=Object.getOwnPropertyNames(Q);for(let G of W)if(!J.includes(G))delete Y[G];for(let G of J)if(!W.includes(G))Y[G]=null;for(let G of J)OX($,`${X}/${G}`,Y[G],Q[G])}}function TF($,X,Y,Q){if(!$0(Y))Q2.Set($,X,S0(Q));else{for(let W=0;W<Q.length;W++)OX($,`${X}/${W}`,Y[W],Q[W]);Y.splice(Q.length)}}function xF($,X,Y,Q){if(C5(Y)&&Y.length===Q.length)for(let W=0;W<Y.length;W++)Y[W]=Q[W];else Q2.Set($,X,S0(Q))}function kF($,X,Y,Q){if(Y===Q)return;Q2.Set($,X,Q)}function OX($,X,Y,Q){if($0(Q))return TF($,X,Y,Q);if(C5(Q))return xF($,X,Y,Q);if(V7(Q))return IF($,X,Y,Q);if(w5(Q))return kF($,X,Y,Q)}function QG($){return C5($)||w5($)}function gF($,X){return V7($)&&$0(X)||$0($)&&V7(X)}function WG($,X){if(QG($)||QG(X))throw new zX("Only object and array types can be mutated at the root level");if(gF($,X))throw new zX("Cannot assign due type mismatch of assignable values");OX($,"",$,X)}class AX extends t{constructor($){super($)}}var wX;(function($){let X=new Map([["Assert",(J,G,U)=>{return j7(J,G,U),U}],["Cast",(J,G,U)=>e4(J,G,U)],["Clean",(J,G,U)=>K7(J,G,U)],["Clone",(J,G,U)=>S0(U)],["Convert",(J,G,U)=>S7(J,G,U)],["Decode",(J,G,U)=>s2(J,G)?r6(J,G,U):U],["Default",(J,G,U)=>_7(J,G,U)],["Encode",(J,G,U)=>s2(J,G)?s6(J,G,U):U]]);function Y(J){X.delete(J)}$.Delete=Y;function Q(J,G){X.set(J,G)}$.Set=Q;function W(J){return X.get(J)}$.Get=W})(wX||(wX={}));var JG=["Clone","Clean","Default","Convert","Assert","Decode"];function fF($,X,Y,Q){return $.reduce((W,J)=>{let G=wX.Get(J);if(i0(G))throw new AX(`Unable to find Parse operation '${J}'`);return G(X,Y,W)},Q)}function GG(...$){let[X,Y,Q,W]=$.length===4?[$[0],$[1],$[2],$[3]]:$.length===3?$0($[0])?[$[0],$[1],[],$[2]]:[JG,$[0],$[1],$[2]]:$.length===2?[JG,$[0],[],$[1]]:(()=>{throw new AX("Invalid Arguments")})();return fF(X,Y,Q,W)}var C0={};f2(C0,{ValueErrorIterator:()=>M6,Patch:()=>XG,Parse:()=>GG,Mutate:()=>WG,Hash:()=>S8,Errors:()=>F2,Equal:()=>U6,Encode:()=>YG,Edit:()=>tJ,Diff:()=>$G,Default:()=>_7,Decode:()=>oJ,Create:()=>v5,Convert:()=>S7,Clone:()=>S0,Clean:()=>K7,Check:()=>M0,Cast:()=>e4,Assert:()=>j7});class MG{constructor($,X,Y,Q){this.schema=$,this.references=X,this.checkFunc=Y,this.code=Q,this.hasTransform=s2($,X)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors($){return F2(this.schema,this.references,$)}Check($){return this.checkFunc($)}Decode($){if(!this.checkFunc($))throw new Y9(this.schema,$,this.Errors($).First());return this.hasTransform?r6(this.schema,this.references,$):$}Encode($){let X=this.hasTransform?s6(this.schema,this.references,$):$;if(!this.checkFunc(X))throw new Q9(this.schema,$,this.Errors($).First());return X}}var a2;(function($){function X(J){return J===36}$.DollarSign=X;function Y(J){return J===95}$.IsUnderscore=Y;function Q(J){return J>=65&&J<=90||J>=97&&J<=122}$.IsAlpha=Q;function W(J){return J>=48&&J<=57}$.IsNumeric=W})(a2||(a2={}));var C7;(function($){function X(J){if(J.length===0)return!1;return a2.IsNumeric(J.charCodeAt(0))}function Y(J){if(X(J))return!1;for(let G=0;G<J.length;G++){let U=J.charCodeAt(G);if(!(a2.IsAlpha(U)||a2.IsNumeric(U)||a2.DollarSign(U)||a2.IsUnderscore(U)))return!1}return!0}function Q(J){return J.replace(/'/g,"\\'")}function W(J,G){return Y(G)?`${J}.${G}`:`${J}['${Q(G)}']`}$.Encode=W})(C7||(C7={}));var ZX;(function($){function X(Y){let Q=[];for(let W=0;W<Y.length;W++){let J=Y.charCodeAt(W);if(a2.IsNumeric(J)||a2.IsAlpha(J))Q.push(Y.charAt(W));else Q.push(`_${J}_`)}return Q.join("").replace(/__/g,"_")}$.Encode=X})(ZX||(ZX={}));var LX;(function($){function X(Y){return Y.replace(/'/g,"\\'")}$.Escape=X})(LX||(LX={}));class UG extends t{constructor($){super("Unknown type");this.schema=$}}class jX extends t{constructor($){super("Preflight validation check failed to guard for the given schema");this.schema=$}}var H6;(function($){function X(G,U,H){return c0.ExactOptionalPropertyTypes?`('${U}' in ${G} ? ${H} : true)`:`(${C7.Encode(G,U)} !== undefined ? ${H} : true)`}$.IsExactOptionalProperty=X;function Y(G){return!c0.AllowArrayObject?`(typeof ${G} === 'object' && ${G} !== null && !Array.isArray(${G}))`:`(typeof ${G} === 'object' && ${G} !== null)`}$.IsObjectLike=Y;function Q(G){return!c0.AllowArrayObject?`(typeof ${G} === 'object' && ${G} !== null && !Array.isArray(${G}) && !(${G} instanceof Date) && !(${G} instanceof Uint8Array))`:`(typeof ${G} === 'object' && ${G} !== null && !(${G} instanceof Date) && !(${G} instanceof Uint8Array))`}$.IsRecordLike=Q;function W(G){return c0.AllowNaN?`typeof ${G} === 'number'`:`Number.isFinite(${G})`}$.IsNumberLike=W;function J(G){return c0.AllowNullVoid?`(${G} === undefined || ${G} === null)`:`${G} === undefined`}$.IsVoidLike=J})(H6||(H6={}));var S2;(function($){function X(z){return z[F]==="Any"||z[F]==="Unknown"}function*Y(z,S,Z){yield"true"}function*Q(z,S,Z){yield"true"}function*W(z,S,Z){yield`Array.isArray(${Z})`;let[f,T]=[V5("value","any"),V5("acc","number")];if(r(z.maxItems))yield`${Z}.length <= ${z.maxItems}`;if(r(z.minItems))yield`${Z}.length >= ${z.minItems}`;let y=O1(z.items,S,"value");if(yield`${Z}.every((${f}) => ${y})`,o0(z.contains)||r(z.minContains)||r(z.maxContains)){let n=o0(z.contains)?z.contains:J0(),v0=O1(n,S,"value"),T1=r(z.minContains)?[`(count >= ${z.minContains})`]:[],V1=r(z.maxContains)?[`(count <= ${z.maxContains})`]:[],z5=`const count = value.reduce((${T}, ${f}) => ${v0} ? acc + 1 : acc, 0)`,g2=["(count > 0)",...T1,...V1].join(" && ");yield`((${f}) => { ${z5}; return ${g2}})(${Z})`}if(z.uniqueItems===!0)yield`((${f}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${Z})`}function*J(z,S,Z){yield`(typeof value === 'object' && Symbol.asyncIterator in ${Z})`}function*G(z,S,Z){if(yield`(typeof ${Z} === 'bigint')`,C1(z.exclusiveMaximum))yield`${Z} < BigInt(${z.exclusiveMaximum})`;if(C1(z.exclusiveMinimum))yield`${Z} > BigInt(${z.exclusiveMinimum})`;if(C1(z.maximum))yield`${Z} <= BigInt(${z.maximum})`;if(C1(z.minimum))yield`${Z} >= BigInt(${z.minimum})`;if(C1(z.multipleOf))yield`(${Z} % BigInt(${z.multipleOf})) === 0`}function*U(z,S,Z){yield`(typeof ${Z} === 'boolean')`}function*H(z,S,Z){yield*w2(z.returns,S,`${Z}.prototype`)}function*B(z,S,Z){if(yield`(${Z} instanceof Date) && Number.isFinite(${Z}.getTime())`,r(z.exclusiveMaximumTimestamp))yield`${Z}.getTime() < ${z.exclusiveMaximumTimestamp}`;if(r(z.exclusiveMinimumTimestamp))yield`${Z}.getTime() > ${z.exclusiveMinimumTimestamp}`;if(r(z.maximumTimestamp))yield`${Z}.getTime() <= ${z.maximumTimestamp}`;if(r(z.minimumTimestamp))yield`${Z}.getTime() >= ${z.minimumTimestamp}`;if(r(z.multipleOfTimestamp))yield`(${Z}.getTime() % ${z.multipleOfTimestamp}) === 0`}function*q(z,S,Z){yield`(typeof ${Z} === 'function')`}function*O(z,S,Z){let f=globalThis.Object.getOwnPropertyNames(z.$defs).reduce((T,y)=>{return[...T,z.$defs[y]]},[]);yield*w2(x5(z.$ref),[...S,...f],Z)}function*A(z,S,Z){if(yield`Number.isInteger(${Z})`,r(z.exclusiveMaximum))yield`${Z} < ${z.exclusiveMaximum}`;if(r(z.exclusiveMinimum))yield`${Z} > ${z.exclusiveMinimum}`;if(r(z.maximum))yield`${Z} <= ${z.maximum}`;if(r(z.minimum))yield`${Z} >= ${z.minimum}`;if(r(z.multipleOf))yield`(${Z} % ${z.multipleOf}) === 0`}function*w(z,S,Z){let f=z.allOf.map((T)=>O1(T,S,Z)).join(" && ");if(z.unevaluatedProperties===!1){let T=c5(`${new RegExp(i2(z))};`),y=`Object.getOwnPropertyNames(${Z}).every(key => ${T}.test(key))`;yield`(${f} && ${y})`}else if(o0(z.unevaluatedProperties)){let T=c5(`${new RegExp(i2(z))};`),y=`Object.getOwnPropertyNames(${Z}).every(key => ${T}.test(key) || ${O1(z.unevaluatedProperties,S,`${Z}[key]`)})`;yield`(${f} && ${y})`}else yield`(${f})`}function*N(z,S,Z){yield`(typeof value === 'object' && Symbol.iterator in ${Z})`}function*L(z,S,Z){if(typeof z.const==="number"||typeof z.const==="boolean")yield`(${Z} === ${z.const})`;else yield`(${Z} === '${LX.Escape(z.const)}')`}function*K(z,S,Z){yield"false"}function*h(z,S,Z){yield`(!${O1(z.not,S,Z)})`}function*D(z,S,Z){yield`(${Z} === null)`}function*b(z,S,Z){if(yield H6.IsNumberLike(Z),r(z.exclusiveMaximum))yield`${Z} < ${z.exclusiveMaximum}`;if(r(z.exclusiveMinimum))yield`${Z} > ${z.exclusiveMinimum}`;if(r(z.maximum))yield`${Z} <= ${z.maximum}`;if(r(z.minimum))yield`${Z} >= ${z.minimum}`;if(r(z.multipleOf))yield`(${Z} % ${z.multipleOf}) === 0`}function*l(z,S,Z){if(yield H6.IsObjectLike(Z),r(z.minProperties))yield`Object.getOwnPropertyNames(${Z}).length >= ${z.minProperties}`;if(r(z.maxProperties))yield`Object.getOwnPropertyNames(${Z}).length <= ${z.maxProperties}`;let f=Object.getOwnPropertyNames(z.properties);for(let T of f){let y=C7.Encode(Z,T),n=z.properties[T];if(z.required&&z.required.includes(T)){if(yield*w2(n,S,y),n2(n)||X(n))yield`('${T}' in ${Z})`}else{let v0=O1(n,S,y);yield H6.IsExactOptionalProperty(Z,T,v0)}}if(z.additionalProperties===!1)if(z.required&&z.required.length===f.length)yield`Object.getOwnPropertyNames(${Z}).length === ${f.length}`;else{let T=`[${f.map((y)=>`'${y}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${Z}).every(key => ${T}.includes(key))`}if(typeof z.additionalProperties==="object"){let T=O1(z.additionalProperties,S,`${Z}[key]`),y=`[${f.map((n)=>`'${n}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${Z}).every(key => ${y}.includes(key) || ${T}))`}}function*s(z,S,Z){yield`${Z} instanceof Promise`}function*x(z,S,Z){if(yield H6.IsRecordLike(Z),r(z.minProperties))yield`Object.getOwnPropertyNames(${Z}).length >= ${z.minProperties}`;if(r(z.maxProperties))yield`Object.getOwnPropertyNames(${Z}).length <= ${z.maxProperties}`;let[f,T]=Object.entries(z.patternProperties)[0],y=c5(`${new RegExp(f)}`),n=O1(T,S,"value"),v0=o0(z.additionalProperties)?O1(z.additionalProperties,S,Z):z.additionalProperties===!1?"false":"true",T1=`(${y}.test(key) ? ${n} : ${v0})`;yield`(Object.entries(${Z}).every(([key, value]) => ${T1}))`}function*g(z,S,Z){let f=F0(z,S);if(G1.functions.has(z.$ref))return yield`${P1(z.$ref)}(${Z})`;yield*w2(f,S,Z)}function*v(z,S,Z){let f=c5(`${new RegExp(z.source,z.flags)};`);if(yield`(typeof ${Z} === 'string')`,r(z.maxLength))yield`${Z}.length <= ${z.maxLength}`;if(r(z.minLength))yield`${Z}.length >= ${z.minLength}`;yield`${f}.test(${Z})`}function*E(z,S,Z){if(yield`(typeof ${Z} === 'string')`,r(z.maxLength))yield`${Z}.length <= ${z.maxLength}`;if(r(z.minLength))yield`${Z}.length >= ${z.minLength}`;if(z.pattern!==void 0)yield`${c5(`${new RegExp(z.pattern)};`)}.test(${Z})`;if(z.format!==void 0)yield`format('${z.format}', ${Z})`}function*i(z,S,Z){yield`(typeof ${Z} === 'symbol')`}function*Y0(z,S,Z){yield`(typeof ${Z} === 'string')`,yield`${c5(`${new RegExp(z.pattern)};`)}.test(${Z})`}function*B0(z,S,Z){yield`${P1(z.$ref)}(${Z})`}function*w0(z,S,Z){if(yield`Array.isArray(${Z})`,z.items===void 0)return yield`${Z}.length === 0`;yield`(${Z}.length === ${z.maxItems})`;for(let f=0;f<z.items.length;f++)yield`${O1(z.items[f],S,`${Z}[${f}]`)}`}function*N5(z,S,Z){yield`${Z} === undefined`}function*_0(z,S,Z){yield`(${z.anyOf.map((T)=>O1(T,S,Z)).join(" || ")})`}function*o1(z,S,Z){if(yield`${Z} instanceof Uint8Array`,r(z.maxByteLength))yield`(${Z}.length <= ${z.maxByteLength})`;if(r(z.minByteLength))yield`(${Z}.length >= ${z.minByteLength})`}function*x2(z,S,Z){yield"true"}function*k2(z,S,Z){yield H6.IsVoidLike(Z)}function*P5(z,S,Z){let f=G1.instances.size;G1.instances.set(f,z),yield`kind('${z[F]}', ${f}, ${Z})`}function*w2(z,S,Z,f=!0){let T=L0(z.$id)?[...S,z]:S,y=z;if(f&&L0(z.$id)){let n=P1(z.$id);if(G1.functions.has(n))return yield`${n}(${Z})`;else{G1.functions.set(n,"<deferred>");let v0=c1(n,z,S,"value",!1);return G1.functions.set(n,v0),yield`${n}(${Z})`}}switch(y[F]){case"Any":return yield*Y(y,T,Z);case"Argument":return yield*Q(y,T,Z);case"Array":return yield*W(y,T,Z);case"AsyncIterator":return yield*J(y,T,Z);case"BigInt":return yield*G(y,T,Z);case"Boolean":return yield*U(y,T,Z);case"Constructor":return yield*H(y,T,Z);case"Date":return yield*B(y,T,Z);case"Function":return yield*q(y,T,Z);case"Import":return yield*O(y,T,Z);case"Integer":return yield*A(y,T,Z);case"Intersect":return yield*w(y,T,Z);case"Iterator":return yield*N(y,T,Z);case"Literal":return yield*L(y,T,Z);case"Never":return yield*K(y,T,Z);case"Not":return yield*h(y,T,Z);case"Null":return yield*D(y,T,Z);case"Number":return yield*b(y,T,Z);case"Object":return yield*l(y,T,Z);case"Promise":return yield*s(y,T,Z);case"Record":return yield*x(y,T,Z);case"Ref":return yield*g(y,T,Z);case"RegExp":return yield*v(y,T,Z);case"String":return yield*E(y,T,Z);case"Symbol":return yield*i(y,T,Z);case"TemplateLiteral":return yield*Y0(y,T,Z);case"This":return yield*B0(y,T,Z);case"Tuple":return yield*w0(y,T,Z);case"Undefined":return yield*N5(y,T,Z);case"Union":return yield*_0(y,T,Z);case"Uint8Array":return yield*o1(y,T,Z);case"Unknown":return yield*x2(y,T,Z);case"Void":return yield*k2(y,T,Z);default:if(!L1.Has(y[F]))throw new UG(z);return yield*P5(y,T,Z)}}let G1={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function O1(z,S,Z,f=!0){return`(${[...w2(z,S,Z,f)].join(" && ")})`}function P1(z){return`check_${ZX.Encode(z)}`}function c5(z){let S=`local_${G1.variables.size}`;return G1.variables.set(S,`const ${S} = ${z}`),S}function c1(z,S,Z,f,T=!0){let[y,n]=[`
`,(z5)=>"".padStart(z5," ")],v0=V5("value","any"),T1=z8("boolean"),V1=[...w2(S,Z,f,T)].map((z5)=>`${n(4)}${z5}`).join(` &&${y}`);return`function ${z}(${v0})${T1} {${y}${n(2)}return (${y}${V1}${y}${n(2)})
}`}function V5(z,S){let Z=G1.language==="typescript"?`: ${S}`:"";return`${z}${Z}`}function z8(z){return G1.language==="typescript"?`: ${z}`:""}function m5(z,S,Z){let f=c1("check",z,S,"value"),T=V5("value","any"),y=z8("boolean"),n=[...G1.functions.values()],v0=[...G1.variables.values()],T1=L0(z.$id)?`return function check(${T})${y} {
  return ${P1(z.$id)}(value)
}`:`return ${f}`;return[...v0,...n,T1].join(`
`)}function c(...z){let S={language:"javascript"},[Z,f,T]=z.length===2&&$0(z[1])?[z[0],z[1],S]:z.length===2&&!$0(z[1])?[z[0],[],z[1]]:z.length===3?[z[0],z[1],z[2]]:z.length===1?[z[0],[],S]:[null,[],S];if(G1.language=T.language,G1.variables.clear(),G1.functions.clear(),G1.instances.clear(),!o0(Z))throw new jX(Z);for(let y of f)if(!o0(y))throw new jX(y);return m5(Z,f,T)}$.Code=c;function I(z,S=[]){let Z=c(z,S,{language:"javascript"}),f=globalThis.Function("kind","format","hash",Z),T=new Map(G1.instances);function y(V1,z5,g2){if(!L1.Has(V1)||!T.has(z5))return!1;let sq=L1.Get(V1),tq=T.get(z5);return sq(tq,g2)}function n(V1,z5){if(!b0.Has(V1))return!1;return b0.Get(V1)(z5)}function v0(V1){return S8(V1)}let T1=f(y,n,v0);return new MG(z,S,T1,Z)}$.Compile=I})(S2||(S2={}));var W3=Object.create,{getPrototypeOf:J3,defineProperty:ZM,getOwnPropertyNames:G3}=Object,M3=Object.prototype.hasOwnProperty,J$=($,X,Y)=>{Y=$!=null?W3(J3($)):{};let Q=X||!$||!$.__esModule?ZM(Y,"default",{value:$,enumerable:!0}):Y;for(let W of G3($))if(!M3.call(Q,W))ZM(Q,W,{get:()=>$[W],enumerable:!0});return Q},iM=($,X)=>()=>(X||$((X={exports:{}}).exports,X),X.exports);var U3=iM(($)=>{Object.defineProperty($,"__esModule",{value:!0}),$.parse=U,$.serialize=q;var X=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Y=/^[\u0021-\u003A\u003C-\u007E]*$/,Q=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,W=/^[\u0020-\u003A\u003D-\u007E]*$/,J=Object.prototype.toString,G=(()=>{let w=function(){};return w.prototype=Object.create(null),w})();function U(w,N){let L=new G,K=w.length;if(K<2)return L;let h=N?.decode||O,D=0;do{let b=w.indexOf("=",D);if(b===-1)break;let l=w.indexOf(";",D),s=l===-1?K:l;if(b>s){D=w.lastIndexOf(";",b-1)+1;continue}let x=H(w,D,b),g=B(w,b,x),v=w.slice(x,g);if(L[v]===void 0){let E=H(w,b+1,s),i=B(w,s,E),Y0=h(w.slice(E,i));L[v]=Y0}D=s+1}while(D<K);return L}function H(w,N,L){do{let K=w.charCodeAt(N);if(K!==32&&K!==9)return N}while(++N<L);return L}function B(w,N,L){while(N>L){let K=w.charCodeAt(--N);if(K!==32&&K!==9)return N+1}return L}function q(w,N,L){let K=L?.encode||encodeURIComponent;if(!X.test(w))throw new TypeError(`argument name is invalid: ${w}`);let h=K(N);if(!Y.test(h))throw new TypeError(`argument val is invalid: ${N}`);let D=w+"="+h;if(!L)return D;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);D+="; Max-Age="+L.maxAge}if(L.domain){if(!Q.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);D+="; Domain="+L.domain}if(L.path){if(!W.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);D+="; Path="+L.path}if(L.expires){if(!A(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);D+="; Expires="+L.expires.toUTCString()}if(L.httpOnly)D+="; HttpOnly";if(L.secure)D+="; Secure";if(L.partitioned)D+="; Partitioned";if(L.priority)switch(typeof L.priority==="string"?L.priority.toLowerCase():void 0){case"low":D+="; Priority=Low";break;case"medium":D+="; Priority=Medium";break;case"high":D+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite==="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":D+="; SameSite=Strict";break;case"lax":D+="; SameSite=Lax";break;case"none":D+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return D}function O(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch(N){return w}}function A(w){return J.call(w)==="[object Date]"}}),YY=iM(($,X)=>{var Y=12,Q=0,W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function J(H){var B=H.indexOf("%");if(B===-1)return H;var q=H.length,O="",A=0,w=0,N=B,L=Y;while(B>-1&&B<q){var K=U(H[B+1],4),h=U(H[B+2],0),D=K|h,b=W[D];if(L=W[256+L+b],w=w<<6|D&W[364+b],L===Y)O+=H.slice(A,N),O+=w<=65535?String.fromCharCode(w):String.fromCharCode(55232+(w>>10),56320+(w&1023)),w=0,A=B+3,B=N=H.indexOf("%",A);else if(L===Q)return null;else{if(B+=3,B<q&&H.charCodeAt(B)===37)continue;return null}}return O+H.slice(A)}var G={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function U(H,B){var q=G[H];return q===void 0?255:q<<B}X.exports=J}),J4=($,X)=>{let Y=X?.length?{}:null;if(Y)for(let Q of X)Y[Q.part.charCodeAt(0)]=Q;return{part:$,store:null,inert:Y,params:null,wildcardStore:null}},LM=($,X)=>({...$,part:X}),jM=($)=>({name:$,store:null,inert:null});class H4{config;root={};history=[];deferred=[];constructor($={}){if(this.config=$,$.lazy)this.find=this.lazyFind}static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g,optionalParams:/(\/:\w+\?)/g};lazyFind=($,X)=>{if(!this.config.lazy)return this.find;return this.build(),this.find($,X)};build(){if(!this.config.lazy)return;for(let[$,X,Y]of this.deferred)this.add($,X,Y,{lazy:!1,ignoreHistory:!0});this.deferred=[],this.find=($,X)=>{let Y=this.root[$];if(!Y)return null;return i7(X,X.length,Y,0)}}add($,X,Y,{ignoreError:Q=!1,ignoreHistory:W=!1,lazy:J=this.config.lazy}={}){if(J)return this.find=this.lazyFind,this.deferred.push([$,X,Y]),Y;if(typeof X!=="string")throw new TypeError("Route path must be a string");if(X==="")X="/";else if(X[0]!=="/")X=`/${X}`;let G=X[X.length-1]==="*",U=X.match(H4.regex.optionalParams);if(U){let A=X.replaceAll("?","");this.add($,A,Y,{ignoreError:Q,ignoreHistory:W,lazy:J});for(let w=0;w<U.length;w++){let N=X.replace(U[w],"");this.add($,N,Y,{ignoreError:!0,ignoreHistory:W,lazy:J})}return Y}if(U)X=X.replaceAll("?","");if(this.history.find(([A,w,N])=>A===$&&w===X))return Y;if(G||U&&X.charCodeAt(X.length-1)===63)X=X.slice(0,-1);if(!W)this.history.push([$,X,Y]);let H=X.split(H4.regex.static),B=X.match(H4.regex.params)||[];if(H[H.length-1]==="")H.pop();let q;if(!this.root[$])q=this.root[$]=J4("/");else q=this.root[$];let O=0;for(let A=0;A<H.length;++A){let w=H[A];if(A>0){let N=B[O++].slice(1);if(q.params===null)q.params=jM(N);else if(q.params.name!==N)if(Q)return Y;else throw new Error(`Cannot create route "${X}" with parameter "${N}" because a route already exists with a different parameter name ("${q.params.name}") in the same location`);let L=q.params;if(L.inert===null){q=L.inert=J4(w);continue}q=L.inert}for(let N=0;;){if(N===w.length){if(N<q.part.length){let L=LM(q,q.part.slice(N));Object.assign(q,J4(w,[L]))}break}if(N===q.part.length){if(q.inert===null)q.inert={};let L=q.inert[w.charCodeAt(N)];if(L){q=L,w=w.slice(N),N=0;continue}let K=J4(w.slice(N));q.inert[w.charCodeAt(N)]=K,q=K;break}if(w[N]!==q.part[N]){let L=LM(q,q.part.slice(N)),K=J4(w.slice(N));Object.assign(q,J4(q.part.slice(0,N),[L,K])),q=K;break}++N}}if(O<B.length){let A=B[O].slice(1);if(q.params===null)q.params=jM(A);else if(q.params.name!==A)if(Q)return Y;else throw new Error(`Cannot create route "${X}" with parameter "${A}" because a route already exists with a different parameter name ("${q.params.name}") in the same location`);if(q.params.store===null)q.params.store=Y;return q.params.store}if(G){if(q.wildcardStore===null)q.wildcardStore=Y;return q.wildcardStore}if(q.store===null)q.store=Y;return q.store}find($,X){let Y=this.root[$];if(!Y)return null;return i7(X,X.length,Y,0)}}var i7=($,X,Y,Q)=>{let W=Y.part,J=W.length,G=Q+J;if(J>1){if(G>X)return null;if(J<15){for(let U=1,H=Q+1;U<J;++U,++H)if(W.charCodeAt(U)!==$.charCodeAt(H))return null}else if($.slice(Q,G)!==W)return null}if(G===X){if(Y.store!==null)return{store:Y.store,params:{}};if(Y.wildcardStore!==null)return{store:Y.wildcardStore,params:{"*":""}};return null}if(Y.inert!==null){let U=Y.inert[$.charCodeAt(G)];if(U!==void 0){let H=i7($,X,U,G);if(H!==null)return H}}if(Y.params!==null){let{store:U,name:H,inert:B}=Y.params,q=$.indexOf("/",G);if(q!==G){if(q===-1||q>=X){if(U!==null){let O={};return O[H]=$.substring(G,X),{store:U,params:O}}}else if(B!==null){let O=i7($,X,B,q);if(O!==null)return O.params[H]=$.substring(G,q),O}}}if(Y.wildcardStore!==null)return{store:Y.wildcardStore,params:{"*":$.substring(G,X)}};return null},QY={date:nM,time:rX(!0),"date-time":KM(!0),"iso-time":rX(!1),"iso-date-time":KM(!1),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:A3,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:D3,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:Z3,int32:{type:"number",validate:K3},int64:{type:"number",validate:F3},float:{type:"number",validate:SM},double:{type:"number",validate:SM},password:!0,binary:!0};function H3($){return $%4===0&&($%100!==0||$%400===0)}var B3=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,q3=[0,31,28,31,30,31,30,31,31,30,31,30,31];function nM($){let X=B3.exec($);if(!X)return!1;let Y=+X[1],Q=+X[2],W=+X[3];return Q>=1&&Q<=12&&W>=1&&W<=(Q===2&&H3(Y)?29:q3[Q])}var N3=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function rX($){return function X(Y){let Q=N3.exec(Y);if(!Q)return!1;let W=+Q[1],J=+Q[2],G=+Q[3],U=Q[4],H=Q[5]==="-"?-1:1,B=+(Q[6]||0),q=+(Q[7]||0);if(B>23||q>59||$&&!U)return!1;if(W<=23&&J<=59&&G<60)return!0;let O=J-q*H,A=W-B*H-(O<0?1:0);return(A===23||A===-1)&&(O===59||O===-1)&&G<61}}var oM=($)=>{if($.charCodeAt($.length-6)===32)return $.slice(0,-6)+"+"+$.slice(-5);return $},z3=/t|\s/i;function KM($){let X=rX($);return function Y(Q){let W=Q.split(z3);return W.length===2&&nM(W[0])&&X(W[1])}}var O3=/\/|:/,w3=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function A3($){return O3.test($)&&w3.test($)}var FM=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function Z3($){return FM.lastIndex=0,FM.test($)}var L3=-2147483648,j3=2147483647;function K3($){return Number.isInteger($)&&$<=j3&&$>=L3}function F3($){return Number.isInteger($)}function SM(){return!0}var S3=/[^\\]\\Z/;function D3($){if(S3.test($))return!1;try{return new RegExp($),!0}catch(X){return!1}}var rM=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,sM=/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s\d{4}\s\d{2}:\d{2}:\d{2}\sGMT(?:\+|-)\d{4}\s\([^)]+\)/,tM=/^(?:(?:(?:(?:0?[1-9]|[12][0-9]|3[01])[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:19|20)\d{2})|(?:(?:19|20)\d{2}[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:0?[1-9]|[12][0-9]|3[01]))))(?:\s(?:1[012]|0?[1-9]):[0-5][0-9](?::[0-5][0-9])?(?:\s[AP]M)?)?$/,_3=QY.date,R3=QY["date-time"];if(!b0.Has("date"))b0.Set("date",($)=>{let X=oM($).replace(/"/g,"");if(rM.test(X)||sM.test(X)||tM.test(X)||_3(X)){let Y=new Date(X);if(!Number.isNaN(Y.getTime()))return!0}return!1});if(!b0.Has("date-time"))b0.Set("date-time",($)=>{let X=$.replace(/"/g,"");if(rM.test(X)||sM.test(X)||tM.test(X)||R3(X)){let Y=new Date(X);if(!Number.isNaN(Y.getTime()))return!0}return!1});Object.entries(QY).forEach(($)=>{let[X,Y]=$;if(!b0.Has(X)){if(Y instanceof RegExp)b0.Set(X,(Q)=>Y.test(Q));else if(typeof Y==="function")b0.Set(X,Y)}});if(!b0.Has("numeric"))b0.Set("numeric",($)=>!!$&&!isNaN(+$));if(!b0.Has("integer"))b0.Set("integer",($)=>!!$&&Number.isInteger(+$));if(!b0.Has("boolean"))b0.Set("boolean",($)=>$==="true"||$==="false");if(!b0.Has("ObjectString"))b0.Set("ObjectString",($)=>{let X=$.charCodeAt(0);if(X===9||X===10||X===32)X=$.trimStart().charCodeAt(0);if(X!==123&&X!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});if(!b0.Has("ArrayString"))b0.Set("ArrayString",($)=>{let X=$.charCodeAt(0);if(X===9||X===10||X===32)X=$.trimStart().charCodeAt(0);if(X!==123&&X!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});var B4=typeof Bun!=="undefined",P3={aac:"audio/aac",abw:"application/x-abiword",ai:"application/postscript",arc:"application/octet-stream",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",dll:"application/octet-stream",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/javascript",json:"application/json",mid:"audio/midi",midi:"audio/midi",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpa:"video/mpeg",mpe:"video/mpeg",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",otf:"font/otf",png:"image/png",pdf:"application/pdf",ppt:"application/vnd.ms-powerpoint",rar:"application/x-rar-compressed",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"application/typescript",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/x-wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.ms-excel",xlsx_OLD:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3gp_DOES_NOT_CONTAIN_VIDEO":"audio/3gpp","3gp2":"video/3gpp2","3gp2_DOES_NOT_CONTAIN_VIDEO":"audio/3gpp2","7z":"application/x-7z-compressed"},V3=($)=>{let X=$.lastIndexOf(".");if(X===-1)return"";return $.slice(X+1)};var dX,cX;class n7{path;value;stats;constructor($){if(this.path=$,B4)this.value=Bun.file($);else if(typeof window!=="undefined")console.warn("Browser environment does not support file");else if(!dX||!cX)try{this.value=import("fs").then((X)=>{return dX=X.createReadStream,X.createReadStream($)}),this.stats=import("fs/promises").then((X)=>{return cX=X.stat,X.stat($)})}catch{}else this.value=dX($),this.stats=cX($)}get type(){return P3[V3(this.path)]||"application/octet-stream"}get length(){if(B4)return this.value.size;return this.stats?.then(($)=>$.size)??0}}var o7="toJSON"in new Headers,DM=($,X)=>{let Y=new URL($);return Y.pathname=X,Y.toString()},C3=($)=>typeof $==="function"&&/^\s*class\s+/.test($.toString())||$.toString&&$.toString().startsWith("[object ")&&$.toString()!=="[object Object]"||u0(Object.getPrototypeOf($)),mX=($)=>$&&typeof $==="object"&&!Array.isArray($),W5=($,X,Y)=>{let Q=Y?.skipKeys,W=Y?.override??!0;if(!mX($)||!mX(X))return $;for(let[J,G]of Object.entries(X)){if(Q?.includes(J))continue;if(!mX(G)||!(J in $)||C3(G)){if(W||!(J in $))$[J]=G;continue}$[J]=W5($[J],G,{skipKeys:Q,override:W})}return $},aM=($,X)=>{let Y=W5(Object.assign({},$),X,{skipKeys:["properties"]});if(Y.properties)delete Y.properties;return Y},X1=($,X)=>{if(!X)return $;let Y=[],Q=[];if($){if(!Array.isArray($))$=[$];for(let W of $)if(Y.push(W),W.checksum)Q.push(W.checksum)}if(X){if(!Array.isArray(X))X=[X];for(let W of X)if(!Q.includes(W.checksum))Y.push(W)}return Y},E3=["start","request","parse","transform","resolve","beforeHandle","afterHandle","mapResponse","afterResponse","trace","error","stop","body","headers","params","query","response","type","detail"],b3=E3.reduce(($,X)=>($[X]=!0,$),{}),eM=($,X)=>{let Y=(Q)=>typeof Q==="object"&&Object.keys(Q).every(WY);if(Y($)&&Y(X))return Object.assign($,X);else if($&&!Y($)&&Y(X))return Object.assign({200:$},X);return X??$},O9=($,X)=>{if(!$&&!X)return{body:void 0,headers:void 0,params:void 0,query:void 0,cookie:void 0,response:void 0};return{body:X?.body??$?.body,headers:X?.headers??$?.headers,params:X?.params??$?.params,query:X?.query??$?.query,cookie:X?.cookie??$?.cookie,response:eM($?.response,X?.response)}},$8=($,X)=>{if(!Object.values(X).find((Q)=>Q!==void 0&&Q!==null))return{...$};let Y={...$,...X,body:X?.body??$?.body,headers:X?.headers??$?.headers,params:X?.params??$?.params,query:X?.query??$?.query,cookie:X?.cookie??$?.cookie,response:eM($?.response,X?.response),type:$?.type||X?.type,detail:W5(X?.detail??{},$?.detail??{}),parse:X1($?.parse,X?.parse),transform:X1($?.transform,X?.transform),beforeHandle:X1(X1(K1($?.resolve,"resolve"),$?.beforeHandle),X1(K1(X.resolve,"resolve"),X?.beforeHandle)),afterHandle:X1($?.afterHandle,X?.afterHandle),mapResponse:X1($?.mapResponse,X?.mapResponse),afterResponse:X1($?.afterResponse,X?.afterResponse),trace:X1($?.trace,X?.trace),error:X1($?.error,X?.error)};if(Y.resolve)delete Y.resolve;return Y},I3=($)=>{if($.parse&&!Array.isArray($.parse))$.parse=[$.parse];if($.transform&&!Array.isArray($.transform))$.transform=[$.transform];if($.afterHandle&&!Array.isArray($.afterHandle))$.afterHandle=[$.afterHandle];if($.mapResponse&&!Array.isArray($.mapResponse))$.mapResponse=[$.mapResponse];if($.afterResponse&&!Array.isArray($.afterResponse))$.afterResponse=[$.afterResponse];if($.trace&&!Array.isArray($.trace))$.trace=[$.trace];if($.error&&!Array.isArray($.error))$.error=[$.error];let X=[];if($.resolve)X=K1(Array.isArray($.resolve)?$.resolve:[$.resolve],"resolve"),delete $.resolve;if($.beforeHandle)if(X.length)X=X.concat(Array.isArray($.beforeHandle)?$.beforeHandle:[$.beforeHandle]);else X=Array.isArray($.beforeHandle)?$.beforeHandle:[$.beforeHandle];if(X.length)$.beforeHandle=X;return $},T3=typeof Bun!=="undefined",ml=T3&&typeof Bun.hash==="function",M4=($)=>{let X=9;for(let Y=0;Y<$.length;)X=Math.imul(X^$.charCodeAt(Y++),387420489);return X=X^X>>>9},G2=($,X)=>{if(!X)return;if(!Array.isArray(X)){let Q=X;if($&&!Q.checksum)Q.checksum=$;if(Q.scope==="scoped")Q.scope="local";return Q}let Y=[...X];for(let Q of Y){if($&&!Q.checksum)Q.checksum=$;if(Q.scope==="scoped")Q.scope="local"}return Y},_M=($,X,Y)=>{return{start:X1($.start,G2(Y,X?.start)),request:X1($.request,G2(Y,X?.request)),parse:X1($.parse,G2(Y,X?.parse)),transform:X1($.transform,G2(Y,X?.transform)),beforeHandle:X1(X1(K1($.resolve,"resolve"),$.beforeHandle),G2(Y,X1(K1(X?.resolve,"resolve"),X?.beforeHandle))),afterHandle:X1($.afterHandle,G2(Y,X?.afterHandle)),mapResponse:X1($.mapResponse,G2(Y,X?.mapResponse)),afterResponse:X1($.afterResponse,G2(Y,X?.afterResponse)),trace:X1($.trace,G2(Y,X?.trace)),error:X1($.error,G2(Y,X?.error)),stop:X1($.stop,G2(Y,X?.stop))}},x3=($,X,{skipIfHasType:Y=!1})=>{if(!$)return $;if(!Array.isArray($)){if(Y)$.scope??=X;else $.scope=X;return $}for(let Q of $)if(Y)Q.scope??=X;else Q.scope=X;return $},_8=($)=>{if(!$)return $;if(!Array.isArray($))switch($.scope){case"global":case"scoped":return{...$};default:return{fn:$}}let X=[];for(let Y of $)switch(Y.scope){case"global":case"scoped":X.push({...Y});break}return X},RM=($)=>{return{...$,type:$?.type,detail:$?.detail,parse:_8($?.parse),transform:_8($?.transform),beforeHandle:_8($?.beforeHandle),afterHandle:_8($?.afterHandle),mapResponse:_8($?.mapResponse),afterResponse:_8($?.afterResponse),error:_8($?.error),trace:_8($?.trace)}},G$={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},PM=Object.fromEntries(Object.entries(G$).map(([$,X])=>[X,$]));function k3($){let X=$;while(X.endsWith("="))X=X.slice(0,-1);return X}var VM=new TextEncoder,r7=async($,X)=>{if(typeof $!=="string")throw new TypeError("Cookie value must be provided as a string.");if(X===null)throw new TypeError("Secret key must be provided.");let Y=await crypto.subtle.importKey("raw",VM.encode(X),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),Q=await crypto.subtle.sign("HMAC",Y,VM.encode($));return $+"."+k3(Buffer.from(Q).toString("base64"))},CM=async($,X)=>{if(typeof $!=="string")throw new TypeError("Signed cookie string must be provided.");if(X===null)throw new TypeError("Secret key must be provided.");let Y=$.slice(0,$.lastIndexOf("."));return await r7(Y,X)===$?Y:!1},g3=($,X,Y)=>{if(!$||typeof $!=="object"||!X)return;for(let[Q,W]of Object.entries(X)){if(b3[Q]||!(Q in $))continue;let J=$[Q];if(typeof J==="function"){let G=J(W);if(typeof G==="object")for(let[U,H]of Object.entries(G))Y(U)({fn:H})}delete X[Q]}},f3=({globalHook:$,localHook:X})=>(Y)=>(Q,W)=>{if(typeof Q==="function")Q={fn:Q};if(Y==="resolve")Q={...Q,subType:"resolve"};if(!X[Y])X[Y]=[];if(typeof X[Y]==="function")X[Y]=[X[Y]];if(!Array.isArray(X[Y]))X[Y]=[X[Y]];if("fn"in Q||Array.isArray(Q)){if(Array.isArray(Q))X[Y]=X[Y].concat(Q);else X[Y].push(Q);return}let{insert:J="after",stack:G="local"}=Q;if(typeof W==="function")W={fn:W};if(G==="global")if(!Array.isArray(W))if(J==="before")$[Y].unshift(W);else $[Y].push(W);else if(J==="before")$[Y]=W.concat($[Y]);else $[Y]=$[Y].concat(W);else if(!Array.isArray(W))if(J==="before")X[Y].unshift(W);else X[Y].push(W);else if(J==="before")X[Y]=W.concat(X[Y]);else X[Y]=X[Y].concat(W)},v3=($)=>{if(typeof $==="number")return $;if($.length<16){if($.trim().length===0)return null;let X=Number($);if(Number.isNaN(X))return null;return X}if($.length===16){if($.trim().length===0)return null;let X=Number($);if(Number.isNaN(X)||X.toString()!==$)return null;return X}return null},WY=($)=>v3($)!==null;class $U{onError;onFinally;root=null;promises=[];constructor($=console.error,X=()=>{}){this.onError=$,this.onFinally=X}get size(){return this.promises.length}add($){if(this.promises.push($),this.root||=this.drain(),this.promises.length===1)this.then(this.onFinally);return $}async drain(){while(this.promises.length>0){try{await this.promises[0]}catch($){this.onError($)}this.promises.shift()}this.root=null}then($,X){return(this.root??Promise.resolve()).then($,X)}}var K1=($,X)=>{if(!$)return $;if(!Array.isArray($)){if(typeof $==="function"||typeof $==="string")return X?{fn:$,subType:X}:{fn:$};else if("fn"in $)return $}let Y=[];for(let Q of $)if(typeof Q==="function"||typeof Q==="string")Y.push(X?{fn:Q,subType:X}:{fn:Q});else if("fn"in Q)Y.push(Q);return Y},EM=($)=>{if($.start)$.start=K1($.start);if($.request)$.request=K1($.request);if($.parse)$.parse=K1($.parse);if($.transform)$.transform=K1($.transform);if($.beforeHandle)$.beforeHandle=K1($.beforeHandle);if($.afterHandle)$.afterHandle=K1($.afterHandle);if($.mapResponse)$.mapResponse=K1($.mapResponse);if($.afterResponse)$.afterResponse=K1($.afterResponse);if($.trace)$.trace=K1($.trace);if($.error)$.error=K1($.error);if($.stop)$.stop=K1($.stop);return $},bM=($)=>{if($.start?.map)$.start=$.start.map((X)=>X.fn);if($.request?.map)$.request=$.request.map((X)=>X.fn);if($.parse?.map)$.parse=$.parse.map((X)=>X.fn);if($.transform?.map)$.transform=$.transform.map((X)=>X.fn);if($.beforeHandle?.map)$.beforeHandle=$.beforeHandle.map((X)=>X.fn);if($.afterHandle?.map)$.afterHandle=$.afterHandle.map((X)=>X.fn);if($.mapResponse?.map)$.mapResponse=$.mapResponse.map((X)=>X.fn);if($.afterResponse?.map)$.afterResponse=$.afterResponse.map((X)=>X.fn);if($.trace?.map)$.trace=$.trace.map((X)=>X.fn);else $.trace=[];if($.error?.map)$.error=$.error.map((X)=>X.fn);if($.stop?.map)$.stop=$.stop.map((X)=>X.fn);return $},IM=($)=>({body:$.body,cookie:$.cookie,headers:$.headers,query:$.query,set:$.set,server:$.server,path:$.path,route:$.route,url:$.url}),JY=($,X=302)=>Response.redirect($,X),Z6=Symbol("ElysiaFormData"),R9=Symbol("ElysiaRequestId"),y3=($)=>{let X=new FormData;if(X[Z6]={},$)for(let[Y,Q]of Object.entries($)){if(Array.isArray(Q)){X[Z6][Y]=[];for(let W of Q){if(Q instanceof File)X.append(Y,Q,Q.name);else if(Q instanceof n7)X.append(Y,Q.value,Q.value?.name);else X.append(Y,Q);X[Z6][Y].push(Q)}continue}if(Q instanceof File)X.append(Y,Q,Q.name);else if(Q instanceof n7)X.append(Y,Q.value,Q.value?.name);else X.append(Y,Q);X[Z6][Y]=Q}return X},M$=()=>{let $=crypto.randomUUID();return $.slice(0,8)+$.slice(24,32)},TM=($)=>{if(!$.length)return[];let X=[];for(let Y=0;Y<$.length;Y++){let Q=$[Y];if(Q.checksum){if(X.includes(Q.checksum))$.splice(Y,1),Y--;X.push(Q.checksum)}}return $},R8=($,X="scoped")=>{if(!$)return;if(X==="scoped"){for(let Y of $)if("scope"in Y&&Y.scope==="local")Y.scope="scoped";return}for(let Y of $)if("scope"in Y)Y.scope="global"},A9=($)=>{if($.charCodeAt($.length-1)===47)return $.slice(0,$.length-1);return $+"/"},u0=($)=>{if(!$)return!1;for(let X in $)return!0;return!1},Z9=($,{dynamic:X=!1}={})=>{let Y=encodeURIComponent($).replace(/%2F/g,"/");if(X)Y=Y.replace(/%3A/g,":").replace(/%3F/g,"?");return Y},XU=(()=>{if(typeof Bun==="undefined")return!0;let $=Bun.version.split(".");if(+$[0]<1||+$[1]<2||+$[2]<14)return!1;return!0})();var xM=typeof Bun!=="undefined"?Bun.env:typeof process!=="undefined"?process?.env:void 0,s7=Symbol("ElysiaErrorCode"),D9=(xM?.NODE_ENV??xM?.ENV)==="production";class h1{code;response;constructor($,X){let Y=X??($ in PM?PM[$]:$);this.code=G$[$]??$,this.response=Y}}var t7=($,X)=>new h1($,X);class GY extends Error{code="NOT_FOUND";status=404;constructor($){super($??"NOT_FOUND")}}class YU extends Error{code="PARSE";status=400;constructor($){super("Bad Request",{cause:$})}}class sX extends Error{key;code="INVALID_COOKIE_SIGNATURE";status=400;constructor($,X){super(X??`"${$}" has invalid cookie signature`);this.key=$}}var U2=($)=>{if(!$)return{summary:void 0};let{message:X,path:Y,value:Q,type:W}=$,J=Y.slice(1).replaceAll("/","."),G=Y==="";switch(W){case 42:return{...$,summary:G?"Value should not be provided":`Property '${J}' should not be provided`};case 45:return{...$,summary:G?"Value is missing":`Property '${J}' is missing`};case 50:let U=X.indexOf("'"),H=X.slice(U+1,X.indexOf("'",U+1));return{...$,summary:G?"Value should be an email":`Property '${J}' should be ${H}`};case 54:return{...$,summary:`${X.slice(0,9).trim()} property '${J}' to be ${X.slice(8).trim()} but found: ${Q}`};case 62:let B=$.schema.anyOf.map((q)=>`'${q?.format??q.type}'`).join(", ");return{...$,summary:G?`Value should be one of ${B}`:`Property '${J}' should be one of: ${B}`};default:return{summary:X,...$}}};class K9 extends Error{property;expected;message;code="INVALID_FILE_TYPE";status=422;constructor($,X,Y=`"${$}" has invalid file type`){super(Y);this.property=$,this.expected=X,this.message=Y,Object.setPrototypeOf(this,K9.prototype)}toResponse($){if(D9)return new Response(JSON.stringify({type:"validation",on:"body"}),{status:422,headers:{...$,"content-type":"application/json"}});return new Response(JSON.stringify({type:"validation",on:"body",summary:"Invalid file type",message:this.message,property:this.property,expected:this.expected}),{status:422,headers:{...$,"content-type":"application/json"}})}}class g0 extends Error{type;validator;value;code="VALIDATION";status=422;constructor($,X,Y,Q){if(Y&&typeof Y==="object"&&Y instanceof h1)Y=Y.response;let W=Q?.First()||(D9?void 0:("Errors"in X)?X.Errors(Y).First():C0.Errors(X,Y).First()),J=W?.schema?.message||W?.schema?.error!==void 0?typeof W.schema.error==="function"?W.schema.error({type:$,validator:X,value:Y,get errors(){return[...X.Errors(Y)].map(U2)}}):W.schema.error:void 0,G=W?.path||"root",U="";if(J!==void 0)U=typeof J==="object"?JSON.stringify(J):J+"";else if(D9)U=JSON.stringify({type:"validation",on:$,summary:U2(W).summary,message:W?.message,found:Y});else{let H=X?.schema??X,B="Errors"in X?[...X.Errors(Y)].map(U2):[...C0.Errors(X,Y)].map(U2),q;try{q=C0.Create(H)}catch(O){q={type:"Could not create expected value",message:O?.message,error:O}}U=JSON.stringify({type:"validation",on:$,summary:U2(W).summary,property:G,message:W?.message,expected:q,found:Y,errors:B},null,2)}super(U);this.type=$,this.validator=X,this.value=Y,Object.setPrototypeOf(this,g0.prototype)}get all(){return"Errors"in this.validator?[...this.validator.Errors(this.value)].map(U2):[...C0.Errors(this.validator,this.value)].map(U2)}static simplifyModel($){let X="schema"in $?$.schema:$;try{return C0.Create(X)}catch{return X}}get model(){return g0.simplifyModel(this.validator)}toResponse($){return new Response(this.message,{status:400,headers:{...$,"content-type":"application/json"}})}}var d7=($,X)=>{try{return JSON.parse($)}catch{throw new g0("property",X,$)}};function U$($,X){if(!L1.Has($))L1.Set($,X);return(Y={})=>Z7({...Y,[F]:$})}var w6=($)=>{try{let X=S2.Compile($);return X.Create=()=>C0.Create($),X.Error=(Y)=>new g0("property",$,Y,X.Errors(Y)),X}catch{return{Check:(X)=>C0.Check($,X),CheckThrow:(X)=>{if(!C0.Check($,X))throw new g0("property",$,X,C0.Errors($,X))},Decode:(X)=>C0.Decode($,X),Create:()=>C0.Create($),Error:(X)=>new g0("property",$,X,C0.Errors($,X))}}},kM=($)=>{if(typeof $==="string")switch($.slice(-1)){case"k":return+$.slice(0,$.length-1)*1024;case"m":return+$.slice(0,$.length-1)*1048576;default:return+$}return $},a7=($,X)=>{if($.startsWith(X))return!0;return X.charCodeAt(X.length-1)===42&&X.charCodeAt(X.length-2)===47&&$.startsWith(X.slice(0,-1))},gM=!1,h3=()=>{if(!gM)console.warn("[Elysia] Attempt to validate file type without 'file-type'. This may lead to security risks. We recommend installing 'file-type' to properly validate file extension."),gM=!0},MY=async()=>Promise.resolve().then(() => (AM(),wM)).then(($)=>{return e7=$.fileTypeFromBlob,e7}).catch(h3),e7,d3=($)=>{if(e7)return e7($);return MY().then((X)=>{if(X)return X($)})},QU=async($,X,Y=$?.name??"")=>{if(Array.isArray($))return await Promise.all($.map((W)=>QU(W,X,Y))),!0;if(!$)return!1;let Q=await d3($);if(!Q)throw new K9(Y,X);if(typeof X==="string"){if(!a7(Q.mime,X))throw new K9(Y,X)}for(let W=0;W<X.length;W++)if(a7(Q.mime,X[W]))return!0;throw new K9(Y,X)},tX=($,X)=>{if(X instanceof n7)return!0;if(!(X instanceof Blob))return!1;if($.minSize&&X.size<kM($.minSize))return!1;if($.maxSize&&X.size>kM($.maxSize))return!1;if($.extension){if(typeof $.extension==="string")return a7(X.type,$.extension);for(let Y=0;Y<$.extension.length;Y++)if(a7(X.type,$.extension[Y]))return!0;return!1}return!0},M=Object.assign({},o2);U$("UnionEnum",($,X)=>(typeof X==="number"||typeof X==="string"||X===null)&&$.enum.includes(X));var c3=U$("Files",($,X)=>{if(!Array.isArray(X))return tX($,X);if($.minItems&&X.length<$.minItems)return!1;if($.maxItems&&X.length>$.maxItems)return!1;for(let Y=0;Y<X.length;Y++)if(!tX($,X[Y]))return!1;return!0}),m3=U$("ElysiaForm",({compiler:$,...X},Y)=>{if(!(Y instanceof FormData))return!1;if($){if(!(Z6 in Y))throw new g0("property",X,Y);if(!$.Check(Y[Z6]))throw $.Error(Y[Z6])}return!0}),M5={String:($)=>o2.String($),Numeric:($)=>{let X=o2.Number($),Y=w6(X);return M.Transform(M.Union([M.String({format:"numeric",default:0}),M.Number($)],$)).Decode((Q)=>{let W=+Q;if(isNaN(W))return Q;if($&&!Y.Check(W))throw Y.Error(Q);return W}).Encode((Q)=>Q)},Integer:($)=>{let X=o2.Integer($),Y=w6(X);return M.Transform(M.Union([M.String({format:"integer",default:0}),o2.Integer($)],$)).Decode((Q)=>{let W=+Q;if(!Y.Check(W))throw Y.Error(W);return W}).Encode((Q)=>Q)},Date:($)=>{let X=o2.Date($),Y=w6(X),Q=$?.default?new Date($.default):void 0;return M.Transform(M.Union([o2.Date($),M.String({format:"date-time",default:Q?.toISOString()}),M.String({format:"date",default:Q?.toISOString()}),M.Number({default:Q?.getTime()})],$)).Decode((W)=>{if(typeof W==="number"){let G=new Date(W);if(!Y.Check(G))throw Y.Error(G);return G}if(W instanceof Date)return W;let J=new Date(oM(W));if(!J||isNaN(J.getTime()))throw new g0("property",X,J);if(!Y.Check(J))throw Y.Error(J);return J}).Encode((W)=>W.toISOString())},BooleanString:($)=>{let X=o2.Boolean($),Y=w6(X);return M.Transform(M.Union([M.Boolean($),M.String({format:"boolean",default:!1})],$)).Decode((Q)=>{if(typeof Q==="string")return Q==="true";if(Q!==void 0&&!Y.Check(Q))throw Y.Error(Q);return Q}).Encode((Q)=>Q)},ObjectString:($,X)=>{let Y=M.Object($,X),Q=w6(Y),W=JSON.stringify(Q.Create());return M.Transform(M.Union([M.String({format:"ObjectString",default:W}),Y])).Decode((J)=>{if(typeof J==="string"){if(J.charCodeAt(0)!==123)throw new g0("property",Y,J);if(!Q.Check(J=d7(J,Y)))throw Q.Error(J);return Q.Decode(J)}return J}).Encode((J)=>{let G;if(typeof J==="string")J=d7(G=J,Y);if(!Q.Check(J))throw Q.Error(J);return G??JSON.stringify(J)})},ArrayString:($=M.String(),X)=>{let Y=M.Array($,X),Q=w6(Y),W=(J,G=!1)=>{if(J.charCodeAt(0)===91){if(!Q.Check(J=d7(J,Y)))throw Q.Error(J);return Q.Decode(J)}if(J.indexOf(",")!==-1){if(!Q.Check(J))throw Q.Error(J);return Q.Decode(J)}if(G)return J;throw new g0("property",Y,J)};return M.Transform(M.Union([M.String({format:"ArrayString",default:X?.default}),Y])).Decode((J)=>{if(Array.isArray(J)){let G=[];for(let U=0;U<J.length;U++){let H=J[U];if(typeof H==="string"){let B=W(H,!0);if(Array.isArray(B))G=G.concat(B);else G.push(B);continue}G.push(H)}return G}if(typeof J==="string")return W(J);return J}).Encode((J)=>{let G;if(typeof J==="string")J=d7(G=J,Y);if(!Q.Check(J))throw new g0("property",Y,J);return G??JSON.stringify(J)})},File:U$("File",tX),Files:($={})=>M.Transform(c3($)).Decode((X)=>{if(Array.isArray(X))return X;return[X]}).Encode((X)=>X),Nullable:($,X)=>M.Union([$,M.Null()],X),MaybeEmpty:($,X)=>M.Union([$,M.Null(),M.Undefined()],X),Cookie:($,{domain:X,expires:Y,httpOnly:Q,maxAge:W,path:J,priority:G,sameSite:U,secure:H,secrets:B,sign:q,...O}={})=>{let A=M.Object($,O);return A.config={domain:X,expires:Y,httpOnly:Q,maxAge:W,path:J,priority:G,sameSite:U,secure:H,secrets:B,sign:q},A},UnionEnum:($,X={})=>{let Y=$.every((Q)=>typeof Q==="string")?{type:"string"}:$.every((Q)=>typeof Q==="number")?{type:"number"}:$.every((Q)=>Q===null)?{type:"null"}:{};if($.some((Q)=>typeof Q==="object"&&Q!==null))throw new Error("This type does not support objects or arrays");return{default:$[0],...X,[F]:"UnionEnum",...Y,enum:$}},NoValidate:($,X=!0)=>{return $.noValidate=X,$},Form:($,X={})=>{let Y=M.Object($,{default:y3({}),...X}),Q=w6(Y);return M.Union([Y,m3({compiler:Q})])}};M.BooleanString=M5.BooleanString;M.ObjectString=M5.ObjectString;M.ArrayString=M5.ArrayString;M.Numeric=M5.Numeric;M.Integer=M5.Integer;M.File=($)=>{if($?.type)MY();return M5.File({default:"File",...$,extension:$?.type,type:"string",format:"binary"})};M.Files=($)=>{if($?.type)MY();return M5.Files({...$,elysiaMeta:"Files",default:"Files",extension:$?.type,type:"array",items:{...$,default:"Files",type:"string",format:"binary"}})};M.Nullable=($)=>M5.Nullable($);M.MaybeEmpty=M5.MaybeEmpty;M.Cookie=M5.Cookie;M.Date=M5.Date;M.UnionEnum=M5.UnionEnum;M.NoValidate=M5.NoValidate;M.Form=M5.Form;var u3=($)=>{if($.startsWith("async"))$=$.slice(5);$=$.trimStart();let X=-1;if($.charCodeAt(0)===40){if(X=$.indexOf("=>",$.indexOf(")")),X!==-1){let W=X;while(W>0)if($.charCodeAt(--W)===41)break;let J=$.slice(X+2);if(J.charCodeAt(0)===32)J=J.trimStart();return[$.slice(1,W),J,{isArrowReturn:J.charCodeAt(0)!==123}]}}if(/^(\w+)=>/g.test($)){if(X=$.indexOf("=>"),X!==-1){let W=$.slice(X+2);if(W.charCodeAt(0)===32)W=W.trimStart();return[$.slice(0,X),W,{isArrowReturn:W.charCodeAt(0)!==123}]}}if($.startsWith("function")){X=$.indexOf("(");let W=$.indexOf(")");return[$.slice(X+1,W),$.slice(W+2),{isArrowReturn:!1}]}let Y=$.indexOf("(");if(Y!==-1){let W=$.indexOf(`
`,2),J=$.slice(0,W),G=J.lastIndexOf(")")+1,U=$.slice(W+1);return[J.slice(Y,G),"{"+U,{isArrowReturn:!1}]}let Q=$.split(`
`,2);return[Q[0],Q[1],{isArrowReturn:!1}]},l3=($)=>{let X=$.indexOf("{");if(X===-1)return[-1,0];let Y=X+1,Q=1;for(;Y<$.length;Y++){let W=$.charCodeAt(Y);if(W===123)Q++;else if(W===125)Q--;if(Q===0)break}if(Q!==0)return[0,$.length];return[X,Y+1]},p3=($)=>{let X=$.lastIndexOf("}");if(X===-1)return[-1,0];let Y=X-1,Q=1;for(;Y>=0;Y--){let W=$.charCodeAt(Y);if(W===125)Q++;else if(W===123)Q--;if(Q===0)break}if(Q!==0)return[-1,0];return[Y,X+1]},WU=($)=>{while(!0){let X=$.indexOf(":");if(X===-1)break;let Y=$.indexOf(",",X);if(Y===-1)Y=$.indexOf("}",X)-1;if(Y===-2)Y=$.length;$=$.slice(0,X)+$.slice(Y)}return $},JU=($)=>{let X=!1;if($.charCodeAt(0)===40)$=$.slice(1,-1);if($.charCodeAt(0)===123)X=!0,$=$.slice(1,-1);$=$.replace(/( |\t|\n)/g,"").trim();let Y=[];while(!0){let[W,J]=l3($);if(W===-1)break;if(Y.push($.slice(0,W-1)),$.charCodeAt(J)===44)J++;$=$.slice(J)}if($=WU($),$)Y=Y.concat($.split(","));let Q=Object.create(null);for(let W of Y){if(W.indexOf(",")===-1){Q[W]=!0;continue}for(let J of W.split(","))Q[J.trim()]=!0}return{hasParenthesis:X,parameters:Q}},i3=($,X)=>{let{parameters:Y,hasParenthesis:Q}=JU($);if(Y.query)X.query=!0;if(Y.headers)X.headers=!0;if(Y.body)X.body=!0;if(Y.cookie)X.cookie=!0;if(Y.set)X.set=!0;if(Y.server)X.server=!0;if(Y.route)X.route=!0;if(Y.url)X.url=!0;if(Y.path)X.path=!0;if(Q)return`{ ${Object.keys(Y).join(", ")} }`;return Object.keys(Y).join(", ")},fM=($,X,Y)=>{let Q=new RegExp(`${$.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}[\\n\\t,; ]`);if(Y!==void 0)Q.lastIndex=Y;let W=Q.exec(X);return W?W.index:-1},GU=($,X,Y=0)=>{if(Y>5)return[];let Q=[],W=X;while(!0){let J=fM(" = "+$,W);if(J===-1)J=fM("="+$,W);if(J===-1){let B=W.indexOf(" = "+$);if(B===-1)B=W.indexOf("="+$);if(B+3+$.length!==W.length)break;J=B}let G=W.slice(0,J),U=G.lastIndexOf(" "),H=G.slice(U!==-1?U+1:-1);if(H==="}"){let[B,q]=p3(G);Q.push(WU(W.slice(B,q))),W=W.slice(J+3+$.length);continue}while(H.charCodeAt(0)===44)H=H.slice(1);while(H.charCodeAt(0)===9)H=H.slice(1);if(!H.includes("("))Q.push(H);W=W.slice(J+3+$.length)}for(let J of Q){if(J.charCodeAt(0)===123)continue;let G=GU(J,X);if(G.length>0)Q.push(...G)}return Q},n3=($)=>{if(!$)return;if($.charCodeAt(0)!==123)return $;if($=$.slice(2,-2),!$.includes(",")){if($.indexOf("...")!==-1)return $.slice($.indexOf("...")+3);return}let X=$.indexOf("...");if(X===-1)return;return $.slice(X+3).trimEnd()},o3=($,X,Y)=>{let Q=(W,J)=>new RegExp(`${J}\\.(${W})|${J}\\["${W}"\\]|${J}\\['${W}'\\]`).test($);for(let W of X){if(!W)continue;if(W.charCodeAt(0)===123){let J=JU(W).parameters;if(J.query)Y.query=!0;if(J.headers)Y.headers=!0;if(J.body)Y.body=!0;if(J.cookie)Y.cookie=!0;if(J.set)Y.set=!0;if(J.server)Y.server=!0;if(J.url)Y.url=!0;if(J.route)Y.route=!0;if(J.path)Y.path=!0;continue}if(!Y.query&&(Q("query",W)||$.includes("return "+W)||$.includes("return "+W+".query")))Y.query=!0;if(!Y.headers&&Q("headers",W))Y.headers=!0;if(!Y.body&&Q("body",W))Y.body=!0;if(!Y.cookie&&Q("cookie",W))Y.cookie=!0;if(!Y.set&&Q("set",W))Y.set=!0;if(!Y.server&&Q("server",W))Y.server=!0;if(!Y.route&&Q("route",W))Y.route=!0;if(!Y.url&&Q("url",W))Y.url=!0;if(!Y.path&&Q("path",W))Y.path=!0;if(Y.query&&Y.headers&&Y.body&&Y.cookie&&Y.set&&Y.server&&Y.route&&Y.url&&Y.path)break}return X},r3=($,X,Y)=>{try{let Q=new RegExp(`\\w\\((.*?)?${$}`,"gs");Q.test(X);let W=X.charCodeAt(Q.lastIndex);if(W===41||W===44)return Y.query=!0,Y.headers=!0,Y.body=!0,Y.cookie=!0,Y.set=!0,Y.server=!0,Y.url=!0,Y.route=!0,Y.path=!0,!0;return!1}catch(Q){return console.log("[Sucrose] warning: unexpected isContextPassToFunction error, you may continue development as usual but please report the following to maintainers:"),console.log("--- body ---"),console.log(X),console.log("--- context ---"),console.log($),!0}},c7,l7={},vM=($=0)=>{if(c7)clearTimeout(c7);c7=setTimeout(()=>{if(l7={},c7=void 0,B4)Bun.gc(!1)},$)},aX=($,X)=>{return{body:$.body||X.body,cookie:$.cookie||X.cookie,headers:$.headers||X.headers,query:$.query||X.query,set:$.set||X.set,server:$.server||X.server,url:$.url||X.url,route:$.route||X.route,path:$.path||X.path}},_9=($,X={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1,url:!1,route:!1,path:!1})=>{let Y=[];if($.request?.length)Y.push(...$.request);if($.beforeHandle?.length)Y.push(...$.beforeHandle);if($.parse?.length)Y.push(...$.parse);if($.error?.length)Y.push(...$.error);if($.transform?.length)Y.push(...$.transform);if($.afterHandle?.length)Y.push(...$.afterHandle);if($.mapResponse?.length)Y.push(...$.mapResponse);if($.afterResponse?.length)Y.push(...$.afterResponse);if($.handler&&typeof $.handler==="function")Y.push($.handler);for(let Q=0;Q<Y.length;Q++){let W=Y[Q];if(!W)continue;let J=typeof W==="object"?W.fn:W;if(typeof J!=="function")continue;let G=J.toString(),U=M4(G),H=l7[U];if(H){X=aX(X,H);continue}let B={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1,url:!1,route:!1,path:!1},[q,O]=u3(G),A=i3(q,B),w=n3(A);if(w){let N=GU(w,O.slice(1,-1));N.splice(0,-1,w);let L=O;if(L.charCodeAt(0)===123&&L.charCodeAt(O.length-1)===125)L=L.slice(1,-1);if(!r3(w,L,B))o3(L,N,B);if(!B.query&&L.includes("return "+w+".query"))B.query=!0}if(!l7[U])l7[U]=B;if(X=aX(X,B),X.query&&X.headers&&X.body&&X.cookie&&X.set&&X.server&&X.url&&X.route&&X.path)break}return X},MU=J$(U3(),1),s3=J$(YY(),1);class G8{name;jar;initial;constructor($,X,Y={}){this.name=$,this.jar=X,this.initial=Y}get cookie(){return this.jar[this.name]??this.initial}set cookie($){if(!(this.name in this.jar))this.jar[this.name]=this.initial;this.jar[this.name]=$}get setCookie(){if(!(this.name in this.jar))this.jar[this.name]=this.initial;return this.jar[this.name]}set setCookie($){this.cookie=$}get value(){return this.cookie.value}set value($){this.setCookie.value=$}get expires(){return this.cookie.expires}set expires($){this.setCookie.expires=$}get maxAge(){return this.cookie.maxAge}set maxAge($){this.setCookie.maxAge=$}get domain(){return this.cookie.domain}set domain($){this.setCookie.domain=$}get path(){return this.cookie.path}set path($){this.setCookie.path=$}get secure(){return this.cookie.secure}set secure($){this.setCookie.secure=$}get httpOnly(){return this.cookie.httpOnly}set httpOnly($){this.setCookie.httpOnly=$}get sameSite(){return this.cookie.sameSite}set sameSite($){this.setCookie.sameSite=$}get priority(){return this.cookie.priority}set priority($){this.setCookie.priority=$}get partitioned(){return this.cookie.partitioned}set partitioned($){this.setCookie.partitioned=$}get secrets(){return this.cookie.secrets}set secrets($){this.setCookie.secrets=$}update($){return this.setCookie=Object.assign(this.cookie,typeof $==="function"?$(this.cookie):$),this}set($){return this.setCookie=Object.assign({...this.initial,value:this.value},typeof $==="function"?$(this.cookie):$),this}remove(){if(this.value===void 0)return;return this.set({expires:new Date(0),maxAge:0,value:""}),this}toString(){return typeof this.value==="object"?JSON.stringify(this.value):this.value?.toString()??""}}var yM=($,X,Y)=>{if(!$.cookie)$.cookie={};return new Proxy(X,{get(Q,W){if(W in X)return new G8(W,$.cookie,Object.assign({},Y??{},X[W]));return new G8(W,$.cookie,Object.assign({},Y))}})},UU=async($,X,{secrets:Y,sign:Q,...W}={})=>{if(!X)return yM($,{},W);let J=typeof Y==="string";if(Q&&Q!==!0&&!Array.isArray(Q))Q=[Q];let G={},U=MU.parse(X);for(let[H,B]of Object.entries(U)){if(B===void 0)continue;let q=s3.default(B);if(Q===!0||Q?.includes(H)){if(!Y)throw new Error("No secret is provided to cookie plugin");if(J){let O=await CM(q,Y);if(O===!1)throw new sX(H);q=O}else{let O=!0;for(let A=0;A<Y.length;A++){let w=await CM(q,Y[A]);if(w!==!1){O=!0,q=w;break}}if(!O)throw new sX(H)}}G[H]={value:q}}return yM($,G,W)},HU=($)=>{if(!$||!u0($))return;let X=[];for(let[Y,Q]of Object.entries($)){if(!Y||!Q)continue;let W=Q.value;if(W===void 0||W===null)continue;X.push(MU.serialize(Y,typeof W==="object"?JSON.stringify(W):W+"",Q))}if(X.length===0)return;if(X.length===1)return X[0];return X},r0=($,X)=>{if(!B4&&$ instanceof Promise)return $.then((Q)=>r0(Q,X));let Y=$.size;if(!X&&Y||Y&&X&&X.status!==206&&X.status!==304&&X.status!==412&&X.status!==416){if(X){if(X.headers instanceof Headers){let Q={"accept-ranges":"bytes","content-range":`bytes 0-${Y-1}/${Y}`,"transfer-encoding":"chunked"};if(o7)Q=X.headers.toJSON();else{Q={};for(let[W,J]of X.headers.entries())if(W in X.headers)Q[W]=J}return new Response($,{status:X.status,headers:Q})}if(u0(X.headers))return new Response($,{status:X.status,headers:Object.assign({"accept-ranges":"bytes","content-range":`bytes 0-${Y-1}/${Y}`,"transfer-encoding":"chunked"},X.headers)})}return new Response($,{headers:{"accept-ranges":"bytes","content-range":`bytes 0-${Y-1}/${Y}`,"transfer-encoding":"chunked"}})}return new Response($)},BU=($,X)=>{if(!$)return $;$.delete("set-cookie");for(let Y=0;Y<X.length;Y++){let Q=X[Y].indexOf("=");$.append("set-cookie",`${X[Y].slice(0,Q)}=${X[Y].slice(Q+1)||""}`)}return $},I8=($,X)=>{if(X?.headers){if($){if(o7)Object.assign(X.headers,$.headers.toJSON());else for(let[Y,Q]of $.headers.entries())if(Y in X.headers)X.headers[Y]=Q}if(X.status===200)X.status=$.status;if(X.headers["content-encoding"])delete X.headers["content-encoding"];return X}if(!$)return{headers:{},status:X?.status??200};if(o7){if(X={headers:$.headers.toJSON(),status:X?.status??200},X.headers["content-encoding"])delete X.headers["content-encoding"];return X}X={headers:{},status:X?.status??200};for(let[Y,Q]of $.headers.entries()){if(Y==="content-encoding")continue;if(Y in X.headers)X.headers[Y]=Q}return X},UY=({mapResponse:$,mapCompactResponse:X})=>async(Y,Q,W)=>{let J=Y.next();if(J instanceof Promise)J=await J;if(typeof J?.done==="undefined"||J?.done){if(Q)return $(J.value,Q,W);return X(J.value,W)}let G=J.value&&typeof J.value?.stream?"text/event-stream":J.value&&typeof J.value==="object"?"application/json":"text/plain";if(Q?.headers){if(!Q.headers["transfer-encoding"])Q.headers["transfer-encoding"]="chunked";if(!Q.headers["content-type"])Q.headers["content-type"]=G;if(!Q.headers["cache-control"])Q.headers["cache-control"]="no-cache"}else Q={status:200,headers:{"content-type":G,"transfer-encoding":"chunked","cache-control":"no-cache",connection:"keep-alive"}};return new Response(new ReadableStream({async start(U){let H=!1;if(W?.signal?.addEventListener("abort",()=>{H=!0;try{U.close()}catch{}}),J.value!==void 0&&J.value!==null)if(J.value.toStream)U.enqueue(J.value.toStream());else if(typeof J.value==="object")try{U.enqueue(Buffer.from(JSON.stringify(J.value)))}catch{U.enqueue(Buffer.from(J.value.toString()))}else U.enqueue(Buffer.from(J.value.toString()));for await(let B of Y){if(H)break;if(B===void 0||B===null)continue;if(B.toStream)U.enqueue(B.toStream());else if(typeof B==="object")try{U.enqueue(Buffer.from(JSON.stringify(B)))}catch{U.enqueue(Buffer.from(B.toString()))}else U.enqueue(Buffer.from(B.toString()));await new Promise((q)=>setTimeout(()=>q(),0))}try{U.close()}catch{}}}),Q)};async function*T8($){let X=$.body;if(!X)return;let Y=X.getReader(),Q=new TextDecoder;try{while(!0){let{done:W,value:J}=await Y.read();if(W)break;yield Q.decode(J)}}finally{Y.releaseLock()}}var H$=($)=>{if(typeof $.status==="string")$.status=G$[$.status];if($.cookie&&u0($.cookie)){let X=HU($.cookie);if(X)$.headers["set-cookie"]=X}if($.headers["set-cookie"]&&Array.isArray($.headers["set-cookie"]))$.headers=BU(new Headers($.headers),$.headers["set-cookie"])},qU=($)=>{let X=UY($);return(Y,Q,W)=>{let J=!1;if(Q.headers instanceof Headers)for(let U of Q.headers.keys())if(U==="set-cookie"){if(J)continue;J=!0;for(let H of Q.headers.getSetCookie())Y.headers.append("set-cookie",H)}else Y.headers.append(U,Q.headers?.get(U)??"");else for(let U in Q.headers)Y.headers.append(U,Q.headers[U]);let G=Q.status??200;if(Y.status!==G&&G!==200&&(Y.status<=300||Y.status>400))return Y.text().then((U)=>{let H=new Response(U,{headers:Y.headers,status:Q.status});if(!H.headers.has("content-length")&&H.headers.get("transfer-encoding")==="chunked")return X(T8(H),I8(H,Q),W);return H});if(!Y.headers.has("content-length")&&Y.headers.get("transfer-encoding")==="chunked")return X(T8(Y),I8(Y,Q),W);return Y}},J5=($,X,Y)=>{if(u0(X.headers)||X.status!==200||X.cookie)switch(H$(X),$?.constructor?.name){case"String":return X.headers["content-type"]="text/plain",new Response($,X);case"Array":case"Object":return X.headers["content-type"]="application/json",new Response(JSON.stringify($),X);case"ElysiaFile":return r0($.value);case"File":return r0($,X);case"Blob":return r0($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,J5($.response,X,Y);case"ReadableStream":if(!X.headers["content-type"]?.startsWith("text/event-stream"))X.headers["content-type"]="text/event-stream; charset=utf-8";return Y?.signal?.addEventListener("abort",{handleEvent(){if(Y?.signal&&!Y?.signal?.aborted)$.cancel()}},{once:!0}),new Response($,X);case void 0:if(!$)return new Response("",X);return new Response(JSON.stringify($),X);case"Response":return $$($,X,Y);case"Error":return V8($,X);case"Promise":return $.then((Q)=>J5(Q,X,Y));case"Function":return J5($(),X,Y);case"Number":case"Boolean":return new Response($.toString(),X);case"Cookie":if($ instanceof G8)return new Response($.value,X);return new Response($?.toString(),X);case"FormData":return new Response($,X);default:if($ instanceof Response)return $$($,X,Y);if($ instanceof Promise)return $.then((Q)=>J5(Q,X));if($ instanceof Error)return V8($,X);if($ instanceof h1)return X.status=$.code,J5($.response,X,Y);if(typeof $?.next==="function")return E8($,X,Y);if(typeof $?.then==="function")return $.then((Q)=>J5(Q,X));if(typeof $?.toResponse==="function")return J5($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($,X)}if($ instanceof Response&&!$.headers.has("content-length")&&$.headers.get("transfer-encoding")==="chunked")return E8(T8($),I8($,X),Y);if(typeof $?.next==="function"||$ instanceof ReadableStream)return E8($,X,Y);return W8($,Y)},Q5=($,X,Y)=>{if($===void 0||$===null)return;if(u0(X.headers)||X.status!==200||X.cookie)switch(H$(X),$?.constructor?.name){case"String":return X.headers["content-type"]="text/plain",new Response($,X);case"Array":case"Object":return X.headers["content-type"]="application/json",new Response(JSON.stringify($),X);case"ElysiaFile":return r0($.value);case"File":return r0($,X);case"Blob":return r0($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,Q5($.response,X,Y);case"ReadableStream":if(!X.headers["content-type"]?.startsWith("text/event-stream"))X.headers["content-type"]="text/event-stream; charset=utf-8";return Y?.signal?.addEventListener("abort",{handleEvent(){if(Y?.signal&&!Y?.signal?.aborted)$.cancel()}},{once:!0}),new Response($,X);case void 0:if(!$)return;return new Response(JSON.stringify($),X);case"Response":return $$($,X,Y);case"Promise":return $.then((Q)=>Q5(Q,X));case"Error":return V8($,X);case"Function":return Q5($(),X);case"Number":case"Boolean":return new Response($.toString(),X);case"FormData":return new Response($);case"Cookie":if($ instanceof G8)return new Response($.value,X);return new Response($?.toString(),X);default:if($ instanceof Response)return $$($,X,Y);if($ instanceof Promise)return $.then((Q)=>Q5(Q,X));if($ instanceof Error)return V8($,X);if($ instanceof h1)return X.status=$.code,Q5($.response,X,Y);if(typeof $?.next==="function")return E8($,X,Y);if(typeof $?.then==="function")return $.then((Q)=>Q5(Q,X));if(typeof $?.toResponse==="function")return Q5($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($,X)}else switch($?.constructor?.name){case"String":return X.headers["content-type"]="text/plain",new Response($);case"Array":case"Object":return X.headers["content-type"]="application/json",new Response(JSON.stringify($),X);case"ElysiaFile":return r0($.value);case"File":return r0($,X);case"Blob":return r0($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,Q5($.response,X,Y);case"ReadableStream":return Y?.signal?.addEventListener("abort",{handleEvent(){if(Y?.signal&&!Y?.signal?.aborted)$.cancel()}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":if(!$.headers.has("content-length")&&$.headers.get("transfer-encoding")==="chunked")return E8(T8($),I8($),Y);return $;case"Promise":return $.then((Q)=>{let W=Q5(Q,X);if(W!==void 0)return W});case"Error":return V8($,X);case"Function":return W8($(),Y);case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof G8)return new Response($.value,X);return new Response($?.toString(),X);case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Q)=>Q5(Q,X));if($ instanceof Error)return V8($,X);if($ instanceof h1)return X.status=$.code,Q5($.response,X,Y);if(typeof $?.next==="function")return E8($,X,Y);if(typeof $?.then==="function")return $.then((Q)=>Q5(Q,X));if(typeof $?.toResponse==="function")return Q5($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($)}},W8=($,X)=>{switch($?.constructor?.name){case"String":return new Response($,{headers:{"Content-Type":"text/plain"}});case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});case"ElysiaFile":return r0($.value);case"File":return r0($);case"Blob":return r0($);case"ElysiaCustomStatusResponse":return J5($.response,{status:$.code,headers:{}});case"ReadableStream":return X?.signal?.addEventListener("abort",{handleEvent(){if(X?.signal&&!X?.signal?.aborted)$.cancel()}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":if($.headers.get("transfer-encoding")==="chunked")return E8(T8($),I8($),X);return $;case"Error":return V8($);case"Promise":return $.then((Y)=>W8(Y,X));case"Function":return W8($(),X);case"Number":case"Boolean":return new Response($.toString());case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Y)=>W8(Y,X));if($ instanceof Error)return V8($);if($ instanceof h1)return J5($.response,{status:$.code,headers:{}});if(typeof $?.next==="function")return E8($,void 0,X);if(typeof $?.then==="function")return $.then((Y)=>J5(Y,set));if(typeof $?.toResponse==="function")return W8($.toResponse());if("charCodeAt"in $){let Y=$.charCodeAt(0);if(Y===123||Y===91)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}})}return new Response($)}},V8=($,X)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:X?.status!==200?X?.status??500:500,headers:X?.headers}),t3=($,X,Y={})=>{if(typeof $==="function")return;let Q=J5($,{headers:Y});if(!X.parse?.length&&!X.transform?.length&&!X.beforeHandle?.length&&!X.afterHandle?.length)return Q.clone.bind(Q)},$$=qU({mapResponse:J5,mapCompactResponse:W8}),E8=UY({mapResponse:J5,mapCompactResponse:W8}),eX={name:"web-standard",isWebStandard:!0,handler:{mapResponse:J5,mapEarlyResponse:Q5,mapCompactResponse:W8,createStaticHandler:t3},composeHandler:{mapResponseContext:"c.request",preferWebstandardHeaders:!0,headers:`c.headers={}
for(const [k,v] of c.request.headers.entries())c.headers[k]=v
`,parser:{json($){if($)return`try{c.body=await c.request.json()}catch{}
`;return`c.body=await c.request.json()
`},text(){return`c.body=await c.request.text()
`},urlencoded(){return`c.body=parseQuery(await c.request.text())
`},arrayBuffer(){return`c.body=await c.request.arrayBuffer()
`},formData($){let X=`
c.body={}
`;if($)X+="let form;try{form=await c.request.formData()}catch{}";else X+=`const form=await c.request.formData()
`;return X+`for(const key of form.keys()){if(c.body[key]) continue
const value=form.getAll(key)
if(value.length===1)c.body[key]=value[0]
else c.body[key]=value}`}}},composeGeneralHandler:{parameters:"r",createContext($){let X="",Y="",Q=$.setHeaders;for(let G of Object.keys($.decorator))X+=`,'${G}':decorator['${G}']`;let W=$.config.handler?.standardHostname??!0,J=!!$.event.trace?.length;if(Y+=`const u=r.url,s=u.indexOf('/',${W?11:7}),qi=u.indexOf('?',s+1)
let p
if(qi===-1)p=u.substring(s)
else p=u.substring(s, qi)
`,J)Y+=`const id=randomId()
`;if(Y+="const c={request:r,store,qi,path:p,url:u,redirect,error:status,status,set:{headers:",Y+=Object.keys(Q??{}).length?"Object.assign({},app.setHeaders)":"Object.create(null)",Y+=",status:200}",$.inference.server)Y+=",get server(){return app.getServer()}";if(J)Y+=",[ELYSIA_REQUEST_ID]:id";return Y+=X,Y+=`}
`,Y},error404($,X){let Y="if(route===null)return ";if(X)Y+=`app.handleError(c,notFound,false,${this.parameters})`;else Y+=$?"new Response(error404Message,{status:c.set.status===200?404:c.set.status,headers:c.set.headers})":"error404.clone()";return{declare:X?"":`const error404Message=notFound.message.toString()
const error404=new Response(error404Message,{status:404})
`,code:Y}}},composeError:{mapResponseContext:"",validationError:"return new Response(error.message,{headers:Object.assign({'content-type':'application/json'},set.headers),status:set.status})",unknownError:"return new Response(error.message,{headers:set.headers,status:error.status??set.status??500})"},listen(){return()=>{throw new Error("WebStandard does not support listen, you might want to export default Elysia.fetch instead")}}},a3=J$(YY(),1),X$=J$(YY(),1);function e3($,X=0){let Y=Object.create(null),Q=1,W=2,J=4,G=8,U=0,H=X-1,B=H,q=$.length;for(let A=X;A<q;A++)switch($.charCodeAt(A)){case 38:O(A),H=A,B=A,U=0;break;case 61:if(B<=H)B=A;else U|=8;break;case 43:if(B>H)U|=4;else U|=1;break;case 37:if(B>H)U|=8;else U|=2;break}return O(q),Y;function O(A){let w=B>H,N=w?B:A;if(N<=H+1)return;let L=$.slice(H+1,N);if(U&1)L=L.replace(/\+/g," ");if(U&2)L=X$.default(L)||L;if(Y[L]!==void 0)return;let K="";if(w){if(K=$.slice(B+1,A),U&4)K=K.replace(/\+/g," ");if(U&8)K=X$.default(K)||K}Y[L]=K}}function p7($){let X=Object.create(null),Y=0,Q=1,W=2,J=4,G=8,U=$.length,H=-1,B=-1;for(let O=0;O<U;O++)switch($.charCodeAt(O)){case 38:q($,O),H=O,B=O,Y=0;break;case 61:if(B<=H)B=O;else Y|=G;break;case 43:if(B>H)Y|=J;else Y|=Q;break;case 37:if(B>H)Y|=G;else Y|=W;break}if(H<U)q($,U);return X;function q(O,A){let w=B>H,N=w?B:A,L=O.slice(H+1,N);if(!w&&L.length===0)return;let K=L;if(Y&Q)K=K.replace(/\+/g," ");if(Y&W)K=X$.default(K)||K;let h="";if(w){let b=O.slice(B+1,A);if(Y&J)b=b.replace(/\+/g," ");if(Y&G)b=X$.default(b)||b;h=b}let D=X[K];if(D===void 0)X[K]=h;else if(Array.isArray(D))D.push(h);else X[K]=[D,h]}}var B$=Symbol("ElysiaTrace"),X8=()=>{let{promise:$,resolve:X}=Promise.withResolvers(),{promise:Y,resolve:Q}=Promise.withResolvers(),{promise:W,resolve:J}=Promise.withResolvers(),G=[],U=[];return[(H)=>{if(H)G.push(H);return $},(H)=>{let B=[],q=[],O=null;for(let w=0;w<(H.total??0);w++){let{promise:N,resolve:L}=Promise.withResolvers(),{promise:K,resolve:h}=Promise.withResolvers(),{promise:D,resolve:b}=Promise.withResolvers(),l=[],s=[];B.push((x)=>{if(x)l.push(x);return N}),q.push((x)=>{let g={...x,end:K,error:D,index:w,onStop(v){if(v)s.push(v);return K}};L(g);for(let v=0;v<l.length;v++)l[v](g);return(v=null)=>{let E=performance.now();if(v)O=v;let i={end:E,error:v,get elapsed(){return E-x.begin}};for(let Y0=0;Y0<s.length;Y0++)s[Y0](i);h(E),b(v)}})}let A={...H,end:Y,error:W,onEvent(w){for(let N=0;N<B.length;N++)B[N](w)},onStop(w){if(w)U.push(w);return Y}};X(A);for(let w=0;w<G.length;w++)G[w](A);return{resolveChild:q,resolve(w=null){let N=performance.now();if(!w&&O)w=O;let L={end:N,error:w,get elapsed(){return N-H.begin}};for(let K=0;K<U.length;K++)U[K](L);Q(N),J(w)}}}]},$D=($)=>{return(X)=>{let[Y,Q]=X8(),[W,J]=X8(),[G,U]=X8(),[H,B]=X8(),[q,O]=X8(),[A,w]=X8(),[N,L]=X8(),[K,h]=X8(),[D,b]=X8();return $({id:X[R9],context:X,set:X.set,onRequest:Y,onParse:W,onTransform:G,onBeforeHandle:H,onHandle:q,onAfterHandle:A,onMapResponse:K,onAfterResponse:D,onError:N,time:Date.now(),store:X.store}),{request:Q,parse:J,transform:U,beforeHandle:B,handle:O,afterHandle:w,error:L,mapResponse:h,afterResponse:b}}},G5=Symbol.for("TypeBox.Kind"),XD=Symbol.for("TypeBox.Hint"),NU=($)=>/(\ |-|\t|\n)/.test($),zU=($,X,Y=!1)=>{if(typeof X==="number")return`${$}[${X}]`;if(NU(X))return`${$}${Y?"?.":""}["${X}"]`;return`${$}${Y?"?":""}.${X}`},YD=($)=>NU($)?`"${$}"`:$,hM=($,X=0,Y)=>{if(Y.type!=="string"||Y.const||Y.trusted)return $;let Q="";for(let W=X-1;W>=0;W--)Q+=`d.h${W}(`;return Q+$+")".repeat(X)},OU=($)=>{if(!$.allOf||G5 in $&&($[G5]!=="Intersect"||$.type!=="object"))return $;let{allOf:X,...Y}=$;if(Y.properties={},G5 in Y)Y[G5]="Object";for(let Q of X){if(Q.type!=="object")continue;let{properties:W,required:J,type:G,[G5]:U,...H}=Q;if(J)Y.required=Y.required?Y.required.concat(J):J;Object.assign(Y,H);for(let B in Q.properties)Y.properties[B]=OU(Q.properties[B])}return Y},QD=($,X,Y)=>{let Q=$.patternProperties["^(.*)$"]??$.patternProperties[Object.keys($.patternProperties)[0]];if(!Q)return X;let W=Y.array;return Y.array++,`(()=>{const ar${W}s=Object.keys(${X}),ar${W}v={};for(let i=0;i<ar${W}s.length;i++){const ar${W}p=${X}[ar${W}s[i]];ar${W}v[ar${W}s[i]]=${Y8(Q,`ar${W}p`,Y)}}return ar${W}v})()`},WD=($,X,Y)=>{let Q=Y.array;Y.array++;let W=X==="v"&&!Y.unions.length,J="";if(!W)J="(()=>{";J+=`const ar${Q}v=[`;for(let G=0;G<$.length;G++){if(G!==0)J+=",";J+=Y8($[G],zU(X,G,Y.parentIsOptional),Y)}if(J+="];",!W)J+=`return ar${Q}v})()`;return J};function Y$($,X=new WeakMap){if($===null||typeof $!=="object"||typeof $==="function")return $;if(X.has($))return X.get($);if(Array.isArray($)){let Y=new Array($.length);X.set($,Y);for(let Q=0;Q<$.length;Q++)Y[Q]=Y$($[Q],X);return Y}if(typeof $==="object"){let Y=Object.keys($).concat(Object.getOwnPropertySymbols($)),Q={};for(let W of Y)Q[W]=Y$($[W],X);return Q}return $}var JD=($,X,Y)=>{if(Y.TypeCompiler===void 0){if(!Y.typeCompilerWanred)console.warn(new Error("[exact-mirror] TypeBox's TypeCompiler is required to use Union")),Y.typeCompilerWanred=!0;return X}Y.unionKeys[X]=1;let Q=Y.unions.length,W=Y.unions[Q]=[],J=`(()=>{
`,G=(U)=>{if(!(G5 in U)||!U.$ref)return U;if(U[G5]==="This")return Y$(Y.definitions[U.$ref]);else if(U[G5]==="Ref")if(!Y.modules)console.warn(new Error("[exact-mirror] modules is required when using nested cyclic reference"));else return Y.modules.Import(U.$ref);return U};for(let U=0;U<$.length;U++){let H=G($[U]);if(Array.isArray(H.anyOf))for(let B=0;B<H.anyOf.length;B++)H.anyOf[B]=G(H.anyOf[B]);else if(H.items)if(Array.isArray(H.items))for(let B=0;B<H.items.length;B++)H.items[B]=G(H.items[B]);else H.items=G(H.items);W.push(S2.Compile(H)),J+=`if(d.unions[${Q}][${U}].Check(${X})){return ${Y8(H,X,{...Y,recursion:Y.recursion+1,parentIsOptional:!0})}}
`}return J+=`return ${Y.removeUnknownUnionType?"undefined":X}})()`,J},Y8=($,X,Y)=>{if(!$)return"";let Q=X==="v"&&!Y.unions.length;if(G5 in $&&$[G5]==="Import"&&$.$ref in $.$defs)return Y8($.$defs[$.$ref],X,{...Y,definitions:Object.assign(Y.definitions,$.$defs)});if(Q&&$.type!=="object"&&$.type!=="array"&&!$.anyOf)return`return ${hM("v",Y.sanitize?.length,$)}`;if(Y.recursion>=Y.recursionLimit)return X;let W="";if($.$id&&XD in $)Y.definitions[$.$id]=$;switch($.type){case"object":if($[G5]==="Record"){W=QD($,X,Y);break}if($=OU($),W+="{",$.additionalProperties)W+=`...${X}`;let J=Object.keys($.properties);for(let B=0;B<J.length;B++){let q=J[B],O=$.required&&!$.required.includes(q)||Array.isArray($.properties[q].anyOf),A=zU(X,q,Y.parentIsOptional);if(O){let N=Y.array;if(X.startsWith("ar")){let L=A.slice(A.indexOf(".")+1),K=Y.optionalsInArray;if(K[N])K[N].push(L);else K[N]=[L]}else Y.optionals.push(A)}let w=$.properties[q];if($.additionalProperties&&w.type!=="object")continue;if(B!==0)W+=",";W+=`${YD(q)}:${O?`${A}===undefined?undefined:`:""}${Y8(w,A,{...Y,recursion:Y.recursion+1,parentIsOptional:O})}`}W+="}";break;case"array":if($.items.type!=="object"&&$.items.type!=="array")if(Array.isArray($.items)){W=WD($.items,X,Y);break}else if(Q)return"return v";else if(G5 in $.items&&$.items.$ref&&($.items[G5]==="Ref"||$.items[G5]==="This"))W=Y8(Y$(Y.definitions[$.items.$ref]),X,{...Y,parentIsOptional:!0,recursion:Y.recursion+1});else{W=X;break}let G=Y.array;Y.array++;let U=X;if(Q)W=`const ar${G}v=new Array(${X}.length);`;else U=`ar${G}s`,W=`((${U})=>{const ar${G}v=new Array(${U}.length);`;W+=`for(let i=0;i<${U}.length;i++){const ar${G}p=${U}[i];ar${G}v[i]=${Y8($.items,`ar${G}p`,Y)}`;let H=Y.optionalsInArray[G+1];if(H)for(let B=0;B<H.length;B++){let q=`ar${G}v[i].${H[B]}`;W+=`;if(${q}===undefined)delete ${q}`}if(W+="}",!Q)W+=`return ar${G}v})(${X})`;break;default:if($.$ref&&$.$ref in Y.definitions)return Y8(Y.definitions[$.$ref],X,Y);if(Array.isArray($.anyOf)){W=JD($.anyOf,X,Y);break}W=hM(X,Y.sanitize?.length,$);break}if(!Q)return W;if($.type==="array")return`${W}return ar0v`;W=`const x=${W}
`;for(let J=0;J<Y.optionals.length;J++){let G=Y.optionals[J],U=G.slice(1);if(W+=`if(${G}===undefined`,Y.unionKeys[G])W+=`||x${U}===undefined`;W+=`)delete x${U.charCodeAt(0)!==63?"?":""}${U}
`}return`${W}return x`},dM=($,{TypeCompiler:X,modules:Y,definitions:Q,sanitize:W,recursionLimit:J=8,removeUnknownUnionType:G=!1}={})=>{let U=[];if(typeof W==="function")W=[W];let H=Y8($,"v",{optionals:[],optionalsInArray:[],array:0,parentIsOptional:!1,unions:U,unionKeys:{},TypeCompiler:X,modules:Y,definitions:Q??Y?.$defs??{},sanitize:W,recursion:0,recursionLimit:J,removeUnknownUnionType:G});if(!U.length&&!W?.length)return Function("v",H);let B;if(W?.length){B={};for(let q=0;q<W.length;q++)B[`h${q}`]=W[q]}return Function("d",`return function mirror(v){${H}}`)({unions:U,...B})},$Y=($)=>{if(!$)return!1;if($?.[F]==="Import"&&$.References)return $.References().some($Y);if($.schema)$=$.schema;return!!$&&q1 in $},P2=($)=>{if(!$)return!1;let X=$?.schema??$;if(X[F]==="Import"&&$.References)return $.References().some(P2);if(X.anyOf)return X.anyOf.some(P2);if(X.someOf)return X.someOf.some(P2);if(X.allOf)return X.allOf.some(P2);if(X.not)return X.not.some(P2);if(X.type==="object"){let Y=X.properties;if("additionalProperties"in X)return X.additionalProperties;if("patternProperties"in X)return!1;for(let Q of Object.keys(Y)){let W=Y[Q];if(W.type==="object"){if(P2(W))return!0}else if(W.anyOf){for(let J=0;J<W.anyOf.length;J++)if(P2(W.anyOf[J]))return!0}return W.additionalProperties}return!1}if(X.type==="array"&&X.items&&!Array.isArray(X.items))return P2(X.items);return!1},P8=($,X)=>{if(!X)return!1;if(F in X&&X[F]===$)return!0;if(X.type==="object"){let Y=X.properties;if(!Y)return!1;for(let Q of Object.keys(Y)){let W=Y[Q];if(W.type==="object"){if(P8($,W))return!0}else if(W.anyOf){for(let J=0;J<W.anyOf.length;J++)if(P8($,W.anyOf[J]))return!0}if(F in W&&W[F]===$)return!0}return!1}return!!X.properties&&F in X.properties&&X.properties[F]===$},F9=($,X)=>{if(!X)return;let Y=X.schema??X;if(Y[F]==="Import"&&X.References)return X.References().some((Q)=>F9($,Q));if(Y.type==="object"){let Q=Y.properties;if(!Q)return!1;for(let W of Object.keys(Q)){let J=Q[W];if($ in J)return!0;if(J.type==="object"){if(F9($,J))return!0}else if(J.anyOf){for(let G=0;G<J.anyOf.length;G++)if(F9($,J.anyOf[G]))return!0}}return!1}return $ in Y},V2=($)=>{if(!$)return!1;if($.oneOf){for(let X=0;X<$.oneOf.length;X++)if(V2($.oneOf[X]))return!0}if($.anyOf){for(let X=0;X<$.anyOf.length;X++)if(V2($.anyOf[X]))return!0}if($.oneOf){for(let X=0;X<$.oneOf.length;X++)if(V2($.oneOf[X]))return!0}if($.allOf){for(let X=0;X<$.allOf.length;X++)if(V2($.allOf[X]))return!0}if($.not&&V2($.not))return!0;if($.type==="object"&&$.properties){let X=$.properties;for(let Y of Object.keys(X)){let Q=X[Y];if(V2(Q))return!0;if(Q.type==="array"&&Q.items&&V2(Q.items))return!0}}if($.type==="array"&&$.items&&V2($.items))return!0;return $[F]==="Ref"&&"$ref"in $},M2=($)=>{if(!$)return!1;if($.$ref&&$.$defs&&$.$ref in $.$defs&&M2($.$defs[$.$ref]))return!0;if($.oneOf){for(let X=0;X<$.oneOf.length;X++)if(M2($.oneOf[X]))return!0}if($.anyOf){for(let X=0;X<$.anyOf.length;X++)if(M2($.anyOf[X]))return!0}if($.allOf){for(let X=0;X<$.allOf.length;X++)if(M2($.allOf[X]))return!0}if($.not&&M2($.not))return!0;if($.type==="object"&&$.properties){let X=$.properties;for(let Y of Object.keys(X)){let Q=X[Y];if(M2(Q))return!0;if(Q.type==="array"&&Q.items&&M2(Q.items))return!0}}if($.type==="array"&&$.items&&M2($.items))return!0;return k0 in $},Q$=($,X,Y={})=>{let Q=Y;if(Q.root=!0,!Array.isArray(X))return X.original=$,b1($,X,Q);for(let W of X)W.original=$,$=b1($,W,Q);return $},b1=($,X,Y)=>{if(!$)return $;let Q=Y.root;if(X.untilObjectFound&&!Q&&$.type==="object")return $;let W=X.from[F];if($.oneOf){for(let U=0;U<$.oneOf.length;U++)$.oneOf[U]=b1($.oneOf[U],X,Y);return $}if($.anyOf){for(let U=0;U<$.anyOf.length;U++)$.anyOf[U]=b1($.anyOf[U],X,Y);return $}if($.allOf){for(let U=0;U<$.allOf.length;U++)$.allOf[U]=b1($.allOf[U],X,Y);return $}if($.not)return b1($.not,X,Y);let J=Q&&!!X.excludeRoot;if($[F]===W){let{anyOf:U,oneOf:H,allOf:B,not:q,properties:O,items:A,...w}=$,N=X.to(w);if(!N)return $;let L,K=(D)=>{let b=h(D);if(b.$id)delete b.$id;return b},h=(D)=>{if(O&&D.type==="object"){let l={};for(let[s,x]of Object.entries(O))l[s]=b1(x,X,{...Y,root:!1});return{...w,...D,properties:l}}if(A&&D.type==="array")return{...w,...D,items:b1(A,X,{...Y,root:!1})};let b={...w,...D};if(delete b.required,O&&D.type==="string"&&D.format==="ObjectString"&&D.default==="{}")L=M.ObjectString(O,w),b.default=JSON.stringify(C0.Create(M.Object(O))),b.properties=O;if(A&&D.type==="string"&&D.format==="ArrayString"&&D.default==="[]")L=M.ArrayString(A,w),b.default=JSON.stringify(C0.Create(M.Array(A))),b.items=A;return b};if(J){if(O){let D={};for(let[b,l]of Object.entries(O))D[b]=b1(l,X,{...Y,root:!1});return{...w,properties:D}}else if(A?.map)return{...w,items:A.map((D)=>b1(D,X,{...Y,root:!1}))};return w}if(N.anyOf)for(let D=0;D<N.anyOf.length;D++)N.anyOf[D]=K(N.anyOf[D]);else if(N.oneOf)for(let D=0;D<N.oneOf.length;D++)N.oneOf[D]=K(N.oneOf[D]);else if(N.allOf)for(let D=0;D<N.allOf.length;D++)N.allOf[D]=K(N.allOf[D]);else if(N.not)N.not=K(N.not);if(L)N[k0]=L[k0];if(N.anyOf||N.oneOf||N.allOf||N.not)return N;if(O){let D={};for(let[b,l]of Object.entries(O))D[b]=b1(l,X,{...Y,root:!1});return{...w,...N,properties:D}}else if(A?.map)return{...w,...N,items:A.map((D)=>b1(D,X,{...Y,root:!1}))};return{...w,...N}}let G=$?.properties;if(G&&Q&&X.rootOnly!==!0)for(let[U,H]of Object.entries(G))switch(H[F]){case W:let{anyOf:B,oneOf:q,allOf:O,not:A,type:w,...N}=H,L=X.to(N);if(!L)return $;if(L.anyOf)for(let K=0;K<L.anyOf.length;K++)L.anyOf[K]={...N,...L.anyOf[K]};else if(L.oneOf)for(let K=0;K<L.oneOf.length;K++)L.oneOf[K]={...N,...L.oneOf[K]};else if(L.allOf)for(let K=0;K<L.allOf.length;K++)L.allOf[K]={...N,...L.allOf[K]};else if(L.not)L.not={...N,...L.not};G[U]={...N,...b1(N,X,{...Y,root:!1})};break;case"Object":case"Union":G[U]=b1(H,X,{...Y,root:!1});break;default:if(Array.isArray(H.items))for(let K=0;K<H.items.length;K++)H.items[K]=b1(H.items[K],X,{...Y,root:!1});else if(H.anyOf||H.oneOf||H.allOf||H.not)G[U]=b1(H,X,{...Y,root:!1});else if(H.type==="array")H.items=b1(H.items,X,{...Y,root:!1});break}return $},w9=($)=>(X)=>{if(typeof X==="object")try{return C0.Clean($,X)}catch{try{return C0.Clean($,X)}catch{return X}}return X},_1=($,{models:X={},dynamic:Y=!1,modules:Q,normalize:W=!1,additionalProperties:J=!1,coerce:G=!1,additionalCoerce:U=[],validators:H,sanitize:B}={})=>{if(H=H?.filter((L)=>L),!$){if(!H?.length)return;$=H[0],H=H.slice(1)}let q=void 0,O=(L)=>{if(G)return Q$(L,[{from:M.Number(),to:(K)=>M.Numeric(K),untilObjectFound:!0},{from:M.Boolean(),to:(K)=>M.BooleanString(K),untilObjectFound:!0},...Array.isArray(U)?U:[U]]);return Q$(L,U)},A=(L)=>{let K;if(!L)return;if(typeof L!=="string")K=L;else{let D=L.endsWith("[]"),b=D?L.substring(0,L.length-2):L;if(K=Q?.Import(b)??X[b],D)K=M.Array(K)}if(!K)return;let h;if(K[F]!=="Import"&&(h=V2(K))){let D=M$();if(q===void 0)q=h;K=M.Module({...Q?.$defs,[D]:K}).Import(D)}if(K[F]==="Import"){let D={};for(let[l,s]of Object.entries(K.$defs))D[l]=O(s);let b=K.$ref;K=M.Module(D).Import(b)}else if(G||U)K=O(K);return K},w=A($);if(H?.length){let L=!1,{schema:K,notObjects:h}=MD([w,...H.map(A)]);if(h){if(w=M.Intersect([...K?[K]:[],...h.map((D)=>{let b=A(D);if(b.type==="object"&&"additionalProperties"in b){if(!L&&b.additionalProperties===!1)L=!0;delete b.additionalProperties}return b})]),w.type==="object"&&L)w.additionalProperties=!1}}else if(w.type==="object"&&"additionalProperties"in w===!1)w.additionalProperties=J;if(Y){let L={schema:w,references:"",checkFunc:()=>{},code:"",Check:(K)=>C0.Check(w,K),Errors:(K)=>C0.Errors(w,K),Code:()=>"",Clean:w9(w),Decode:(K)=>C0.Decode(w,K),Encode:(K)=>C0.Encode(w,K),get hasAdditionalProperties(){if("~hasAdditionalProperties"in this)return this["~hasAdditionalProperties"];return this["~hasAdditionalProperties"]=P2(w)},get hasDefault(){if("~hasDefault"in this)return this["~hasDefault"];return this["~hasDefault"]=F9("default",w)},get isOptional(){if("~isOptional"in this)return this["~isOptional"];return this["~isOptional"]=$Y(w)},get hasTransform(){if("~hasTransform"in this)return this["~hasTransform"];return this["~hasTransform"]=M2(w)},"~hasRef":q,get hasRef(){if("~hasRef"in this)return this["~hasRef"];return this["~hasRef"]=M2(w)}};if(w.config){if(L.config=w.config,L?.schema?.config)delete L.schema.config}if(W&&w.additionalProperties===!1)if(W===!0||W==="exactMirror")try{L.Clean=dM(w,{TypeCompiler:S2,sanitize:B?.(),modules:Q})}catch{console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.warn(w),L.Clean=w9(w)}else L.Clean=w9(w);return L.parse=(K)=>{try{return L.Decode(K)}catch(h){throw[...L.Errors(K)].map(U2)}},L.safeParse=(K)=>{try{return{success:!0,data:L.Decode(K),error:null}}catch(h){let D=[...N.Errors(K)].map(U2);return{success:!1,data:null,error:D[0]?.summary,errors:D}}},L}let N=S2.Compile(w,Object.values(X));if(w.config){if(N.config=w.config,N?.schema?.config)delete N.schema.config}if(W===!0||W==="exactMirror")try{N.Clean=dM(w,{TypeCompiler:S2,sanitize:B?.(),modules:Q})}catch(L){console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.warn(w),N.Clean=w9(w)}else N.Clean=w9(w);return N.parse=(L)=>{try{return N.Decode(L)}catch(K){throw[...N.Errors(L)].map(U2)}},N.safeParse=(L)=>{try{return{success:!0,data:N.Decode(L),error:null}}catch(K){let h=[...N.Errors(L)].map(U2);return{success:!1,data:null,error:h[0]?.summary,errors:h}}},Object.assign(N,{get hasAdditionalProperties(){if("~hasAdditionalProperties"in this)return this["~hasAdditionalProperties"];return this["~hasAdditionalProperties"]=P2(N)},get hasDefault(){if("~hasDefault"in this)return this["~hasDefault"];return this["~hasDefault"]=F9("default",N)},get isOptional(){if("~isOptional"in this)return this["~isOptional"];return this["~isOptional"]=$Y(N)},get hasTransform(){if("~hasTransform"in this)return this["~hasTransform"];return this["~hasTransform"]=M2(w)},get hasRef(){if("~hasRef"in this)return this["~hasRef"];return this["~hasRef"]=V2(w)},"~hasRef":q}),N},GD=($)=>$[F]==="Union"||!$.schema&&!!$.anyOf,MD=($)=>{if($.length===0)return{schema:void 0,notObjects:[]};if($.length===1)return $[0].type==="object"?{schema:$[0],notObjects:[]}:{schema:void 0,notObjects:$};let X,Y=[],Q=!1,W=!1;for(let J of $){if(J.type!=="object"){Y.push(J);continue}if("additionalProperties"in J){if(J.additionalProperties===!0)Q=!0;else if(J.additionalProperties===!1)W=!0}if(!X){X=J;continue}X={...X,...J,properties:{...X.properties,...J.properties},required:[...X?.required??[],...J.required]}}if(X){if(X.required)X.required=[...new Set(X.required)];if(W)X.additionalProperties=!1;else if(Q)X.additionalProperties=!0}return{schema:X,notObjects:Y}},cM=($,{models:X={},modules:Y,dynamic:Q=!1,normalize:W=!1,additionalProperties:J=!1,validators:G=[],sanitize:U})=>{if(G=G.filter((q)=>q),!$){if(!G?.length)return;$=G[0],G=G.slice(1)}let H;if(typeof $!=="string")H=$;else{let q=$.endsWith("[]"),O=q?$.substring(0,$.length-2):$;if(H=Y.Import(O)??X[O],q)H=M.Array(H)}if(!H)return;if(F in H)return{200:_1(H,{modules:Y,models:X,additionalProperties:J,dynamic:Q,normalize:W,coerce:!1,additionalCoerce:[],validators:G.map((q)=>q[200]),sanitize:U})};let B={};return Object.keys(H).forEach((q)=>{if(isNaN(+q))return;let O=H[+q];if(typeof O==="string"){if(O in X){let A=X[O];B[+q]=F in A?_1(A,{modules:Y,models:X,additionalProperties:J,dynamic:Q,normalize:W,coerce:!1,additionalCoerce:[],validators:G.map((w)=>w[+q]),sanitize:U}):A}return}B[+q]=F in O?_1(O,{modules:Y,models:X,additionalProperties:J,dynamic:Q,normalize:W,coerce:!1,additionalCoerce:[],validators:G.map((A)=>A[+q]),sanitize:U}):O}),B},uX,A6=()=>{if(!uX)uX=[{from:M.Object({}),to:()=>M.ObjectString({}),excludeRoot:!0},{from:M.Array(M.Any()),to:()=>M.ArrayString(M.Any())}];return uX},lX,XY=()=>{if(!lX)lX=[{from:M.Number(),to:($)=>M.Numeric($),rootOnly:!0},{from:M.Boolean(),to:($)=>M.BooleanString($),rootOnly:!0}];return lX},wU=({validator:$,modules:X,defaultConfig:Y={},config:Q,dynamic:W,models:J,validators:G,sanitize:U})=>{let H=_1($,{modules:X,dynamic:W,models:J,additionalProperties:!0,coerce:!0,additionalCoerce:A6(),validators:G,sanitize:U});if(H)H.config=aM(H.config,Q);else H=_1(M.Cookie(M.Any()),{modules:X,dynamic:W,models:J,additionalProperties:!0,validators:G,sanitize:U}),H.config=Y;return H},m7=($)=>$[F]==="Import"&&$.$defs[$.$ref][F]==="Object"?$.$defs[$.$ref]:$,U1=($,X)=>X?$:"",UD=["json","text","urlencoded","arrayBuffer","formdata","application/json","text/plain","application/x-www-form-urlencoded","application/octet-stream","multipart/form-data"],HY=({context:$="c",trace:X=[],addFn:Y})=>{if(!X.length)return()=>{return{resolveChild(){return()=>{}},resolve(){}}};for(let Q=0;Q<X.length;Q++)Y(`let report${Q},reportChild${Q},reportErr${Q},reportErrChild${Q};let trace${Q}=${$}[ELYSIA_TRACE]?.[${Q}]??trace[${Q}](${$});
`);return(Q,{name:W,total:J=0}={})=>{if(!W)W="anonymous";let G=Q==="error"?"reportErr":"report";for(let U=0;U<X.length;U++)Y(`${G}${U} = trace${U}.${Q}({id,event:'${Q}',name:'${W}',begin:performance.now(),total:${J}})
`);return{resolve(){for(let U=0;U<X.length;U++)Y(`${G}${U}.resolve()
`)},resolveChild(U){for(let H=0;H<X.length;H++)Y(`${G}Child${H}=${G}${H}.resolveChild?.shift()?.({id,event:'${Q}',name:'${U}',begin:performance.now()})
`);return(H)=>{for(let B=0;B<X.length;B++)if(H)Y(`if(${H} instanceof Error){${G}Child${B}?.(${H}) }else{${G}Child${B}?.()}`);else Y(`${G}Child${B}?.()
`)}}}}},L9=({schema:$,name:X,type:Y,typeAlias:Q=Y,normalize:W,ignoreTryCatch:J=!1})=>{if(!W||!$.Clean||$.hasAdditionalProperties)return"";if(W===!0||W==="exactMirror"){if(J)return`${X}=validator.${Q}.Clean(${X})
`;return`try{${X}=validator.${Q}.Clean(${X})
}catch{}`}if(W==="typebox")return`${X}=validator.${Q}.Clean(${X})
`;return""},HD=({injectResponse:$="",normalize:X=!1,validator:Y,encodeSchema:Q=!1,isStaticResponse:W=!1,hasSanitize:J=!1})=>({validate:(G,U=`c.${G}`)=>`c.set.status=422;throw new ValidationError('${G}',validator.${G},${U})`,response:(G="r")=>{if(W)return"";let U=$+`
`;U+=`if(${G} instanceof ElysiaCustomStatusResponse){c.set.status=${G}.code
${G}=${G}.response}switch(c.set.status){`;for(let[H,B]of Object.entries(Y.response)){U+=`
case ${H}:if(${G} instanceof Response)break
`;let q=B.schema?.noValidate===!0,O=q||J,A=({ignoreTryCatch:N=!1}={})=>L9({name:G,schema:B,type:"response",typeAlias:`response[${H}]`,normalize:X,ignoreTryCatch:N});if(O)U+=A();let w=!O&&X&&!q;if(Q&&B.hasTransform)U+=`try{${G}=validator.response[${H}].Encode(${G})
c.set.status=${H}}catch{`+(w?`try{
`+A({ignoreTryCatch:!0})+`${G}=validator.response[${H}].Encode(${G})
}catch{throw new ValidationError('response',validator.response[${H}],${G})}`:`throw new ValidationError('response',validator.response[${H}],${G})`)+"}";else{if(!O)U+=A();if(!q)U+=`if(validator.response[${H}].Check(${G})===false)throw new ValidationError('response',validator.response[${H}],${G})
c.set.status=${H}
`}U+=`break
`}return U+"}"}}),U4=($)=>{return($?.fn??$).constructor.name==="AsyncFunction"},BD=/=>\s?response\.clone\(/,qD=/(?:return|=>)\s?\S+\(|a(?:sync|wait)/,Z1=($)=>{let X=typeof $==="object";if(X&&$.isAsync!==void 0)return $.isAsync;let Y=X?$.fn:$;if(Y.constructor.name==="AsyncFunction")return!0;let Q=Y.toString();if(BD.test(Q)){if(X)$.isAsync=!1;return!1}let W=qD.test(Q);if(X)$.isAsync=W;return W},S9=($)=>{let X=typeof $==="object";if(X&&$.hasReturn!==void 0)return $.hasReturn;let Y=X?$.fn.toString():typeof $==="string"?$.toString():$,Q=Y.indexOf(")");if(Y.charCodeAt(Q+2)===61&&Y.charCodeAt(Q+5)!==123){if(X)$.hasReturn=!0;return!0}let W=Y.includes("return");if(X)$.hasReturn=W;return W},u7=($)=>{let X=$?.fn??$;return X.constructor.name==="AsyncGeneratorFunction"||X.constructor.name==="GeneratorFunction"},ND=({app:$,path:X,method:Y,hooks:Q,validator:W,handler:J,allowMeta:G=!1,inference:U})=>{let H=$["~adapter"].composeHandler,B=$["~adapter"].handler,q=typeof J==="function";if(!q){if(J=B.mapResponse(J,{headers:$.setHeaders??{}}),Q.parse?.length&&Q.transform?.length&&Q.beforeHandle?.length&&Q.afterHandle?.length){if(J instanceof Response)return Function("a",`"use strict";
return function(){return a.clone()}`)(J);return Function("a",`"use strict";
return function(){return a}`)(J)}}let O=q?"handler(c)":"handler",A=!!Q.afterResponse?.length,w=!!Q.trace?.length,N="";if(U=_9(Q,U),U=_9({handler:J},U),H.declare){let c=H.declare(U);if(c)N+=c}if(U.server)N+=`Object.defineProperty(c,'server',{get:function(){return getServer()}})
`;W.createBody?.(),W.createQuery?.(),W.createHeaders?.(),W.createParams?.(),W.createCookie?.(),W.createResponse?.();let L=!!W.body||!!W.headers||!!W.params||!!W.query||!!W.cookie||!!W.response,K=U.query||!!W.query,h=Q.parse?.length===1&&Q.parse[0].fn==="none",D=Y!==""&&Y!=="GET"&&Y!=="HEAD"&&(U.body||!!W.body||!!Q.parse?.length)&&!h,b=$.setHeaders,l=b&&!!Object.keys(b).length,s=U.headers||!!W.headers||H.preferWebstandardHeaders!==!0&&U.body,x=U.cookie||!!W.cookie,g=W.cookie?.config?aM(W?.cookie?.config,$.config.cookie):$.config.cookie,v="",E=()=>{if(v)return v;if(g?.sign){if(!g.secrets)throw new Error(`t.Cookie required secret which is not set in (${Y}) ${X}.`);let c=!g.secrets?void 0:typeof g.secrets==="string"?g.secrets:g.secrets[0];if(v+=`const _setCookie = c.set.cookie
if(_setCookie){`,g.sign===!0)v+=`for(const [key, cookie] of Object.entries(_setCookie)){c.set.cookie[key].value=await signCookie(cookie.value,'${c}')}`;else for(let I of g.sign)v+=`if(_setCookie['${I}']?.value)c.set.cookie['${I}'].value=await signCookie(_setCookie['${I}'].value,'${c}')
`;v+=`}
`}return v},i=$.config.normalize,Y0=$.config.encodeSchema,B0=HD({normalize:i,validator:W,encodeSchema:Y0,isStaticResponse:J instanceof Response,hasSanitize:!!$.config.sanitize});if(s)N+=H.headers;if(w)N+=`const id=c[ELYSIA_REQUEST_ID]
`;let w0=HY({trace:Q.trace,addFn:(c)=>{N+=c}});if(N+="try{",x){let c=(z,S)=>{let Z=g?.[z]??S;if(!Z)return typeof S==="string"?`${z}:"${S}",`:`${z}:${S},`;if(typeof Z==="string")return`${z}:'${Z}',`;if(Z instanceof Date)return`${z}: new Date(${Z.getTime()}),`;return`${z}:${Z},`},I=g?`{secrets:${g.secrets!==void 0?typeof g.secrets==="string"?`'${g.secrets}'`:"["+g.secrets.reduce((z,S)=>z+`'${S}',`,"")+"]":"undefined"},sign:${g.sign===!0?!0:g.sign!==void 0?"["+g.sign.reduce((z,S)=>z+`'${S}',`,"")+"]":"undefined"},`+c("domain")+c("expires")+c("httpOnly")+c("maxAge")+c("path","/")+c("priority")+c("sameSite")+c("secure")+"}":"undefined";if(s)N+=`
c.cookie=await parseCookie(c.set,c.headers.cookie,${I})
`;else N+=`
c.cookie=await parseCookie(c.set,c.request.headers.get('cookie'),${I})
`}if(K){let c=[];if(W.query&&W.query.schema.type==="object"){let I=W.query.schema.properties;if(!W.query.hasAdditionalProperties)for(let[z,S]of Object.entries(I)){let Z=S,f=Z.type==="array"||!!Z.anyOf?.some((n)=>n.type==="string"&&n.format==="ArrayString");if(Z&&q1 in Z&&Z.type==="array"&&Z.items)Z=Z.items;let{type:T,anyOf:y}=Z;c.push({key:z,isArray:f,isNestedObjectArray:f&&Z.items?.type==="object"||!!Z.items?.anyOf?.some((n)=>n.type==="object"||n.type==="array"),isObject:T==="object"||y?.some((n)=>n.type==="string"&&n.format==="ArrayString"),anyOf:!!y})}}if(!c.length)N+="if(c.qi===-1){c.query={}}else{c.query=parseQueryFromURL(c.url,c.qi+1)}";else{N+=`if(c.qi!==-1){let url='&'+c.url.slice(c.qi+1)
`;let I=0;for(let{key:z,isArray:S,isObject:Z,isNestedObjectArray:f,anyOf:T}of c){let y=(I===0?"let ":"")+`memory=url.indexOf('&${z}=')
let a${I}
`;if(S)if(N+=y,f)N+=`while(memory!==-1){const start=memory+${z.length+2}
memory=url.indexOf('&',start)
if(a${I}===undefined)
a${I}=''
else
a${I}+=','
let temp
if(memory===-1)temp=decodeURIComponent(url.slice(start).replace(/\\+/g,' '))
else temp=decodeURIComponent(url.slice(start, memory).replace(/\\+/g,' '))
const charCode=temp.charCodeAt(0)
if(charCode!==91&&charCode !== 123)
temp='"'+temp+'"'
a${I}+=temp
if(memory===-1)break
memory=url.indexOf('&${z}=',memory)
if(memory===-1)break}try{if(a${I}.charCodeAt(0)===91)a${I} = JSON.parse(a${I})
else
a${I}=JSON.parse('['+a${I}+']')}catch{}
`;else N+=`while(memory!==-1){const start=memory+${z.length+2}
memory=url.indexOf('&',start)
if(a${I}===undefined)a${I}=[]
if(memory===-1){const temp=decodeURIComponent(url.slice(start)).replace(/\\+/g,' ')
if(temp.includes(',')){a${I}=a${I}.concat(temp.split(','))}else{a${I}.push(decodeURIComponent(url.slice(start)).replace(/\\+/g,' '))}
break}else{const temp=decodeURIComponent(url.slice(start, memory)).replace(/\\+/g,' ')
if(temp.includes(',')){a${I}=a${I}.concat(temp.split(','))}else{a${I}.push(temp)}
}memory=url.indexOf('&${z}=',memory)
if(memory===-1) break
}`;else if(Z)N+=y+`if(memory!==-1){const start=memory+${z.length+2}
memory=url.indexOf('&',start)
if(memory===-1)a${I}=decodeURIComponent(url.slice(start).replace(/\\+/g,' '))else a${I}=decodeURIComponent(url.slice(start,memory).replace(/\\+/g,' '))if(a${I}!==undefined)try{a${I}=JSON.parse(a${I})}catch{}}`;else{if(N+=y+`if(memory!==-1){const start=memory+${z.length+2}
memory=url.indexOf('&',start)
if(memory===-1)a${I}=decodeURIComponent(url.slice(start).replace(/\\+/g,' '))
else{a${I}=decodeURIComponent(url.slice(start,memory).replace(/\\+/g,' '))`,T)N+=`
let deepMemory=url.indexOf('&${z}=',memory)
if(deepMemory!==-1){a${I}=[a${I}]
let first=true
while(true){const start=deepMemory+${z.length+2}
if(first)first=false
else deepMemory = url.indexOf('&', start)
let value
if(deepMemory===-1)value=url.slice(start).replace(/\\+/g,' ')
else value=url.slice(start, deepMemory).replace(/\\+/g,' ')
value=decodeURIComponent(value)
if(value===null){if(deepMemory===-1){break}else{continue}}
const vStart=value.charCodeAt(0)
const vEnd=value.charCodeAt(value.length - 1)
if((vStart===91&&vEnd===93)||(vStart===123&&vEnd===125))
try{a${I}.push(JSON.parse(value))}catch{a${I}.push(value)}if(deepMemory===-1)break}}`;N+="}}"}I++,N+=`
`}N+="c.query={"+c.map(({key:z},S)=>`'${z}':a${S}`).join(",")+"}",N+=`} else c.query = {}
`}}let N5=typeof J==="function"&&Z1(J),_0=w||Q.afterResponse?.length?"c.response= ":"",o1=x||D||N5||!!Q.parse?.length||!!Q.afterHandle?.some(Z1)||!!Q.beforeHandle?.some(Z1)||!!Q.transform?.some(Z1)||!!Q.mapResponse?.some(Z1),x2=(typeof J==="function"?u7(J):!1)||!!Q.beforeHandle?.some(u7)||!!Q.afterHandle?.some(u7)||!!Q.transform?.some(u7),k2=Object.keys(W.response??{}),P5=k2.length>1,w2=k2.length===0||k2.length===1&&k2[0]==="200",G1=U.cookie||U.set||s||w||P5||!w2||q&&l||x2,O1=(c="r")=>`return ${G1?"mapResponse":"mapCompactResponse"}(${_0}${c}${G1?",c.set":""}${P1})
`,P1=x2||H.mapResponseContext?`,${H.mapResponseContext}`:"";if(w||U.route)N+=`c.route=\`${X}\`
`;let c5=w0("parse",{total:Q.parse?.length});if(D){let c=!!Q.parse?.length||U.body||W.body;if(H.parser.declare)N+=H.parser.declare;N+=`
try{`;let I=typeof Q.parse==="string"?Q.parse:Array.isArray(Q.parse)&&Q.parse.length===1?typeof Q.parse[0]==="string"?Q.parse[0]:typeof Q.parse[0].fn==="string"?Q.parse[0].fn:void 0:void 0;if(!I&&W.body&&!Q.parse?.length){let z=W.body.schema;if(z&&z.anyOf&&z[F]==="Union"&&z.anyOf?.length===2&&z.anyOf?.find((S)=>S[F]==="ElysiaForm"))I="formdata"}if(I&&UD.includes(I)){let z=w0("parse",{total:Q.parse?.length}),S=!!W.body?.isOptional;switch(I){case"json":case"application/json":N+=H.parser.json(S);break;case"text":case"text/plain":N+=H.parser.text(S);break;case"urlencoded":case"application/x-www-form-urlencoded":N+=H.parser.urlencoded(S);break;case"arrayBuffer":case"application/octet-stream":N+=H.parser.arrayBuffer(S);break;case"formdata":case"multipart/form-data":N+=H.parser.formData(S);break;default:if(I[0]in $["~parser"])N+=s?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",N+=`
if(contentType){const index=contentType.indexOf(';')
if(index!==-1)contentType=contentType.substring(0,index)}
else{contentType=''}c.contentType=contentType
let result=parser['${I}'](c, contentType)
if(result instanceof Promise)result=await result
if(result instanceof ElysiaCustomStatusResponse)throw result
if(result!==undefined)c.body=result
delete c.contentType
`;break}z.resolve()}else if(c){N+=`
`;let z=Q.parse?.length?"let":"const";N+=s?`${z} contentType=c.headers['content-type']
`:`${z} contentType=c.request.headers.get('content-type')
`;let S=!1;if(Q.parse?.length)N+=`if(contentType){
const index=contentType.indexOf(';')

if(index!==-1)contentType=contentType.substring(0,index)}else{contentType=''}let used=false
c.contentType=contentType
`;else{S=!0;let f=!!W.body?.isOptional;N+=`if(contentType)switch(contentType.charCodeAt(12)){
case 106:`+H.parser.json(f)+`break
case 120:`+H.parser.urlencoded(f)+`break
case 111:`+H.parser.arrayBuffer(f)+`break
case 114:`+H.parser.formData(f)+`break
default:if(contentType.charCodeAt(0)===116){`+H.parser.text(f)+`}break
}`}let Z=w0("parse",{total:Q.parse?.length});if(Q.parse)for(let f=0;f<Q.parse.length;f++){let T=`bo${f}`;if(f!==0)N+=`
if(!used){`;if(typeof Q.parse[f].fn==="string"){let y=Z.resolveChild(Q.parse[f].fn),n=!!W.body?.isOptional;switch(Q.parse[f].fn){case"json":case"application/json":S=!0,N+=H.parser.json(n);break;case"text":case"text/plain":S=!0,N+=H.parser.text(n);break;case"urlencoded":case"application/x-www-form-urlencoded":S=!0,N+=H.parser.urlencoded(n);break;case"arrayBuffer":case"application/octet-stream":S=!0,N+=H.parser.arrayBuffer(n);break;case"formdata":case"multipart/form-data":S=!0,N+=H.parser.formData(n);break;default:N+=`let ${T}=parser['${Q.parse[f].fn}'](c,contentType)
if(${T} instanceof Promise)${T}=await ${T}
if(${T}!==undefined){c.body=${T};used=true;}
`}y()}else{let y=Z.resolveChild(Q.parse[f].fn.name);N+=`let ${T}=e.parse[${f}]
${T}=${T}(c,contentType)
if(${T} instanceof Promise)${T}=await ${T}
if(${T}!==undefined){c.body=${T};used=true}`,y()}if(f!==0)N+="}";if(S)break}if(Z.resolve(),!S){let f=!!W.body?.isOptional;if(Q.parse?.length)N+=`
if(!used){
if(!contentType) throw new ParseError()
`;N+="switch(contentType){",N+=`case 'application/json':
`+H.parser.json(f)+`break
case 'text/plain':`+H.parser.text(f)+`break
case 'application/x-www-form-urlencoded':`+H.parser.urlencoded(f)+`break
case 'application/octet-stream':`+H.parser.arrayBuffer(f)+`break
case 'multipart/form-data':`+H.parser.formData(f)+`break
`;for(let T of Object.keys($["~parser"]))N+=`case '${T}':let bo${T}=parser['${T}'](c,contentType)
if(bo${T} instanceof Promise)bo${T}=await bo${T}
if(bo${T} instanceof ElysiaCustomStatusResponse)throw result
if(bo${T}!==undefined)c.body=bo${T}
break
`;if(Q.parse?.length)N+="}";N+="}"}if(Q.parse?.length)N+=`
delete c.contentType`}N+="}catch(error){throw new ParseError(error)}"}if(c5.resolve(),Q?.transform){let c=w0("transform",{total:Q.transform.length});if(Q.transform.length)N+=`let transformed
`;for(let I=0;I<Q.transform.length;I++){let z=Q.transform[I],S=c.resolveChild(z.fn.name);if(N+=Z1(z)?`transformed=await e.transform[${I}](c)
`:`transformed=e.transform[${I}](c)
`,z.subType==="mapDerive")N+=`if(transformed instanceof ElysiaCustomStatusResponse)throw transformed
else{transformed.request=c.request
transformed.store=c.store
transformed.qi=c.qi
transformed.path=c.path
transformed.url=c.url
transformed.redirect=c.redirect
transformed.set=c.set
transformed.error=c.error
c=transformed}`;else N+=`if(transformed instanceof ElysiaCustomStatusResponse)throw transformed
else Object.assign(c,transformed)
`;S()}c.resolve()}let c1=[];if(W){if(W.headers){if(W.headers.hasDefault)for(let[c,I]of Object.entries(C0.Default(W.headers.schema,{}))){let z=typeof I==="object"?JSON.stringify(I):typeof I==="string"?`'${I}'`:I;if(z!==void 0)N+=`c.headers['${c}']??=${z}
`}if(N+=L9({name:"c.headers",schema:W.headers,type:"headers",normalize:i}),W.headers.isOptional)N+="if(isNotEmpty(c.headers)){";if(W.body?.schema?.noValidate!==!0)N+="if(validator.headers.Check(c.headers) === false){"+B0.validate("headers")+"}";if(W.headers.hasTransform)N+=`c.headers=validator.headers.Decode(c.headers)
`;if(W.headers.isOptional)N+="}"}if(W.params){if(W.params.hasDefault)for(let[c,I]of Object.entries(C0.Default(W.params.schema,{}))){let z=typeof I==="object"?JSON.stringify(I):typeof I==="string"?`'${I}'`:I;if(z!==void 0)N+=`c.params['${c}']??=${z}
`}if(W.params?.schema?.noValidate!==!0)N+="if(validator.params.Check(c.params)===false){"+B0.validate("params")+"}";if(W.params.hasTransform)N+=`c.params=validator.params.Decode(c.params)
`}if(W.query){if(W.query.hasDefault)for(let[c,I]of Object.entries(C0.Default(W.query.schema,{}))){let z=typeof I==="object"?JSON.stringify(I):typeof I==="string"?`'${I}'`:I;if(z!==void 0)N+=`if(c.query['${c}']===undefined)c.query['${c}']=${z}
`;N+=L9({name:"c.query",schema:W.query,type:"query",normalize:i})}if(W.query.isOptional)N+="if(isNotEmpty(c.query)){";if(W.query?.schema?.noValidate!==!0)N+="if(validator.query.Check(c.query)===false){"+B0.validate("query")+"}";if(W.query.hasTransform)N+=`c.query=validator.query.Decode(Object.assign({},c.query))
`;if(W.query.isOptional)N+="}"}if(D&&W.body){if(W.body.hasTransform||W.body.isOptional)N+=`const isNotEmptyObject=c.body&&(typeof c.body==="object"&&isNotEmpty(c.body))
`;let c=GD(W.body.schema),I=!1;if(W.body.hasDefault){let z=C0.Default(W.body.schema,W.body.schema.type==="object"||W.body.schema[F]==="Import"&&W.body.schema.$defs[W.body.schema.$ref][F]==="Object"?{}:void 0),S=m7(W.body.schema);if(!c&&z&&typeof z==="object"&&(P8("File",S)||P8("Files",S))){I=!0;for(let[f,T]of Object.entries(z))if(T==="File"||T==="Files")delete z[f];if(!u0(z))z=void 0}let Z=typeof z==="object"?JSON.stringify(z):typeof z==="string"?`'${z}'`:z;if(z!==void 0&&z!==null)if(Array.isArray(z))N+=`if(!c.body)c.body=${Z}
`;else if(typeof z==="object")N+=`c.body=Object.assign(${Z},c.body)
`;else N+=`c.body=${Z}
`;if(N+=L9({name:"c.body",schema:W.body,type:"body",normalize:i}),W.body?.schema?.noValidate!==!0)if(W.body.isOptional)N+="if(isNotEmptyObject&&validator.body.Check(c.body)===false){"+B0.validate("body")+"}";else N+="if(validator.body.Check(c.body)===false){"+B0.validate("body")+"}"}else if(N+=L9({name:"c.body",schema:W.body,type:"body",normalize:i}),W.body?.schema?.noValidate!==!0)if(W.body.isOptional)N+="if(isNotEmptyObject&&validator.body.Check(c.body)===false){"+B0.validate("body")+"}";else N+="if(validator.body.Check(c.body)===false){"+B0.validate("body")+"}";if(W.body.hasTransform)N+=`if(isNotEmptyObject)c.body=validator.body.Decode(c.body)
`;if(c&&W.body.schema.anyOf?.length){let z=Object.values(W.body.schema.anyOf);for(let S=0;S<z.length;S++){let Z=z[S];if(P8("File",Z)||P8("Files",Z)){let f=_1(Z,{modules:$.definitions.typebox,dynamic:!$.config.aot,models:$.definitions.type,normalize:$.config.normalize,additionalCoerce:XY(),sanitize:()=>$.config.sanitize});if(f){let T=c1.length===0,y=Object.entries(Z.properties),n=T?`
`:" else ";n+=`if(fileUnions[${c1.length}].Check(c.body)){`;let v0="",T1=0;for(let V1=0;V1<y.length;V1++){let[z5,g2]=y[V1];if(!g2.extension||g2[F]!=="File"&&g2[F]!=="Files")continue;if(T1)v0+=",";v0+=`validateFileExtension(c.body.${z5},${JSON.stringify(g2.extension)},'body.${z5}')`,T1++}if(v0){if(T1===1)n+=`await ${v0}
`;else if(T1>1)n+=`await Promise.all([${v0}])
`;n+="}",N+=n,c1.push(f)}}}}}else if(I||!c&&(P8("File",m7(W.body.schema))||P8("Files",m7(W.body.schema)))){let z="",S=0;for(let[Z,f]of Object.entries(m7(W.body.schema).properties)){if(!f.extension||f[F]!=="File"&&f[F]!=="Files")continue;if(S)z+=",";z+=`validateFileExtension(c.body.${Z},${JSON.stringify(f.extension)},'body.${Z}')`,S++}if(S)N+=`
`;if(S===1)N+=`await ${z}
`;else if(S>1)N+=`await Promise.all([${z}])
`}}if(W.cookie){let c=wU({modules:$.definitions.typebox,validator:W.cookie,defaultConfig:$.config.cookie,dynamic:!!$.config.aot,config:W.cookie?.config??{},models:$.definitions.type});if(N+=`const cookieValue={}
for(const [key,value] of Object.entries(c.cookie))cookieValue[key]=value.value
`,c.hasDefault)for(let[I,z]of Object.entries(C0.Default(c.schema,{})))N+=`cookieValue['${I}'] = ${typeof z==="object"?JSON.stringify(z):z}
`;if(c.isOptional)N+="if(isNotEmpty(c.cookie)){";if(W.body?.schema?.noValidate!==!0)N+="if(validator.cookie.Check(cookieValue)===false){"+B0.validate("cookie","cookieValue")+"}";if(c.hasTransform)N+=`for(const [key,value] of Object.entries(validator.cookie.Decode(cookieValue)))c.cookie[key].value=value
`;if(c.isOptional)N+="}"}}if(Q?.beforeHandle){let c=w0("beforeHandle",{total:Q.beforeHandle.length}),I=!1;for(let z=0;z<Q.beforeHandle.length;z++){let S=Q.beforeHandle[z],Z=c.resolveChild(S.fn.name),f=S9(S);if(S.subType==="resolve"||S.subType==="mapResolve"){if(!I)I=!0,N+=`
let resolved
`;if(N+=Z1(S)?`resolved=await e.beforeHandle[${z}](c);
`:`resolved=e.beforeHandle[${z}](c);
`,S.subType==="mapResolve")N+=`if(resolved instanceof ElysiaCustomStatusResponse)throw resolved
else{resolved.request=c.request
resolved.store=c.store
resolved.qi=c.qi
resolved.path=c.path
resolved.url=c.url
resolved.redirect=c.redirect
resolved.set=c.set
resolved.error=c.error
c=resolved}`;else N+=`if(resolved instanceof ElysiaCustomStatusResponse)throw resolved
else Object.assign(c, resolved)
`}else if(!f)N+=Z1(S)?`await e.beforeHandle[${z}](c)
`:`e.beforeHandle[${z}](c)
`,Z();else{if(N+=Z1(S)?`be=await e.beforeHandle[${z}](c)
`:`be=e.beforeHandle[${z}](c)
`,Z("be"),N+="if(be!==undefined){",c.resolve(),Q.afterHandle?.length){w0("handle",{name:q?J.name:void 0}).resolve();let y=w0("afterHandle",{total:Q.afterHandle.length});for(let n=0;n<Q.afterHandle.length;n++){let v0=Q.afterHandle[n],T1=S9(v0),V1=y.resolveChild(v0.fn.name);if(N+=`c.response = be
`,!T1)N+=Z1(v0.fn)?`await e.afterHandle[${n}](c, be)
`:`e.afterHandle[${n}](c, be)
`;else N+=Z1(v0.fn)?`af=await e.afterHandle[${n}](c)
`:`af=e.afterHandle[${n}](c)
`,N+=`if(af!==undefined) c.response=be=af
`;V1("af")}y.resolve()}if(W.response)N+=B0.response("be");let T=w0("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length){N+=`c.response=be
`;for(let y=0;y<Q.mapResponse.length;y++){let n=Q.mapResponse[y],v0=T.resolveChild(n.fn.name);N+=`if(mr===undefined){mr=${U4(n)?"await ":""}e.mapResponse[${y}](c)
if(mr!==undefined)be=c.response=mr}`,v0()}}T.resolve(),N+=E(),N+=`return mapEarlyResponse(${_0}be,c.set${P1})}
`}}c.resolve()}if(Q.afterHandle?.length){let c=w0("handle",{name:q?J.name:void 0});if(Q.afterHandle.length)N+=N5?`let r=c.response=await ${O}
`:`let r=c.response=${O}
`;else N+=N5?`let r=await ${O}
`:`let r=${O}
`;c.resolve();let I=w0("afterHandle",{total:Q.afterHandle.length});for(let S=0;S<Q.afterHandle.length;S++){let Z=Q.afterHandle[S],f=S9(Z),T=I.resolveChild(Z.fn.name);if(!f)N+=Z1(Z.fn)?`await e.afterHandle[${S}](c)
`:`e.afterHandle[${S}](c)
`,T();else if(N+=Z1(Z.fn)?`af=await e.afterHandle[${S}](c)
`:`af=e.afterHandle[${S}](c)
`,T("af"),W.response)N+="if(af!==undefined){",I.resolve(),N+=B0.response("af"),N+="c.response=af}";else N+="if(af!==undefined){",I.resolve(),N+="c.response=af}"}if(I.resolve(),N+=`r=c.response
`,W.response)N+=B0.response();N+=E();let z=w0("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length)for(let S=0;S<Q.mapResponse.length;S++){let Z=Q.mapResponse[S],f=z.resolveChild(Z.fn.name);N+=`mr=${U4(Z)?"await ":""}e.mapResponse[${S}](c)
if(mr!==undefined)r=c.response=mr
`,f()}z.resolve(),N+=O1()}else{let c=w0("handle",{name:q?J.name:void 0});if(W.response||Q.mapResponse?.length){if(N+=N5?`let r=await ${O}
`:`let r=${O}
`,c.resolve(),W.response)N+=B0.response();w0("afterHandle").resolve();let I=w0("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length){N+=`
c.response=r
`;for(let z=0;z<Q.mapResponse.length;z++){let S=Q.mapResponse[z],Z=I.resolveChild(S.fn.name);N+=`
if(mr===undefined){mr=${U4(S)?"await ":""}e.mapResponse[${z}](c)
if(mr!==undefined)r=c.response=mr}
`,Z()}}if(I.resolve(),N+=E(),J instanceof Response)N+=U.set?`if(isNotEmpty(c.set.headers)||c.set.status!==200||c.set.redirect||c.set.cookie)return mapResponse(${_0}${O}.clone(),c.set${P1})else return ${O}.clone()`:`return ${O}.clone()`,N+=`
`;else N+=O1()}else if(x||w){N+=N5?`let r=await ${O}
`:`let r=${O}
`,c.resolve(),w0("afterHandle").resolve();let I=w0("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length){N+=`c.response= r
`;for(let z=0;z<Q.mapResponse.length;z++){let S=Q.mapResponse[z],Z=I.resolveChild(S.fn.name);N+=`if(mr===undefined){mr=${U4(S)?"await ":""}e.mapResponse[${z}](c)
if(mr!==undefined)r=c.response=mr}`,Z()}}I.resolve(),N+=E()+O1()}else{c.resolve();let I=N5?`await ${O}`:O;if(w0("afterHandle").resolve(),J instanceof Response)N+=U.set?`if(isNotEmpty(c.set.headers)||c.set.status!==200||c.set.redirect||c.set.cookie)return mapResponse(${_0}${O}.clone(),c.set${P1})
else return ${O}.clone()
`:`return ${O}.clone()
`;else N+=O1(I)}}if(N+=`
}catch(error){`,!o1&&Q.error?.length)N+="return(async()=>{";if(N+=`const set=c.set
if(!set.status||set.status<300)set.status=error?.status||500
`,x)N+=E();if(w&&Q.trace)for(let c=0;c<Q.trace.length;c++)N+=`report${c}?.resolve(error);reportChild${c}?.(error)
`;let V5=w0("error",{total:Q.error?.length});if(Q.error?.length){if(N+=`c.error=error
`,L)N+=`if(error instanceof TypeBoxError){c.code="VALIDATION"
c.set.status=422}else{c.code=error.code??error[ERROR_CODE]??"UNKNOWN"}`;else N+=`c.code=error.code??error[ERROR_CODE]??"UNKNOWN"
`;N+=`let er
`;for(let c=0;c<Q.error.length;c++){let I=V5.resolveChild(Q.error[c].fn.name);if(Z1(Q.error[c]))N+=`er=await e.error[${c}](c)
`;else N+=`er=e.error[${c}](c)
if(er instanceof Promise)er=await er
`;I();let z=w0("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length)for(let S=0;S<Q.mapResponse.length;S++){let Z=Q.mapResponse[S],f=z.resolveChild(Z.fn.name);N+=`c.response=er
er=e.mapResponse[${S}](c)
if(er instanceof Promise)er=await er
`,f()}if(z.resolve(),N+=`er=mapEarlyResponse(er,set${P1})
`,N+="if(er){",w&&Q.trace){for(let S=0;S<Q.trace.length;S++)N+=`report${S}.resolve()
`;V5.resolve()}N+="return er}"}}if(V5.resolve(),N+="return handleError(c,error,true)",!o1&&Q.error?.length)N+="})()";if(N+="}",A||w){if(N+="finally{ ",!o1)N+=";(async()=>{";let c=w0("afterResponse",{total:Q.afterResponse?.length});if(A&&Q.afterResponse)for(let I=0;I<Q.afterResponse.length;I++){let z=c.resolveChild(Q.afterResponse[I].fn.name);N+=`
await e.afterResponse[${I}](c)
`,z()}if(c.resolve(),!o1)N+="})()";N+="}"}let z8=H.inject?Object.keys(H.inject).join(",")+",":"",m5="const {handler,handleError,hooks:e, "+U1("validator,",L)+"mapResponse,mapCompactResponse,mapEarlyResponse,isNotEmpty,utils:{"+U1("parseQuery,",D)+U1("parseQueryFromURL,",K)+"},error:{"+U1("ValidationError,",L)+U1("ParseError",D)+"},validateFileExtension,schema,definitions,ERROR_CODE,"+U1("parseCookie,",x)+U1("signCookie,",x)+U1("decodeURIComponent,",K)+"ElysiaCustomStatusResponse,"+U1("ELYSIA_TRACE,",w)+U1("ELYSIA_REQUEST_ID,",w)+U1("parser,",Q.parse?.length)+U1("getServer,",U.server)+U1("fileUnions,",c1.length)+z8+U1("TypeBoxError",L)+`}=hooks
const trace=e.trace
return ${o1?"async ":""}function handle(c){`;if(Q.beforeHandle?.length)m5+=`let be
`;if(Q.afterHandle?.length)m5+=`let af
`;if(Q.mapResponse?.length)m5+=`let mr
`;if(G)m5+=`c.schema=schema
c.defs=definitions
`;N=m5+N+"}",m5="";try{return Function("hooks",`"use strict";
`+N)({handler:J,hooks:bM({...Q}),validator:L?W:void 0,handleError:$.handleError,mapResponse:B.mapResponse,mapCompactResponse:B.mapCompactResponse,mapEarlyResponse:B.mapEarlyResponse,isNotEmpty:u0,utils:{parseQuery:D?p7:void 0,parseQueryFromURL:K?e3:void 0},error:{ValidationError:L?g0:void 0,ParseError:D?YU:void 0},validateFileExtension:QU,schema:$.router.history,definitions:$.definitions.type,ERROR_CODE:s7,parseCookie:x?UU:void 0,signCookie:x?r7:void 0,decodeURIComponent:K?a3.default:void 0,ElysiaCustomStatusResponse:h1,ELYSIA_TRACE:w?B$:void 0,ELYSIA_REQUEST_ID:w?R9:void 0,getServer:()=>$.getServer(),fileUnions:c1.length?c1:void 0,TypeBoxError:L?t:void 0,parser:$["~parser"],...H.inject})}catch(c){let I=bM(Q);console.log("[Composer] failed to generate optimized handler"),console.log("---"),console.log({handler:typeof J==="function"?J.toString():J,instruction:N,hooks:{...I,transform:I?.transform?.map?.((z)=>z.toString()),resolve:I?.resolve?.map?.((z)=>z.toString()),beforeHandle:I?.beforeHandle?.map?.((z)=>z.toString()),afterHandle:I?.afterHandle?.map?.((z)=>z.toString()),mapResponse:I?.mapResponse?.map?.((z)=>z.toString()),parse:I?.parse?.map?.((z)=>z.toString()),error:I?.error?.map?.((z)=>z.toString()),afterResponse:I?.afterResponse?.map?.((z)=>z.toString()),stop:I?.stop?.map?.((z)=>z.toString())},validator:W,definitions:$.definitions.type,error:c}),console.log("---"),process.exit(1)}},AU=($,X)=>{let Y="",Q=HY({trace:$.event.trace,addFn:X??((W)=>{Y+=W})})("request",{total:$.event.request?.length});if($.event.request?.length){Y+="try{";for(let W=0;W<$.event.request.length;W++){let J=$.event.request[W],G=S9(J),U=Z1(J),H=Q.resolveChild($.event.request[W].fn.name);if(G)Y+=`re=mapEarlyResponse(${U?"await ":""}onRequest[${W}](c),c.set)
`,H("re"),Y+=`if(re!==undefined)return re
`;else Y+=`${U?"await ":""}onRequest[${W}](c)
`,H()}Y+="}catch(error){return app.handleError(c,error,false)}"}return Q.resolve(),Y},ZU=($,X="map")=>{let Y=$.extender.higherOrderFunctions;if(!Y.length)return"return "+X;let Q=$["~adapter"].composeGeneralHandler,W=X;for(let J=0;J<Y.length;J++)W=`hoc[${J}](${W},${Q.parameters})`;return`return function hocMap(${Q.parameters}){return ${W}(${Q.parameters})}`},pX=($)=>{let X=$["~adapter"].composeGeneralHandler;$.router.http.build();let Y=X.error404(!!$.event.request?.length,!!$.event.error?.length),Q=$.event.trace?.length,W="",J=$.router,G=J.http.root.WS?`const route=router.find(r.method === "GET" && r.headers.get('upgrade')==='websocket'?'WS':r.method,p)`:"const route=router.find(r.method,p)";G+=J.http.root.ALL?`??router.find("ALL",p)
`:`
`,G+=Y.code,G+=`
c.params=route.params
if(route.store.handler)return route.store.handler(c)
return route.store.compile()(c)
`;let U="";for(let[O,A]of Object.entries(J.static)){if(U+=`case'${O}':`,$.config.strictPath!==!0)U+=`case'${A9(O)}':`;let w=Z9(O);if(O!==w)U+=`case'${w}':`;if(U+="switch(r.method){","GET"in A||"WS"in A){if(U+="case 'GET':","WS"in A)U+=`if(r.headers.get('upgrade')==='websocket')return ht[${A.WS}].composed(c)
`;if("GET"in A)U+=`return ht[${A.GET}].composed(c)
`}for(let[N,L]of Object.entries(A)){if(N==="ALL"||N==="GET"||N==="WS")continue;U+=`case '${N}':return ht[${L}].composed(c)
`}if("ALL"in A)U+=`default:return ht[${A.ALL}].composed(c)
`;else U+=`default:break map
`;U+="}"}let H=!!$.event.request?.some(Z1),B=X.inject?Object.keys(X.inject).join(",")+",":"";if(W+=`
const {app,mapEarlyResponse,NotFoundError,randomId,handleError,status,redirect,`+U1("ELYSIA_TRACE,",Q)+U1("ELYSIA_REQUEST_ID,",Q)+B+`}=data
const store=app.singleton.store
const decorator=app.singleton.decorator
const staticRouter=app.router.static.http
const ht=app.router.history
const router=app.router.http
const trace=app.event.trace?.map(x=>typeof x==='function'?x:x.fn)??[]
const notFound=new NotFoundError()
const hoc=app.extender.higherOrderFunctions.map(x=>x.fn)
`,$.event.request?.length)W+=`const onRequest=app.event.request.map(x=>x.fn)
`;if(W+=Y.declare,$.event.trace?.length)W+="const "+$.event.trace.map((O,A)=>`tr${A}=app.event.trace[${A}].fn`).join(",")+`
`;if(W+=`${H?"async ":""}function map(${X.parameters}){`,$.event.request?.length)W+=`let re
`;if(W+=X.createContext($),$.event.trace?.length)W+="c[ELYSIA_TRACE]=["+$.event.trace.map((O,A)=>`tr${A}(c)`).join(",")+`]
`;if(W+=AU($),U)W+=`
map: switch(p){
`+U+"}";W+=G+`}
`+ZU($),$.handleError=LU($);let q=Function("data",`"use strict";
`+W)({app:$,mapEarlyResponse:$["~adapter"].handler.mapEarlyResponse,NotFoundError:GY,randomId:M$,handleError:$.handleError,status:t7,redirect:JY,ELYSIA_TRACE:Q?B$:void 0,ELYSIA_REQUEST_ID:Q?R9:void 0,...X.inject});if(B4)Bun.gc(!1);return q},LU=($)=>{let X=$.event,Y="",Q=$["~adapter"].composeError,W=Q.inject?Object.keys(Q.inject).join(",")+",":"",J=!!$.event.trace?.length;if(Y+="const {mapResponse,ERROR_CODE,ElysiaCustomStatusResponse,"+U1("onError,",$.event.error)+U1("afterResponse,",$.event.afterResponse)+U1("trace,",$.event.trace)+U1("onMapResponse,",$.event.mapResponse)+U1("ELYSIA_TRACE,",J)+U1("ELYSIA_REQUEST_ID,",J)+W+`}=inject
`,Y+=`return ${$.event.error?.find(Z1)||$.event.mapResponse?.find(Z1)?"async ":""}function(context,error,skipGlobal){`,Y+="",J)Y+=`const id=context[ELYSIA_REQUEST_ID]
`;let G=HY({context:"context",trace:X.trace,addFn:(q)=>{Y+=q}});if(Y+=`const set=context.set
let _r
if(!context.code)context.code=error.code??error[ERROR_CODE]
if(!(context.error instanceof Error))context.error=error
if(error instanceof ElysiaCustomStatusResponse){set.status=error.status=error.code
error.message=error.response}`,Q.declare)Y+=Q.declare;let U=J||!!X.afterResponse?.length||!!X.afterResponse?.length?"context.response = ":"";if($.event.error)for(let q=0;q<$.event.error.length;q++){let O=$.event.error[q],A=`${Z1(O)?"await ":""}onError[${q}](context)
`;if(Y+="if(skipGlobal!==true){",S9(O)){Y+=`_r=${A}
if(_r!==undefined){if(_r instanceof Response)return mapResponse(_r,set${Q.mapResponseContext})
if(_r instanceof ElysiaCustomStatusResponse){error.status=error.code
error.message = error.response}if(set.status===200||!set.status)set.status=error.status
`;let w=G("mapResponse",{total:X.mapResponse?.length,name:"context"});if(X.mapResponse?.length)for(let N=0;N<X.mapResponse.length;N++){let L=X.mapResponse[N],K=w.resolveChild(L.fn.name);Y+=`context.response=_r_r=${U4(L)?"await ":""}onMapResponse[${N}](context)
`,K()}w.resolve(),Y+=`return mapResponse(${U}_r,set${Q.mapResponseContext})}`}else Y+=A;Y+="}"}Y+=`if(error.constructor.name==="ValidationError"||error.constructor.name==="TransformDecodeError"){
if(error.error)error=error.error
set.status=error.status??422
`+Q.validationError+`
}
`,Y+=`if(error instanceof Error){
if(typeof error.toResponse==='function')return context.response=error.toResponse()
`+Q.unknownError+`
}`;let H=G("mapResponse",{total:X.mapResponse?.length,name:"context"});if(Y+=`
if(!context.response)context.response=error.message??error
`,X.mapResponse?.length){Y+=`let mr
`;for(let q=0;q<X.mapResponse.length;q++){let O=X.mapResponse[q],A=H.resolveChild(O.fn.name);Y+=`if(mr===undefined){mr=${U4(O)?"await ":""}onMapResponse[${q}](context)
if(mr!==undefined)error=context.response=mr}`,A()}}H.resolve(),Y+=`
return mapResponse(${U}error,set${Q.mapResponseContext})}`;let B=(q)=>typeof q==="function"?q:q.fn;return Function("inject",`"use strict";
`+Y)({mapResponse:$["~adapter"].handler.mapResponse,ERROR_CODE:s7,ElysiaCustomStatusResponse:h1,onError:$.event.error?.map(B),afterResponse:$.event.afterResponse?.map(B),trace:$.event.trace?.map(B),onMapResponse:$.event.mapResponse?.map(B),ELYSIA_TRACE:J?B$:void 0,ELYSIA_REQUEST_ID:J?R9:void 0,...Q.inject})},i1=($,X,Y)=>{if(u0(X.headers)||X.status!==200||X.cookie)switch(H$(X),$?.constructor?.name){case"String":return new Response($,X);case"Array":case"Object":return X.headers["content-type"]="application/json",new Response(JSON.stringify($),X);case"ElysiaFile":return r0($.value);case"File":return r0($,X);case"Blob":return r0($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,i1($.response,X,Y);case"ReadableStream":if(!X.headers["content-type"]?.startsWith("text/event-stream"))X.headers["content-type"]="text/event-stream; charset=utf-8";return Y?.signal?.addEventListener("abort",{handleEvent(){if(Y?.signal&&!Y?.signal?.aborted)$.cancel()}},{once:!0}),new Response($,X);case void 0:if(!$)return new Response("",X);return new Response(JSON.stringify($),X);case"Response":return W$($,X,Y);case"Error":return C8($,X);case"Promise":return $.then((Q)=>i1(Q,X,Y));case"Function":return i1($(),X,Y);case"Number":case"Boolean":return new Response($.toString(),X);case"Cookie":if($ instanceof G8)return new Response($.value,X);return new Response($?.toString(),X);case"FormData":return new Response($,X);default:if($ instanceof Response)return W$($,X,Y);if($ instanceof Promise)return $.then((Q)=>i1(Q,X));if($ instanceof Error)return C8($,X);if($ instanceof h1)return X.status=$.code,i1($.response,X,Y);if(typeof $?.next==="function")return b8($,X,Y);if(typeof $?.then==="function")return $.then((Q)=>i1(Q,X));if(typeof $?.toResponse==="function")return i1($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($,X)}if($ instanceof Response&&!$.headers.has("content-length")&&$.headers.get("transfer-encoding")==="chunked")return b8(T8($),I8($,X),Y);if(typeof $?.next==="function"||$ instanceof ReadableStream)return b8($,X,Y);return J8($,Y)},p1=($,X,Y)=>{if($===void 0||$===null)return;if(u0(X.headers)||X.status!==200||X.cookie)switch(H$(X),$?.constructor?.name){case"String":return new Response($,X);case"Array":case"Object":return X.headers["content-type"]="application/json",new Response(JSON.stringify($),X);case"ElysiaFile":return r0($.value);case"File":return r0($,X);case"Blob":return r0($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,p1($.response,X,Y);case"ReadableStream":if(!X.headers["content-type"]?.startsWith("text/event-stream"))X.headers["content-type"]="text/event-stream; charset=utf-8";return Y?.signal?.addEventListener("abort",{handleEvent(){if(Y?.signal&&!Y?.signal?.aborted)$.cancel()}},{once:!0}),new Response($,X);case void 0:if(!$)return;return new Response(JSON.stringify($),X);case"Response":return W$($,X,Y);case"Promise":return $.then((Q)=>p1(Q,X));case"Error":return C8($,X);case"Function":return p1($(),X);case"Number":case"Boolean":return new Response($.toString(),X);case"FormData":return new Response($);case"Cookie":if($ instanceof G8)return new Response($.value,X);return new Response($?.toString(),X);default:if($ instanceof Response)return W$($,X,Y);if($ instanceof Promise)return $.then((Q)=>p1(Q,X));if($ instanceof Error)return C8($,X);if($ instanceof h1)return X.status=$.code,p1($.response,X,Y);if(typeof $?.next==="function")return b8($,X,Y);if(typeof $?.then==="function")return $.then((Q)=>p1(Q,X));if(typeof $?.toResponse==="function")return p1($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($,X)}else switch($?.constructor?.name){case"String":return new Response($);case"Array":case"Object":return X.headers["content-type"]="application/json",new Response(JSON.stringify($),X);case"ElysiaFile":return r0($.value);case"File":return r0($,X);case"Blob":return r0($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,p1($.response,X,Y);case"ReadableStream":return Y?.signal?.addEventListener("abort",{handleEvent(){if(Y?.signal&&!Y?.signal?.aborted)$.cancel()}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":if(!$.headers.has("content-length")&&$.headers.get("transfer-encoding")==="chunked")return b8(T8($),I8($),Y);return $;case"Promise":return $.then((Q)=>{let W=p1(Q,X);if(W!==void 0)return W});case"Error":return C8($,X);case"Function":return J8($(),Y);case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof G8)return new Response($.value,X);return new Response($?.toString(),X);case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Q)=>p1(Q,X));if($ instanceof Error)return C8($,X);if($ instanceof h1)return X.status=$.code,p1($.response,X,Y);if(typeof $?.next==="function")return b8($,X,Y);if(typeof $?.then==="function")return $.then((Q)=>p1(Q,X));if(typeof $?.toResponse==="function")return p1($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($)}},J8=($,X)=>{switch($?.constructor?.name){case"String":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});case"ElysiaFile":return r0($.value);case"File":return r0($);case"Blob":return r0($);case"ElysiaCustomStatusResponse":return i1($.response,{status:$.code,headers:{}});case"ReadableStream":return X?.signal?.addEventListener("abort",{handleEvent(){if(X?.signal&&!X?.signal?.aborted)$.cancel()}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":if($.headers.get("transfer-encoding")==="chunked")return b8(T8($),I8($),X);return $;case"Error":return C8($);case"Promise":return $.then((Y)=>J8(Y,X));case"Function":return J8($(),X);case"Number":case"Boolean":return new Response($.toString());case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Y)=>J8(Y,X));if($ instanceof Error)return C8($);if($ instanceof h1)return i1($.response,{status:$.code,headers:{}});if(typeof $?.next==="function")return b8($,void 0,X);if(typeof $?.then==="function")return $.then((Y)=>i1(Y,set));if(typeof $?.toResponse==="function")return J8($.toResponse());if("charCodeAt"in $){let Y=$.charCodeAt(0);if(Y===123||Y===91)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}})}return new Response($)}},C8=($,X)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:X?.status!==200?X?.status??500:500,headers:X?.headers}),zD=($,X,Y={})=>{if(typeof $==="function")return;let Q=i1($,{headers:Y});if(!X.parse?.length&&!X.transform?.length&&!X.beforeHandle?.length&&!X.afterHandle?.length)return Q.clone.bind(Q)},W$=qU({mapResponse:i1,mapCompactResponse:J8}),b8=UY({mapResponse:i1,mapCompactResponse:J8}),Q8=($,X)=>X?$:"",mM=($,X,Y,Q=!1)=>{let W="",J=$.setHeaders,G=!!$.event.trace?.length;if(G)W+=`const id=randomId()
`;let U=/[:*]/.test(X.path),H=`const u=request.url,s=u.indexOf('/',${$.config.handler?.standardHostname??!0?11:7}),qi=u.indexOf('?', s + 1)
`;if(Y.query)W+=H;let B=!Y.path?"":!U?`path:'${X.path}',`:"get path(){"+(Y.query?"":H)+`if(qi===-1)return u.substring(s)
return u.substring(s,qi)
},`;if(W+=Q8("const c=",!Q)+"{request,store,"+Q8("qi,",Y.query)+Q8("params:request.params,",U)+B+Q8("url:request.url,",G||Y.url||Y.query)+"redirect,error:status,status,set:{headers:"+(u0(J)?"Object.assign({},app.setHeaders)":"Object.create(null)")+",status:200}",Y.server)W+=",get server(){return app.getServer()}";if(G)W+=",[ELYSIA_REQUEST_ID]:id";{let q="";for(let O of Object.keys($.singleton.decorator))q+=`,'${O}':decorator['${O}']`;W+=q}return W+=`}
`,W},iX=($,X)=>{let Y=!!$.event.trace?.length,Q=!!$.extender.higherOrderFunctions.length,W=_9(X.hooks,$.inference);W=_9({handler:X.handler},W);let J="const handler=data.handler,app=data.app,store=data.store,decorator=data.decorator,redirect=data.redirect,route=data.route,mapEarlyResponse=data.mapEarlyResponse,"+Q8("randomId=data.randomId,",Y)+Q8("ELYSIA_REQUEST_ID=data.ELYSIA_REQUEST_ID,",Y)+Q8("ELYSIA_TRACE=data.ELYSIA_TRACE,",Y)+Q8("trace=data.trace,",Y)+Q8("hoc=data.hoc,",Q)+`status=data.status
`;if($.event.request?.length)J+=`const onRequest=app.event.request.map(x=>x.fn)
`;if(J+=`${$.event.request?.find(Z1)?"async":""} function map(request){`,Y||W.query||$.event.request?.length)J+=mM($,X,W),J+=AU($),J+="return handler(c)}";else J+=`return handler(${mM($,X,W,!0)})}`;return J+=ZU($),Function("data",J)({app:$,handler:X.compile?.()??X.composed,redirect:JY,status:t7,hoc:$.extender.higherOrderFunctions.map((G)=>G.fn),store:$.store,decorator:$.decorator,route:X.path,randomId:Y?M$:void 0,ELYSIA_TRACE:Y?B$:void 0,ELYSIA_REQUEST_ID:Y?R9:void 0,trace:Y?$.event.trace?.map((G)=>G?.fn??G):void 0,mapEarlyResponse:p1})},OD=($,X,Y={})=>{if(typeof $==="function"||$ instanceof Blob)return;if(typeof $==="object"&&$?.toString()==="[object HTMLBundle]")return()=>$;let Q=i1($,{headers:Y});if(!X.parse?.length&&!X.transform?.length&&!X.beforeHandle?.length&&!X.afterHandle?.length){if(Q instanceof Promise)return Q.then((W)=>{if(!W)return;if(!W.headers.has("content-type"))W.headers.append("content-type","text/plain");return W.clone()});if(!Q.headers.has("content-type"))Q.headers.append("content-type","text/plain");return Q.clone.bind(Q)}},uM={open($){$.data.open?.($)},message($,X){$.data.message?.($,X)},drain($){$.data.drain?.($)},close($,X,Y){$.data.close?.($,X,Y)}};class j9{raw;data;body;validator;["~types"];get id(){return this.data.id}constructor($,X,Y=void 0){this.raw=$,this.data=X,this.body=Y,this.validator=$.data?.validator,this.sendText=$.sendText.bind($),this.sendBinary=$.sendBinary.bind($),this.close=$.close.bind($),this.terminate=$.terminate.bind($),this.publishText=$.publishText.bind($),this.publishBinary=$.publishBinary.bind($),this.subscribe=$.subscribe.bind($),this.unsubscribe=$.unsubscribe.bind($),this.isSubscribed=$.isSubscribed.bind($),this.cork=$.cork.bind($),this.remoteAddress=$.remoteAddress,this.binaryType=$.binaryType,this.data=$.data,this.send=this.send.bind(this),this.ping=this.ping.bind(this),this.pong=this.pong.bind(this),this.publish=this.publish.bind(this)}send($,X){if(Buffer.isBuffer($))return this.raw.send($,X);if(this.validator?.Check($)===!1)return this.raw.send(new g0("message",this.validator,$).message);if(typeof $==="object")$=JSON.stringify($);return this.raw.send($,X)}ping($){if(Buffer.isBuffer($))return this.raw.ping($);if(this.validator?.Check($)===!1)return this.raw.send(new g0("message",this.validator,$).message);if(typeof $==="object")$=JSON.stringify($);return this.raw.ping($)}pong($){if(Buffer.isBuffer($))return this.raw.pong($);if(this.validator?.Check($)===!1)return this.raw.send(new g0("message",this.validator,$).message);if(typeof $==="object")$=JSON.stringify($);return this.raw.pong($)}publish($,X,Y){if(Buffer.isBuffer(X))return this.raw.publish($,X,Y);if(this.validator?.Check(X)===!1)return this.raw.send(new g0("message",this.validator,X).message);if(typeof X==="object")X=JSON.stringify(X);return this.raw.publish($,X,Y)}sendText;sendBinary;close;terminate;publishText;publishBinary;subscribe;unsubscribe;isSubscribed;cork;remoteAddress;binaryType;get readyState(){return this.raw.readyState}}var wD=($)=>{let X=typeof $==="function"?[$]:$;return async function Y(Q,W){if(typeof W==="string"){let J=W?.charCodeAt(0);if(J===34||J===47||J===91||J===123)try{W=JSON.parse(W)}catch{}else if(WY(W))W=+W;else if(W==="true")W=!0;else if(W==="false")W=!1;else if(W==="null")W=null}if(X)for(let J=0;J<X.length;J++){let G=X[J](Q,W);if(G instanceof Promise)G=await G;if(G!==void 0)return G}return W}},AD=($)=>{let X=(Y,Q)=>{if(Q instanceof Promise)return Q.then((G)=>X(Y,G));if(Buffer.isBuffer(Q))return Y.send(Q.toString());if(Q===void 0)return;let W=(G)=>{if($?.Check(G)===!1)return Y.send(new g0("message",$,G).message);if(typeof G==="object")return Y.send(JSON.stringify(G));Y.send(G)};if(typeof Q?.next!=="function")return void W(Q);let J=Q.next();if(J instanceof Promise)return(async()=>{let G=await J;if($?.Check(G)===!1)return Y.send(new g0("message",$,G).message);if(W(G.value),!G.done)for await(let U of Q)W(U)})();if(W(J.value),!J.done)for(let G of Q)W(G)};return X},ZD=/:.+?\?(?=\/|$)/,jU=($)=>{let X=ZD.exec($);if(!X)return[$];let Y=[],Q=$.slice(0,X.index),W=X[0].slice(0,-1),J=$.slice(X.index+X[0].length);Y.push(Q.slice(0,-1)),Y.push(Q+W);for(let G of jU(J)){if(!G)continue;if(!G.startsWith("/:"))Y.push(Q.slice(0,-1)+G);Y.push(Q+W+G)}return Y},KU={GET:!0,HEAD:!0,OPTIONS:!0,DELETE:!0,PATCH:!0,POST:!0,PUT:!0},nX=($)=>{if(!$.config.aot||!$.config.systemRouter)return;let X={},Y=(W,J)=>{if(X[W.path]){if(!X[W.path][W.method])X[W.path][W.method]=J}else X[W.path]={[W.method]:J}},Q=$.routeTree;for(let W of $.router.history){if(typeof W.handler!=="function")continue;let J=W.method;if(J==="GET"&&`WS_${W.path}`in Q||J==="WS"||W.path.charCodeAt(W.path.length-1)===42||!(J in KU))continue;if(J==="ALL"){if(!(`WS_${W.path}`in Q))X[W.path]=W.hooks?.config?.mount?W.hooks.trace||$.event.trace||$.extender.higherOrderFunctions?iX($,W):W.hooks.mount||W.handler:W.handler;continue}let G,U=$.config.precompile?iX($,W):(H)=>{if(G)return G(H);return(G=iX($,W))(H)};for(let H of jU(W.path))Y({method:J,path:H},U)}return X},G4=($,X)=>{if(!X)return $;for(let Y of Object.keys(X)){if($[Y]===X[Y])continue;if(!$[Y]){$[Y]=X[Y];continue}if($[Y]&&X[Y]){if(typeof $[Y]==="function"||$[Y]instanceof Response){$[Y]=X[Y];continue}$[Y]={...$[Y],...X[Y]}}}return $},LD={...eX,name:"bun",handler:{mapResponse:i1,mapEarlyResponse:p1,mapCompactResponse:J8,createStaticHandler:zD,createNativeStaticHandler:OD},composeHandler:{...eX.composeHandler,headers:o7?`c.headers=c.request.headers.toJSON()
`:`c.headers={}
for(const [k,v] of c.request.headers.entries())c.headers[k]=v
`},listen($){return(X,Y)=>{if(typeof Bun==="undefined")throw new Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");if($.compile(),typeof X==="string"){if(!WY(X))throw new Error("Port must be a numeric value");X=parseInt(X)}let Q=(J,{withAsync:G=!1}={})=>{let U={},H=[];for(let[B,q]of Object.entries(J))if(XU){if(!q)continue;for(let[O,A]of Object.entries(q)){if(!A||!(O in KU))continue;if(A instanceof Promise){if(G){if(!U[B])U[B]={};H.push(A.then((w)=>{if(w instanceof Response)U[B][O]=w}))}continue}if(!(A instanceof Response))continue;if(!U[B])U[B]={};U[B][O]=A}}else{if(!q)continue;if(q instanceof Promise){if(G){if(!U[B])U[B]={};H.push(q.then((O)=>{if(O instanceof Response)U[B]=O}))}continue}if(!(q instanceof Response))continue;U[B]=q}if(G)return Promise.all(H).then(()=>U);return U},W=typeof X==="object"?{development:!D9,reusePort:!0,...$.config.serve||{},...X||{},routes:G4(G4(Q($.router.response),nX($)),$.config.serve?.routes),websocket:{...$.config.websocket||{},...uM||{}},fetch:$.fetch}:{development:!D9,reusePort:!0,...$.config.serve||{},routes:G4(G4(Q($.router.response),nX($)),$.config.serve?.routes),websocket:{...$.config.websocket||{},...uM||{}},port:X,fetch:$.fetch};if($.server=Bun.serve(W),$.event.start)for(let J=0;J<$.event.start.length;J++)$.event.start[J].fn($);if(Y)Y($.server);process.on("beforeExit",()=>{if($.server){if($.server.stop?.(),$.server=null,$.event.stop)for(let J=0;J<$.event.stop.length;J++)$.event.stop[J].fn($)}}),$.promisedModules.then(async()=>{$.server?.reload({...W,fetch:$.fetch,routes:G4(G4(await Q($.router.response,{withAsync:!0}),nX($)),$.config.serve?.routes)}),Bun?.gc(!1)})}},ws($,X,Y){let{parse:Q,body:W,response:J,...G}=Y,U=_1(W,{modules:$.definitions.typebox,models:$.definitions.type,normalize:$.config.normalize}),H=_1(J,{modules:$.definitions.typebox,models:$.definitions.type,normalize:$.config.normalize});$.route("WS",X,async(B)=>{let q=$.getServer(),{set:O,path:A,qi:w,headers:N,query:L,params:K}=B;if(B.validator=H,Y.upgrade){if(typeof Y.upgrade==="function"){let x=Y.upgrade(B);if(x instanceof Promise)await x}else if(Y.upgrade)Object.assign(O.headers,Y.upgrade)}if(O.cookie&&u0(O.cookie)){let x=HU(O.cookie);if(x)O.headers["set-cookie"]=x}if(O.headers["set-cookie"]&&Array.isArray(O.headers["set-cookie"]))O.headers=BU(new Headers(O.headers),O.headers["set-cookie"]);let h=AD(H),D=wD(Q),b,l=[...Array.isArray(Y.error)?Y.error:[Y.error],...($.event.error??[]).map((x)=>typeof x==="function"?x:x.fn)].filter((x)=>x),s=!l.length?()=>{}:async(x,g)=>{for(let v of l){let E=v(Object.assign(B,{error:g}));if(E instanceof Promise)E=await E;if(await h(x,E),E)break}};if(q?.upgrade(B.request,{headers:u0(O.headers)?O.headers:void 0,data:{...B,get id(){if(b)return b;return b=M$()},validator:H,ping(x){Y.ping?.(x)},pong(x){Y.pong?.(x)},open(x){try{h(x,Y.open?.(new j9(x,B)))}catch(g){s(x,g)}},message:async(x,g)=>{let v=await D(x,g);if(U?.Check(v)===!1)return void x.send(new g0("message",U,v).message);try{h(x,Y.message?.(new j9(x,B,v),v))}catch(E){s(x,E)}},drain(x){try{h(x,Y.drain?.(new j9(x,B)))}catch(g){s(x,g)}},close(x,g,v){try{h(x,Y.close?.(new j9(x,B),g,v))}catch(E){s(x,E)}}}}))return;return O.status=400,"Expected a websocket connection"},{...G,websocket:Y})}},lM=B4?Bun.env:typeof process!=="undefined"&&process?.env?process.env:{},oX=($,X)=>{for(let[Y,Q]of Object.entries($.schema.properties))X[Y]??=Q.default},pM=($)=>{let{mapResponse:X,mapEarlyResponse:Y}=$["~adapter"].handler;return async(Q)=>{let W=Q.url,J=W.indexOf("/",11),G=W.indexOf("?",J+1),U=G===-1?W.substring(J):W.substring(J,G),H={cookie:{},status:200,headers:{}},B=Object.assign({},$.singleton.decorator,{set:H,store:$.singleton.store,request:Q,path:U,qi:G,error:t7,status:t7,redirect:JY});try{if($.event.request)for(let g=0;g<$.event.request.length;g++){let v=$.event.request[g].fn,E=v(B);if(E instanceof Promise)E=await E;if(E=Y(E,H),E)return B.response=E}let q=$.router.dynamic.find(Q.method,U)??$.router.dynamic.find("ALL",U);if(!q)throw new GY;let{handle:O,hooks:A,validator:w,content:N,route:L}=q.store,K;if(Q.method!=="GET"&&Q.method!=="HEAD")if(N)switch(N){case"application/json":K=await Q.json();break;case"text/plain":K=await Q.text();break;case"application/x-www-form-urlencoded":K=p7(await Q.text());break;case"application/octet-stream":K=await Q.arrayBuffer();break;case"multipart/form-data":K={};let g=await Q.formData();for(let v of g.keys()){if(K[v])continue;let E=g.getAll(v);if(E.length===1)K[v]=E[0];else K[v]=E}break}else{let g=Q.headers.get("content-type");if(g){let v=g.indexOf(";");if(v!==-1)g=g.slice(0,v);if(B.contentType=g,A.parse)for(let E=0;E<A.parse.length;E++){let i=A.parse[E].fn,Y0=i(B,g);if(Y0 instanceof Promise)Y0=await Y0;if(Y0){K=Y0;break}}if(delete B.contentType,K===void 0)switch(g){case"application/json":K=await Q.json();break;case"text/plain":K=await Q.text();break;case"application/x-www-form-urlencoded":K=p7(await Q.text());break;case"application/octet-stream":K=await Q.arrayBuffer();break;case"multipart/form-data":K={};let E=await Q.formData();for(let i of E.keys()){if(K[i])continue;let Y0=E.getAll(i);if(Y0.length===1)K[i]=Y0[0];else K[i]=Y0}break}}}B.route=L,B.body=K,B.params=q?.params||void 0,B.query=G===-1?{}:p7(W.substring(G+1)),B.headers={};for(let[g,v]of Q.headers.entries())B.headers[g]=v;let h=Object.assign({},$.config?.cookie,w?.cookie?.config),D=Q.headers.get("cookie");B.cookie=await UU(B.set,D,h?{secrets:h.secrets!==void 0?typeof h.secrets==="string"?h.secrets:h.secrets.join(","):void 0,sign:h.sign===!0?!0:h.sign!==void 0?typeof h.sign==="string"?h.sign:h.sign.join(","):void 0}:void 0);let b=w?.createHeaders?.();if(b)oX(b,B.headers);let l=w?.createParams?.();if(l)oX(l,B.params);let s=w?.createQuery?.();if(s)oX(s,B.query);if(A.transform)for(let g=0;g<A.transform.length;g++){let v=A.transform[g],E=v.fn(B);if(E instanceof Promise)E=await E;if(E instanceof h1){let i=Y(E,B.set);if(i)return B.response=i}if(v.subType==="derive")Object.assign(B,E)}if(w){if(b){let g=structuredClone(B.headers);for(let[v,E]of Q.headers)g[v]=E;if(w.headers.Check(g)===!1)throw new g0("header",w.headers,g)}else if(w.headers?.Decode)B.headers=w.headers.Decode(B.headers);if(l?.Check(B.params)===!1)throw new g0("params",w.params,B.params);else if(w.params?.Decode)B.params=w.params.Decode(B.params);if(s?.Check(B.query)===!1)throw new g0("query",w.query,B.query);else if(w.query?.Decode)B.query=w.query.Decode(B.query);if(w.createCookie?.()){let g={};for(let[v,E]of Object.entries(B.cookie))g[v]=E.value;if(w.cookie.Check(g)===!1)throw new g0("cookie",w.cookie,g);else if(w.cookie?.Decode)g=w.cookie.Decode(g)}if(w.createBody?.()?.Check(K)===!1)throw new g0("body",w.body,K);else if(w.body?.Decode)B.body=w.body.Decode(K)}if(A.beforeHandle)for(let g=0;g<A.beforeHandle.length;g++){let v=A.beforeHandle[g],E=v.fn(B);if(E instanceof Promise)E=await E;if(E instanceof h1){let i=Y(E,B.set);if(i)return B.response=i}if(v.subType==="resolve"){Object.assign(B,E);continue}if(E!==void 0){if(B.response=E,A.afterHandle)for(let Y0=0;Y0<A.afterHandle.length;Y0++){let B0=A.afterHandle[Y0].fn(B);if(B0 instanceof Promise)B0=await B0;if(B0)E=B0}let i=Y(E,B.set);if(i)return B.response=i}}let x=typeof O==="function"?O(B):O;if(x instanceof Promise)x=await x;if(A.afterHandle)if(!A.afterHandle.length){let g=x instanceof h1?x.code:H.status?typeof H.status==="string"?G$[H.status]:H.status:200,v=w?.createResponse?.()?.[g];if(v?.Check(x)===!1)throw new g0("response",v,x);else if(v?.Decode)x=v.Decode(x)}else{B.response=x;for(let g=0;g<A.afterHandle.length;g++){let v=A.afterHandle[g].fn(B);if(v instanceof Promise)v=await v;let E=Y(v,B.set);if(E!==void 0){let i=w?.response?.[E.status];if(i?.Check(E)===!1)throw new g0("response",i,E);else if(i?.Decode)x=i.Decode(x);return B.response=E}}}if(B.set.cookie&&h?.sign){let g=!h.secrets?void 0:typeof h.secrets==="string"?h.secrets:h.secrets[0];if(h.sign===!0)for(let[v,E]of Object.entries(B.set.cookie))B.set.cookie[v].value=await r7(E.value,"${secret}");else{let v=w?.cookie?.schema?.properties;for(let E of h.sign){if(!(E in v))continue;if(B.set.cookie[E]?.value)B.set.cookie[E].value=await r7(B.set.cookie[E].value,g)}}}return X(B.response=x,B.set)}catch(q){let O=q instanceof D7&&q.error?q.error:q;return $.handleError(B,O)}finally{if($.event.afterResponse)for(let q of $.event.afterResponse)await q.fn(B)}}},jD=($)=>{let{mapResponse:X}=$["~adapter"].handler;return async(Y,Q)=>{let W=Object.assign(Y,{error:Q,code:Q.code});if(W.set=Y.set,$.event.error)for(let J=0;J<$.event.error.length;J++){let G=$.event.error[J].fn(W);if(G instanceof Promise)G=await G;if(G!==void 0&&G!==null)return Y.response=X(G,Y.set)}return new Response(typeof Q.cause==="string"?Q.cause:Q.message,{headers:Y.set.headers,status:Q.status??500})}};class o{config;server=null;dependencies={};"~Prefix"="";"~Singleton"=null;"~Definitions"=null;"~Metadata"=null;"~Ephemeral"=null;"~Volatile"=null;"~Routes"=null;singleton={decorator:{},store:{},derive:{},resolve:{}};get store(){return this.singleton.store}get decorator(){return this.singleton.decorator}definitions={typebox:M.Module({}),type:{},error:{}};extender={macros:[],higherOrderFunctions:[]};validator={global:null,scoped:null,local:null,getCandidate(){if(!this.global&&!this.scoped&&!this.local)return{body:void 0,headers:void 0,params:void 0,query:void 0,cookie:void 0,response:void 0};return O9(O9(this.global,this.scoped),this.local)}};standaloneValidator={global:null,scoped:null,local:null};event={};telemetry;router={"~http":void 0,get http(){if(!this["~http"])this["~http"]=new H4({lazy:!0});return this["~http"]},"~dynamic":void 0,get dynamic(){if(!this["~dynamic"])this["~dynamic"]=new H4;return this["~dynamic"]},static:{},response:{},history:[]};routeTree={};get routes(){return this.router.history}getGlobalRoutes(){return this.router.history}getGlobalDefinitions(){return this.definitions}inference={body:!1,cookie:!1,headers:!1,query:!1,set:!1,server:!1,path:!1,route:!1,url:!1};getServer(){return this.server}getParent(){return null}"~parser"={};_promisedModules;get promisedModules(){if(!this._promisedModules)this._promisedModules=new $U(console.error,()=>{});return this._promisedModules}constructor($={}){if($.tags)if(!$.detail)$.detail={tags:$.tags};else $.detail.tags=$.tags;if(this.config={prefix:"",aot:lM.ELYSIA_AOT!=="false",nativeStaticResponse:!0,systemRouter:!0,encodeSchema:!0,normalize:!0,...$,cookie:{path:"/",...$?.cookie},experimental:$?.experimental??{},seed:$?.seed===void 0?"":$?.seed},this["~adapter"]=$.adapter??(typeof Bun!=="undefined"?LD:eX),$?.analytic&&($?.name||$?.seed!==void 0))this.telemetry={stack:new Error().stack}}"~adapter";env($,X=lM){if(_1($,{modules:this.definitions.typebox,dynamic:!0,additionalProperties:!0,coerce:!0,sanitize:()=>this.config.sanitize}).Check(X)===!1){let Y=new g0("env",$,X);throw new Error(Y.all.map((Q)=>Q.summary).join(`
`))}return this}wrap($){return this.extender.higherOrderFunctions.push({checksum:M4(JSON.stringify({name:this.config.name,seed:this.config.seed,content:$.toString()})),fn:$}),this}applyMacro($){if(this.extender.macros.length){let X=f3({globalHook:this.event,localHook:$}),Y={events:{global:this.event,local:$},get onParse(){return X("parse")},get onTransform(){return X("transform")},get onBeforeHandle(){return X("beforeHandle")},get onAfterHandle(){return X("afterHandle")},get mapResponse(){return X("mapResponse")},get onAfterResponse(){return X("afterResponse")},get onError(){return X("error")}};for(let Q of this.extender.macros)g3(Q.fn(Y),$,X)}}get models(){let $={};for(let X of Object.keys(this.definitions.type))$[X]=_1(this.definitions.typebox.Import(X));return $.modules=this.definitions.typebox,$}add($,X,Y,Q,W,J){let G=W?.skipPrefix??!1,U=W?.allowMeta??!1;if(Q??={},J===void 0){if(J=[],this.standaloneValidator.local)J=J.concat(this.standaloneValidator.local);if(this.standaloneValidator.scoped)J=J.concat(this.standaloneValidator.scoped);if(this.standaloneValidator.global)J=J.concat(this.standaloneValidator.global)}if(X!==""&&X.charCodeAt(0)!==47)X="/"+X;if(this.config.prefix&&!G)X=this.config.prefix+X;if(Q?.type)switch(Q.type){case"text":Q.type="text/plain";break;case"json":Q.type="application/json";break;case"formdata":Q.type="multipart/form-data";break;case"urlencoded":Q.type="application/x-www-form-urlencoded";break;case"arrayBuffer":Q.type="application/octet-stream";break;default:break}let H=this.validator.getCandidate(),B={body:Q?.body??H?.body,headers:Q?.headers??H?.headers,params:Q?.params??H?.params,query:Q?.query??H?.query,cookie:Q?.cookie??H?.cookie,response:Q?.response??H?.response},q=this.config.precompile===!0||typeof this.config.precompile==="object"&&this.config.precompile.compose===!0,O=()=>{let E=this.definitions.type,i=!this.config.aot,Y0=this.config.normalize,B0=this.definitions.typebox,w0=()=>this.config.sanitize,N5=()=>{if(B.cookie||J.find((_0)=>_0.cookie))return wU({modules:B0,validator:B.cookie,defaultConfig:this.config.cookie,config:B.cookie?.config??{},dynamic:i,models:E,validators:J.map((_0)=>_0.cookie),sanitize:w0})};return q?{body:_1(B.body,{modules:B0,dynamic:i,models:E,normalize:Y0,additionalCoerce:XY(),validators:J.map((_0)=>_0.body),sanitize:w0}),headers:_1(B.headers,{modules:B0,dynamic:i,models:E,additionalProperties:!0,coerce:!0,additionalCoerce:A6(),validators:J.map((_0)=>_0.headers),sanitize:w0}),params:_1(B.params,{modules:B0,dynamic:i,models:E,coerce:!0,additionalCoerce:A6(),validators:J.map((_0)=>_0.params),sanitize:w0}),query:_1(B.query,{modules:B0,dynamic:i,models:E,normalize:Y0,coerce:!0,additionalCoerce:A6(),validators:J.map((_0)=>_0.query),sanitize:w0}),cookie:N5(),response:cM(B.response,{modules:B0,dynamic:i,models:E,normalize:Y0,validators:J.map((_0)=>_0.response),sanitize:w0})}:{createBody(){if(this.body)return this.body;return this.body=_1(B.body,{modules:B0,dynamic:i,models:E,normalize:Y0,additionalCoerce:XY(),validators:J.map((_0)=>_0.body),sanitize:w0})},createHeaders(){if(this.headers)return this.headers;return this.headers=_1(B.headers,{modules:B0,dynamic:i,models:E,additionalProperties:!Y0,coerce:!0,additionalCoerce:A6(),validators:J.map((_0)=>_0.headers),sanitize:w0})},createParams(){if(this.params)return this.params;return this.params=_1(B.params,{modules:B0,dynamic:i,models:E,coerce:!0,additionalCoerce:A6(),validators:J.map((_0)=>_0.params),sanitize:w0})},createQuery(){if(this.query)return this.query;return this.query=_1(B.query,{modules:B0,dynamic:i,models:E,coerce:!0,additionalCoerce:A6(),validators:J.map((_0)=>_0.query),sanitize:w0})},createCookie(){if(this.cookie)return this.cookie;return this.cookie=N5()},createResponse(){if(this.response)return this.response;return this.response=cM(B.response,{modules:B0,dynamic:i,models:E,normalize:Y0,validators:J.map((_0)=>_0.response),sanitize:w0})}}};if(H.body||H.cookie||H.headers||H.params||H.query||H.response)Q=$8(Q,H);if(Q.tags)if(!Q.detail)Q.detail={tags:Q.tags};else Q.detail.tags=Q.tags;if(u0(this.config.detail))Q.detail=W5(Object.assign({},this.config.detail),Q.detail);this.applyMacro(Q);let A=u0(this.event)?$8(this.event,EM(Q)):I3(EM(Q));if(this.config.aot===!1){let E=O();this.router.dynamic.add($,X,{validator:E,hooks:A,content:Q?.type,handle:Y,route:X});let i=Z9(X,{dynamic:!0});if(X!==i)this.router.dynamic.add($,i,{validator:E,hooks:A,content:Q?.type,handle:Y,route:X});if(this.config.strictPath===!1){let Y0=A9(X);this.router.dynamic.add($,Y0,{validator:E,hooks:A,content:Q?.type,handle:Y,route:X});let B0=Z9(Y0);if(Y0!==B0)this.router.dynamic.add($,Y0,{validator:E,hooks:A,content:Q?.type,handle:Y,route:X})}this.router.history.push({method:$,path:X,composed:null,handler:Y,compile:void 0,hooks:A,standaloneValidators:J});return}let w=this["~adapter"].handler,N=typeof Y!=="function"?()=>{let E=w.createNativeStaticHandler?.(Y,A,this.setHeaders);return E instanceof Promise?E.then((i)=>{if(i)return i}):E?.()}:void 0,L=this.config.nativeStaticResponse===!0,K=(E)=>{if(!L||!N)return;if(XU)if(this.router.response[E])this.router.response[E][$]=N();else this.router.response[E]={[$]:N()};else this.router.response[E]=N()};K(X);let h,D=()=>{if(h)return h;return h=ND({app:this,path:X,method:$,hooks:A,validator:O(),handler:typeof Y!=="function"&&typeof w.createStaticHandler!=="function"?()=>Y:Y,allowMeta:U,inference:this.inference})},b;if(`${$}_${X}`in this.routeTree)for(let E=0;E<this.router.history.length;E++){let i=this.router.history[E];if(i.path===X&&i.method===$){b=E;break}}else this.routeTree[`${$}_${X}`]=this.router.history.length;let l=b??this.router.history.length,s=q?D():(E)=>(this.router.history[l].composed=D())(E);if(b!==void 0)this.router.history[b]=Object.assign({method:$,path:X,composed:s,compile:D,handler:Y,hooks:A},J.length?{standaloneValidators:J}:void 0,Q.webSocket?{websocket:Q.websocket}:void 0);else this.router.history.push(Object.assign({method:$,path:X,composed:s,compile:D,handler:Y,hooks:A},J.length?{standaloneValidators:J}:void 0,Q.webSocket?{websocket:Q.websocket}:void 0));let x={handler:q?s:void 0,compile(){return this.handler=D()}},g=this.router.static,v=X.indexOf(":")===-1&&X.indexOf("*")===-1;if($==="WS"){if(v){if(X in g)g[X][$]=l;else g[X]={[$]:l};return}if(this.router.http.add("WS",X,x),!this.config.strictPath)this.router.http.add("WS",A9(X),x);let E=Z9(X,{dynamic:!0});if(X!==E)this.router.http.add("WS",E,x);return}if(v){if(X in g)g[X][$]=l;else g[X]={[$]:l};if(!this.config.strictPath)K(A9(X))}else{if(this.router.http.add($,X,x),!this.config.strictPath){let i=A9(X);K(i),this.router.http.add($,i,x)}let E=Z9(X,{dynamic:!0});if(X!==E)this.router.http.add($,E,x),K(E)}}setHeaders;headers($){if(!$)return this;if(!this.setHeaders)this.setHeaders={};return this.setHeaders=W5(this.setHeaders,$),this}onStart($){return this.on("start",$),this}onRequest($){return this.on("request",$),this}onParse($,X){if(!X){if(typeof $==="string")return this.on("parse",this["~parser"][$]);return this.on("parse",$)}return this.on($,"parse",X)}parser($,X){return this["~parser"][$]=X,this}onTransform($,X){if(!X)return this.on("transform",$);return this.on($,"transform",X)}resolve($,X){if(!X)X=$,$={as:"local"};let Y={subType:"resolve",fn:X};return this.onBeforeHandle($,Y)}mapResolve($,X){if(!X)X=$,$={as:"local"};let Y={subType:"mapResolve",fn:X};return this.onBeforeHandle($,Y)}onBeforeHandle($,X){if(!X)return this.on("beforeHandle",$);return this.on($,"beforeHandle",X)}onAfterHandle($,X){if(!X)return this.on("afterHandle",$);return this.on($,"afterHandle",X)}mapResponse($,X){if(!X)return this.on("mapResponse",$);return this.on($,"mapResponse",X)}onAfterResponse($,X){if(!X)return this.on("afterResponse",$);return this.on($,"afterResponse",X)}trace($,X){if(!X)X=$,$={as:"local"};if(!Array.isArray(X))X=[X];for(let Y of X)this.on($,"trace",$D(Y));return this}error($,X){switch(typeof $){case"string":return X.prototype[s7]=$,this.definitions.error[$]=X,this;case"function":return this.definitions.error=$(this.definitions.error),this}for(let[Y,Q]of Object.entries($))Q.prototype[s7]=Y,this.definitions.error[Y]=Q;return this}onError($,X){if(!X)return this.on("error",$);return this.on($,"error",X)}onStop($){return this.on("stop",$),this}on($,X,Y){let Q;switch(typeof $){case"string":Q=$,Y=X;break;case"object":if(Q=X,!Array.isArray(X)&&typeof X==="object")Y=X;break}if(Array.isArray(Y))Y=K1(Y);else if(typeof Y==="function")Y=[{fn:Y}];else Y=[Y];let W=Y;for(let J of W)if(J.scope=typeof $==="string"?"local":$?.as??"local",Q==="resolve"||Q==="derive")J.subType=Q;if(Q!=="trace")this.inference=_9({[Q]:W.map((J)=>J.fn)},this.inference);for(let J of W){let G=x3(J,"global",{skipIfHasType:!0});switch(Q){case"start":this.event.start??=[],this.event.start.push(G);break;case"request":this.event.request??=[],this.event.request.push(G);break;case"parse":this.event.parse??=[],this.event.parse.push(G);break;case"transform":this.event.transform??=[],this.event.transform.push(G);break;case"derive":this.event.transform??=[],this.event.transform.push(K1(G,"derive"));break;case"beforeHandle":this.event.beforeHandle??=[],this.event.beforeHandle.push(G);break;case"resolve":this.event.beforeHandle??=[],this.event.beforeHandle.push(K1(G,"resolve"));break;case"afterHandle":this.event.afterHandle??=[],this.event.afterHandle.push(G);break;case"mapResponse":this.event.mapResponse??=[],this.event.mapResponse.push(G);break;case"afterResponse":this.event.afterResponse??=[],this.event.afterResponse.push(G);break;case"trace":this.event.trace??=[],this.event.trace.push(G);break;case"error":this.event.error??=[],this.event.error.push(G);break;case"stop":this.event.stop??=[],this.event.stop.push(G);break}}return this}as($){if(R8(this.event.parse,$),R8(this.event.transform,$),R8(this.event.beforeHandle,$),R8(this.event.afterHandle,$),R8(this.event.mapResponse,$),R8(this.event.afterResponse,$),R8(this.event.trace,$),R8(this.event.error,$),$==="scoped")this.validator.scoped=O9(this.validator.scoped,this.validator.local),this.validator.local=null;else if($==="global")this.validator.global=O9(this.validator.global,O9(this.validator.scoped,this.validator.local)),this.validator.scoped=null,this.validator.local=null;return this}group($,X,Y){let Q=new o({...this.config,prefix:""});Q.singleton={...this.singleton},Q.definitions={...this.definitions},Q.getServer=()=>this.getServer(),Q.inference=IM(this.inference),Q.extender={...this.extender},Q["~parser"]=this["~parser"],Q.standaloneValidator={local:[...this.standaloneValidator.local??[]],scoped:[...this.standaloneValidator.scoped??[]],global:[...this.standaloneValidator.global??[]]};let W=typeof X==="object",J=(W?Y:X)(Q);if(this.singleton=W5(this.singleton,Q.singleton),this.definitions=W5(this.definitions,Q.definitions),J.event.request?.length)this.event.request=[...this.event.request||[],...J.event.request||[]];if(J.event.mapResponse?.length)this.event.mapResponse=[...this.event.mapResponse||[],...J.event.mapResponse||[]];return this.model(J.definitions.type),Object.values(Q.router.history).forEach(({method:G,path:U,handler:H,hooks:B,standaloneValidators:q})=>{if(U=(W?"":this.config.prefix)+$+U,W){let O=X,A=B;this.add(G,U,H,$8(O,{...A||{},error:!A.error?J.event.error:Array.isArray(A.error)?[...A.error??[],...J.event.error??[]]:[A.error,...J.event.error??[]]}),void 0,q)}else this.add(G,U,H,$8(B,{error:J.event.error}),{skipPrefix:!0},q)}),this}guard($,X){if(!X){if(typeof $==="object"){if(this.applyMacro($),$.detail)if(this.config.detail)this.config.detail=W5(Object.assign({},this.config.detail),$.detail);else this.config.detail=$.detail;if($.tags)if(!this.config.detail)this.config.detail={tags:$.tags};else this.config.detail.tags=$.tags;let W=$.as??"local";if($.schema==="standalone"){if(!this.standaloneValidator[W])this.standaloneValidator[W]=[];let J=$?.response||typeof $?.response==="string"||$?.response&&F in $.response?{200:$.response}:$?.response;return this.standaloneValidator[W].push({body:$.body,headers:$.headers,params:$.params,query:$.query,response:J,cookie:$.cookie}),this}if(this.validator[W]={body:$.body??this.validator[W]?.body,headers:$.headers??this.validator[W]?.headers,params:$.params??this.validator[W]?.params,query:$.query??this.validator[W]?.query,response:$.response??this.validator[W]?.response,cookie:$.cookie??this.validator[W]?.cookie},$.parse)this.on({as:W},"parse",$.parse);if($.transform)this.on({as:W},"transform",$.transform);if($.derive)this.on({as:W},"derive",$.derive);if($.beforeHandle)this.on({as:W},"beforeHandle",$.beforeHandle);if($.resolve)this.on({as:W},"resolve",$.resolve);if($.afterHandle)this.on({as:W},"afterHandle",$.afterHandle);if($.mapResponse)this.on({as:W},"mapResponse",$.mapResponse);if($.afterResponse)this.on({as:W},"afterResponse",$.afterResponse);if($.error)this.on({as:W},"error",$.error);return this}return this.guard({},$)}let Y=new o({...this.config,prefix:""});Y.singleton={...this.singleton},Y.definitions={...this.definitions},Y.inference=IM(this.inference),Y.extender={...this.extender};let Q=X(Y);if(this.singleton=W5(this.singleton,Y.singleton),this.definitions=W5(this.definitions,Y.definitions),Q.getServer=()=>this.server,Q.event.request?.length)this.event.request=[...this.event.request||[],...Q.event.request||[]];if(Q.event.mapResponse?.length)this.event.mapResponse=[...this.event.mapResponse||[],...Q.event.mapResponse||[]];return this.model(Q.definitions.type),Object.values(Y.router.history).forEach(({method:W,path:J,handler:G,hooks:U})=>{this.add(W,J,G,$8($,{...U||{},error:!U.error?Q.event.error:Array.isArray(U.error)?[...U.error??[],...Q.event.error??[]]:[U.error,...Q.event.error??[]]}))}),this}use($){if(Array.isArray($)){let X=this;for(let Y of $)X=X.use(Y);return X}if($ instanceof Promise)return this.promisedModules.add($.then((X)=>{if(typeof X==="function")return X(this);if(X instanceof o)return this._use(X).compile();if(X.constructor.name==="Elysia")return this._use(X).compile();if(typeof X.default==="function")return X.default(this);if(X.default instanceof o)return this._use(X.default);if(X.constructor.name==="Elysia")return this._use(X.default);if(X.constructor.name==="_Elysia")return this._use(X.default);try{return this._use(X.default)}catch(Y){throw console.error('Invalid plugin type. Expected Elysia instance, function, or module with "default" as Elysia instance or function that returns Elysia instance.'),Y}}).then((X)=>{if(X&&typeof X.compile==="function")X.compile();return X})),this;return this._use($)}propagatePromiseModules($){if($.promisedModules.size<=0)return this;for(let X of $.promisedModules.promises)this.promisedModules.add(X.then((Y)=>{if(!Y)return;let Q=this._use(Y);if(Q instanceof Promise)return Q.then((W)=>{if(W)W.compile();else Y.compile()});return Y.compile()}));return this}_use($){if(typeof $==="function"){let Q=$(this);if(Q instanceof Promise)return this.promisedModules.add(Q.then((W)=>{if(W instanceof o){W.getServer=()=>this.getServer(),W.getGlobalRoutes=()=>this.getGlobalRoutes(),W.getGlobalDefinitions=()=>this.getGlobalDefinitions(),W.model(this.definitions.type),W.error(this.definitions.error);for(let{method:J,path:G,handler:U,hooks:H,standaloneValidators:B}of Object.values(W.router.history))this.add(J,G,U,u0(W.event.error)?$8(H,{error:W.event.error}):H,void 0,B);if(W===this)return;return this.propagatePromiseModules(W),W}if(typeof W==="function")return W(this);if(typeof W.default==="function")return W.default(this);return this._use(W)}).then((W)=>{if(W&&typeof W.compile==="function")W.compile();return W})),this;return Q}this.propagatePromiseModules($);let X=$.config.name,Y=$.config.seed;if($.getParent=()=>this,$.getServer=()=>this.getServer(),$.getGlobalRoutes=()=>this.getGlobalRoutes(),$.getGlobalDefinitions=()=>this.getGlobalDefinitions(),$.standaloneValidator?.scoped)if(this.standaloneValidator.local)this.standaloneValidator.local=this.standaloneValidator.local.concat($.standaloneValidator.scoped);else this.standaloneValidator.local=$.standaloneValidator.scoped;if($.standaloneValidator?.global)if(this.standaloneValidator.global)this.standaloneValidator.global=this.standaloneValidator.global.concat($.standaloneValidator.global);else this.standaloneValidator.global=$.standaloneValidator.global;if(u0($["~parser"]))this["~parser"]={...$["~parser"],...this["~parser"]};if($.setHeaders)this.headers($.setHeaders);if(X){if(!(X in this.dependencies))this.dependencies[X]=[];let Q=Y!==void 0?M4(X+JSON.stringify(Y)):0;if(!this.dependencies[X].some(({checksum:W})=>Q===W))this.extender.macros=this.extender.macros.concat($.extender.macros),this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat($.extender.higherOrderFunctions)}else{if($.extender.macros.length)this.extender.macros=this.extender.macros.concat($.extender.macros);if($.extender.higherOrderFunctions.length)this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat($.extender.higherOrderFunctions)}if(TM(this.extender.macros),$.extender.higherOrderFunctions.length){TM(this.extender.higherOrderFunctions);let Q=[];for(let W=0;W<this.extender.higherOrderFunctions.length;W++){let J=this.extender.higherOrderFunctions[W];if(J.checksum){if(Q.includes(J.checksum))this.extender.higherOrderFunctions.splice(W,1),W--;Q.push(J.checksum)}}Q.length=0}if(this.inference=aX(this.inference,$.inference),u0($.singleton.decorator))this.decorate($.singleton.decorator);if(u0($.singleton.store))this.state($.singleton.store);if(u0($.definitions.type))this.model($.definitions.type);if(u0($.definitions.error))this.error($.definitions.error);if(u0($.definitions.error))$.extender.macros=this.extender.macros.concat($.extender.macros);for(let{method:Q,path:W,handler:J,hooks:G,standaloneValidators:U}of Object.values($.router.history))this.add(Q,W,J,u0($.event.error)?$8(G,{error:$.event.error}):G,void 0,U);if(X){if(!(X in this.dependencies))this.dependencies[X]=[];let Q=Y!==void 0?M4(X+JSON.stringify(Y)):0;if(this.dependencies[X].some(({checksum:W})=>Q===W))return this;if(this.dependencies[X].push(this.config?.analytic?{name:$.config.name,seed:$.config.seed,checksum:Q,dependencies:$.dependencies,stack:$.telemetry?.stack,routes:$.router.history,decorators:$.singleton,store:$.singleton.store,error:$.definitions.error,derive:$.event.transform?.filter((W)=>W?.subType==="derive").map((W)=>({fn:W.toString(),stack:new Error().stack??""})),resolve:$.event.transform?.filter((W)=>W?.subType==="resolve").map((W)=>({fn:W.toString(),stack:new Error().stack??""}))}:{name:$.config.name,seed:$.config.seed,checksum:Q,dependencies:$.dependencies}),u0($.event))this.event=_M(this.event,RM($.event),Q)}else if(u0($.event))this.event=_M(this.event,RM($.event));if($.validator.global)this.validator.global=$8(this.validator.global,{...$.validator.global});if($.validator.scoped)this.validator.local=$8(this.validator.local,{...$.validator.scoped});return this}macro($){if(typeof $==="function"){let X={checksum:M4(JSON.stringify({name:this.config.name,seed:this.config.seed,content:$.toString()})),fn:$};this.extender.macros.push(X)}else if(typeof $==="object"){for(let Y of Object.keys($))if(typeof $[Y]==="object"){let Q={...$[Y]};$[Y]=(W)=>{if(W===!0)return Q}}let X={checksum:M4(JSON.stringify({name:this.config.name,seed:this.config.seed,content:Object.entries($).map(([Y,Q])=>`${Y}+${Q}`).join(",")})),fn:()=>$};this.extender.macros.push(X)}return this}mount($,X,Y){if($ instanceof o||typeof $==="function"||$.length===0||$==="/"){let G=typeof $==="function"?$:$ instanceof o?$.compile().fetch:X instanceof o?X.compile().fetch:typeof X==="function"?X:(()=>{throw new Error("Invalid handler")})(),U=({request:H,path:B})=>G(new Request(DM(H.url,B),{method:H.method,headers:H.headers,signal:H.signal,credentials:H.credentials,referrerPolicy:H.referrerPolicy,duplex:H.duplex,redirect:H.redirect,mode:H.mode,keepalive:H.keepalive,integrity:H.integrity,body:H.body}));return this.route("ALL","/*",U,{parse:"none",...Y,detail:{...Y?.detail,hide:!0},config:{mount:G}}),this}let Q=X instanceof o?X.compile().fetch:typeof X==="function"?X:(()=>{throw new Error("Invalid handler")})(),W=$.length-($.endsWith("*")?1:0),J=({request:G,path:U})=>Q(new Request(DM(G.url,U.slice(W)||"/"),{method:G.method,headers:G.headers,signal:G.signal,credentials:G.credentials,referrerPolicy:G.referrerPolicy,duplex:G.duplex,redirect:G.redirect,mode:G.mode,keepalive:G.keepalive,integrity:G.integrity,body:G.body}));return this.route("ALL",$,J,{parse:"none",...Y,detail:{...Y?.detail,hide:!0},config:{mount:Q}}),this.route("ALL",$+($.endsWith("/")?"*":"/*"),J,{parse:"none",...Y,detail:{...Y?.detail,hide:!0},config:{mount:Q}}),this}get($,X,Y){return this.add("GET",$,X,Y),this}post($,X,Y){return this.add("POST",$,X,Y),this}put($,X,Y){return this.add("PUT",$,X,Y),this}patch($,X,Y){return this.add("PATCH",$,X,Y),this}delete($,X,Y){return this.add("DELETE",$,X,Y),this}options($,X,Y){return this.add("OPTIONS",$,X,Y),this}all($,X,Y){return this.add("ALL",$,X,Y),this}head($,X,Y){return this.add("HEAD",$,X,Y),this}connect($,X,Y){return this.add("CONNECT",$,X,Y),this}route($,X,Y,Q){return this.add($.toUpperCase(),X,Y,Q,Q?.config),this}ws($,X){if(this["~adapter"].ws)this["~adapter"].ws(this,$,X);else console.warn("Current adapter doesn't support WebSocket");return this}state($,X,Y){if(X===void 0)Y=$,$={as:"append"},X="";else if(Y===void 0){if(typeof $==="string")Y=X,X=$,$={as:"append"};else if(typeof $==="object")Y=X,X=""}let{as:Q}=$;if(typeof X!=="string")return this;switch(typeof Y){case"object":if(!Y||!u0(Y))return this;if(X){if(X in this.singleton.store)this.singleton.store[X]=W5(this.singleton.store[X],Y,{override:Q==="override"});else this.singleton.store[X]=Y;return this}if(Y===null)return this;return this.singleton.store=W5(this.singleton.store,Y,{override:Q==="override"}),this;case"function":if(X){if(Q==="override"||!(X in this.singleton.store))this.singleton.store[X]=Y}else this.singleton.store=Y(this.singleton.store);return this;default:if(Q==="override"||!(X in this.singleton.store))this.singleton.store[X]=Y;return this}}decorate($,X,Y){if(X===void 0)Y=$,$={as:"append"},X="";else if(Y===void 0){if(typeof $==="string")Y=X,X=$,$={as:"append"};else if(typeof $==="object")Y=X,X=""}let{as:Q}=$;if(typeof X!=="string")return this;switch(typeof Y){case"object":if(X){if(X in this.singleton.decorator)this.singleton.decorator[X]=W5(this.singleton.decorator[X],Y,{override:Q==="override"});else this.singleton.decorator[X]=Y;return this}if(Y===null)return this;return this.singleton.decorator=W5(this.singleton.decorator,Y,{override:Q==="override"}),this;case"function":if(X){if(Q==="override"||!(X in this.singleton.decorator))this.singleton.decorator[X]=Y}else this.singleton.decorator=Y(this.singleton.decorator);return this;default:if(Q==="override"||!(X in this.singleton.decorator))this.singleton.decorator[X]=Y;return this}}derive($,X){if(!X)X=$,$={as:"local"};let Y={subType:"derive",fn:X};return this.onTransform($,Y)}model($,X){switch(typeof $){case"object":let Y={},Q=Object.entries($);if(!Q.length)return this;for(let[G,U]of Q){if(G in this.definitions.type)continue;Y[G]=this.definitions.type[G]=U,Y[G].$id??=`#/components/schemas/${G}`}return this.definitions.typebox=M.Module({...this.definitions.typebox.$defs,...Y}),this;case"function":let W=$(this.definitions.type);return this.definitions.type=W,this.definitions.typebox=M.Module(W),this;case"string":if(!X)break;let J={...X,id:X.$id??`#/components/schemas/${$}`};return this.definitions.type[$]=X,this.definitions.typebox=M.Module({...this.definitions.typebox.$defs,...J}),this}return this.definitions.type[$]=X,this.definitions.typebox=M.Module({...this.definitions.typebox.$defs,[$]:X}),this}Ref($){return M.Ref($)}mapDerive($,X){if(!X)X=$,$={as:"local"};let Y={subType:"mapDerive",fn:X};return this.onTransform($,Y)}affix($,X,Y){if(Y==="")return this;let Q=["_","-"," "],W=(H)=>H[0].toUpperCase()+H.slice(1),J=$==="prefix"?(H,B)=>Q.includes(H.at(-1)??"")?H+B:H+W(B):Q.includes(Y.at(-1)??"")?(H,B)=>B+H:(H,B)=>B+W(H),G=(H)=>{let B={};switch(H){case"decorator":for(let q in this.singleton.decorator)B[J(Y,q)]=this.singleton.decorator[q];this.singleton.decorator=B;break;case"state":for(let q in this.singleton.store)B[J(Y,q)]=this.singleton.store[q];this.singleton.store=B;break;case"model":for(let q in this.definitions.type)B[J(Y,q)]=this.definitions.type[q];this.definitions.type=B;break;case"error":for(let q in this.definitions.error)B[J(Y,q)]=this.definitions.error[q];this.definitions.error=B;break}},U=Array.isArray(X)?X:[X];for(let H of U.some((B)=>B==="all")?["decorator","state","model","error"]:U)G(H);return this}prefix($,X){return this.affix("prefix",$,X)}suffix($,X){return this.affix("suffix",$,X)}compile(){if(this["~adapter"].isWebStandard){if(this.fetch=this.config.aot?pX(this):pM(this),typeof this.server?.reload==="function")this.server.reload({...this.server||{},fetch:this.fetch});return this}if(typeof this.server?.reload==="function")this.server.reload(this.server||{});return this._handle=pX(this),this}handle=async($)=>this.fetch($);fetch=($)=>{return(this.fetch=this.config.aot?pX(this):pM(this))($)};handleError=async($,X)=>{return(this.handleError=this.config.aot?LU(this):jD(this))($,X)};listen=($,X)=>{if(this["~adapter"].listen(this)($,X),this.promisedModules.size)vM(5000);return this.promisedModules.then(()=>{vM(1000)}),this};stop=async($)=>{if(!this.server)throw new Error("Elysia isn't running. Call `app.listen` to start the server.");if(this.server){if(this.server.stop($),this.server=null,this.event.stop?.length)for(let X=0;X<this.event.stop.length;X++)this.event.stop[X].fn(this)}};get modules(){return this.promisedModules}}var FU=`/* basic theme */
:root {
  --scalar-text-decoration: underline;
  --scalar-text-decoration-hover: underline;
}
.light-mode,
.light-mode .dark-mode {
  --scalar-background-1: #f9f9f9;
  --scalar-background-2: #f1f1f1;
  --scalar-background-3: #e7e7e7;
  --scalar-background-card: #fff;

  --scalar-color-1: #2a2f45;
  --scalar-color-2: #757575;
  --scalar-color-3: #8e8e8e;

  --scalar-color-accent: var(--scalar-color-1);
  --scalar-background-accent: var(--scalar-background-3);

  --scalar-border-color: rgba(0, 0, 0, 0.1);
}
.dark-mode {
  --scalar-background-1: #131313;
  --scalar-background-2: #1d1d1d;
  --scalar-background-3: #272727;
  --scalar-background-card: #1d1d1d;

  --scalar-color-1: rgba(255, 255, 255, 0.9);
  --scalar-color-2: rgba(255, 255, 255, 0.62);
  --scalar-color-3: rgba(255, 255, 255, 0.44);

  --scalar-color-accent: var(--scalar-color-1);
  --scalar-background-accent: var(--scalar-background-3);

  --scalar-border-color: #2a2b2a;
}
/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-hover-color: currentColor;

  --scalar-sidebar-item-active-background: var(--scalar-background-accent);
  --scalar-sidebar-color-active: var(--scalar-color-accent);

  --scalar-sidebar-search-background: transparent;
  --scalar-sidebar-search-color: var(--scalar-color-3);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
}
/* advanced */
.light-mode .dark-mode,
.light-mode {
  --scalar-color-green: #069061;
  --scalar-color-red: #ef0006;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #0082d0;
  --scalar-color-orange: #fb892c;
  --scalar-color-purple: #5203d1;

  --scalar-button-1: rgba(0, 0, 0, 1);
  --scalar-button-1-hover: rgba(0, 0, 0, 0.8);
  --scalar-button-1-color: rgba(255, 255, 255, 0.9);
}
.dark-mode {
  --scalar-color-green: #00b648;
  --scalar-color-red: #dd2f2c;
  --scalar-color-yellow: #ffc90d;
  --scalar-color-blue: #4eb3ec;
  --scalar-color-orange: #ff8d4d;
  --scalar-color-purple: #b191f9;

  --scalar-button-1: rgba(255, 255, 255, 1);
  --scalar-button-1-hover: rgba(255, 255, 255, 0.9);
  --scalar-button-1-color: black;
}

.scalar-api-client__item,
.scalar-card,
.dark-mode .dark-mode.scalar-card {
  --scalar-background-1: var(--scalar-background-card);
  --scalar-background-2: var(--scalar-background-1);
  --scalar-background-3: var(--scalar-background-1);
}
.dark-mode .dark-mode.scalar-card {
  --scalar-background-3: var(--scalar-background-3);
}
.t-doc__sidebar {
  --scalar-color-green: var(--scalar-color-1);
  --scalar-color-red: var(--scalar-color-1);
  --scalar-color-yellow: var(--scalar-color-1);
  --scalar-color-blue: var(--scalar-color-1);
  --scalar-color-orange: var(--scalar-color-1);
  --scalar-color-purple: var(--scalar-color-1);
}
.light-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-blue), transparent 70%);
}
.dark-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-blue), transparent 50%);
}
`;var SU=`/* basic theme */
:root {
  --scalar-text-decoration: underline;
  --scalar-text-decoration-hover: underline;
}
.light-mode {
  --scalar-background-1: #f0f2f5;
  --scalar-background-2: #eaecf0;
  --scalar-background-3: #e0e2e6;
  --scalar-border-color: rgb(213 213 213);

  --scalar-color-1: rgb(9, 9, 11);
  --scalar-color-2: rgb(113, 113, 122);
  --scalar-color-3: rgba(25, 25, 28, 0.5);

  --scalar-color-accent: var(--scalar-color-1);
  --scalar-background-accent: #8ab4f81f;
}
.light-mode .scalar-card.dark-mode,
.dark-mode {
  --scalar-background-1: #000e23;
  --scalar-background-2: #01132e;
  --scalar-background-3: #03193b;
  --scalar-border-color: #2e394c;

  --scalar-color-1: #fafafa;
  --scalar-color-2: rgb(161, 161, 170);
  --scalar-color-3: rgba(255, 255, 255, 0.533);

  --scalar-color-accent: var(--scalar-color-1);
  --scalar-background-accent: #8ab4f81f;

  --scalar-code-language-color-supersede: var(--scalar-color-1);
}
/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-hover-color: currentColor;

  --scalar-sidebar-item-active-background: var(--scalar-background-3);
  --scalar-sidebar-color-active: var(--scalar-color-accent);

  --scalar-sidebar-search-background: rgba(255, 255, 255, 0.1);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
  --scalar-sidebar-search-color: var(--scalar-color-3);
  z-index: 1;
}
.light-mode .t-doc__sidebar {
  --scalar-sidebar-search-background: white;
}
/* advanced */
.light-mode {
  --scalar-color-green: #069061;
  --scalar-color-red: #ef0006;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #0082d0;
  --scalar-color-orange: #fb892c;
  --scalar-color-purple: #5203d1;

  --scalar-button-1: rgba(0, 0, 0, 1);
  --scalar-button-1-hover: rgba(0, 0, 0, 0.8);
  --scalar-button-1-color: rgba(255, 255, 255, 0.9);
}
.dark-mode {
  --scalar-color-green: rgba(69, 255, 165, 0.823);
  --scalar-color-red: #ff8589;
  --scalar-color-yellow: #ffcc4d;
  --scalar-color-blue: #6bc1fe;
  --scalar-color-orange: #f98943;
  --scalar-color-purple: #b191f9;

  --scalar-button-1: rgba(255, 255, 255, 1);
  --scalar-button-1-hover: rgba(255, 255, 255, 0.9);
  --scalar-button-1-color: black;
}
/* Custom theme */
/* Document header */
@keyframes headerbackground {
  from {
    background: transparent;
    backdrop-filter: none;
  }
  to {
    background: var(--header-background-1);
    backdrop-filter: blur(12px);
  }
}
.dark-mode h2.t-editor__heading,
.dark-mode .t-editor__page-title h1,
.dark-mode h1.section-header:not(::selection),
.dark-mode .markdown h1,
.dark-mode .markdown h2,
.dark-mode .markdown h3,
.dark-mode .markdown h4,
.dark-mode .markdown h5,
.dark-mode .markdown h6 {
  -webkit-text-fill-color: transparent;
  background-image: linear-gradient(to right bottom, rgb(255, 255, 255) 30%, rgba(255, 255, 255, 0.38));
  -webkit-background-clip: text;
  background-clip: text;
}
/* Hero Section Flare */
.section-flare-item:nth-of-type(1) {
  --c1: #ffffff;
  --c2: #babfd8;
  --c3: #2e8bb2;
  --c4: #1a8593;
  --c5: #0a143e;
  --c6: #0a0f52;
  --c7: #2341b8;

  --solid: var(--c1), var(--c2), var(--c3), var(--c4), var(--c5), var(--c6), var(--c7);
  --solid-wrap: var(--solid), var(--c1);
  --trans:
    var(--c1), transparent, var(--c2), transparent, var(--c3),
    transparent, var(--c4), transparent, var(--c5), transparent, var(--c6),
    transparent, var(--c7);
  --trans-wrap: var(--trans), transparent, var(--c1);

  background: radial-gradient(circle, var(--trans)), conic-gradient(from 180deg, var(--trans-wrap)),
    radial-gradient(circle, var(--trans)), conic-gradient(var(--solid-wrap));
  width: 70vw;
  height: 700px;
  border-radius: 50%;
  filter: blur(100px);
  z-index: 0;
  right: 0;
  position: absolute;
  transform: rotate(-45deg);
  top: -300px;
  opacity: 0.3;
}
.section-flare-item:nth-of-type(3) {
  --star-color: #6b9acc;
  --star-color2: #446b8d;
  --star-color3: #3e5879;
  background-image: radial-gradient(2px 2px at 20px 30px, var(--star-color2), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 40px 70px, var(--star-color), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 50px 160px, var(--star-color3), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 90px 40px, var(--star-color), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 130px 80px, var(--star-color), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 160px 120px, var(--star-color3), rgba(0, 0, 0, 0));
  background-repeat: repeat;
  background-size: 200px 200px;
  width: 100%;
  height: 100%;
  mask-image: radial-gradient(ellipse at 100% 0%, black 40%, transparent 70%);
}
.section-flare {
  top: -150px !important;
  height: 100vh;
  background: linear-gradient(#000, var(--scalar-background-1));
  width: 100vw;
  overflow-x: hidden;
}
.light-mode .section-flare {
  display: none;
}
.light-mode .scalar-card {
  --scalar-background-1: #fff;
  --scalar-background-2: #fff;
  --scalar-background-3: #fff;
}

*::selection {
  background-color: color-mix(in srgb, var(--scalar-color-blue), transparent 60%);
}
`;var DU=`/* basic theme */
:root {
  --scalar-text-decoration: underline;
  --scalar-text-decoration-hover: underline;
}
.light-mode {
  --scalar-color-1: rgb(9, 9, 11);
  --scalar-color-2: rgb(113, 113, 122);
  --scalar-color-3: rgba(25, 25, 28, 0.5);
  --scalar-color-accent: var(--scalar-color-1);

  --scalar-background-1: #fff;
  --scalar-background-2: #f4f4f5;
  --scalar-background-3: #e3e3e6;
  --scalar-background-accent: #8ab4f81f;

  --scalar-border-color: rgb(228, 228, 231);
  --scalar-code-language-color-supersede: var(--scalar-color-1);
}
.dark-mode {
  --scalar-color-1: #fafafa;
  --scalar-color-2: rgb(161, 161, 170);
  --scalar-color-3: rgba(255, 255, 255, 0.533);
  --scalar-color-accent: var(--scalar-color-1);

  --scalar-background-1: #09090b;
  --scalar-background-2: #18181b;
  --scalar-background-3: #2c2c30;
  --scalar-background-accent: #8ab4f81f;

  --scalar-border-color: rgba(255, 255, 255, 0.16);
  --scalar-code-language-color-supersede: var(--scalar-color-1);
}

/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-color: currentColor;
  --scalar-sidebar-item-hover-background: var(--scalar-background-2);

  --scalar-sidebar-item-active-background: var(--scalar-background-3);
  --scalar-sidebar-color-active: var(--scalar-color-accent);

  --scalar-sidebar-search-background: transparent;
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
  --scalar-sidebar-search-color: var(--scalar-color-3);
}
.light-mode .t-doc__sidebar {
  --scalar-sidebar-item-active-background: var(--scalar-background-2);
}
/* advanced */
.light-mode {
  --scalar-color-green: #069061;
  --scalar-color-red: #ef0006;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #0082d0;
  --scalar-color-orange: #fb892c;
  --scalar-color-purple: #5203d1;

  --scalar-button-1: rgba(0, 0, 0, 1);
  --scalar-button-1-hover: rgba(0, 0, 0, 0.8);
  --scalar-button-1-color: rgba(255, 255, 255, 0.9);
}
.dark-mode {
  --scalar-color-green: rgba(69, 255, 165, 0.823);
  --scalar-color-red: #ff8589;
  --scalar-color-yellow: #ffcc4d;
  --scalar-color-blue: #6bc1fe;
  --scalar-color-orange: #f98943;
  --scalar-color-purple: #b191f9;

  --scalar-button-1: rgba(255, 255, 255, 1);
  --scalar-button-1-hover: rgba(255, 255, 255, 0.9);
  --scalar-button-1-color: black;
}
/* Custom theme */
.dark-mode h2.t-editor__heading,
.dark-mode .t-editor__page-title h1,
.dark-mode h1.section-header:not(::selection),
.dark-mode .markdown h1,
.dark-mode .markdown h2,
.dark-mode .markdown h3,
.dark-mode .markdown h4,
.dark-mode .markdown h5,
.dark-mode .markdown h6 {
  -webkit-text-fill-color: transparent;
  background-image: linear-gradient(to right bottom, rgb(255, 255, 255) 30%, rgba(255, 255, 255, 0.38));
  -webkit-background-clip: text;
  background-clip: text;
}
.examples .scalar-card-footer {
  --scalar-background-3: transparent;
  padding-top: 0;
}
/* Hero section flare */
.section-flare {
  width: 100vw;
  height: 550px;
  position: absolute;
}
.section-flare-item:nth-of-type(1) {
  position: absolute;
  width: 100vw;
  height: 550px;
  --stripesDark: repeating-linear-gradient(100deg, #000 0%, #000 7%, transparent 10%, transparent 12%, #000 16%);
  --rainbow: repeating-linear-gradient(100deg, #fff 10%, #fff 16%, #fff 22%, #fff 30%);
  background-image: var(--stripesDark), var(--rainbow);
  background-size: 300%, 200%;
  background-position: 50% 50%, 50% 50%;
  filter: invert(100%);
  -webkit-mask-image: radial-gradient(ellipse at 100% 0%, black 40%, transparent 70%);
  mask-image: radial-gradient(ellipse at 100% 0%, black 40%, transparent 70%);
  pointer-events: none;
  opacity: 0.07;
}
.dark-mode .section-flare-item:nth-of-type(1) {
  background-image: var(--stripesDark), var(--rainbow);
  filter: opacity(50%) saturate(200%);
  opacity: 0.25;
  height: 350px;
}
.section-flare-item:nth-of-type(1):after {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background-image: var(--stripesDark), var(--rainbow);
  background-size: 200%, 100%;
  background-attachment: fixed;
  mix-blend-mode: difference;
}
.dark-mode .section-flare:after {
  background-image: var(--stripesDark), var(--rainbow);
}
.section-flare-item:nth-of-type(2) {
  --star-color: #fff;
  --star-color2: #fff;
  --star-color3: #fff;
  width: 100%;
  height: 100%;
  position: absolute;
  background-image: radial-gradient(2px 2px at 20px 30px, var(--star-color2), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 40px 70px, var(--star-color), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 50px 160px, var(--star-color3), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 90px 40px, var(--star-color), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 130px 80px, var(--star-color), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 160px 120px, var(--star-color3), rgba(0, 0, 0, 0));
  background-repeat: repeat;
  background-size: 200px 200px;
  mask-image: radial-gradient(ellipse at 100% 0%, black 40%, transparent 70%);
  opacity: 0.2;
}
.light-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-blue), transparent 70%);
}
.dark-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-blue), transparent 50%);
}
`;var _U=`/* basic theme */
.light-mode {
  --scalar-background-1: #fff;
  --scalar-background-2: #f6f6f6;
  --scalar-background-3: #e7e7e7;
  --scalar-background-accent: #8ab4f81f;

  --scalar-color-1: #2a2f45;
  --scalar-color-2: #757575;
  --scalar-color-3: #8e8e8e;

  --scalar-color-accent: #0099ff;
  --scalar-border-color: #dfdfdf;
}
.dark-mode {
  --scalar-background-1: #0f0f0f;
  --scalar-background-2: #1a1a1a;
  --scalar-background-3: #272727;

  --scalar-color-1: #e7e7e7;
  --scalar-color-2: #a4a4a4;
  --scalar-color-3: #797979;

  --scalar-color-accent: #3ea6ff;
  --scalar-background-accent: #3ea6ff1f;

  --scalar-border-color: #2d2d2d;
}
/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-hover-color: currentColor;

  --scalar-sidebar-item-active-background: var(--scalar-background-2);
  --scalar-sidebar-color-active: var(--scalar-color-1);

  --scalar-sidebar-indent-border: var(--scalar-sidebar-border-color);
  --scalar-sidebar-indent-border-hover: var(--scalar-sidebar-border-color);
  --scalar-sidebar-indent-border-active: var(--scalar-sidebar-border-color);

  --scalar-sidebar-search-background: transparent;
  --scalar-sidebar-search-color: var(--scalar-color-3);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
}
/* advanced */
.light-mode {
  --scalar-color-green: #069061;
  --scalar-color-red: #ef0006;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #0082d0;
  --scalar-color-orange: #fb892c;
  --scalar-color-purple: #5203d1;

  --scalar-button-1: rgba(0, 0, 0, 1);
  --scalar-button-1-hover: rgba(0, 0, 0, 0.8);
  --scalar-button-1-color: rgba(255, 255, 255, 0.9);

  --scalar-color-danger: color-mix(in srgb, var(--scalar-color-red), var(--scalar-color-1) 20%);

  --scalar-background-alert: color-mix(in srgb, var(--scalar-color-orange), var(--scalar-background-1) 95%);
  --scalar-background-danger: color-mix(in srgb, var(--scalar-color-red), var(--scalar-background-1) 95%);
}
.dark-mode {
  --scalar-color-green: #00b648;
  --scalar-color-red: #dc1b19;
  --scalar-color-yellow: #ffc90d;
  --scalar-color-blue: #4eb3ec;
  --scalar-color-orange: #ff8d4d;
  --scalar-color-purple: #b191f9;

  --scalar-button-1: rgba(255, 255, 255, 1);
  --scalar-button-1-hover: rgba(255, 255, 255, 0.9);
  --scalar-button-1-color: black;

  --scalar-color-danger: color-mix(in srgb, var(--scalar-color-red), var(--scalar-background-1) 20%);

  --scalar-background-alert: color-mix(in srgb, var(--scalar-color-orange), var(--scalar-background-1) 95%);
  --scalar-background-danger: color-mix(in srgb, var(--scalar-color-red), var(--scalar-background-1) 95%);
}
@supports (color: color(display-p3 1 1 1)) {
  .light-mode {
    --scalar-color-accent: color(display-p3 0.0 0.6 1.0 / 1.0);
    --scalar-color-green: color(display-p3 0.023529 0.564706 0.380392 / 1.0);
    --scalar-color-red: color(display-p3 0.937255 0.0 0.023529 / 1.0);
    --scalar-color-yellow: color(display-p3 0.929412 0.745098 0.12549 / 1.0);
    --scalar-color-blue: color(display-p3 0.0 0.509804 0.815686 / 1.0);
    --scalar-color-orange: color(display-p3 0.984314 0.537255 0.172549 / 1.0);
    --scalar-color-purple: color(display-p3 0.321569 0.011765 0.819608 / 1.0);
  }
  .dark-mode {
    --scalar-color-accent: color(display-p3 0.243137 0.65098 1.0 / 1.0);
    --scalar-color-green: color(display-p3 0.0 0.713725 0.282353 / 1.0);
    --scalar-color-red: color(display-p3 0.862745 0.105882 0.098039 / 1.0);
    --scalar-color-yellow: color(display-p3 1.0 0.788235 0.05098 / 1.0);
    --scalar-color-blue: color(display-p3 0.305882 0.701961 0.92549 / 1.0);
    --scalar-color-orange: color(display-p3 1.0 0.552941 0.301961 / 1.0);
    --scalar-color-purple: color(display-p3 0.694118 0.568627 0.976471 / 1.0);
  }
}
`;var q$=`.light-mode {
  --scalar-color-1: #2a2f45;
  --scalar-color-2: #757575;
  --scalar-color-3: #8e8e8e;
  --scalar-color-accent: #f06292;

  --scalar-background-1: #fff;
  --scalar-background-2: #f6f6f6;
  --scalar-background-3: #e7e7e7;

  --scalar-border-color: rgba(0, 0, 0, 0.1);
}
.dark-mode {
  --scalar-color-1: rgba(255, 255, 255, 0.9);
  --scalar-color-2: rgba(156, 163, 175, 1);
  --scalar-color-3: rgba(255, 255, 255, 0.44);
  --scalar-color-accent: #f06292;

  --scalar-background-1: #111728;
  --scalar-background-2: #1e293b;
  --scalar-background-3: #334155;
  --scalar-background-accent: #f062921f;

  --scalar-border-color: rgba(255, 255, 255, 0.1);
}

/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-hover-color: currentColor;

  --scalar-sidebar-item-active-background: #f062921f;
  --scalar-sidebar-color-active: var(--scalar-color-accent);

  --scalar-sidebar-search-background: transparent;
  --scalar-sidebar-search-color: var(--scalar-color-3);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
}

/* advanced */
.light-mode {
  --scalar-button-1: rgb(49 53 56);
  --scalar-button-1-color: #fff;
  --scalar-button-1-hover: rgb(28 31 33);

  --scalar-color-green: #069061;
  --scalar-color-red: #ef0006;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #0082d0;
  --scalar-color-orange: #fb892c;
  --scalar-color-purple: #5203d1;

  --scalar-scrollbar-color: rgba(0, 0, 0, 0.18);
  --scalar-scrollbar-color-active: rgba(0, 0, 0, 0.36);
}
.dark-mode {
  --scalar-button-1: #f6f6f6;
  --scalar-button-1-color: #000;
  --scalar-button-1-hover: #e7e7e7;

  --scalar-color-green: #a3ffa9;
  --scalar-color-red: #ffa3a3;
  --scalar-color-yellow: #fffca3;
  --scalar-color-blue: #a5d6ff;
  --scalar-color-orange: #e2ae83;
  --scalar-color-purple: #d2a8ff;

  --scalar-scrollbar-color: rgba(255, 255, 255, 0.24);
  --scalar-scrollbar-color-active: rgba(255, 255, 255, 0.48);
}
.section-flare {
  width: 100%;
  height: 400px;
  position: absolute;
}
.section-flare-item:first-of-type:before {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  --stripes: repeating-linear-gradient(100deg, #fff 0%, #fff 0%, transparent 2%, transparent 12%, #fff 17%);
  --stripesDark: repeating-linear-gradient(100deg, #000 0%, #000 0%, transparent 10%, transparent 12%, #000 17%);
  --rainbow: repeating-linear-gradient(100deg, #60a5fa 10%, #e879f9 16%, #5eead4 22%, #60a5fa 30%);
  contain: strict;
  contain-intrinsic-size: 100vw 40vh;
  background-image: var(--stripesDark), var(--rainbow);
  background-size: 300%, 200%;
  background-position: 50% 50%, 50% 50%;
  filter: opacity(20%) saturate(200%);
  -webkit-mask-image: radial-gradient(ellipse at 100% 0%, black 40%, transparent 70%);
  mask-image: radial-gradient(ellipse at 100% 0%, black 40%, transparent 70%);
  pointer-events: none;
}
.section-flare-item:first-of-type:after {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background-image: var(--stripes), var(--rainbow);
  background-size: 200%, 100%;
  background-attachment: fixed;
  mix-blend-mode: difference;
  background-image: var(--stripesDark), var(--rainbow);
  pointer-events: none;
}
.light-mode .section-flare-item:first-of-type:after,
.light-mode .section-flare-item:first-of-type:before {
  background-image: var(--stripes), var(--rainbow);
  filter: opacity(4%) saturate(200%);
}
`;var RU=`.light-mode {
  color-scheme: light;
  --scalar-color-1: #1c1e21;
  --scalar-color-2: #757575;
  --scalar-color-3: #8e8e8e;
  --scalar-color-disabled: #b4b1b1;
  --scalar-color-ghost: #a7a7a7;
  --scalar-color-accent: #2f8555;
  --scalar-background-1: #fff;
  --scalar-background-2: #f5f5f5;
  --scalar-background-3: #ededed;
  --scalar-background-4: rgba(0, 0, 0, 0.06);
  --scalar-background-accent: #2f85551f;

  --scalar-border-color: rgba(0, 0, 0, 0.1);
  --scalar-scrollbar-color: rgba(0, 0, 0, 0.18);
  --scalar-scrollbar-color-active: rgba(0, 0, 0, 0.36);
  --scalar-lifted-brightness: 1;
  --scalar-backdrop-brightness: 1;

  --scalar-shadow-1: 0 1px 3px 0 rgba(0, 0, 0, 0.11);
  --scalar-shadow-2: rgba(0, 0, 0, 0.08) 0px 13px 20px 0px, rgba(0, 0, 0, 0.08) 0px 3px 8px 0px, #eeeeed 0px 0 0 1px;

  --scalar-button-1: rgb(49 53 56);
  --scalar-button-1-color: #fff;
  --scalar-button-1-hover: rgb(28 31 33);

  --scalar-color-green: #007300;
  --scalar-color-red: #af272b;
  --scalar-color-yellow: #b38200;
  --scalar-color-blue: #3b8ba5;
  --scalar-color-orange: #fb892c;
  --scalar-color-purple: #5203d1;
}

.dark-mode {
  color-scheme: dark;
  --scalar-color-1: rgba(255, 255, 255, 0.9);
  --scalar-color-2: rgba(255, 255, 255, 0.62);
  --scalar-color-3: rgba(255, 255, 255, 0.44);
  --scalar-color-disabled: rgba(255, 255, 255, 0.34);
  --scalar-color-ghost: rgba(255, 255, 255, 0.26);
  --scalar-color-accent: #27c2a0;
  --scalar-background-1: #1b1b1d;
  --scalar-background-2: #242526;
  --scalar-background-3: #3b3b3b;
  --scalar-background-4: rgba(255, 255, 255, 0.06);
  --scalar-background-accent: #27c2a01f;

  --scalar-border-color: rgba(255, 255, 255, 0.1);
  --scalar-scrollbar-color: rgba(255, 255, 255, 0.24);
  --scalar-scrollbar-color-active: rgba(255, 255, 255, 0.48);
  --scalar-lifted-brightness: 1.45;
  --scalar-backdrop-brightness: 0.5;

  --scalar-shadow-1: 0 1px 3px 0 rgb(0, 0, 0, 0.1);
  --scalar-shadow-2: rgba(15, 15, 15, 0.2) 0px 3px 6px, rgba(15, 15, 15, 0.4) 0px 9px 24px, 0 0 0 1px
    rgba(255, 255, 255, 0.1);

  --scalar-button-1: #f6f6f6;
  --scalar-button-1-color: #000;
  --scalar-button-1-hover: #e7e7e7;

  --scalar-color-green: #26b226;
  --scalar-color-red: #fb565b;
  --scalar-color-yellow: #ffc426;
  --scalar-color-blue: #6ecfef;
  --scalar-color-orange: #ff8d4d;
  --scalar-color-purple: #b191f9;
}
`;var PU=`/* basic theme */
.light-mode {
  --scalar-color-1: #2a2f45;
  --scalar-color-2: #757575;
  --scalar-color-3: #8e8e8e;
  --scalar-color-accent: #7070ff;

  --scalar-background-1: #fff;
  --scalar-background-2: #f6f6f6;
  --scalar-background-3: #e7e7e7;
  --scalar-background-accent: #7070ff1f;

  --scalar-border-color: rgba(0, 0, 0, 0.1);

  --scalar-code-language-color-supersede: var(--scalar-color-3);
}
.dark-mode {
  --scalar-color-1: #f7f8f8;
  --scalar-color-2: rgb(180, 188, 208);
  --scalar-color-3: #b4bcd099;
  --scalar-color-accent: #828fff;

  --scalar-background-1: #000212;
  --scalar-background-2: #0d0f1e;
  --scalar-background-3: #232533;
  --scalar-background-accent: #8ab4f81f;

  --scalar-border-color: #313245;
  --scalar-code-language-color-supersede: var(--scalar-color-3);
}
/* Document Sidebar */
.light-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-item-hover-color: currentColor;
  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-active-background: var(--scalar-background-accent);
  --scalar-sidebar-border-color: var(--scalar-border-color);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-color-active: var(--scalar-color-accent);
  --scalar-sidebar-search-background: rgba(0, 0, 0, 0.05);
  --scalar-sidebar-search-border-color: 1px solid rgba(0, 0, 0, 0.05);
  --scalar-sidebar-search-color: var(--scalar-color-3);
  --scalar-background-2: rgba(0, 0, 0, 0.03);
}
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-item-hover-color: currentColor;
  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-active-background: rgba(255, 255, 255, 0.1);
  --scalar-sidebar-border-color: var(--scalar-border-color);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-color-active: var(--scalar-color-accent);
  --scalar-sidebar-search-background: rgba(255, 255, 255, 0.1);
  --scalar-sidebar-search-border-color: 1px solid rgba(255, 255, 255, 0.05);
  --scalar-sidebar-search-color: var(--scalar-color-3);
}
/* advanced */
.light-mode {
  --scalar-color-green: #069061;
  --scalar-color-red: #ef0006;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #0082d0;
  --scalar-color-orange: #fb892c;
  --scalar-color-purple: #5203d1;

  --scalar-button-1: rgba(0, 0, 0, 1);
  --scalar-button-1-hover: rgba(0, 0, 0, 0.8);
  --scalar-button-1-color: rgba(255, 255, 255, 0.9);
}
.dark-mode {
  --scalar-color-green: #00b648;
  --scalar-color-red: #dc1b19;
  --scalar-color-yellow: #ffc90d;
  --scalar-color-blue: #4eb3ec;
  --scalar-color-orange: #ff8d4d;
  --scalar-color-purple: #b191f9;

  --scalar-button-1: rgba(255, 255, 255, 1);
  --scalar-button-1-hover: rgba(255, 255, 255, 0.9);
  --scalar-button-1-color: black;
}
/* Custom Theme */
.dark-mode h2.t-editor__heading,
.dark-mode .t-editor__page-title h1,
.dark-mode h1.section-header:not(::selection),
.dark-mode .markdown h1,
.dark-mode .markdown h2,
.dark-mode .markdown h3,
.dark-mode .markdown h4,
.dark-mode .markdown h5,
.dark-mode .markdown h6 {
  -webkit-text-fill-color: transparent;
  background-image: linear-gradient(to right bottom, rgb(255, 255, 255) 30%, rgba(255, 255, 255, 0.38));
  -webkit-background-clip: text;
  background-clip: text;
}
.sidebar-search {
  backdrop-filter: blur(12px);
}
@keyframes headerbackground {
  from {
    background: transparent;
    backdrop-filter: none;
  }
  to {
    background: var(--header-background-1);
    backdrop-filter: blur(12px);
  }
}
.dark-mode .scalar-card {
  background: rgba(255, 255, 255, 0.05) !important;
}
.dark-mode .scalar-card * {
  --scalar-background-2: transparent !important;
  --scalar-background-1: transparent !important;
}
.light-mode .dark-mode.scalar-card *,
.light-mode .dark-mode.scalar-card {
  --scalar-background-1: #0d0f1e !important;
  --scalar-background-2: #0d0f1e !important;
  --scalar-background-3: #191b29 !important;
}
.light-mode .dark-mode.scalar-card {
  background: #191b29 !important;
}
.badge {
  box-shadow: 0 0 0 1px var(--scalar-border-color);
  margin-right: 6px;
}

.table-row.required-parameter .table-row-item:nth-of-type(2):after {
  background: transparent;
  box-shadow: none;
}
/* Hero Section Flare */
.section-flare {
  width: 100vw;
  background: radial-gradient(ellipse 80% 50% at 50% -20%, rgba(120, 119, 198, 0.3), transparent);
  height: 100vh;
}
.light-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-accent), transparent 70%);
}
.dark-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-accent), transparent 50%);
}
`;var VU=`/* basic theme */
:root {
  --scalar-text-decoration: underline;
  --scalar-text-decoration-hover: underline;
}
.light-mode {
  --scalar-background-1: #f9f6f0;
  --scalar-background-2: #f2efe8;
  --scalar-background-3: #e9e7e2;
  --scalar-border-color: rgba(203, 165, 156, 0.6);

  --scalar-color-1: #c75549;
  --scalar-color-2: #c75549;
  --scalar-color-3: #c75549;

  --scalar-color-accent: #c75549;
  --scalar-background-accent: #dcbfa81f;

  --scalar-code-language-color-supersede: var(--scalar-color-1);
}
.dark-mode {
  --scalar-background-1: #140507;
  --scalar-background-2: #20090c;
  --scalar-background-3: #321116;
  --scalar-border-color: #3c3031;

  --scalar-color-1: rgba(255, 255, 255, 0.9);
  --scalar-color-2: rgba(255, 255, 255, 0.62);
  --scalar-color-3: rgba(255, 255, 255, 0.44);

  --scalar-color-accent: rgba(255, 255, 255, 0.9);
  --scalar-background-accent: #441313;

  --scalar-code-language-color-supersede: var(--scalar-color-1);
}

/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-color: currentColor;
  --scalar-sidebar-item-hover-background: var(--scalar-background-2);

  --scalar-sidebar-item-active-background: var(--scalar-background-3);
  --scalar-sidebar-color-active: var(--scalar-color-accent);

  --scalar-sidebar-search-background: rgba(255, 255, 255, 0.1);
  --scalar-sidebar-search-color: var(--scalar-color-3);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
  z-index: 1;
}
/* advanced */
.light-mode {
  --scalar-color-green: #09533a;
  --scalar-color-red: #aa181d;
  --scalar-color-yellow: #ab8d2b;
  --scalar-color-blue: #19689a;
  --scalar-color-orange: #b26c34;
  --scalar-color-purple: #4c2191;

  --scalar-button-1: rgba(0, 0, 0, 1);
  --scalar-button-1-hover: rgba(0, 0, 0, 0.8);
  --scalar-button-1-color: rgba(255, 255, 255, 0.9);
}
.dark-mode {
  --scalar-color-green: rgba(69, 255, 165, 0.823);
  --scalar-color-red: #ff8589;
  --scalar-color-yellow: #ffcc4d;
  --scalar-color-blue: #6bc1fe;
  --scalar-color-orange: #f98943;
  --scalar-color-purple: #b191f9;

  --scalar-button-1: rgba(255, 255, 255, 1);
  --scalar-button-1-hover: rgba(255, 255, 255, 0.9);
  --scalar-button-1-color: black;
}
/* Custom Theme */
.dark-mode h2.t-editor__heading,
.dark-mode .t-editor__page-title h1,
.dark-mode h1.section-header:not(::selection),
.dark-mode .markdown h1,
.dark-mode .markdown h2,
.dark-mode .markdown h3,
.dark-mode .markdown h4,
.dark-mode .markdown h5,
.dark-mode .markdown h6 {
  -webkit-text-fill-color: transparent;
  background-image: linear-gradient(to right bottom, rgb(255, 255, 255) 30%, rgba(255, 255, 255, 0.38));
  -webkit-background-clip: text;
  background-clip: text;
}
.light-mode .t-doc__sidebar {
  --scalar-sidebar-search-background: white;
}
.examples .scalar-card-footer {
  --scalar-background-3: transparent;
  padding-top: 0;
}
/* Hero section flare */
.section-flare {
  overflow-x: hidden;
  height: 100vh;
  left: initial;
}
.section-flare-item:nth-of-type(1) {
  background: #d25019;
  position: relative;
  top: -150px;
  right: -400px;
  width: 80vw;
  height: 500px;
  margin-top: -150px;
  border-radius: 50%;
  filter: blur(100px);
  z-index: 0;
}
.light-mode .section-flare {
  display: none;
}
*::selection {
  background-color: color-mix(in srgb, var(--scalar-color-red), transparent 75%);
}
`;var CU=`.light-mode {
  color-scheme: light;
  --scalar-color-1: #000000;
  --scalar-color-2: #000000;
  --scalar-color-3: #000000;
  --scalar-color-accent: #645b0f;
  --scalar-background-1: #ccc9b3;
  --scalar-background-2: #c2bfaa;
  --scalar-background-3: #b8b5a1;
  --scalar-background-accent: #000000;

  --scalar-border-color: rgba(0, 0, 0, 0.2);
  --scalar-scrollbar-color: rgba(0, 0, 0, 0.18);
  --scalar-scrollbar-color-active: rgba(0, 0, 0, 0.36);
  --scalar-lifted-brightness: 1;
  --scalar-backdrop-brightness: 1;

  --scalar-shadow-1: 0 1px 3px 0 rgba(0, 0, 0, 0.11);
  --scalar-shadow-2: rgba(0, 0, 0, 0.08) 0px 13px 20px 0px, rgba(0, 0, 0, 0.08) 0px 3px 8px 0px,
    var(--scalar-border-color) 0px 0 0 1px;

  --scalar-button-1: rgb(49 53 56);
  --scalar-button-1-color: #fff;
  --scalar-button-1-hover: rgb(28 31 33);

  --scalar-color-red: #b91c1c;
  --scalar-color-orange: #a16207;
  --scalar-color-green: #047857;
  --scalar-color-blue: #1d4ed8;
  --scalar-color-orange: #c2410c;
  --scalar-color-purple: #6d28d9;
}

.dark-mode {
  color-scheme: dark;
  --scalar-color-1: #fffef3;
  --scalar-color-2: #fffef3;
  --scalar-color-3: #fffef3;
  --scalar-color-accent: #c3b531;
  --scalar-background-1: #313332;
  --scalar-background-2: #393b3a;
  --scalar-background-3: #414342;
  --scalar-background-accent: #fffef3;

  --scalar-border-color: #505452;
  --scalar-scrollbar-color: rgba(255, 255, 255, 0.24);
  --scalar-scrollbar-color-active: rgba(255, 255, 255, 0.48);
  --scalar-lifted-brightness: 1.45;
  --scalar-backdrop-brightness: 0.5;

  --scalar-shadow-1: 0 1px 3px 0 rgba(0, 0, 0, 0.11);
  --scalar-shadow-2: rgba(15, 15, 15, 0.2) 0px 3px 6px, rgba(15, 15, 15, 0.4) 0px 9px 24px, 0 0 0 1px
    rgba(255, 255, 255, 0.1);

  --scalar-button-1: #f6f6f6;
  --scalar-button-1-color: #000;
  --scalar-button-1-hover: #e7e7e7;

  --scalar-color-green: #00b648;
  --scalar-color-red: #dc1b19;
  --scalar-color-yellow: #ffc90d;
  --scalar-color-blue: #4eb3ec;
  --scalar-color-orange: #ff8d4d;
  --scalar-color-purple: #b191f9;
}

/* Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-hover-color: currentColor;

  --scalar-sidebar-item-active-background: var(--scalar-background-3);
  --scalar-sidebar-color-active: var(--scalar-color-1);

  --scalar-sidebar-search-background: transparent;
  --scalar-sidebar-search-color: var(--scalar-color-3);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
}
*::selection {
  background-color: color-mix(in srgb, var(--scalar-color-accent), transparent 80%);
}
`;var EU=`/* basic theme */
.light-mode {
  --scalar-background-1: #fff;
  --scalar-background-2: #f5f6f8;
  --scalar-background-3: #eceef1;

  --scalar-color-1: #2a2f45;
  --scalar-color-2: #757575;
  --scalar-color-3: #8e8e8e;

  --scalar-color-accent: #5469d4;
  --scalar-background-accent: #5469d41f;

  --scalar-border-color: rgba(215, 215, 206, 0.68);
}
.dark-mode {
  --scalar-background-1: #15171c;
  --scalar-background-2: #1c1e24;
  --scalar-background-3: #22252b;

  --scalar-color-1: #fafafa;
  --scalar-color-2: #c9ced8;
  --scalar-color-3: #8c99ad;

  --scalar-color-accent: #5469d4;
  --scalar-background-accent: #5469d41f;

  --scalar-border-color: #3f4145;
}
/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-color: currentColor;
  --scalar-sidebar-item-hover-background: var(--scalar-background-3);

  --scalar-sidebar-item-active-background: var(--scalar-background-accent);
  --scalar-sidebar-color-active: var(--scalar-color-accent);

  --scalar-sidebar-search-background: var(--scalar-background-1);
  --scalar-sidebar-search-color: var(--scalar-color-3);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
}

/* advanced */
.light-mode {
  --scalar-color-green: #17803d;
  --scalar-color-red: #e10909;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #1763a6;
  --scalar-color-orange: #e25b09;
  --scalar-color-purple: #5c3993;

  --scalar-button-1: rgba(0, 0, 0, 1);
  --scalar-button-1-hover: rgba(0, 0, 0, 0.8);
  --scalar-button-1-color: rgba(255, 255, 255, 0.9);
}
.dark-mode {
  --scalar-color-green: #30a159;
  --scalar-color-red: #dc1b19;
  --scalar-color-yellow: #eec644;
  --scalar-color-blue: #2b7abf;
  --scalar-color-orange: #f07528;
  --scalar-color-purple: #7a59b1;

  --scalar-button-1: rgba(255, 255, 255, 1);
  --scalar-button-1-hover: rgba(255, 255, 255, 0.9);
  --scalar-button-1-color: black;
}
.light-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-accent), transparent 70%);
}
.dark-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-accent), transparent 50%);
}
`;var bU=`/* basic theme */
.light-mode {
  --scalar-background-1: #f3f3ee;
  --scalar-background-2: #e8e8e3;
  --scalar-background-3: #e4e4df;
  --scalar-border-color: rgba(215, 215, 206, 0.85);

  --scalar-color-1: #2a2f45;
  --scalar-color-2: #757575;
  --scalar-color-3: #8e8e8e;

  --scalar-color-accent: #1763a6;
  --scalar-background-accent: #1f648e1f;
}
.dark-mode {
  --scalar-background-1: #09090b;
  --scalar-background-2: #18181b;
  --scalar-background-3: #2c2c30;
  --scalar-border-color: rgba(255, 255, 255, 0.17);

  --scalar-color-1: #fafafa;
  --scalar-color-2: rgb(161, 161, 170);
  --scalar-color-3: rgba(255, 255, 255, 0.533);

  --scalar-color-accent: #4eb3ec;
  --scalar-background-accent: #8ab4f81f;
}
/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-hover-color: currentColor;

  --scalar-sidebar-item-active-background: var(--scalar-background-3);
  --scalar-sidebar-color-active: var(--scalar-color-1);

  --scalar-sidebar-search-background: var(--scalar-background-1);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
  --scalar-sidebar-search-color: var(--scalar-color-3);
}

/* advanced */
.light-mode {
  --scalar-color-green: #17803d;
  --scalar-color-red: #e10909;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #1763a6;
  --scalar-color-orange: #e25b09;
  --scalar-color-purple: #5c3993;

  --scalar-button-1: rgba(0, 0, 0, 1);
  --scalar-button-1-hover: rgba(0, 0, 0, 0.8);
  --scalar-button-1-color: rgba(255, 255, 255, 0.9);
}
.dark-mode {
  --scalar-color-green: #30a159;
  --scalar-color-red: #dc1b19;
  --scalar-color-yellow: #eec644;
  --scalar-color-blue: #2b7abf;
  --scalar-color-orange: #f07528;
  --scalar-color-purple: #7a59b1;

  --scalar-button-1: rgba(255, 255, 255, 1);
  --scalar-button-1-hover: rgba(255, 255, 255, 0.9);
  --scalar-button-1-color: black;
}
.dark-mode h2.t-editor__heading,
.dark-mode .t-editor__page-title h1,
.dark-mode h1.section-header:not(::selection),
.dark-mode .markdown h1,
.dark-mode .markdown h2,
.dark-mode .markdown h3,
.dark-mode .markdown h4,
.dark-mode .markdown h5,
.dark-mode .markdown h6 {
  -webkit-text-fill-color: transparent;
  background-image: linear-gradient(to right bottom, rgb(255, 255, 255) 30%, rgba(255, 255, 255, 0.38));
  -webkit-background-clip: text;
  background-clip: text;
}
.light-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-accent), transparent 70%);
}
.dark-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-accent), transparent 50%);
}
`;var IU=`.light-mode {
  color-scheme: light;
  --scalar-color-1: #584c27;
  --scalar-color-2: #616161;
  --scalar-color-3: #a89f84;
  --scalar-color-accent: #b58900;
  --scalar-background-1: #fdf6e3;
  --scalar-background-2: #eee8d5;
  --scalar-background-3: #ddd6c1;
  --scalar-background-accent: #b589001f;

  --scalar-border-color: #ded8c8;
  --scalar-scrollbar-color: rgba(0, 0, 0, 0.18);
  --scalar-scrollbar-color-active: rgba(0, 0, 0, 0.36);
  --scalar-lifted-brightness: 1;
  --scalar-backdrop-brightness: 1;

  --scalar-shadow-1: 0 1px 3px 0 rgba(0, 0, 0, 0.11);
  --scalar-shadow-2: rgba(0, 0, 0, 0.08) 0px 13px 20px 0px, rgba(0, 0, 0, 0.08) 0px 3px 8px 0px, #eeeeed 0px 0 0 1px;

  --scalar-button-1: rgb(49 53 56);
  --scalar-button-1-color: #fff;
  --scalar-button-1-hover: rgb(28 31 33);

  --scalar-color-red: #b91c1c;
  --scalar-color-orange: #a16207;
  --scalar-color-green: #047857;
  --scalar-color-blue: #1d4ed8;
  --scalar-color-orange: #c2410c;
  --scalar-color-purple: #6d28d9;
}

.dark-mode {
  color-scheme: dark;
  --scalar-color-1: #fff;
  --scalar-color-2: #cccccc;
  --scalar-color-3: #6d8890;
  --scalar-color-accent: #007acc;
  --scalar-background-1: #00212b;
  --scalar-background-2: #012b36;
  --scalar-background-3: #004052;
  --scalar-background-accent: #015a6f;

  --scalar-border-color: #2f4851;
  --scalar-scrollbar-color: rgba(255, 255, 255, 0.24);
  --scalar-scrollbar-color-active: rgba(255, 255, 255, 0.48);
  --scalar-lifted-brightness: 1.45;
  --scalar-backdrop-brightness: 0.5;

  --scalar-shadow-1: 0 1px 3px 0 rgb(0, 0, 0, 0.1);
  --scalar-shadow-2: rgba(15, 15, 15, 0.2) 0px 3px 6px, rgba(15, 15, 15, 0.4) 0px 9px 24px, 0 0 0 1px
    rgba(255, 255, 255, 0.1);

  --scalar-button-1: #f6f6f6;
  --scalar-button-1-color: #000;
  --scalar-button-1-hover: #e7e7e7;

  --scalar-color-green: #00b648;
  --scalar-color-red: #dc1b19;
  --scalar-color-yellow: #ffc90d;
  --scalar-color-blue: #4eb3ec;
  --scalar-color-orange: #ff8d4d;
  --scalar-color-purple: #b191f9;
}

/* Sidebar */
.light-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-item-hover-color: currentColor;
  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-active-background: var(--scalar-background-accent);
  --scalar-sidebar-border-color: var(--scalar-border-color);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-color-active: var(--scalar-color-accent);
  --scalar-sidebar-search-background: var(--scalar-background-2);
  --scalar-sidebar-search-border-color: var(--scalar-sidebar-search-background);
  --scalar-sidebar-search--color: var(--scalar-color-3);
}

.dark-mode .sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-item-hover-color: currentColor;
  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-active-background: var(--scalar-background-accent);
  --scalar-sidebar-border-color: var(--scalar-border-color);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-color-active: var(--scalar-sidebar-color-1);
  --scalar-sidebar-search-background: var(--scalar-background-2);
  --scalar-sidebar-search-border-color: var(--scalar-sidebar-search-background);
  --scalar-sidebar-search--color: var(--scalar-color-3);
}
*::selection {
  background-color: color-mix(in srgb, var(--scalar-color-accent), transparent 70%);
}
`;var _={};f2(_,{void:()=>Q_,util:()=>O0,unknown:()=>X_,union:()=>M_,undefined:()=>aD,tuple:()=>B_,transformer:()=>K_,symbol:()=>tD,string:()=>dU,strictObject:()=>G_,setErrorMap:()=>SD,set:()=>z_,record:()=>q_,quotelessJson:()=>KD,promise:()=>j_,preprocess:()=>D_,pipeline:()=>__,ostring:()=>R_,optional:()=>F_,onumber:()=>P_,oboolean:()=>V_,objectUtil:()=>BY,object:()=>J_,number:()=>cU,nullable:()=>S_,null:()=>eD,never:()=>Y_,nativeEnum:()=>L_,nan:()=>oD,map:()=>N_,makeIssue:()=>P9,literal:()=>A_,lazy:()=>w_,late:()=>iD,isValid:()=>x8,isDirty:()=>z$,isAsync:()=>N4,isAborted:()=>N$,intersection:()=>H_,instanceof:()=>nD,getParsedType:()=>C2,getErrorMap:()=>q4,function:()=>O_,enum:()=>Z_,effect:()=>K_,discriminatedUnion:()=>U_,defaultErrorMap:()=>M8,datetimeRegex:()=>vU,date:()=>sD,custom:()=>hU,coerce:()=>C_,boolean:()=>mU,bigint:()=>rD,array:()=>W_,any:()=>$_,addIssueToContext:()=>m,ZodVoid:()=>C9,ZodUnknown:()=>k8,ZodUnion:()=>L4,ZodUndefined:()=>A4,ZodType:()=>U0,ZodTuple:()=>b2,ZodTransformer:()=>z2,ZodSymbol:()=>V9,ZodString:()=>H2,ZodSet:()=>F6,ZodSchema:()=>U0,ZodRecord:()=>E9,ZodReadonly:()=>R4,ZodPromise:()=>S6,ZodPipeline:()=>T9,ZodParsedType:()=>d,ZodOptional:()=>q2,ZodObject:()=>Y1,ZodNumber:()=>g8,ZodNullable:()=>H8,ZodNull:()=>Z4,ZodNever:()=>E2,ZodNativeEnum:()=>S4,ZodNaN:()=>I9,ZodMap:()=>b9,ZodLiteral:()=>F4,ZodLazy:()=>K4,ZodIssueCode:()=>k,ZodIntersection:()=>j4,ZodFunction:()=>O4,ZodFirstPartyTypeKind:()=>X0,ZodError:()=>U5,ZodEnum:()=>v8,ZodEffects:()=>z2,ZodDiscriminatedUnion:()=>O$,ZodDefault:()=>D4,ZodDate:()=>j6,ZodCatch:()=>_4,ZodBranded:()=>w$,ZodBoolean:()=>w4,ZodBigInt:()=>f8,ZodArray:()=>B2,ZodAny:()=>K6,Schema:()=>U0,ParseStatus:()=>I1,OK:()=>d1,NEVER:()=>E_,INVALID:()=>a,EMPTY_PATH:()=>DD,DIRTY:()=>L6,BRAND:()=>pD});var O0;(function($){$.assertEqual=(W)=>{};function X(W){}$.assertIs=X;function Y(W){throw new Error}$.assertNever=Y,$.arrayToEnum=(W)=>{let J={};for(let G of W)J[G]=G;return J},$.getValidEnumValues=(W)=>{let J=$.objectKeys(W).filter((U)=>typeof W[W[U]]!=="number"),G={};for(let U of J)G[U]=W[U];return $.objectValues(G)},$.objectValues=(W)=>{return $.objectKeys(W).map(function(J){return W[J]})},$.objectKeys=typeof Object.keys==="function"?(W)=>Object.keys(W):(W)=>{let J=[];for(let G in W)if(Object.prototype.hasOwnProperty.call(W,G))J.push(G);return J},$.find=(W,J)=>{for(let G of W)if(J(G))return G;return},$.isInteger=typeof Number.isInteger==="function"?(W)=>Number.isInteger(W):(W)=>typeof W==="number"&&Number.isFinite(W)&&Math.floor(W)===W;function Q(W,J=" | "){return W.map((G)=>typeof G==="string"?`'${G}'`:G).join(J)}$.joinValues=Q,$.jsonStringifyReplacer=(W,J)=>{if(typeof J==="bigint")return J.toString();return J}})(O0||(O0={}));var BY;(function($){$.mergeShapes=(X,Y)=>{return{...X,...Y}}})(BY||(BY={}));var d=O0.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),C2=($)=>{switch(typeof $){case"undefined":return d.undefined;case"string":return d.string;case"number":return Number.isNaN($)?d.nan:d.number;case"boolean":return d.boolean;case"function":return d.function;case"bigint":return d.bigint;case"symbol":return d.symbol;case"object":if(Array.isArray($))return d.array;if($===null)return d.null;if($.then&&typeof $.then==="function"&&$.catch&&typeof $.catch==="function")return d.promise;if(typeof Map!=="undefined"&&$ instanceof Map)return d.map;if(typeof Set!=="undefined"&&$ instanceof Set)return d.set;if(typeof Date!=="undefined"&&$ instanceof Date)return d.date;return d.object;default:return d.unknown}};var k=O0.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),KD=($)=>{return JSON.stringify($,null,2).replace(/"([^"]+)":/g,"$1:")};class U5 extends Error{get errors(){return this.issues}constructor($){super();this.issues=[],this.addIssue=(Y)=>{this.issues=[...this.issues,Y]},this.addIssues=(Y=[])=>{this.issues=[...this.issues,...Y]};let X=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,X);else this.__proto__=X;this.name="ZodError",this.issues=$}format($){let X=$||function(W){return W.message},Y={_errors:[]},Q=(W)=>{for(let J of W.issues)if(J.code==="invalid_union")J.unionErrors.map(Q);else if(J.code==="invalid_return_type")Q(J.returnTypeError);else if(J.code==="invalid_arguments")Q(J.argumentsError);else if(J.path.length===0)Y._errors.push(X(J));else{let G=Y,U=0;while(U<J.path.length){let H=J.path[U];if(U!==J.path.length-1)G[H]=G[H]||{_errors:[]};else G[H]=G[H]||{_errors:[]},G[H]._errors.push(X(J));G=G[H],U++}}};return Q(this),Y}static assert($){if(!($ instanceof U5))throw new Error(`Not a ZodError: ${$}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,O0.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten($=(X)=>X.message){let X={},Y=[];for(let Q of this.issues)if(Q.path.length>0)X[Q.path[0]]=X[Q.path[0]]||[],X[Q.path[0]].push($(Q));else Y.push($(Q));return{formErrors:Y,fieldErrors:X}}get formErrors(){return this.flatten()}}U5.create=($)=>{return new U5($)};var FD=($,X)=>{let Y;switch($.code){case k.invalid_type:if($.received===d.undefined)Y="Required";else Y=`Expected ${$.expected}, received ${$.received}`;break;case k.invalid_literal:Y=`Invalid literal value, expected ${JSON.stringify($.expected,O0.jsonStringifyReplacer)}`;break;case k.unrecognized_keys:Y=`Unrecognized key(s) in object: ${O0.joinValues($.keys,", ")}`;break;case k.invalid_union:Y="Invalid input";break;case k.invalid_union_discriminator:Y=`Invalid discriminator value. Expected ${O0.joinValues($.options)}`;break;case k.invalid_enum_value:Y=`Invalid enum value. Expected ${O0.joinValues($.options)}, received '${$.received}'`;break;case k.invalid_arguments:Y="Invalid function arguments";break;case k.invalid_return_type:Y="Invalid function return type";break;case k.invalid_date:Y="Invalid date";break;case k.invalid_string:if(typeof $.validation==="object")if("includes"in $.validation){if(Y=`Invalid input: must include "${$.validation.includes}"`,typeof $.validation.position==="number")Y=`${Y} at one or more positions greater than or equal to ${$.validation.position}`}else if("startsWith"in $.validation)Y=`Invalid input: must start with "${$.validation.startsWith}"`;else if("endsWith"in $.validation)Y=`Invalid input: must end with "${$.validation.endsWith}"`;else O0.assertNever($.validation);else if($.validation!=="regex")Y=`Invalid ${$.validation}`;else Y="Invalid";break;case k.too_small:if($.type==="array")Y=`Array must contain ${$.exact?"exactly":$.inclusive?"at least":"more than"} ${$.minimum} element(s)`;else if($.type==="string")Y=`String must contain ${$.exact?"exactly":$.inclusive?"at least":"over"} ${$.minimum} character(s)`;else if($.type==="number")Y=`Number must be ${$.exact?"exactly equal to ":$.inclusive?"greater than or equal to ":"greater than "}${$.minimum}`;else if($.type==="date")Y=`Date must be ${$.exact?"exactly equal to ":$.inclusive?"greater than or equal to ":"greater than "}${new Date(Number($.minimum))}`;else Y="Invalid input";break;case k.too_big:if($.type==="array")Y=`Array must contain ${$.exact?"exactly":$.inclusive?"at most":"less than"} ${$.maximum} element(s)`;else if($.type==="string")Y=`String must contain ${$.exact?"exactly":$.inclusive?"at most":"under"} ${$.maximum} character(s)`;else if($.type==="number")Y=`Number must be ${$.exact?"exactly":$.inclusive?"less than or equal to":"less than"} ${$.maximum}`;else if($.type==="bigint")Y=`BigInt must be ${$.exact?"exactly":$.inclusive?"less than or equal to":"less than"} ${$.maximum}`;else if($.type==="date")Y=`Date must be ${$.exact?"exactly":$.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number($.maximum))}`;else Y="Invalid input";break;case k.custom:Y="Invalid input";break;case k.invalid_intersection_types:Y="Intersection results could not be merged";break;case k.not_multiple_of:Y=`Number must be a multiple of ${$.multipleOf}`;break;case k.not_finite:Y="Number must be finite";break;default:Y=X.defaultError,O0.assertNever($)}return{message:Y}},M8=FD;var TU=M8;function SD($){TU=$}function q4(){return TU}var P9=($)=>{let{data:X,path:Y,errorMaps:Q,issueData:W}=$,J=[...Y,...W.path||[]],G={...W,path:J};if(W.message!==void 0)return{...W,path:J,message:W.message};let U="",H=Q.filter((B)=>!!B).slice().reverse();for(let B of H)U=B(G,{data:X,defaultError:U}).message;return{...W,path:J,message:U}},DD=[];function m($,X){let Y=q4(),Q=P9({issueData:X,data:$.data,path:$.path,errorMaps:[$.common.contextualErrorMap,$.schemaErrorMap,Y,Y===M8?void 0:M8].filter((W)=>!!W)});$.common.issues.push(Q)}class I1{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray($,X){let Y=[];for(let Q of X){if(Q.status==="aborted")return a;if(Q.status==="dirty")$.dirty();Y.push(Q.value)}return{status:$.value,value:Y}}static async mergeObjectAsync($,X){let Y=[];for(let Q of X){let W=await Q.key,J=await Q.value;Y.push({key:W,value:J})}return I1.mergeObjectSync($,Y)}static mergeObjectSync($,X){let Y={};for(let Q of X){let{key:W,value:J}=Q;if(W.status==="aborted")return a;if(J.status==="aborted")return a;if(W.status==="dirty")$.dirty();if(J.status==="dirty")$.dirty();if(W.value!=="__proto__"&&(typeof J.value!=="undefined"||Q.alwaysSet))Y[W.value]=J.value}return{status:$.value,value:Y}}}var a=Object.freeze({status:"aborted"}),L6=($)=>({status:"dirty",value:$}),d1=($)=>({status:"valid",value:$}),N$=($)=>$.status==="aborted",z$=($)=>$.status==="dirty",x8=($)=>$.status==="valid",N4=($)=>typeof Promise!=="undefined"&&$ instanceof Promise;var p;(function($){$.errToObj=(X)=>typeof X==="string"?{message:X}:X||{},$.toString=(X)=>typeof X==="string"?X:X?.message})(p||(p={}));class N2{constructor($,X,Y,Q){this._cachedPath=[],this.parent=$,this.data=X,this._path=Y,this._key=Q}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var xU=($,X)=>{if(x8(X))return{success:!0,data:X.value};else{if(!$.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let Y=new U5($.common.issues);return this._error=Y,this._error}}}};function W0($){if(!$)return{};let{errorMap:X,invalid_type_error:Y,required_error:Q,description:W}=$;if(X&&(Y||Q))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(X)return{errorMap:X,description:W};return{errorMap:(G,U)=>{let{message:H}=$;if(G.code==="invalid_enum_value")return{message:H??U.defaultError};if(typeof U.data==="undefined")return{message:H??Q??U.defaultError};if(G.code!=="invalid_type")return{message:U.defaultError};return{message:H??Y??U.defaultError}},description:W}}class U0{get description(){return this._def.description}_getType($){return C2($.data)}_getOrReturnCtx($,X){return X||{common:$.parent.common,data:$.data,parsedType:C2($.data),schemaErrorMap:this._def.errorMap,path:$.path,parent:$.parent}}_processInputParams($){return{status:new I1,ctx:{common:$.parent.common,data:$.data,parsedType:C2($.data),schemaErrorMap:this._def.errorMap,path:$.path,parent:$.parent}}}_parseSync($){let X=this._parse($);if(N4(X))throw new Error("Synchronous parse encountered promise.");return X}_parseAsync($){let X=this._parse($);return Promise.resolve(X)}parse($,X){let Y=this.safeParse($,X);if(Y.success)return Y.data;throw Y.error}safeParse($,X){let Y={common:{issues:[],async:X?.async??!1,contextualErrorMap:X?.errorMap},path:X?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:$,parsedType:C2($)},Q=this._parseSync({data:$,path:Y.path,parent:Y});return xU(Y,Q)}"~validate"($){let X={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:$,parsedType:C2($)};if(!this["~standard"].async)try{let Y=this._parseSync({data:$,path:[],parent:X});return x8(Y)?{value:Y.value}:{issues:X.common.issues}}catch(Y){if(Y?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;X.common={issues:[],async:!0}}return this._parseAsync({data:$,path:[],parent:X}).then((Y)=>x8(Y)?{value:Y.value}:{issues:X.common.issues})}async parseAsync($,X){let Y=await this.safeParseAsync($,X);if(Y.success)return Y.data;throw Y.error}async safeParseAsync($,X){let Y={common:{issues:[],contextualErrorMap:X?.errorMap,async:!0},path:X?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:$,parsedType:C2($)},Q=this._parse({data:$,path:Y.path,parent:Y}),W=await(N4(Q)?Q:Promise.resolve(Q));return xU(Y,W)}refine($,X){let Y=(Q)=>{if(typeof X==="string"||typeof X==="undefined")return{message:X};else if(typeof X==="function")return X(Q);else return X};return this._refinement((Q,W)=>{let J=$(Q),G=()=>W.addIssue({code:k.custom,...Y(Q)});if(typeof Promise!=="undefined"&&J instanceof Promise)return J.then((U)=>{if(!U)return G(),!1;else return!0});if(!J)return G(),!1;else return!0})}refinement($,X){return this._refinement((Y,Q)=>{if(!$(Y))return Q.addIssue(typeof X==="function"?X(Y,Q):X),!1;else return!0})}_refinement($){return new z2({schema:this,typeName:X0.ZodEffects,effect:{type:"refinement",refinement:$}})}superRefine($){return this._refinement($)}constructor($){this.spa=this.safeParseAsync,this._def=$,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(X)=>this["~validate"](X)}}optional(){return q2.create(this,this._def)}nullable(){return H8.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return B2.create(this)}promise(){return S6.create(this,this._def)}or($){return L4.create([this,$],this._def)}and($){return j4.create(this,$,this._def)}transform($){return new z2({...W0(this._def),schema:this,typeName:X0.ZodEffects,effect:{type:"transform",transform:$}})}default($){let X=typeof $==="function"?$:()=>$;return new D4({...W0(this._def),innerType:this,defaultValue:X,typeName:X0.ZodDefault})}brand(){return new w$({typeName:X0.ZodBranded,type:this,...W0(this._def)})}catch($){let X=typeof $==="function"?$:()=>$;return new _4({...W0(this._def),innerType:this,catchValue:X,typeName:X0.ZodCatch})}describe($){return new this.constructor({...this._def,description:$})}pipe($){return T9.create(this,$)}readonly(){return R4.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var _D=/^c[^\s-]{8,}$/i,RD=/^[0-9a-z]+$/,PD=/^[0-9A-HJKMNP-TV-Z]{26}$/i,VD=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,CD=/^[a-z0-9_-]{21}$/i,ED=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,bD=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ID=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,TD="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",qY,xD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,kD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,gD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,fD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,vD=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,yD=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,gU="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",hD=new RegExp(`^${gU}$`);function fU($){let X="[0-5]\\d";if($.precision)X=`${X}\\.\\d{${$.precision}}`;else if($.precision==null)X=`${X}(\\.\\d+)?`;let Y=$.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${X})${Y}`}function dD($){return new RegExp(`^${fU($)}$`)}function vU($){let X=`${gU}T${fU($)}`,Y=[];if(Y.push($.local?"Z?":"Z"),$.offset)Y.push("([+-]\\d{2}:?\\d{2})");return X=`${X}(${Y.join("|")})`,new RegExp(`^${X}$`)}function cD($,X){if((X==="v4"||!X)&&xD.test($))return!0;if((X==="v6"||!X)&&gD.test($))return!0;return!1}function mD($,X){if(!ED.test($))return!1;try{let[Y]=$.split("."),Q=Y.replace(/-/g,"+").replace(/_/g,"/").padEnd(Y.length+(4-Y.length%4)%4,"="),W=JSON.parse(atob(Q));if(typeof W!=="object"||W===null)return!1;if("typ"in W&&W?.typ!=="JWT")return!1;if(!W.alg)return!1;if(X&&W.alg!==X)return!1;return!0}catch{return!1}}function uD($,X){if((X==="v4"||!X)&&kD.test($))return!0;if((X==="v6"||!X)&&fD.test($))return!0;return!1}class H2 extends U0{_parse($){if(this._def.coerce)$.data=String($.data);if(this._getType($)!==d.string){let W=this._getOrReturnCtx($);return m(W,{code:k.invalid_type,expected:d.string,received:W.parsedType}),a}let Y=new I1,Q=void 0;for(let W of this._def.checks)if(W.kind==="min"){if($.data.length<W.value)Q=this._getOrReturnCtx($,Q),m(Q,{code:k.too_small,minimum:W.value,type:"string",inclusive:!0,exact:!1,message:W.message}),Y.dirty()}else if(W.kind==="max"){if($.data.length>W.value)Q=this._getOrReturnCtx($,Q),m(Q,{code:k.too_big,maximum:W.value,type:"string",inclusive:!0,exact:!1,message:W.message}),Y.dirty()}else if(W.kind==="length"){let J=$.data.length>W.value,G=$.data.length<W.value;if(J||G){if(Q=this._getOrReturnCtx($,Q),J)m(Q,{code:k.too_big,maximum:W.value,type:"string",inclusive:!0,exact:!0,message:W.message});else if(G)m(Q,{code:k.too_small,minimum:W.value,type:"string",inclusive:!0,exact:!0,message:W.message});Y.dirty()}}else if(W.kind==="email"){if(!ID.test($.data))Q=this._getOrReturnCtx($,Q),m(Q,{validation:"email",code:k.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="emoji"){if(!qY)qY=new RegExp(TD,"u");if(!qY.test($.data))Q=this._getOrReturnCtx($,Q),m(Q,{validation:"emoji",code:k.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="uuid"){if(!VD.test($.data))Q=this._getOrReturnCtx($,Q),m(Q,{validation:"uuid",code:k.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="nanoid"){if(!CD.test($.data))Q=this._getOrReturnCtx($,Q),m(Q,{validation:"nanoid",code:k.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="cuid"){if(!_D.test($.data))Q=this._getOrReturnCtx($,Q),m(Q,{validation:"cuid",code:k.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="cuid2"){if(!RD.test($.data))Q=this._getOrReturnCtx($,Q),m(Q,{validation:"cuid2",code:k.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="ulid"){if(!PD.test($.data))Q=this._getOrReturnCtx($,Q),m(Q,{validation:"ulid",code:k.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="url")try{new URL($.data)}catch{Q=this._getOrReturnCtx($,Q),m(Q,{validation:"url",code:k.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="regex"){if(W.regex.lastIndex=0,!W.regex.test($.data))Q=this._getOrReturnCtx($,Q),m(Q,{validation:"regex",code:k.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="trim")$.data=$.data.trim();else if(W.kind==="includes"){if(!$.data.includes(W.value,W.position))Q=this._getOrReturnCtx($,Q),m(Q,{code:k.invalid_string,validation:{includes:W.value,position:W.position},message:W.message}),Y.dirty()}else if(W.kind==="toLowerCase")$.data=$.data.toLowerCase();else if(W.kind==="toUpperCase")$.data=$.data.toUpperCase();else if(W.kind==="startsWith"){if(!$.data.startsWith(W.value))Q=this._getOrReturnCtx($,Q),m(Q,{code:k.invalid_string,validation:{startsWith:W.value},message:W.message}),Y.dirty()}else if(W.kind==="endsWith"){if(!$.data.endsWith(W.value))Q=this._getOrReturnCtx($,Q),m(Q,{code:k.invalid_string,validation:{endsWith:W.value},message:W.message}),Y.dirty()}else if(W.kind==="datetime"){if(!vU(W).test($.data))Q=this._getOrReturnCtx($,Q),m(Q,{code:k.invalid_string,validation:"datetime",message:W.message}),Y.dirty()}else if(W.kind==="date"){if(!hD.test($.data))Q=this._getOrReturnCtx($,Q),m(Q,{code:k.invalid_string,validation:"date",message:W.message}),Y.dirty()}else if(W.kind==="time"){if(!dD(W).test($.data))Q=this._getOrReturnCtx($,Q),m(Q,{code:k.invalid_string,validation:"time",message:W.message}),Y.dirty()}else if(W.kind==="duration"){if(!bD.test($.data))Q=this._getOrReturnCtx($,Q),m(Q,{validation:"duration",code:k.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="ip"){if(!cD($.data,W.version))Q=this._getOrReturnCtx($,Q),m(Q,{validation:"ip",code:k.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="jwt"){if(!mD($.data,W.alg))Q=this._getOrReturnCtx($,Q),m(Q,{validation:"jwt",code:k.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="cidr"){if(!uD($.data,W.version))Q=this._getOrReturnCtx($,Q),m(Q,{validation:"cidr",code:k.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="base64"){if(!vD.test($.data))Q=this._getOrReturnCtx($,Q),m(Q,{validation:"base64",code:k.invalid_string,message:W.message}),Y.dirty()}else if(W.kind==="base64url"){if(!yD.test($.data))Q=this._getOrReturnCtx($,Q),m(Q,{validation:"base64url",code:k.invalid_string,message:W.message}),Y.dirty()}else O0.assertNever(W);return{status:Y.value,value:$.data}}_regex($,X,Y){return this.refinement((Q)=>$.test(Q),{validation:X,code:k.invalid_string,...p.errToObj(Y)})}_addCheck($){return new H2({...this._def,checks:[...this._def.checks,$]})}email($){return this._addCheck({kind:"email",...p.errToObj($)})}url($){return this._addCheck({kind:"url",...p.errToObj($)})}emoji($){return this._addCheck({kind:"emoji",...p.errToObj($)})}uuid($){return this._addCheck({kind:"uuid",...p.errToObj($)})}nanoid($){return this._addCheck({kind:"nanoid",...p.errToObj($)})}cuid($){return this._addCheck({kind:"cuid",...p.errToObj($)})}cuid2($){return this._addCheck({kind:"cuid2",...p.errToObj($)})}ulid($){return this._addCheck({kind:"ulid",...p.errToObj($)})}base64($){return this._addCheck({kind:"base64",...p.errToObj($)})}base64url($){return this._addCheck({kind:"base64url",...p.errToObj($)})}jwt($){return this._addCheck({kind:"jwt",...p.errToObj($)})}ip($){return this._addCheck({kind:"ip",...p.errToObj($)})}cidr($){return this._addCheck({kind:"cidr",...p.errToObj($)})}datetime($){if(typeof $==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:$});return this._addCheck({kind:"datetime",precision:typeof $?.precision==="undefined"?null:$?.precision,offset:$?.offset??!1,local:$?.local??!1,...p.errToObj($?.message)})}date($){return this._addCheck({kind:"date",message:$})}time($){if(typeof $==="string")return this._addCheck({kind:"time",precision:null,message:$});return this._addCheck({kind:"time",precision:typeof $?.precision==="undefined"?null:$?.precision,...p.errToObj($?.message)})}duration($){return this._addCheck({kind:"duration",...p.errToObj($)})}regex($,X){return this._addCheck({kind:"regex",regex:$,...p.errToObj(X)})}includes($,X){return this._addCheck({kind:"includes",value:$,position:X?.position,...p.errToObj(X?.message)})}startsWith($,X){return this._addCheck({kind:"startsWith",value:$,...p.errToObj(X)})}endsWith($,X){return this._addCheck({kind:"endsWith",value:$,...p.errToObj(X)})}min($,X){return this._addCheck({kind:"min",value:$,...p.errToObj(X)})}max($,X){return this._addCheck({kind:"max",value:$,...p.errToObj(X)})}length($,X){return this._addCheck({kind:"length",value:$,...p.errToObj(X)})}nonempty($){return this.min(1,p.errToObj($))}trim(){return new H2({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new H2({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new H2({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(($)=>$.kind==="datetime")}get isDate(){return!!this._def.checks.find(($)=>$.kind==="date")}get isTime(){return!!this._def.checks.find(($)=>$.kind==="time")}get isDuration(){return!!this._def.checks.find(($)=>$.kind==="duration")}get isEmail(){return!!this._def.checks.find(($)=>$.kind==="email")}get isURL(){return!!this._def.checks.find(($)=>$.kind==="url")}get isEmoji(){return!!this._def.checks.find(($)=>$.kind==="emoji")}get isUUID(){return!!this._def.checks.find(($)=>$.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(($)=>$.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(($)=>$.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(($)=>$.kind==="cuid2")}get isULID(){return!!this._def.checks.find(($)=>$.kind==="ulid")}get isIP(){return!!this._def.checks.find(($)=>$.kind==="ip")}get isCIDR(){return!!this._def.checks.find(($)=>$.kind==="cidr")}get isBase64(){return!!this._def.checks.find(($)=>$.kind==="base64")}get isBase64url(){return!!this._def.checks.find(($)=>$.kind==="base64url")}get minLength(){let $=null;for(let X of this._def.checks)if(X.kind==="min"){if($===null||X.value>$)$=X.value}return $}get maxLength(){let $=null;for(let X of this._def.checks)if(X.kind==="max"){if($===null||X.value<$)$=X.value}return $}}H2.create=($)=>{return new H2({checks:[],typeName:X0.ZodString,coerce:$?.coerce??!1,...W0($)})};function lD($,X){let Y=($.toString().split(".")[1]||"").length,Q=(X.toString().split(".")[1]||"").length,W=Y>Q?Y:Q,J=Number.parseInt($.toFixed(W).replace(".","")),G=Number.parseInt(X.toFixed(W).replace(".",""));return J%G/10**W}class g8 extends U0{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse($){if(this._def.coerce)$.data=Number($.data);if(this._getType($)!==d.number){let W=this._getOrReturnCtx($);return m(W,{code:k.invalid_type,expected:d.number,received:W.parsedType}),a}let Y=void 0,Q=new I1;for(let W of this._def.checks)if(W.kind==="int"){if(!O0.isInteger($.data))Y=this._getOrReturnCtx($,Y),m(Y,{code:k.invalid_type,expected:"integer",received:"float",message:W.message}),Q.dirty()}else if(W.kind==="min"){if(W.inclusive?$.data<W.value:$.data<=W.value)Y=this._getOrReturnCtx($,Y),m(Y,{code:k.too_small,minimum:W.value,type:"number",inclusive:W.inclusive,exact:!1,message:W.message}),Q.dirty()}else if(W.kind==="max"){if(W.inclusive?$.data>W.value:$.data>=W.value)Y=this._getOrReturnCtx($,Y),m(Y,{code:k.too_big,maximum:W.value,type:"number",inclusive:W.inclusive,exact:!1,message:W.message}),Q.dirty()}else if(W.kind==="multipleOf"){if(lD($.data,W.value)!==0)Y=this._getOrReturnCtx($,Y),m(Y,{code:k.not_multiple_of,multipleOf:W.value,message:W.message}),Q.dirty()}else if(W.kind==="finite"){if(!Number.isFinite($.data))Y=this._getOrReturnCtx($,Y),m(Y,{code:k.not_finite,message:W.message}),Q.dirty()}else O0.assertNever(W);return{status:Q.value,value:$.data}}gte($,X){return this.setLimit("min",$,!0,p.toString(X))}gt($,X){return this.setLimit("min",$,!1,p.toString(X))}lte($,X){return this.setLimit("max",$,!0,p.toString(X))}lt($,X){return this.setLimit("max",$,!1,p.toString(X))}setLimit($,X,Y,Q){return new g8({...this._def,checks:[...this._def.checks,{kind:$,value:X,inclusive:Y,message:p.toString(Q)}]})}_addCheck($){return new g8({...this._def,checks:[...this._def.checks,$]})}int($){return this._addCheck({kind:"int",message:p.toString($)})}positive($){return this._addCheck({kind:"min",value:0,inclusive:!1,message:p.toString($)})}negative($){return this._addCheck({kind:"max",value:0,inclusive:!1,message:p.toString($)})}nonpositive($){return this._addCheck({kind:"max",value:0,inclusive:!0,message:p.toString($)})}nonnegative($){return this._addCheck({kind:"min",value:0,inclusive:!0,message:p.toString($)})}multipleOf($,X){return this._addCheck({kind:"multipleOf",value:$,message:p.toString(X)})}finite($){return this._addCheck({kind:"finite",message:p.toString($)})}safe($){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:p.toString($)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:p.toString($)})}get minValue(){let $=null;for(let X of this._def.checks)if(X.kind==="min"){if($===null||X.value>$)$=X.value}return $}get maxValue(){let $=null;for(let X of this._def.checks)if(X.kind==="max"){if($===null||X.value<$)$=X.value}return $}get isInt(){return!!this._def.checks.find(($)=>$.kind==="int"||$.kind==="multipleOf"&&O0.isInteger($.value))}get isFinite(){let $=null,X=null;for(let Y of this._def.checks)if(Y.kind==="finite"||Y.kind==="int"||Y.kind==="multipleOf")return!0;else if(Y.kind==="min"){if(X===null||Y.value>X)X=Y.value}else if(Y.kind==="max"){if($===null||Y.value<$)$=Y.value}return Number.isFinite(X)&&Number.isFinite($)}}g8.create=($)=>{return new g8({checks:[],typeName:X0.ZodNumber,coerce:$?.coerce||!1,...W0($)})};class f8 extends U0{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse($){if(this._def.coerce)try{$.data=BigInt($.data)}catch{return this._getInvalidInput($)}if(this._getType($)!==d.bigint)return this._getInvalidInput($);let Y=void 0,Q=new I1;for(let W of this._def.checks)if(W.kind==="min"){if(W.inclusive?$.data<W.value:$.data<=W.value)Y=this._getOrReturnCtx($,Y),m(Y,{code:k.too_small,type:"bigint",minimum:W.value,inclusive:W.inclusive,message:W.message}),Q.dirty()}else if(W.kind==="max"){if(W.inclusive?$.data>W.value:$.data>=W.value)Y=this._getOrReturnCtx($,Y),m(Y,{code:k.too_big,type:"bigint",maximum:W.value,inclusive:W.inclusive,message:W.message}),Q.dirty()}else if(W.kind==="multipleOf"){if($.data%W.value!==BigInt(0))Y=this._getOrReturnCtx($,Y),m(Y,{code:k.not_multiple_of,multipleOf:W.value,message:W.message}),Q.dirty()}else O0.assertNever(W);return{status:Q.value,value:$.data}}_getInvalidInput($){let X=this._getOrReturnCtx($);return m(X,{code:k.invalid_type,expected:d.bigint,received:X.parsedType}),a}gte($,X){return this.setLimit("min",$,!0,p.toString(X))}gt($,X){return this.setLimit("min",$,!1,p.toString(X))}lte($,X){return this.setLimit("max",$,!0,p.toString(X))}lt($,X){return this.setLimit("max",$,!1,p.toString(X))}setLimit($,X,Y,Q){return new f8({...this._def,checks:[...this._def.checks,{kind:$,value:X,inclusive:Y,message:p.toString(Q)}]})}_addCheck($){return new f8({...this._def,checks:[...this._def.checks,$]})}positive($){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:p.toString($)})}negative($){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:p.toString($)})}nonpositive($){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:p.toString($)})}nonnegative($){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:p.toString($)})}multipleOf($,X){return this._addCheck({kind:"multipleOf",value:$,message:p.toString(X)})}get minValue(){let $=null;for(let X of this._def.checks)if(X.kind==="min"){if($===null||X.value>$)$=X.value}return $}get maxValue(){let $=null;for(let X of this._def.checks)if(X.kind==="max"){if($===null||X.value<$)$=X.value}return $}}f8.create=($)=>{return new f8({checks:[],typeName:X0.ZodBigInt,coerce:$?.coerce??!1,...W0($)})};class w4 extends U0{_parse($){if(this._def.coerce)$.data=Boolean($.data);if(this._getType($)!==d.boolean){let Y=this._getOrReturnCtx($);return m(Y,{code:k.invalid_type,expected:d.boolean,received:Y.parsedType}),a}return d1($.data)}}w4.create=($)=>{return new w4({typeName:X0.ZodBoolean,coerce:$?.coerce||!1,...W0($)})};class j6 extends U0{_parse($){if(this._def.coerce)$.data=new Date($.data);if(this._getType($)!==d.date){let W=this._getOrReturnCtx($);return m(W,{code:k.invalid_type,expected:d.date,received:W.parsedType}),a}if(Number.isNaN($.data.getTime())){let W=this._getOrReturnCtx($);return m(W,{code:k.invalid_date}),a}let Y=new I1,Q=void 0;for(let W of this._def.checks)if(W.kind==="min"){if($.data.getTime()<W.value)Q=this._getOrReturnCtx($,Q),m(Q,{code:k.too_small,message:W.message,inclusive:!0,exact:!1,minimum:W.value,type:"date"}),Y.dirty()}else if(W.kind==="max"){if($.data.getTime()>W.value)Q=this._getOrReturnCtx($,Q),m(Q,{code:k.too_big,message:W.message,inclusive:!0,exact:!1,maximum:W.value,type:"date"}),Y.dirty()}else O0.assertNever(W);return{status:Y.value,value:new Date($.data.getTime())}}_addCheck($){return new j6({...this._def,checks:[...this._def.checks,$]})}min($,X){return this._addCheck({kind:"min",value:$.getTime(),message:p.toString(X)})}max($,X){return this._addCheck({kind:"max",value:$.getTime(),message:p.toString(X)})}get minDate(){let $=null;for(let X of this._def.checks)if(X.kind==="min"){if($===null||X.value>$)$=X.value}return $!=null?new Date($):null}get maxDate(){let $=null;for(let X of this._def.checks)if(X.kind==="max"){if($===null||X.value<$)$=X.value}return $!=null?new Date($):null}}j6.create=($)=>{return new j6({checks:[],coerce:$?.coerce||!1,typeName:X0.ZodDate,...W0($)})};class V9 extends U0{_parse($){if(this._getType($)!==d.symbol){let Y=this._getOrReturnCtx($);return m(Y,{code:k.invalid_type,expected:d.symbol,received:Y.parsedType}),a}return d1($.data)}}V9.create=($)=>{return new V9({typeName:X0.ZodSymbol,...W0($)})};class A4 extends U0{_parse($){if(this._getType($)!==d.undefined){let Y=this._getOrReturnCtx($);return m(Y,{code:k.invalid_type,expected:d.undefined,received:Y.parsedType}),a}return d1($.data)}}A4.create=($)=>{return new A4({typeName:X0.ZodUndefined,...W0($)})};class Z4 extends U0{_parse($){if(this._getType($)!==d.null){let Y=this._getOrReturnCtx($);return m(Y,{code:k.invalid_type,expected:d.null,received:Y.parsedType}),a}return d1($.data)}}Z4.create=($)=>{return new Z4({typeName:X0.ZodNull,...W0($)})};class K6 extends U0{constructor(){super(...arguments);this._any=!0}_parse($){return d1($.data)}}K6.create=($)=>{return new K6({typeName:X0.ZodAny,...W0($)})};class k8 extends U0{constructor(){super(...arguments);this._unknown=!0}_parse($){return d1($.data)}}k8.create=($)=>{return new k8({typeName:X0.ZodUnknown,...W0($)})};class E2 extends U0{_parse($){let X=this._getOrReturnCtx($);return m(X,{code:k.invalid_type,expected:d.never,received:X.parsedType}),a}}E2.create=($)=>{return new E2({typeName:X0.ZodNever,...W0($)})};class C9 extends U0{_parse($){if(this._getType($)!==d.undefined){let Y=this._getOrReturnCtx($);return m(Y,{code:k.invalid_type,expected:d.void,received:Y.parsedType}),a}return d1($.data)}}C9.create=($)=>{return new C9({typeName:X0.ZodVoid,...W0($)})};class B2 extends U0{_parse($){let{ctx:X,status:Y}=this._processInputParams($),Q=this._def;if(X.parsedType!==d.array)return m(X,{code:k.invalid_type,expected:d.array,received:X.parsedType}),a;if(Q.exactLength!==null){let J=X.data.length>Q.exactLength.value,G=X.data.length<Q.exactLength.value;if(J||G)m(X,{code:J?k.too_big:k.too_small,minimum:G?Q.exactLength.value:void 0,maximum:J?Q.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:Q.exactLength.message}),Y.dirty()}if(Q.minLength!==null){if(X.data.length<Q.minLength.value)m(X,{code:k.too_small,minimum:Q.minLength.value,type:"array",inclusive:!0,exact:!1,message:Q.minLength.message}),Y.dirty()}if(Q.maxLength!==null){if(X.data.length>Q.maxLength.value)m(X,{code:k.too_big,maximum:Q.maxLength.value,type:"array",inclusive:!0,exact:!1,message:Q.maxLength.message}),Y.dirty()}if(X.common.async)return Promise.all([...X.data].map((J,G)=>{return Q.type._parseAsync(new N2(X,J,X.path,G))})).then((J)=>{return I1.mergeArray(Y,J)});let W=[...X.data].map((J,G)=>{return Q.type._parseSync(new N2(X,J,X.path,G))});return I1.mergeArray(Y,W)}get element(){return this._def.type}min($,X){return new B2({...this._def,minLength:{value:$,message:p.toString(X)}})}max($,X){return new B2({...this._def,maxLength:{value:$,message:p.toString(X)}})}length($,X){return new B2({...this._def,exactLength:{value:$,message:p.toString(X)}})}nonempty($){return this.min(1,$)}}B2.create=($,X)=>{return new B2({type:$,minLength:null,maxLength:null,exactLength:null,typeName:X0.ZodArray,...W0(X)})};function z4($){if($ instanceof Y1){let X={};for(let Y in $.shape){let Q=$.shape[Y];X[Y]=q2.create(z4(Q))}return new Y1({...$._def,shape:()=>X})}else if($ instanceof B2)return new B2({...$._def,type:z4($.element)});else if($ instanceof q2)return q2.create(z4($.unwrap()));else if($ instanceof H8)return H8.create(z4($.unwrap()));else if($ instanceof b2)return b2.create($.items.map((X)=>z4(X)));else return $}class Y1 extends U0{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let $=this._def.shape(),X=O0.objectKeys($);return this._cached={shape:$,keys:X},this._cached}_parse($){if(this._getType($)!==d.object){let H=this._getOrReturnCtx($);return m(H,{code:k.invalid_type,expected:d.object,received:H.parsedType}),a}let{status:Y,ctx:Q}=this._processInputParams($),{shape:W,keys:J}=this._getCached(),G=[];if(!(this._def.catchall instanceof E2&&this._def.unknownKeys==="strip")){for(let H in Q.data)if(!J.includes(H))G.push(H)}let U=[];for(let H of J){let B=W[H],q=Q.data[H];U.push({key:{status:"valid",value:H},value:B._parse(new N2(Q,q,Q.path,H)),alwaysSet:H in Q.data})}if(this._def.catchall instanceof E2){let H=this._def.unknownKeys;if(H==="passthrough")for(let B of G)U.push({key:{status:"valid",value:B},value:{status:"valid",value:Q.data[B]}});else if(H==="strict"){if(G.length>0)m(Q,{code:k.unrecognized_keys,keys:G}),Y.dirty()}else if(H==="strip");else throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let H=this._def.catchall;for(let B of G){let q=Q.data[B];U.push({key:{status:"valid",value:B},value:H._parse(new N2(Q,q,Q.path,B)),alwaysSet:B in Q.data})}}if(Q.common.async)return Promise.resolve().then(async()=>{let H=[];for(let B of U){let q=await B.key,O=await B.value;H.push({key:q,value:O,alwaysSet:B.alwaysSet})}return H}).then((H)=>{return I1.mergeObjectSync(Y,H)});else return I1.mergeObjectSync(Y,U)}get shape(){return this._def.shape()}strict($){return p.errToObj,new Y1({...this._def,unknownKeys:"strict",...$!==void 0?{errorMap:(X,Y)=>{let Q=this._def.errorMap?.(X,Y).message??Y.defaultError;if(X.code==="unrecognized_keys")return{message:p.errToObj($).message??Q};return{message:Q}}}:{}})}strip(){return new Y1({...this._def,unknownKeys:"strip"})}passthrough(){return new Y1({...this._def,unknownKeys:"passthrough"})}extend($){return new Y1({...this._def,shape:()=>({...this._def.shape(),...$})})}merge($){return new Y1({unknownKeys:$._def.unknownKeys,catchall:$._def.catchall,shape:()=>({...this._def.shape(),...$._def.shape()}),typeName:X0.ZodObject})}setKey($,X){return this.augment({[$]:X})}catchall($){return new Y1({...this._def,catchall:$})}pick($){let X={};for(let Y of O0.objectKeys($))if($[Y]&&this.shape[Y])X[Y]=this.shape[Y];return new Y1({...this._def,shape:()=>X})}omit($){let X={};for(let Y of O0.objectKeys(this.shape))if(!$[Y])X[Y]=this.shape[Y];return new Y1({...this._def,shape:()=>X})}deepPartial(){return z4(this)}partial($){let X={};for(let Y of O0.objectKeys(this.shape)){let Q=this.shape[Y];if($&&!$[Y])X[Y]=Q;else X[Y]=Q.optional()}return new Y1({...this._def,shape:()=>X})}required($){let X={};for(let Y of O0.objectKeys(this.shape))if($&&!$[Y])X[Y]=this.shape[Y];else{let W=this.shape[Y];while(W instanceof q2)W=W._def.innerType;X[Y]=W}return new Y1({...this._def,shape:()=>X})}keyof(){return yU(O0.objectKeys(this.shape))}}Y1.create=($,X)=>{return new Y1({shape:()=>$,unknownKeys:"strip",catchall:E2.create(),typeName:X0.ZodObject,...W0(X)})};Y1.strictCreate=($,X)=>{return new Y1({shape:()=>$,unknownKeys:"strict",catchall:E2.create(),typeName:X0.ZodObject,...W0(X)})};Y1.lazycreate=($,X)=>{return new Y1({shape:$,unknownKeys:"strip",catchall:E2.create(),typeName:X0.ZodObject,...W0(X)})};class L4 extends U0{_parse($){let{ctx:X}=this._processInputParams($),Y=this._def.options;function Q(W){for(let G of W)if(G.result.status==="valid")return G.result;for(let G of W)if(G.result.status==="dirty")return X.common.issues.push(...G.ctx.common.issues),G.result;let J=W.map((G)=>new U5(G.ctx.common.issues));return m(X,{code:k.invalid_union,unionErrors:J}),a}if(X.common.async)return Promise.all(Y.map(async(W)=>{let J={...X,common:{...X.common,issues:[]},parent:null};return{result:await W._parseAsync({data:X.data,path:X.path,parent:J}),ctx:J}})).then(Q);else{let W=void 0,J=[];for(let U of Y){let H={...X,common:{...X.common,issues:[]},parent:null},B=U._parseSync({data:X.data,path:X.path,parent:H});if(B.status==="valid")return B;else if(B.status==="dirty"&&!W)W={result:B,ctx:H};if(H.common.issues.length)J.push(H.common.issues)}if(W)return X.common.issues.push(...W.ctx.common.issues),W.result;let G=J.map((U)=>new U5(U));return m(X,{code:k.invalid_union,unionErrors:G}),a}}get options(){return this._def.options}}L4.create=($,X)=>{return new L4({options:$,typeName:X0.ZodUnion,...W0(X)})};var U8=($)=>{if($ instanceof K4)return U8($.schema);else if($ instanceof z2)return U8($.innerType());else if($ instanceof F4)return[$.value];else if($ instanceof v8)return $.options;else if($ instanceof S4)return O0.objectValues($.enum);else if($ instanceof D4)return U8($._def.innerType);else if($ instanceof A4)return[void 0];else if($ instanceof Z4)return[null];else if($ instanceof q2)return[void 0,...U8($.unwrap())];else if($ instanceof H8)return[null,...U8($.unwrap())];else if($ instanceof w$)return U8($.unwrap());else if($ instanceof R4)return U8($.unwrap());else if($ instanceof _4)return U8($._def.innerType);else return[]};class O$ extends U0{_parse($){let{ctx:X}=this._processInputParams($);if(X.parsedType!==d.object)return m(X,{code:k.invalid_type,expected:d.object,received:X.parsedType}),a;let Y=this.discriminator,Q=X.data[Y],W=this.optionsMap.get(Q);if(!W)return m(X,{code:k.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[Y]}),a;if(X.common.async)return W._parseAsync({data:X.data,path:X.path,parent:X});else return W._parseSync({data:X.data,path:X.path,parent:X})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create($,X,Y){let Q=new Map;for(let W of X){let J=U8(W.shape[$]);if(!J.length)throw new Error(`A discriminator value for key \`${$}\` could not be extracted from all schema options`);for(let G of J){if(Q.has(G))throw new Error(`Discriminator property ${String($)} has duplicate value ${String(G)}`);Q.set(G,W)}}return new O$({typeName:X0.ZodDiscriminatedUnion,discriminator:$,options:X,optionsMap:Q,...W0(Y)})}}function NY($,X){let Y=C2($),Q=C2(X);if($===X)return{valid:!0,data:$};else if(Y===d.object&&Q===d.object){let W=O0.objectKeys(X),J=O0.objectKeys($).filter((U)=>W.indexOf(U)!==-1),G={...$,...X};for(let U of J){let H=NY($[U],X[U]);if(!H.valid)return{valid:!1};G[U]=H.data}return{valid:!0,data:G}}else if(Y===d.array&&Q===d.array){if($.length!==X.length)return{valid:!1};let W=[];for(let J=0;J<$.length;J++){let G=$[J],U=X[J],H=NY(G,U);if(!H.valid)return{valid:!1};W.push(H.data)}return{valid:!0,data:W}}else if(Y===d.date&&Q===d.date&&+$===+X)return{valid:!0,data:$};else return{valid:!1}}class j4 extends U0{_parse($){let{status:X,ctx:Y}=this._processInputParams($),Q=(W,J)=>{if(N$(W)||N$(J))return a;let G=NY(W.value,J.value);if(!G.valid)return m(Y,{code:k.invalid_intersection_types}),a;if(z$(W)||z$(J))X.dirty();return{status:X.value,value:G.data}};if(Y.common.async)return Promise.all([this._def.left._parseAsync({data:Y.data,path:Y.path,parent:Y}),this._def.right._parseAsync({data:Y.data,path:Y.path,parent:Y})]).then(([W,J])=>Q(W,J));else return Q(this._def.left._parseSync({data:Y.data,path:Y.path,parent:Y}),this._def.right._parseSync({data:Y.data,path:Y.path,parent:Y}))}}j4.create=($,X,Y)=>{return new j4({left:$,right:X,typeName:X0.ZodIntersection,...W0(Y)})};class b2 extends U0{_parse($){let{status:X,ctx:Y}=this._processInputParams($);if(Y.parsedType!==d.array)return m(Y,{code:k.invalid_type,expected:d.array,received:Y.parsedType}),a;if(Y.data.length<this._def.items.length)return m(Y,{code:k.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a;if(!this._def.rest&&Y.data.length>this._def.items.length)m(Y,{code:k.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),X.dirty();let W=[...Y.data].map((J,G)=>{let U=this._def.items[G]||this._def.rest;if(!U)return null;return U._parse(new N2(Y,J,Y.path,G))}).filter((J)=>!!J);if(Y.common.async)return Promise.all(W).then((J)=>{return I1.mergeArray(X,J)});else return I1.mergeArray(X,W)}get items(){return this._def.items}rest($){return new b2({...this._def,rest:$})}}b2.create=($,X)=>{if(!Array.isArray($))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new b2({items:$,typeName:X0.ZodTuple,rest:null,...W0(X)})};class E9 extends U0{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse($){let{status:X,ctx:Y}=this._processInputParams($);if(Y.parsedType!==d.object)return m(Y,{code:k.invalid_type,expected:d.object,received:Y.parsedType}),a;let Q=[],W=this._def.keyType,J=this._def.valueType;for(let G in Y.data)Q.push({key:W._parse(new N2(Y,G,Y.path,G)),value:J._parse(new N2(Y,Y.data[G],Y.path,G)),alwaysSet:G in Y.data});if(Y.common.async)return I1.mergeObjectAsync(X,Q);else return I1.mergeObjectSync(X,Q)}get element(){return this._def.valueType}static create($,X,Y){if(X instanceof U0)return new E9({keyType:$,valueType:X,typeName:X0.ZodRecord,...W0(Y)});return new E9({keyType:H2.create(),valueType:$,typeName:X0.ZodRecord,...W0(X)})}}class b9 extends U0{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse($){let{status:X,ctx:Y}=this._processInputParams($);if(Y.parsedType!==d.map)return m(Y,{code:k.invalid_type,expected:d.map,received:Y.parsedType}),a;let Q=this._def.keyType,W=this._def.valueType,J=[...Y.data.entries()].map(([G,U],H)=>{return{key:Q._parse(new N2(Y,G,Y.path,[H,"key"])),value:W._parse(new N2(Y,U,Y.path,[H,"value"]))}});if(Y.common.async){let G=new Map;return Promise.resolve().then(async()=>{for(let U of J){let H=await U.key,B=await U.value;if(H.status==="aborted"||B.status==="aborted")return a;if(H.status==="dirty"||B.status==="dirty")X.dirty();G.set(H.value,B.value)}return{status:X.value,value:G}})}else{let G=new Map;for(let U of J){let{key:H,value:B}=U;if(H.status==="aborted"||B.status==="aborted")return a;if(H.status==="dirty"||B.status==="dirty")X.dirty();G.set(H.value,B.value)}return{status:X.value,value:G}}}}b9.create=($,X,Y)=>{return new b9({valueType:X,keyType:$,typeName:X0.ZodMap,...W0(Y)})};class F6 extends U0{_parse($){let{status:X,ctx:Y}=this._processInputParams($);if(Y.parsedType!==d.set)return m(Y,{code:k.invalid_type,expected:d.set,received:Y.parsedType}),a;let Q=this._def;if(Q.minSize!==null){if(Y.data.size<Q.minSize.value)m(Y,{code:k.too_small,minimum:Q.minSize.value,type:"set",inclusive:!0,exact:!1,message:Q.minSize.message}),X.dirty()}if(Q.maxSize!==null){if(Y.data.size>Q.maxSize.value)m(Y,{code:k.too_big,maximum:Q.maxSize.value,type:"set",inclusive:!0,exact:!1,message:Q.maxSize.message}),X.dirty()}let W=this._def.valueType;function J(U){let H=new Set;for(let B of U){if(B.status==="aborted")return a;if(B.status==="dirty")X.dirty();H.add(B.value)}return{status:X.value,value:H}}let G=[...Y.data.values()].map((U,H)=>W._parse(new N2(Y,U,Y.path,H)));if(Y.common.async)return Promise.all(G).then((U)=>J(U));else return J(G)}min($,X){return new F6({...this._def,minSize:{value:$,message:p.toString(X)}})}max($,X){return new F6({...this._def,maxSize:{value:$,message:p.toString(X)}})}size($,X){return this.min($,X).max($,X)}nonempty($){return this.min(1,$)}}F6.create=($,X)=>{return new F6({valueType:$,minSize:null,maxSize:null,typeName:X0.ZodSet,...W0(X)})};class O4 extends U0{constructor(){super(...arguments);this.validate=this.implement}_parse($){let{ctx:X}=this._processInputParams($);if(X.parsedType!==d.function)return m(X,{code:k.invalid_type,expected:d.function,received:X.parsedType}),a;function Y(G,U){return P9({data:G,path:X.path,errorMaps:[X.common.contextualErrorMap,X.schemaErrorMap,q4(),M8].filter((H)=>!!H),issueData:{code:k.invalid_arguments,argumentsError:U}})}function Q(G,U){return P9({data:G,path:X.path,errorMaps:[X.common.contextualErrorMap,X.schemaErrorMap,q4(),M8].filter((H)=>!!H),issueData:{code:k.invalid_return_type,returnTypeError:U}})}let W={errorMap:X.common.contextualErrorMap},J=X.data;if(this._def.returns instanceof S6){let G=this;return d1(async function(...U){let H=new U5([]),B=await G._def.args.parseAsync(U,W).catch((A)=>{throw H.addIssue(Y(U,A)),H}),q=await Reflect.apply(J,this,B);return await G._def.returns._def.type.parseAsync(q,W).catch((A)=>{throw H.addIssue(Q(q,A)),H})})}else{let G=this;return d1(function(...U){let H=G._def.args.safeParse(U,W);if(!H.success)throw new U5([Y(U,H.error)]);let B=Reflect.apply(J,this,H.data),q=G._def.returns.safeParse(B,W);if(!q.success)throw new U5([Q(B,q.error)]);return q.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...$){return new O4({...this._def,args:b2.create($).rest(k8.create())})}returns($){return new O4({...this._def,returns:$})}implement($){return this.parse($)}strictImplement($){return this.parse($)}static create($,X,Y){return new O4({args:$?$:b2.create([]).rest(k8.create()),returns:X||k8.create(),typeName:X0.ZodFunction,...W0(Y)})}}class K4 extends U0{get schema(){return this._def.getter()}_parse($){let{ctx:X}=this._processInputParams($);return this._def.getter()._parse({data:X.data,path:X.path,parent:X})}}K4.create=($,X)=>{return new K4({getter:$,typeName:X0.ZodLazy,...W0(X)})};class F4 extends U0{_parse($){if($.data!==this._def.value){let X=this._getOrReturnCtx($);return m(X,{received:X.data,code:k.invalid_literal,expected:this._def.value}),a}return{status:"valid",value:$.data}}get value(){return this._def.value}}F4.create=($,X)=>{return new F4({value:$,typeName:X0.ZodLiteral,...W0(X)})};function yU($,X){return new v8({values:$,typeName:X0.ZodEnum,...W0(X)})}class v8 extends U0{_parse($){if(typeof $.data!=="string"){let X=this._getOrReturnCtx($),Y=this._def.values;return m(X,{expected:O0.joinValues(Y),received:X.parsedType,code:k.invalid_type}),a}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has($.data)){let X=this._getOrReturnCtx($),Y=this._def.values;return m(X,{received:X.data,code:k.invalid_enum_value,options:Y}),a}return d1($.data)}get options(){return this._def.values}get enum(){let $={};for(let X of this._def.values)$[X]=X;return $}get Values(){let $={};for(let X of this._def.values)$[X]=X;return $}get Enum(){let $={};for(let X of this._def.values)$[X]=X;return $}extract($,X=this._def){return v8.create($,{...this._def,...X})}exclude($,X=this._def){return v8.create(this.options.filter((Y)=>!$.includes(Y)),{...this._def,...X})}}v8.create=yU;class S4 extends U0{_parse($){let X=O0.getValidEnumValues(this._def.values),Y=this._getOrReturnCtx($);if(Y.parsedType!==d.string&&Y.parsedType!==d.number){let Q=O0.objectValues(X);return m(Y,{expected:O0.joinValues(Q),received:Y.parsedType,code:k.invalid_type}),a}if(!this._cache)this._cache=new Set(O0.getValidEnumValues(this._def.values));if(!this._cache.has($.data)){let Q=O0.objectValues(X);return m(Y,{received:Y.data,code:k.invalid_enum_value,options:Q}),a}return d1($.data)}get enum(){return this._def.values}}S4.create=($,X)=>{return new S4({values:$,typeName:X0.ZodNativeEnum,...W0(X)})};class S6 extends U0{unwrap(){return this._def.type}_parse($){let{ctx:X}=this._processInputParams($);if(X.parsedType!==d.promise&&X.common.async===!1)return m(X,{code:k.invalid_type,expected:d.promise,received:X.parsedType}),a;let Y=X.parsedType===d.promise?X.data:Promise.resolve(X.data);return d1(Y.then((Q)=>{return this._def.type.parseAsync(Q,{path:X.path,errorMap:X.common.contextualErrorMap})}))}}S6.create=($,X)=>{return new S6({type:$,typeName:X0.ZodPromise,...W0(X)})};class z2 extends U0{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===X0.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse($){let{status:X,ctx:Y}=this._processInputParams($),Q=this._def.effect||null,W={addIssue:(J)=>{if(m(Y,J),J.fatal)X.abort();else X.dirty()},get path(){return Y.path}};if(W.addIssue=W.addIssue.bind(W),Q.type==="preprocess"){let J=Q.transform(Y.data,W);if(Y.common.async)return Promise.resolve(J).then(async(G)=>{if(X.value==="aborted")return a;let U=await this._def.schema._parseAsync({data:G,path:Y.path,parent:Y});if(U.status==="aborted")return a;if(U.status==="dirty")return L6(U.value);if(X.value==="dirty")return L6(U.value);return U});else{if(X.value==="aborted")return a;let G=this._def.schema._parseSync({data:J,path:Y.path,parent:Y});if(G.status==="aborted")return a;if(G.status==="dirty")return L6(G.value);if(X.value==="dirty")return L6(G.value);return G}}if(Q.type==="refinement"){let J=(G)=>{let U=Q.refinement(G,W);if(Y.common.async)return Promise.resolve(U);if(U instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return G};if(Y.common.async===!1){let G=this._def.schema._parseSync({data:Y.data,path:Y.path,parent:Y});if(G.status==="aborted")return a;if(G.status==="dirty")X.dirty();return J(G.value),{status:X.value,value:G.value}}else return this._def.schema._parseAsync({data:Y.data,path:Y.path,parent:Y}).then((G)=>{if(G.status==="aborted")return a;if(G.status==="dirty")X.dirty();return J(G.value).then(()=>{return{status:X.value,value:G.value}})})}if(Q.type==="transform")if(Y.common.async===!1){let J=this._def.schema._parseSync({data:Y.data,path:Y.path,parent:Y});if(!x8(J))return a;let G=Q.transform(J.value,W);if(G instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:X.value,value:G}}else return this._def.schema._parseAsync({data:Y.data,path:Y.path,parent:Y}).then((J)=>{if(!x8(J))return a;return Promise.resolve(Q.transform(J.value,W)).then((G)=>({status:X.value,value:G}))});O0.assertNever(Q)}}z2.create=($,X,Y)=>{return new z2({schema:$,typeName:X0.ZodEffects,effect:X,...W0(Y)})};z2.createWithPreprocess=($,X,Y)=>{return new z2({schema:X,effect:{type:"preprocess",transform:$},typeName:X0.ZodEffects,...W0(Y)})};class q2 extends U0{_parse($){if(this._getType($)===d.undefined)return d1(void 0);return this._def.innerType._parse($)}unwrap(){return this._def.innerType}}q2.create=($,X)=>{return new q2({innerType:$,typeName:X0.ZodOptional,...W0(X)})};class H8 extends U0{_parse($){if(this._getType($)===d.null)return d1(null);return this._def.innerType._parse($)}unwrap(){return this._def.innerType}}H8.create=($,X)=>{return new H8({innerType:$,typeName:X0.ZodNullable,...W0(X)})};class D4 extends U0{_parse($){let{ctx:X}=this._processInputParams($),Y=X.data;if(X.parsedType===d.undefined)Y=this._def.defaultValue();return this._def.innerType._parse({data:Y,path:X.path,parent:X})}removeDefault(){return this._def.innerType}}D4.create=($,X)=>{return new D4({innerType:$,typeName:X0.ZodDefault,defaultValue:typeof X.default==="function"?X.default:()=>X.default,...W0(X)})};class _4 extends U0{_parse($){let{ctx:X}=this._processInputParams($),Y={...X,common:{...X.common,issues:[]}},Q=this._def.innerType._parse({data:Y.data,path:Y.path,parent:{...Y}});if(N4(Q))return Q.then((W)=>{return{status:"valid",value:W.status==="valid"?W.value:this._def.catchValue({get error(){return new U5(Y.common.issues)},input:Y.data})}});else return{status:"valid",value:Q.status==="valid"?Q.value:this._def.catchValue({get error(){return new U5(Y.common.issues)},input:Y.data})}}removeCatch(){return this._def.innerType}}_4.create=($,X)=>{return new _4({innerType:$,typeName:X0.ZodCatch,catchValue:typeof X.catch==="function"?X.catch:()=>X.catch,...W0(X)})};class I9 extends U0{_parse($){if(this._getType($)!==d.nan){let Y=this._getOrReturnCtx($);return m(Y,{code:k.invalid_type,expected:d.nan,received:Y.parsedType}),a}return{status:"valid",value:$.data}}}I9.create=($)=>{return new I9({typeName:X0.ZodNaN,...W0($)})};var pD=Symbol("zod_brand");class w$ extends U0{_parse($){let{ctx:X}=this._processInputParams($),Y=X.data;return this._def.type._parse({data:Y,path:X.path,parent:X})}unwrap(){return this._def.type}}class T9 extends U0{_parse($){let{status:X,ctx:Y}=this._processInputParams($);if(Y.common.async)return(async()=>{let W=await this._def.in._parseAsync({data:Y.data,path:Y.path,parent:Y});if(W.status==="aborted")return a;if(W.status==="dirty")return X.dirty(),L6(W.value);else return this._def.out._parseAsync({data:W.value,path:Y.path,parent:Y})})();else{let Q=this._def.in._parseSync({data:Y.data,path:Y.path,parent:Y});if(Q.status==="aborted")return a;if(Q.status==="dirty")return X.dirty(),{status:"dirty",value:Q.value};else return this._def.out._parseSync({data:Q.value,path:Y.path,parent:Y})}}static create($,X){return new T9({in:$,out:X,typeName:X0.ZodPipeline})}}class R4 extends U0{_parse($){let X=this._def.innerType._parse($),Y=(Q)=>{if(x8(Q))Q.value=Object.freeze(Q.value);return Q};return N4(X)?X.then((Q)=>Y(Q)):Y(X)}unwrap(){return this._def.innerType}}R4.create=($,X)=>{return new R4({innerType:$,typeName:X0.ZodReadonly,...W0(X)})};function kU($,X){let Y=typeof $==="function"?$(X):typeof $==="string"?{message:$}:$;return typeof Y==="string"?{message:Y}:Y}function hU($,X={},Y){if($)return K6.create().superRefine((Q,W)=>{let J=$(Q);if(J instanceof Promise)return J.then((G)=>{if(!G){let U=kU(X,Q),H=U.fatal??Y??!0;W.addIssue({code:"custom",...U,fatal:H})}});if(!J){let G=kU(X,Q),U=G.fatal??Y??!0;W.addIssue({code:"custom",...G,fatal:U})}return});return K6.create()}var iD={object:Y1.lazycreate},X0;(function($){$.ZodString="ZodString",$.ZodNumber="ZodNumber",$.ZodNaN="ZodNaN",$.ZodBigInt="ZodBigInt",$.ZodBoolean="ZodBoolean",$.ZodDate="ZodDate",$.ZodSymbol="ZodSymbol",$.ZodUndefined="ZodUndefined",$.ZodNull="ZodNull",$.ZodAny="ZodAny",$.ZodUnknown="ZodUnknown",$.ZodNever="ZodNever",$.ZodVoid="ZodVoid",$.ZodArray="ZodArray",$.ZodObject="ZodObject",$.ZodUnion="ZodUnion",$.ZodDiscriminatedUnion="ZodDiscriminatedUnion",$.ZodIntersection="ZodIntersection",$.ZodTuple="ZodTuple",$.ZodRecord="ZodRecord",$.ZodMap="ZodMap",$.ZodSet="ZodSet",$.ZodFunction="ZodFunction",$.ZodLazy="ZodLazy",$.ZodLiteral="ZodLiteral",$.ZodEnum="ZodEnum",$.ZodEffects="ZodEffects",$.ZodNativeEnum="ZodNativeEnum",$.ZodOptional="ZodOptional",$.ZodNullable="ZodNullable",$.ZodDefault="ZodDefault",$.ZodCatch="ZodCatch",$.ZodPromise="ZodPromise",$.ZodBranded="ZodBranded",$.ZodPipeline="ZodPipeline",$.ZodReadonly="ZodReadonly"})(X0||(X0={}));var nD=($,X={message:`Input not instance of ${$.name}`})=>hU((Y)=>Y instanceof $,X),dU=H2.create,cU=g8.create,oD=I9.create,rD=f8.create,mU=w4.create,sD=j6.create,tD=V9.create,aD=A4.create,eD=Z4.create,$_=K6.create,X_=k8.create,Y_=E2.create,Q_=C9.create,W_=B2.create,J_=Y1.create,G_=Y1.strictCreate,M_=L4.create,U_=O$.create,H_=j4.create,B_=b2.create,q_=E9.create,N_=b9.create,z_=F6.create,O_=O4.create,w_=K4.create,A_=F4.create,Z_=v8.create,L_=S4.create,j_=S6.create,K_=z2.create,F_=q2.create,S_=H8.create,D_=z2.createWithPreprocess,__=T9.create,R_=()=>dU().optional(),P_=()=>cU().optional(),V_=()=>mU().optional(),C_={string:($)=>H2.create({...$,coerce:!0}),number:($)=>g8.create({...$,coerce:!0}),boolean:($)=>w4.create({...$,coerce:!0}),bigint:($)=>f8.create({...$,coerce:!0}),date:($)=>j6.create({...$,coerce:!0})};var E_=a;var b_=_.object({name:_.string().regex(/^x-/),component:_.unknown()}),uU=_.function().returns(_.object({name:_.string(),extensions:_.array(b_)}));var lU=[["--theme-","--scalar-"],["--sidebar-","--scalar-sidebar-"]],I_=lU.map(([$])=>$);function A$($){if(!I_.some((Y)=>$.includes(Y)))return $;return console.warn("DEPRECATION WARNING: It looks like you're using legacy CSS variables in your custom CSS string. Please migrate them to use the updated prefixes. See https://github.com/scalar/scalar/blob/main/documentation/themes.md#theme-prefix-changes"),lU.reduce((Y,[Q,W])=>Y.replaceAll(Q,W),$)}var T_=_.enum(["alternate","default","moon","purple","solarized","bluePlanet","deepSpace","saturn","kepler","elysiajs","fastify","mars","none"]),x_=_.enum(["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"]),k_=_.enum(["adonisjs","docusaurus","dotnet","elysiajs","express","fastapi","fastify","go","hono","html","laravel","litestar","nestjs","nextjs","nitro","nuxt","platformatic","react","rust","vue"]).nullable(),iU=_.object({url:_.string().optional(),content:_.union([_.string(),_.record(_.any()),_.function().returns(_.record(_.any())),_.null()]).optional(),title:_.string().optional(),slug:_.string().optional()}),g_=_.object({basePath:_.string()}),nU=_.object({url:_.string().optional(),content:_.union([_.string(),_.record(_.any()),_.function().returns(_.record(_.any())),_.null()]).optional(),title:_.string().optional(),slug:_.string().optional(),spec:iU.optional(),authentication:_.any().optional(),baseServerURL:_.string().optional(),hideClientButton:_.boolean().optional().default(!1).catch(!1),proxyUrl:_.string().optional(),searchHotKey:x_.optional(),servers:_.array(_.any()).optional(),showSidebar:_.boolean().optional().default(!0).catch(!0),theme:T_.optional().default("default").catch("default"),_integration:k_.optional(),onRequestSent:_.function().args(_.string()).returns(_.void()).optional()}),pU="https://api.scalar.com/request-proxy",zY="https://proxy.scalar.com",f_=nU.merge(_.object({layout:_.enum(["modern","classic"]).optional().default("modern").catch("modern"),proxy:_.string().optional(),plugins:_.array(uU).optional(),isEditable:_.boolean().optional().default(!1).catch(!1),isLoading:_.boolean().optional().default(!1).catch(!1),hideModels:_.boolean().optional().default(!1).catch(!1),hideDownloadButton:_.boolean().optional().default(!1).catch(!1),hideTestRequestButton:_.boolean().optional().default(!1).catch(!1),hideSearch:_.boolean().optional().default(!1).catch(!1),darkMode:_.boolean().optional(),forceDarkModeState:_.enum(["dark","light"]).optional(),hideDarkModeToggle:_.boolean().optional().default(!1).catch(!1),metaData:_.any().optional(),favicon:_.string().optional(),hiddenClients:_.union([_.record(_.union([_.boolean(),_.array(_.string())])),_.array(_.string()),_.literal(!0)]).optional(),defaultHttpClient:_.object({targetKey:_.custom(),clientKey:_.string()}).optional(),customCss:_.string().optional(),onSpecUpdate:_.function().args(_.string()).returns(_.void()).optional(),onServerChange:_.function().args(_.string()).returns(_.void()).optional(),onDocumentSelect:_.function().returns(_.void().or(_.void().promise())).optional(),onLoaded:_.function().returns(_.void().or(_.void().promise())).optional(),onShowMore:_.function().args(_.string()).returns(_.void().or(_.void().promise())).optional(),onSidebarClick:_.function().args(_.string()).returns(_.void().or(_.void().promise())).optional(),pathRouting:g_.optional(),generateHeadingSlug:_.function().args(_.object({slug:_.string().default("headingSlug")})).returns(_.string()).optional(),generateModelSlug:_.function().args(_.object({name:_.string().default("modelName")})).returns(_.string()).optional(),generateTagSlug:_.function().args(_.object({name:_.string().default("tagName")})).returns(_.string()).optional(),generateOperationSlug:_.function().args(_.object({path:_.string(),operationId:_.string().optional(),method:_.string(),summary:_.string().optional()})).returns(_.string()).optional(),generateWebhookSlug:_.function().args(_.object({name:_.string(),method:_.string().optional()})).returns(_.string()).optional(),redirect:_.function().args(_.string()).returns(_.string().nullable().optional()).optional(),withDefaultFonts:_.boolean().optional().default(!0).catch(!0),defaultOpenAllTags:_.boolean().optional(),tagsSorter:_.union([_.literal("alpha"),_.function().args(_.any(),_.any()).returns(_.number())]).optional(),operationsSorter:_.union([_.literal("alpha"),_.literal("method"),_.function().args(_.any(),_.any()).returns(_.number())]).optional()})),v_=($)=>{let X={...$};if(X.spec?.url)console.warn("[DEPRECATED] You're using the deprecated 'spec.url' attribute. Remove the spec prefix and move the 'url' attribute to the top level."),X.url=X.spec.url,delete X.spec;if(X.spec?.content)console.warn("[DEPRECATED] You're using the deprecated 'spec.content' attribute. Remove the spec prefix and move the 'content' attribute to the top level."),X.content=X.spec.content,delete X.spec;if(X.customCss)X.customCss=A$(X.customCss);if(X.proxy){if(console.warn("[DEPRECATED] You're using the deprecated 'proxy' attribute, rename it to 'proxyUrl' or update the package."),!X.proxyUrl)X.proxyUrl=X.proxy;delete X.proxy}if(X.proxyUrl===pU)console.warn(`[DEPRECATED] Warning: configuration.proxyUrl points to our old proxy (${pU}).`),console.warn(`[DEPRECATED] We are overwriting the value and use the new proxy URL (${zY}) instead.`),console.warn(`[DEPRECATED] Action Required: You should manually update your configuration to use the new URL (${zY}). Read more: https://github.com/scalar/scalar`),X.proxyUrl=zY;return X},y_=f_.transform(v_);var h_=_.object({cdn:_.string().optional().default("https://cdn.jsdelivr.net/npm/@scalar/api-reference"),pageTitle:_.string().optional().default("Scalar API Reference")});var d_={alternate:FU,default:_U,moon:CU,elysiajs:q$,fastify:RU,purple:EU,solarized:IU,bluePlanet:SU,deepSpace:DU,saturn:bU,kepler:PU,mars:VU};var Oi=Object.keys(d_);function OY($){return"type"in $||"properties"in $||"items"in $}function c_($,X){return($==="createdAt"||$==="updatedAt")&&"anyOf"in X&&Array.isArray(X.anyOf)}function sU($){if(!OY($)||typeof $!=="object"||$===null)return $;let X={...$};return Object.entries(X).forEach(([Y,Q])=>{if(OY(Q))if(c_(Y,Q)){let W=Q.anyOf?.find((J)=>OY(J)&&J.format==="date-time");if(W){let J={type:"string",format:"date-time",default:W.default};X[Y]=J}}else X[Y]=sU(Q)}),X}var m_=($,X,Y,Q,W)=>{let J=JSON.parse(Q);if(J.components&&J.components.schemas)J.components.schemas=Object.fromEntries(Object.entries(J.components.schemas).map(([U,H])=>[U,sU(H)]));let G=JSON.stringify(J);return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>${$.title}</title>
    <meta
        name="description"
        content="${$.description}"
    />
    <meta
        name="og:description"
        content="${$.description}"
    />
    ${W&&typeof Y==="string"?`
    <style>
        @media (prefers-color-scheme: dark) {
            body {
                background-color: #222;
                color: #faf9a;
            }
            .swagger-ui {
                filter: invert(92%) hue-rotate(180deg);
            }

            .swagger-ui .microlight {
                filter: invert(100%) hue-rotate(180deg);
            }
        }
    </style>`:""}
    ${typeof Y==="string"?`<link rel="stylesheet" href="${Y}" />`:`<link rel="stylesheet" media="(prefers-color-scheme: light)" href="${Y.light}" />
<link rel="stylesheet" media="(prefers-color-scheme: dark)" href="${Y.dark}" />`}
</head>
<body>
    <div id="swagger-ui"></div>
    <script src="https://unpkg.com/swagger-ui-dist@${X}/swagger-ui-bundle.js" crossorigin></script>
    <script>
        window.onload = () => {
            window.ui = SwaggerUIBundle(${G});
        };
    </script>
</body>
</html>`},u_=($,X,Y,Q)=>`<!doctype html>
<html>
  <head>
    <title>${$.title}</title>
    <meta
        name="description"
        content="${$.description}"
    />
    <meta
        name="og:description"
        content="${$.description}"
    />
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
    <style>
      body {
        margin: 0;
      }
    </style>
    <style>
      ${Y.customCss??q$}
    </style>
  </head>
  <body>
    <script
      id="api-reference"
      data-url="${Y.spec?.url}"
      data-configuration='${JSON.stringify(Y)}'
    >
    </script>
    <script src="${Q?Q:`https://cdn.jsdelivr.net/npm/@scalar/api-reference@${X}/dist/browser/standalone.min.js`}" crossorigin></script>
  </body>
</html>`,ji=Symbol.for("TypeBox.Transform"),Ki=Symbol.for("TypeBox.Readonly"),Fi=Symbol.for("TypeBox.Optional"),Si=Symbol.for("TypeBox.Hint"),AY=Symbol.for("TypeBox.Kind"),l_=($)=>$.split("/").map((X)=>{if(X.startsWith(":")){if(X=X.slice(1,X.length),X.endsWith("?"))X=X.slice(0,-1);X=`{${X}}`}return X}).join("/"),wY=($,X,Y)=>{if(X===void 0)return[];if(typeof X==="string")if(X in Y)X=Y[X];else throw new Error(`Can't find model ${X}`);return Object.entries(X?.properties??[]).map(([Q,W])=>{let{type:J=void 0,description:G,examples:U,...H}=W;return{description:G,examples:U,schema:{type:J,...H},in:$,name:Q,required:X.required?.includes(Q)??!1}})},x9=($,X)=>{if(typeof X==="object"&&["void","undefined","null"].includes(X.type))return;let Y={};for(let Q of $)Y[Q]={schema:typeof X==="string"?{$ref:`#/components/schemas/${X}`}:("$ref"in X)&&(AY in X)&&X[AY]==="Ref"?{...X,$ref:`#/components/schemas/${X.$ref}`}:Q$({...X},{from:M.Ref(""),to:({$ref:W,...J})=>{if(!W.startsWith("#/components/schemas/"))return M.Ref(`#/components/schemas/${W}`,J);return M.Ref(W,J)}})};return Y},oU=($)=>$.charAt(0).toUpperCase()+$.slice(1),p_=($,X)=>{let Y=$.toLowerCase();if(X==="/")return Y+"Index";for(let Q of X.split("/"))if(Q.charCodeAt(0)===123)Y+="By"+oU(Q.slice(1,-1));else Y+=oU(Q);return Y},P4=($)=>{if(!$)return;if(typeof $==="string")return $;if(Array.isArray($))return[...$];return{...$}},rU=({schema:$,path:X,method:Y,hook:Q,models:W})=>{if(Q=P4(Q),Q.parse&&!Array.isArray(Q.parse))Q.parse=[Q.parse];let J=Q.parse?.map((w)=>{switch(typeof w){case"string":return w;case"object":if(w&&typeof w?.fn!=="string")return;switch(w?.fn){case"json":case"application/json":return"application/json";case"text":case"text/plain":return"text/plain";case"urlencoded":case"application/x-www-form-urlencoded":return"application/x-www-form-urlencoded";case"arrayBuffer":case"application/octet-stream":return"application/octet-stream";case"formdata":case"multipart/form-data":return"multipart/form-data"}}}).filter((w)=>w!==void 0);if(!J||J.length===0)J=["application/json","multipart/form-data","text/plain"];X=l_(X);let G=typeof J==="string"?[J]:J??["application/json"],U=P4(Q?.body),H=P4(Q?.params),B=P4(Q?.headers),q=P4(Q?.query),O=P4(Q?.response);if(typeof O==="object")if(AY in O){let{type:w,properties:N,required:L,additionalProperties:K,patternProperties:h,$ref:D,...b}=O;O={"200":{...b,description:b.description,content:x9(G,w==="object"||w==="array"?{type:w,properties:N,patternProperties:h,items:O.items,required:L}:O)}}}else Object.entries(O).forEach(([w,N])=>{if(typeof N==="string"){if(!W[N])return;let{type:L,properties:K,required:h,additionalProperties:D,patternProperties:b,...l}=W[N];O[w]={...l,description:l.description,content:x9(G,N)}}else{let{type:L,properties:K,required:h,additionalProperties:D,patternProperties:b,...l}=N;O[w]={...l,description:l.description,content:x9(G,L==="object"||L==="array"?{type:L,properties:K,patternProperties:b,items:N.items,required:h}:N)}}});else if(typeof O==="string"){if(!(O in W))return;let{type:w,properties:N,required:L,$ref:K,additionalProperties:h,patternProperties:D,...b}=W[O];O={"200":{...b,content:x9(G,O)}}}let A=[...wY("header",B,W),...wY("path",H,W),...wY("query",q,W)];$[X]={...$[X]?$[X]:{},[Y.toLowerCase()]:{...B||H||q||U?{parameters:A}:{},...O?{responses:O}:{},operationId:Q?.detail?.operationId??p_(Y,X),...Q?.detail,...U?{requestBody:{required:!0,content:x9(G,typeof U==="string"?{$ref:`#/components/schemas/${U}`}:U)}}:null}}},i_=($,{excludeStaticFile:X=!0,exclude:Y=[]})=>{let Q={};for(let[W,J]of Object.entries($))if(!Y.some((G)=>{if(typeof G==="string")return W===G;return G.test(W)})&&!W.includes("*")&&(X?!W.includes("."):!0))Object.keys(J).forEach((G)=>{let U=J[G];if(W.includes("{")){if(!U.parameters)U.parameters=[];U.parameters=[...W.split("/").filter((H)=>H.startsWith("{")&&!U.parameters.find((B)=>B.in==="path"&&B.name===H.slice(1,H.length-1))).map((H)=>({schema:{type:"string"},in:"path",name:H.slice(1,H.length-1),required:!0})),...U.parameters]}if(!U.responses)U.responses={200:{}}}),Q[W]=J;return Q},tU=({provider:$="scalar",scalarVersion:X="latest",scalarCDN:Y="",scalarConfig:Q={},documentation:W={},version:J="5.9.0",excludeStaticFile:G=!0,path:U="/swagger",specPath:H=`${U}/json`,exclude:B=[],swaggerOptions:q={},theme:O=`https://unpkg.com/swagger-ui-dist@${J}/swagger-ui.css`,autoDarkMode:A=!0,excludeMethods:w=["OPTIONS"],excludeTags:N=[]}={})=>{let L={},K=0;if(!J)J=`https://unpkg.com/swagger-ui-dist@${J}/swagger-ui.css`;let h={title:"Elysia Documentation",description:"Development documentation",version:"0.0.0",...W.info},D=U.startsWith("/")?U.slice(1):U,b=new o({name:"@elysiajs/swagger"}),l=new Response($==="swagger-ui"?m_(h,J,O,JSON.stringify({url:H,dom_id:"#swagger-ui",...q},(s,x)=>typeof x==="function"?void 0:x),A):u_(h,X,{spec:{...Q.spec,url:H},...Q,_integration:"elysiajs"},Y),{headers:{"content-type":"text/html; charset=utf8"}});return b.get(U,l,{detail:{hide:!0}}).get(H,function s(){let x=b.getGlobalRoutes();if(x.length!==K){let g=["GET","PUT","POST","DELETE","OPTIONS","HEAD","PATCH","TRACE"];K=x.length,x.forEach((v)=>{if(v.hooks?.detail?.hide===!0)return;if(w.includes(v.method))return;if(g.includes(v.method)===!1&&v.method!=="ALL")return;if(v.method==="ALL")g.forEach((E)=>{rU({schema:L,hook:v.hooks,method:E,path:v.path,models:b.getGlobalDefinitions?.().type,contentType:v.hooks.type})});else rU({schema:L,hook:v.hooks,method:v.method,path:v.path,models:b.getGlobalDefinitions?.().type,contentType:v.hooks.type})})}return{openapi:"3.0.3",...{...W,tags:W.tags?.filter((g)=>!N?.includes(g?.name)),info:{title:"Elysia Documentation",description:"Development documentation",version:"0.0.0",...W.info}},paths:{...i_(L,{excludeStaticFile:G,exclude:Array.isArray(B)?B:[B]}),...W.paths},components:{...W.components,schemas:{...b.getGlobalDefinitions?.().type,...W.components?.schemas}}}},{detail:{hide:!0}}),b};var n_=typeof new Headers()?.toJSON==="function",o_=($)=>{if(n_)return Object.keys($.toJSON()).join(", ");let X="",Y=0;return $.forEach((Q,W)=>{if(Y)X=X+", "+W;else X=W;Y++}),X},aU=($)=>{let{aot:X=!0,origin:Y=!0,methods:Q=!0,allowedHeaders:W=!0,exposeHeaders:J=!0,credentials:G=!0,maxAge:U=5,preflight:H=!0}=$??{};if(Array.isArray(W))W=W.join(", ");if(Array.isArray(J))J=J.join(", ");let B=typeof Y==="boolean"?void 0:Array.isArray(Y)?Y:[Y],q=new o({name:"@elysiajs/cors",seed:$,aot:X}),O=B?.some((D)=>D==="*"),A={};if(B){for(let D of B)if(typeof D==="string")A[D]=!0}let w=(D,b,l)=>{if(Array.isArray(D))return D.some((s)=>w(s,b,l));switch(typeof D){case"string":if(l in A)return!0;let s=l.indexOf("://");if(s!==-1)l=l.slice(s+3);return D===l;case"function":return D(b)===!0;case"object":if(D instanceof RegExp)return D.test(l)}return!1},N=(D,b)=>{if(Y===!0){D.headers.vary="*",D.headers["access-control-allow-origin"]=b.headers.get("Origin")||"*";return}if(O){D.headers.vary="*",D.headers["access-control-allow-origin"]="*";return}if(!B?.length)return;let l=[];if(B.length){let s=b.headers.get("Origin")??"";for(let x=0;x<B.length;x++)if(w(B[x],b,s)===!0){D.headers.vary=Y?"Origin":"*",D.headers["access-control-allow-origin"]=s||"*";return}}if(D.headers.vary="Origin",l.length)D.headers["access-control-allow-origin"]=l.join(", ")},L=(D,b)=>{if(!b)return;if(Q===!0)return D.headers["access-control-allow-methods"]=b??"*";if(Q===!1||!Q?.length)return;if(Q==="*")return D.headers["access-control-allow-methods"]="*";if(!Array.isArray(Q))return D.headers["access-control-allow-methods"]=Q;D.headers["access-control-allow-methods"]=Q.join(", ")},K={};if(typeof J==="string")K["access-control-expose-headers"]=J;if(typeof W==="string")K["access-control-allow-headers"]=W;if(G===!0)K["access-control-allow-credentials"]="true";q.headers(K);function h({set:D,request:b,headers:l}){if(N(D,b),L(D,b.headers.get("access-control-request-method")),W===!0||J===!0){if(W===!0)D.headers["access-control-allow-headers"]=l["access-control-request-headers"];if(J===!0)D.headers["access-control-expose-headers"]=Object.keys(l).join(",")}if(U)D.headers["access-control-max-age"]=U.toString();return new Response(null,{status:204})}if(H)q.options("/",h).options("/*",h);return q.onRequest(function D({set:b,request:l}){if(N(b,l),L(b,l.method),W===!0||J===!0){let s=o_(l.headers);if(W===!0)b.headers["access-control-allow-headers"]=s;if(J===!0)b.headers["access-control-expose-headers"]=s}})};var d5=v4(nY(),1),An=d5.default.Client,Lq=d5.default.Pool,Zn=d5.default.Connection,Ln=d5.default.types,jn=d5.default.Query,Kn=d5.default.DatabaseError,Fn=d5.default.escapeIdentifier,Sn=d5.default.escapeLiteral,Dn=d5.default.Result,_n=d5.default.TypeOverrides,Rn=d5.default.defaults;var C$=($)=>({PORT:parseInt(process.env.PORT||"3000"),ENVIRONMENT:process.env.ENVIRONMENT||"development",DB_URL:process.env.DATABASE_URL,APP:$});var jq=C$(new o),P=new Lq({connectionString:jq.DB_URL,ssl:jq.ENVIRONMENT==="production"?{rejectUnauthorized:!1}:!1});P.query("SELECT NOW()").then(()=>console.log("\uD83D\uDFE2 PostgreSQL connected")).catch(($)=>console.error("\uD83D\uDD34 PostgreSQL connection error",$));var tY=M.Object({id_academico:M.Number(),nombre:M.String(),email:M.String({format:"email"}),a_materno:M.String(),a_paterno:M.String(),id_unidad:M.Union([M.Number(),M.Null()])}),Kq=M.Object({nombre:M.String(),email:M.String({format:"email"}),a_materno:M.String(),a_paterno:M.String(),id_unidad:M.Optional(M.Union([M.Number(),M.Null()]))}),aY=M.Object({id_academico:M.Number(),foto:M.Optional(M.Any()),link:M.Optional(M.String({format:"uri"}))}),f0={async create($){let{rows:X}=await P.query(`INSERT INTO academico (nombre, email, a_materno, a_paterno, id_unidad)
       VALUES ($1, $2, $3, $4, $5)
       RETURNING *`,[$.nombre,$.email,$.a_materno,$.a_paterno,$.id_unidad===void 0?null:$.id_unidad]);return X[0]},async getAll(){let{rows:$}=await P.query("SELECT * FROM academico ORDER BY nombre");return $},async getById($){let{rows:X}=await P.query("SELECT * FROM academico WHERE id_academico = $1",[$]);return X[0]||null},async update($,X){let Y=[],Q=[],W=1;if(X.nombre!==void 0)Y.push(`nombre = $${W}`),Q.push(X.nombre),W++;if(X.email!==void 0)Y.push(`email = $${W}`),Q.push(X.email),W++;if(X.a_materno!==void 0)Y.push(`a_materno = $${W}`),Q.push(X.a_materno),W++;if(X.a_paterno!==void 0)Y.push(`a_paterno = $${W}`),Q.push(X.a_paterno),W++;if(X.id_unidad!==void 0)Y.push(`id_unidad = $${W}`),Q.push(X.id_unidad),W++;if(Y.length===0)return this.getById($);let J=`
      UPDATE academico
      SET ${Y.join(", ")}
      WHERE id_academico = $${W}
      RETURNING *
    `,{rows:G}=await P.query(J,[...Q,$]);return G[0]||null},async delete($){let{rowCount:X}=await P.query("DELETE FROM academico WHERE id_academico = $1",[$]);return X!=null&&X>0},async searchByName($){let{rows:X}=await P.query(`SELECT * FROM academico
       WHERE nombre ILIKE $1 OR a_paterno ILIKE $1 OR a_materno ILIKE $1`,[`%${$}%`]);return X},async createFoto($){let{id_academico:X}=$,Y=$.foto===void 0?null:$.foto,Q=$.link===void 0?null:$.link,{rows:W}=await P.query(`INSERT INTO foto_academico (id_academico, foto, link)
       VALUES ($1, $2, $3)
       RETURNING *`,[X,Y,Q]);return W[0]},async getFotosByAcademicoId($){let{rows:X}=await P.query("SELECT * FROM foto_academico WHERE id_academico = $1 ORDER BY id_imagen",[$]);return X},async getAllFotos(){let{rows:$}=await P.query("SELECT * FROM foto_academico ORDER BY id_academico, id_imagen");return $},async getFotoById($){let{rows:X}=await P.query("SELECT * FROM foto_academico WHERE id_imagen = $1",[$]);return X[0]||null},async updateFoto($,X){let Y=[],Q=[],W=1;if(X.foto!==void 0)Y.push(`foto = $${W}`),Q.push(X.foto===void 0?null:X.foto),W++;if(X.link!==void 0)Y.push(`link = $${W}`),Q.push(X.link===void 0?null:X.link),W++;if(Y.length===0)return this.getFotoById($);let J=`
      UPDATE foto_academico
      SET ${Y.join(", ")}
      WHERE id_imagen = $${W}
      RETURNING *
    `,{rows:G}=await P.query(J,[...Q,$]);return G[0]||null},async deleteFoto($){let{rowCount:X}=await P.query("DELETE FROM foto_academico WHERE id_imagen = $1",[$]);return X!=null&&X>0}};var Fq=new o({prefix:"/academicos"}).get("/",async()=>{return await f0.getAll()},{detail:{tags:["Acad\xE9micos"],description:"Obtiene todos los registros acad\xE9micos",responses:{200:{description:"Lista de acad\xE9micos obtenida exitosamente"}}}}).get("/:id",async({params:{id:$},set:X})=>{let Y=await f0.getById(Number($));if(!Y)return X.status=404,{error:"Acad\xE9mico no encontrado"};return Y},{params:M.Object({id:M.Numeric()}),detail:{tags:["Acad\xE9micos"],description:"Obtiene un acad\xE9mico espec\xEDfico por ID",responses:{200:{description:"Acad\xE9mico encontrado"},404:{description:"Acad\xE9mico no encontrado"}}}}).get("/fotos-global",async()=>{return await f0.getAllFotos()},{detail:{tags:["Fotos de Acad\xE9micos"],description:"Obtiene todas las fotos de todos los acad\xE9micos. \xA1Advertencia: puede devolver una gran cantidad de datos!",responses:{200:{description:"Lista de todas las fotos obtenida exitosamente"}}}}).post("/",async({body:$,set:X})=>{try{let Y=await f0.create($);return X.status=201,Y}catch(Y){return console.error("Error al insertar acad\xE9mico:",Y),X.status=400,{error:"Error al insertar acad\xE9mico",details:Y instanceof Error?Y.message:"Error desconocido"}}},{body:Kq,detail:{tags:["Acad\xE9micos"],description:"Crea un nuevo registro acad\xE9mico",responses:{201:{description:"Acad\xE9mico creado exitosamente"},400:{description:"Datos inv\xE1lidos"}}}}).put("/:id",async({params:{id:$},body:X,set:Y})=>{try{let Q=await f0.update(Number($),X);if(!Q)return Y.status=404,{error:"Acad\xE9mico no encontrado"};return Q}catch(Q){return Y.status=400,{error:"Error al actualizar acad\xE9mico",details:Q instanceof Error?Q.message:"Error desconocido"}}},{params:M.Object({id:M.Numeric()}),body:M.Omit(tY,["id_academico"]),detail:{tags:["Acad\xE9micos"],description:"Actualiza completamente un acad\xE9mico",responses:{200:{description:"Acad\xE9mico actualizado exitosamente"},400:{description:"Datos inv\xE1lidos"},404:{description:"Acad\xE9mico no encontrado"}}}}).patch("/:id",async({params:{id:$},body:X,set:Y})=>{try{let Q=await f0.update(Number($),X);if(!Q)return Y.status=404,{error:"Acad\xE9mico no encontrado"};return Q}catch(Q){return Y.status=400,{error:"Error al actualizar acad\xE9mico",details:Q instanceof Error?Q.message:"Error desconocido"}}},{params:M.Object({id:M.Numeric()}),body:M.Partial(tY),detail:{tags:["Acad\xE9micos"],description:"Actualiza parcialmente un acad\xE9mico",responses:{200:{description:"Acad\xE9mico actualizado exitosamente"},400:{description:"Datos inv\xE1lidos"},404:{description:"Acad\xE9mico no encontrado"}}}}).delete("/:id",async({params:{id:$},set:X})=>{if(!await f0.delete(Number($)))return X.status=404,{error:"Acad\xE9mico no encontrado"};return X.status=200,{success:!0,message:"Acad\xE9mico eliminado correctamente"}},{params:M.Object({id:M.Numeric()}),detail:{tags:["Acad\xE9micos"],description:"Elimina un acad\xE9mico",responses:{200:{description:"Acad\xE9mico eliminado exitosamente"},404:{description:"Acad\xE9mico no encontrado"}}}}).get("/buscar/:termino",async({params:{termino:$}})=>{let X=await f0.searchByName($);return X.length>0?X:{message:"No se encontraron acad\xE9micos con ese criterio"}},{params:M.Object({termino:M.String()}),detail:{tags:["Acad\xE9micos"],description:"Busca acad\xE9micos por nombre o apellido",responses:{200:{description:"Resultados de b\xFAsqueda"}}}}).get("/:id/fotos",async({params:{id:$},set:X})=>{let Y=Number($);if(!await f0.getById(Y))return X.status=404,{error:"Acad\xE9mico no encontrado"};return await f0.getFotosByAcademicoId(Y)},{params:M.Object({id:M.Numeric()}),detail:{tags:["Fotos de Acad\xE9micos"],description:"Obtiene todas las fotos de un acad\xE9mico espec\xEDfico",responses:{200:{description:"Lista de fotos obtenida exitosamente"},404:{description:"Acad\xE9mico no encontrado"}}}}).get("/:id/fotos/:fotoId",async({params:{id:$,fotoId:X},set:Y})=>{let Q=Number($),W=Number(X);if(!await f0.getById(Q))return Y.status=404,{error:"Acad\xE9mico no encontrado"};let G=await f0.getFotoById(W);if(!G||G.id_academico!==Q)return Y.status=404,{error:"Foto no encontrada para este acad\xE9mico"};return G},{params:M.Object({id:M.Numeric(),fotoId:M.Numeric()}),detail:{tags:["Fotos de Acad\xE9micos"],description:"Obtiene una foto espec\xEDfica de un acad\xE9mico por su ID de foto",responses:{200:{description:"Foto encontrada"},404:{description:"Acad\xE9mico o foto no encontrada"}}}}).post("/:id/fotos",async({params:{id:$},body:X,set:Y})=>{let Q=Number($);if(!await f0.getById(Q))return Y.status=404,{error:"Acad\xE9mico no encontrado"};try{let J=await f0.createFoto({id_academico:Q,foto:X.foto,link:X.link});return Y.status=201,J}catch(J){return console.error("Error al a\xF1adir foto:",J),Y.status=400,{error:"Error al a\xF1adir foto al acad\xE9mico",details:J instanceof Error?J.message:"Error desconocido"}}},{params:M.Object({id:M.Numeric()}),body:M.Partial(M.Omit(aY,["id_academico"])),detail:{tags:["Fotos de Acad\xE9micos"],description:"A\xF1ade una nueva foto a un acad\xE9mico",responses:{201:{description:"Foto a\xF1adida exitosamente"},400:{description:"Datos inv\xE1lidos"},404:{description:"Acad\xE9mico no encontrado"}}}}).patch("/:id/fotos/:fotoId",async({params:{id:$,fotoId:X},body:Y,set:Q})=>{let W=Number($),J=Number(X);if(!await f0.getById(W))return Q.status=404,{error:"Acad\xE9mico no encontrado"};let U=await f0.getFotoById(J);if(!U||U.id_academico!==W)return Q.status=404,{error:"Foto no encontrada para este acad\xE9mico"};try{let H=await f0.updateFoto(J,Y);if(!H)return Q.status=500,{error:"Error inesperado al actualizar foto"};return H}catch(H){return Q.status=400,{error:"Error al actualizar foto",details:H instanceof Error?H.message:"Error desconocido"}}},{params:M.Object({id:M.Numeric(),fotoId:M.Numeric()}),body:M.Partial(M.Omit(aY,["id_academico","id_imagen"])),detail:{tags:["Fotos de Acad\xE9micos"],description:"Actualiza parcialmente una foto de un acad\xE9mico",responses:{200:{description:"Foto actualizada exitosamente"},400:{description:"Datos inv\xE1lidos"},404:{description:"Acad\xE9mico o foto no encontrada"}}}}).delete("/:id/fotos/:fotoId",async({params:{id:$,fotoId:X},set:Y})=>{let Q=Number($),W=Number(X);if(!await f0.getById(Q))return Y.status=404,{error:"Acad\xE9mico no encontrado"};let G=await f0.getFotoById(W);if(!G||G.id_academico!==Q)return Y.status=404,{error:"Foto no encontrada para este acad\xE9mico"};if(!await f0.deleteFoto(W))return Y.status=500,{error:"Error inesperado al eliminar foto"};return Y.status=200,{success:!0,message:"Foto eliminada correctamente"}},{params:M.Object({id:M.Numeric(),fotoId:M.Numeric()}),detail:{tags:["Fotos de Acad\xE9micos"],description:"Elimina una foto espec\xEDfica de un acad\xE9mico",responses:{200:{description:"Foto eliminada exitosamente"},404:{description:"Acad\xE9mico o foto no encontrada"}}}});var E$=M.Object({id_apoyo:M.Number(),tipo:M.String(),detalle:M.String()}),O2={async create($){let{rows:X}=await P.query(`INSERT INTO apoyo (tipo, detalle) 
       VALUES ($1, $2) 
       RETURNING *`,[$.tipo,$.detalle]);return X[0]},async getAll(){let{rows:$}=await P.query("SELECT * FROM apoyo ORDER BY id_apoyo");return $},async getById($){let{rows:X}=await P.query("SELECT * FROM apoyo WHERE id_apoyo = $1",[$]);return X[0]||null},async update($,X){let Y=[],Q=[],W=1;for(let[U,H]of Object.entries(X))if(H!==void 0)Y.push(`${U} = $${W}`),Q.push(H),W++;if(Y.length===0)throw new Error("No hay campos para actualizar");let J=`
      UPDATE apoyo 
      SET ${Y.join(", ")} 
      WHERE id_apoyo = $${W} 
      RETURNING *
    `,{rows:G}=await P.query(J,[...Q,$]);return G[0]||null},async delete($){let{rowCount:X}=await P.query("DELETE FROM apoyo WHERE id_apoyo = $1",[$]);return X!=null&&X>0},async searchByType($){let{rows:X}=await P.query(`SELECT * FROM apoyo 
       WHERE tipo ILIKE $1`,[`%${$}%`]);return X},async searchByDetail($){let{rows:X}=await P.query(`SELECT * FROM apoyo 
       WHERE detalle ILIKE $1`,[`%${$}%`]);return X}};var Sq=new o({prefix:"/apoyos"}).get("/",async()=>{return await O2.getAll()},{detail:{tags:["Apoyos"],description:"Obtiene todos los registros de apoyo",responses:{200:{description:"Lista de apoyos obtenida exitosamente"}}}}).get("/:id",async({params:{id:$}})=>{return await O2.getById(Number($))??{error:"Apoyo no encontrado",status:404}},{params:M.Object({id:M.Numeric()}),detail:{tags:["Apoyos"],description:"Obtiene un apoyo espec\xEDfico por ID",responses:{200:{description:"Apoyo encontrado"},404:{description:"Apoyo no encontrado"}}}}).post("/",async({body:$,set:X})=>{try{let Y=await O2.create($);return X.status=201,Y}catch(Y){return X.status=400,{error:"Error al insertar apoyo",details:Y instanceof Error?Y.message:"Error desconocido"}}},{body:M.Omit(E$,["id_apoyo"]),detail:{tags:["Apoyos"],description:"Crea un nuevo registro de apoyo",responses:{201:{description:"Apoyo creado exitosamente"},400:{description:"Datos inv\xE1lidos"}}}}).put("/:id",async({params:{id:$},body:X,set:Y})=>{try{let Q=await O2.update(Number($),X);if(!Q)return Y.status=404,{error:"Apoyo no encontrado"};return Q}catch(Q){return Y.status=400,{error:"Error al actualizar apoyo",details:Q instanceof Error?Q.message:"Error desconocido"}}},{params:M.Object({id:M.Numeric()}),body:M.Omit(E$,["id_apoyo"]),detail:{tags:["Apoyos"],description:"Actualiza completamente un apoyo",responses:{200:{description:"Apoyo actualizado exitosamente"},400:{description:"Datos inv\xE1lidos"},404:{description:"Apoyo no encontrado"}}}}).patch("/:id",async({params:{id:$},body:X,set:Y})=>{try{let Q=await O2.update(Number($),X);if(!Q)return Y.status=404,{error:"Apoyo no encontrado"};return Q}catch(Q){return Y.status=400,{error:"Error al actualizar apoyo",details:Q instanceof Error?Q.message:"Error desconocido"}}},{params:M.Object({id:M.Numeric()}),body:M.Partial(M.Omit(E$,["id_apoyo"])),detail:{tags:["Apoyos"],description:"Actualiza parcialmente un apoyo",responses:{200:{description:"Apoyo actualizado exitosamente"},400:{description:"Datos inv\xE1lidos"},404:{description:"Apoyo no encontrado"}}}}).delete("/:id",async({params:{id:$},set:X})=>{if(!await O2.delete(Number($)))return X.status=404,{error:"Apoyo no encontrado"};return{success:!0,message:"Apoyo eliminado correctamente"}},{params:M.Object({id:M.Numeric()}),detail:{tags:["Apoyos"],description:"Elimina un apoyo",responses:{200:{description:"Apoyo eliminado exitosamente"},404:{description:"Apoyo no encontrado"}}}}).get("/buscar/tipo/:tipo",async({params:{tipo:$}})=>{let X=await O2.searchByType($);return X.length>0?X:{message:"No se encontraron apoyos con ese tipo"}},{params:M.Object({tipo:M.String()}),detail:{tags:["Apoyos"],description:"Busca apoyos por tipo",responses:{200:{description:"Resultados de b\xFAsqueda"}}}}).get("/buscar/detalle/:detalle",async({params:{detalle:$}})=>{let X=await O2.searchByDetail($);return X.length>0?X:{message:"No se encontraron apoyos con ese detalle"}},{params:M.Object({detalle:M.String()}),detail:{tags:["Apoyos"],description:"Busca apoyos por contenido del detalle",responses:{200:{description:"Resultados de b\xFAsqueda"}}}});var d8=M.Object({id_cuestionario:M.Number(),pregunta:M.String()}),c8={async create($){let{rows:X}=await P.query(`INSERT INTO cuestionario (pregunta) 
       VALUES ($1) 
       RETURNING *`,[$.pregunta]);return X[0]},async getAll(){let{rows:$}=await P.query("SELECT * FROM cuestionario ORDER BY id_cuestionario");return $},async getById($){let{rows:X}=await P.query("SELECT * FROM cuestionario WHERE id_cuestionario = $1",[$]);return X[0]||null},async update($,X){let Y=[],Q=[],W=1;for(let[U,H]of Object.entries(X))if(H!==void 0)Y.push(`${U} = $${W}`),Q.push(H),W++;if(Y.length===0)throw new Error("No hay campos para actualizar");let J=`
      UPDATE cuestionario 
      SET ${Y.join(", ")} 
      WHERE id_cuestionario = $${W} 
      RETURNING *
    `,{rows:G}=await P.query(J,[...Q,$]);return G[0]||null},async delete($){let{rowCount:X}=await P.query("DELETE FROM cuestionario WHERE id_cuestionario = $1",[$]);return X!=null&&X>0},async searchByQuestion($){let{rows:X}=await P.query(`SELECT * FROM cuestionario 
       WHERE pregunta ILIKE $1`,[`%${$}%`]);return X}};var Dq=new o({prefix:"/cuestionarios"}).post("/",async({body:$})=>{return await c8.create($)},{body:M.Omit(d8,["id_cuestionario"]),response:d8,detail:{tags:["Cuestionarios"],description:"Crear un nuevo cuestionario"}}).get("/",async()=>{return await c8.getAll()},{response:M.Array(d8),detail:{tags:["Cuestionarios"],description:"Obtener todos los cuestionarios"}}).get("/:id",async({params:{id:$}})=>{let X=await c8.getById(Number($));if(!X)throw new Error("Cuestionario no encontrado");return X},{params:M.Object({id:M.Numeric()}),response:d8,detail:{tags:["Cuestionarios"],description:"Obtener un cuestionario por su ID"}}).patch("/:id",async({params:{id:$},body:X})=>{let Y=await c8.update(Number($),X);if(!Y)throw new Error("Cuestionario no encontrado");return Y},{params:M.Object({id:M.Numeric()}),body:M.Partial(M.Omit(d8,["id_cuestionario"])),response:d8,detail:{tags:["Cuestionarios"],description:"Actualizar un cuestionario existente"}}).delete("/:id",async({params:{id:$}})=>{if(!await c8.delete(Number($)))throw new Error("Cuestionario no encontrado");return{message:"Cuestionario eliminado correctamente"}},{params:M.Object({id:M.Numeric()}),response:M.Object({message:M.String()}),detail:{tags:["Cuestionarios"],description:"Eliminar un cuestionario"}}).get("/buscar/:pregunta",async({params:{pregunta:$}})=>{return await c8.searchByQuestion($)},{params:M.Object({pregunta:M.String()}),response:M.Array(d8),detail:{tags:["Cuestionarios"],description:"Buscar cuestionarios por texto en la pregunta"}});var _q=M.Object({UnidadAcademica:M.String(),NumeroDeProfesores:M.Number()}),Rq={async getAll(){let{rows:X}=await P.query(`
      SELECT
        UA.nombre AS "UnidadAcademica",
        COUNT(A.ID_ACADEMICO)::INTEGER AS "NumeroDeProfesores"
      FROM
        UNIDADACADEMICA AS UA
        LEFT JOIN ACADEMICO AS A ON UA.ID_UNIDAD = A.ID_UNIDAD
      GROUP BY
        UA.nombre
      ORDER BY
        "NumeroDeProfesores" DESC;
    `);return X}},Pq=M.Object({NombreAcademico:M.String(),ApellidoAcademico:M.String(),UnidadAcademica:M.Union([M.String(),M.Null()]),NumeroDeProyectos:M.Number()}),Vq={async getAll(){let{rows:X}=await P.query(`
      SELECT
          A.nombre AS "NombreAcademico",
          A.a_paterno AS "ApellidoAcademico",
          U.nombre AS "UnidadAcademica",
          COUNT(PA.ID_PROYECTO)::INTEGER AS "NumeroDeProyectos" -- Convertimos a INTEGER expl\xEDcitamente
      FROM
          ACADEMICO AS A
      JOIN
          PROYECTOACADEMICO AS PA ON A.ID_ACADEMICO = PA.ID_ACADEMICO
      JOIN
          PROYECTO AS P ON PA.ID_PROYECTO = P.ID_PROYECTO
      LEFT JOIN
          UNIDADACADEMICA AS U ON A.ID_UNIDAD = U.ID_UNIDAD
      GROUP BY
          A.ID_ACADEMICO,
          A.nombre,
          A.a_paterno,
          U.nombre
      ORDER BY
          "NumeroDeProyectos" DESC, "NombreAcademico" ASC;
    `);return X}};var Cq=new o({prefix:"/estadisticas"}).get("/academicos-por-unidad",async({set:$})=>{try{return await Rq.getAll()}catch(X){return console.error("Error al obtener Acad\xE9micos por Unidad:",X),$.status=500,{message:"Error interno del servidor al obtener los datos."}}},{response:{200:M.Array(_q),500:M.Object({message:M.String()})},detail:{tags:["Estad\xEDsticas"],summary:"Obtener el total de acad\xE9micos por unidad acad\xE9mica",description:"Retorna una lista de unidades acad\xE9micas con el n\xFAmero total de profesores/acad\xE9micos asignados a cada una."}}).get("/proyectos-por-profesor",async({set:$})=>{try{return await Vq.getAll()}catch(X){return console.error("Error al obtener Proyectos por Profesor:",X),$.status=500,{message:"Error interno del servidor al obtener los datos."}}},{response:{200:M.Array(Pq),500:M.Object({message:M.String()})},detail:{tags:["Estad\xEDsticas"],summary:"Obtener el n\xFAmero de proyectos por cada profesor/acad\xE9mico",description:"Retorna una lista de profesores/acad\xE9micos con el n\xFAmero total de proyectos en los que participan."}});var f4=M.Object({id_estatus:M.Number(),tipo:M.Optional(M.Union([M.String({maxLength:20}),M.Null()]))}),m8={async create($){let{rows:X}=await P.query(`INSERT INTO estatus (tipo) 
       VALUES ($1) 
       RETURNING *`,[$.tipo]);return X[0]},async getAll(){let{rows:$}=await P.query("SELECT * FROM estatus ORDER BY id_estatus");return $},async getById($){let{rows:X}=await P.query("SELECT * FROM estatus WHERE id_estatus = $1",[$]);return X[0]||null},async update($,X){let Y={...X,tipo:X.tipo===void 0?void 0:X.tipo},Q=[],W=[],J=1;for(let[H,B]of Object.entries(Y))if(B!==void 0)Q.push(`${H} = $${J}`),W.push(B),J++;if(Q.length===0)throw new Error("No hay campos para actualizar");let G=`
      UPDATE estatus 
      SET ${Q.join(", ")} 
      WHERE id_estatus = $${J} 
      RETURNING *
    `,{rows:U}=await P.query(G,[...W,$]);return U[0]||null},async delete($){let{rowCount:X}=await P.query("DELETE FROM estatus WHERE id_estatus = $1",[$]);return X!=null&&X>0},async searchByType($){let{rows:X}=await P.query(`SELECT * FROM estatus 
       WHERE tipo ILIKE $1`,[`%${$}%`]);return X}};var Eq=new o({prefix:"/estatus"}).post("/",async({body:$})=>{return await m8.create({tipo:$.tipo??null})},{body:M.Object({tipo:M.Optional(M.String({maxLength:20}))}),response:f4,detail:{tags:["Estatus"],description:"Crear un nuevo estatus"}}).get("/",async()=>{return await m8.getAll()},{response:M.Array(f4),detail:{tags:["Estatus"],description:"Obtener todos los estatus"}}).get("/:id",async({params:{id:$}})=>{let X=await m8.getById(Number($));if(!X)throw new Error("Estatus no encontrado");return X},{params:M.Object({id:M.Numeric()}),response:f4,detail:{tags:["Estatus"],description:"Obtener un estatus por ID"}}).patch("/:id",async({params:{id:$},body:X})=>{let Y=await m8.update(Number($),{tipo:X.tipo??null});if(!Y)throw new Error("Estatus no encontrado");return Y},{params:M.Object({id:M.Numeric()}),body:M.Object({tipo:M.Optional(M.String({maxLength:20}))}),response:f4,detail:{tags:["Estatus"],description:"Actualizar un estatus existente"}}).delete("/:id",async({params:{id:$}})=>{if(!await m8.delete(Number($)))throw new Error("Estatus no encontrado");return{message:"Estatus eliminado correctamente"}},{params:M.Object({id:M.Numeric()}),response:M.Object({message:M.String()}),detail:{tags:["Estatus"],description:"Eliminar un estatus"}}).get("/search/:tipo",async({params:{tipo:$}})=>{return await m8.searchByType($)},{params:M.Object({tipo:M.String()}),response:M.Array(f4),detail:{tags:["Estatus"],description:"Buscar estatus por tipo"}});var eY=M.Object({id:M.Number(),nombre:M.Optional(M.Union([M.String({maxLength:100}),M.Null()])),inicio:M.Optional(M.Union([M.Date(),M.String({format:"date"}),M.Null()])),cierre:M.Optional(M.Union([M.Date(),M.String({format:"date"}),M.Null()])),financiamiento:M.Optional(M.Union([M.String({maxLength:20}),M.Null()])),plazo:M.Optional(M.Union([M.String({maxLength:20}),M.Null()])),objetivo:M.Optional(M.Union([M.String(),M.Null()])),trl:M.Optional(M.Union([M.Number(),M.Null()])),crl:M.Optional(M.Union([M.Number(),M.Null()])),team:M.Optional(M.Union([M.Number(),M.Null()])),brl:M.Optional(M.Union([M.Number(),M.Null()])),iprl:M.Optional(M.Union([M.Number(),M.Null()])),frl:M.Optional(M.Union([M.Number(),M.Null()])),tipo:M.Optional(M.Union([M.Number(),M.Null()])),req:M.Optional(M.Union([M.String(),M.Null()]))}),u8={async create($){let{rows:X}=await P.query(`INSERT INTO fondos (
        nombre, inicio, cierre, financiamiento, plazo, objetivo,
        trl, crl, team, brl, iprl, frl, tipo, req
      ) 
      VALUES (
        $1, $2, $3, $4, $5, $6,
        $7, $8, $9, $10, $11, $12, $13, $14
      ) 
      RETURNING *`,[$.nombre,$.inicio,$.cierre,$.financiamiento,$.plazo,$.objetivo,$.trl,$.crl,$.team,$.brl,$.iprl,$.frl,$.tipo,$.req]);return X[0]},async getAll(){let{rows:$}=await P.query("SELECT * FROM fondos ORDER BY nombre");return $},async getById($){let{rows:X}=await P.query("SELECT * FROM fondos WHERE id = $1",[$]);return X[0]||null},async update($,X){let Y={nombre:X.nombre===void 0?void 0:X.nombre,inicio:X.inicio===void 0?void 0:X.inicio,cierre:X.cierre===void 0?void 0:X.cierre,financiamiento:X.financiamiento===void 0?void 0:X.financiamiento,plazo:X.plazo===void 0?void 0:X.plazo,objetivo:X.objetivo===void 0?void 0:X.objetivo,trl:X.trl===void 0?void 0:X.trl,crl:X.crl===void 0?void 0:X.crl,team:X.team===void 0?void 0:X.team,brl:X.brl===void 0?void 0:X.brl,iprl:X.iprl===void 0?void 0:X.iprl,frl:X.frl===void 0?void 0:X.frl,tipo:X.tipo===void 0?void 0:X.tipo,req:X.req===void 0?void 0:X.req},Q=[],W=[],J=1;for(let[H,B]of Object.entries(Y))if(B!==void 0)Q.push(`${H} = $${J}`),W.push(B),J++;if(Q.length===0)throw new Error("No hay campos para actualizar");let G=`
      UPDATE fondos 
      SET ${Q.join(", ")} 
      WHERE id = $${J} 
      RETURNING *
    `,{rows:U}=await P.query(G,[...W,$]);return U[0]||null},async delete($){let{rowCount:X}=await P.query("DELETE FROM fondos WHERE id = $1",[$]);return X!=null&&X>0},async searchByName($){let{rows:X}=await P.query(`SELECT * FROM fondos 
       WHERE nombre ILIKE $1`,[`%${$}%`]);return X}};var bq=new o({prefix:"/fondos"}).post("/",async({body:$})=>{try{return await u8.create($)}catch(X){if(X instanceof Error)throw new Error(`Error creating fondo: ${X.message}`);throw new Error("Unknown error occurred while creating fondo")}},{body:M.Omit(eY,["id"]),detail:{tags:["Fondos"],description:"Create a new fondo"}}).get("/",async()=>{try{return await u8.getAll()}catch($){if($ instanceof Error)throw new Error(`Error getting fondos: ${$.message}`);throw new Error("Unknown error occurred while getting fondos")}},{detail:{tags:["Fondos"],description:"Get all fondos"}}).get("/:id",async({params:{id:$}})=>{try{let X=await u8.getById(Number($));if(!X)throw new Error("Fondo not found");return X}catch(X){if(X instanceof Error)throw new Error(`Error getting fondo: ${X.message}`);throw new Error("Unknown error occurred while getting fondo")}},{params:M.Object({id:M.Numeric()}),detail:{tags:["Fondos"],description:"Get a specific fondo by ID"}}).put("/:id",async({params:{id:$},body:X})=>{try{let Y=await u8.update(Number($),X);if(!Y)throw new Error("Fondo not found");return Y}catch(Y){if(Y instanceof Error)throw new Error(`Error updating fondo: ${Y.message}`);throw new Error("Unknown error occurred while updating fondo")}},{params:M.Object({id:M.Numeric()}),body:M.Partial(M.Omit(eY,["id"])),detail:{tags:["Fondos"],description:"Update a fondo by ID"}}).delete("/:id",async({params:{id:$}})=>{try{if(!await u8.delete(Number($)))throw new Error("Fondo not found");return{message:"Fondo deleted successfully"}}catch(X){if(X instanceof Error)throw new Error(`Error deleting fondo: ${X.message}`);throw new Error("Unknown error occurred while deleting fondo")}},{params:M.Object({id:M.Numeric()}),detail:{tags:["Fondos"],description:"Delete a fondo by ID"}}).get("/search",async({query:{nombre:$}})=>{try{return await u8.searchByName($)}catch(X){if(X instanceof Error)throw new Error(`Error searching fondos: ${X.message}`);throw new Error("Unknown error occurred while searching fondos")}},{query:M.Object({nombre:M.String()}),detail:{tags:["Fondos"],description:"Search fondos by name"}});var $Q=M.Object({id_proyecto:M.Number(),nombre:M.String(),monto:M.Optional(M.Union([M.Number(),M.Null()])),fecha_postulacion:M.Optional(M.Union([M.Date(),M.String({format:"date-time"}),M.Null()])),comentarios:M.Optional(M.Union([M.String(),M.Null()])),tematica:M.Optional(M.Union([M.String(),M.Null()])),estatus:M.Optional(M.Union([M.String(),M.Null()])),convocatoria:M.Optional(M.Union([M.String(),M.Null()])),nombre_convo:M.Optional(M.Union([M.String(),M.Null()])),institucion:M.Optional(M.Union([M.String(),M.Null()])),detalle_apoyo:M.Optional(M.Union([M.String(),M.Null()])),apoyo:M.Optional(M.Union([M.String(),M.Null()])),unidad:M.Optional(M.Union([M.String(),M.Null()]))}),Iq={async getAll(){let{rows:$}=await P.query(`
      SELECT
        P.ID_PROYECTO,
        P.NOMBRE,
        P.MONTO,
        P.FECHA_POSTULACION,
        P.COMENTARIOS,
        T.NOMBRE AS TEMATICA,
        E.TIPO AS ESTATUS,
        P.CONVOCATORIA,
        TC.NOMBRE AS NOMBRE_CONVO,
        IC.NOMBRE AS INSTITUCION,
        P.DETALLE_APOYO,
        AP.NOMBRE AS APOYO,
        UA.nombre as unidad
      FROM
        PROYECTO AS P
        LEFT JOIN TEMATICA AS T ON P.ID_TEMATICA = T.ID_TEMATICA
        LEFT JOIN ESTATUS AS E ON P.ID_ESTATUS = E.ID_ESTATUS
        LEFT JOIN TIPO_CONVO AS TC ON P.TIPO_CONVOCATORIA = TC.ID
        LEFT JOIN INST_CONVO AS IC ON P.INST_CONV = IC.ID
        LEFT JOIN APOYO AS AP ON P.APOYO = AP.ID_APOYO
        LEFT JOIN UNIDADACADEMICA AS UA ON P.unidad = UA.id_unidad
      ORDER BY P.NOMBRE
    `);return $}};var XQ=M.Object({id_proyecto:M.Number(),nombre_proyecto:M.String(),profesores:M.Array(M.Object({id_academico:M.Number(),nombre_completo:M.String()}))}),Tq={async getAcademicosPorProyecto(){let X=await P.connect();try{return(await X.query(`
            SELECT
                p.ID_proyecto,
                p.nombre AS nombre_proyecto,
                JSON_AGG(
                    JSON_BUILD_OBJECT(
                        'id_academico', AC.id_academico,
                        'nombre_completo', CONCAT(AC.nombre, ' ', AC.a_paterno)
                    )
                    ORDER BY AC.nombre, AC.a_paterno -- Opcional: ordenar los profesores dentro del array
                ) AS profesores_json
            FROM
                PROYECTOACADEMICO AS PA
                JOIN ACADEMICO AS AC ON PA.ID_ACADEMICO = AC.id_ACADEMICO
                JOIN proyecto AS p ON PA.ID_proyecto = p.ID_proyecto
            GROUP BY
                p.ID_proyecto, p.nombre
            ORDER BY
                p.nombre; -- Opcional: ordenar los proyectos
        `)).rows.map((Q)=>({id_proyecto:Q.id_proyecto,nombre_proyecto:Q.nombre_proyecto,profesores:Q.profesores_json}))}finally{X.release()}},async getByProjectId($){let Y=await P.connect();try{let Q=await Y.query(`
            SELECT
                p.ID_proyecto,
                p.nombre AS nombre_proyecto,
                JSON_AGG(
                    JSON_BUILD_OBJECT(
                        'id_academico', AC.id_academico,
                        'nombre_completo', CONCAT(AC.nombre, ' ', AC.a_paterno)
                    )
                    ORDER BY AC.nombre, AC.a_paterno
                ) AS profesores_json
            FROM
                PROYECTOACADEMICO AS PA
                JOIN ACADEMICO AS AC ON PA.ID_ACADEMICO = AC.id_ACADEMICO
                JOIN proyecto AS p ON PA.ID_proyecto = p.ID_proyecto
            WHERE
                p.ID_proyecto = $1
            GROUP BY
                p.ID_proyecto, p.nombre;
        `,[$]);if(Q.rows.length===0)return null;return{id_proyecto:Q.rows[0].id_proyecto,nombre_proyecto:Q.rows[0].nombre_proyecto,profesores:Q.rows[0].profesores_json}}finally{Y.release()}}};var YQ=M.Object({nombre:M.String(),monto:M.Union([M.Number(),M.Null()]),fecha_postulacion:M.Union([M.Date(),M.String({format:"date-time"}),M.Null()]),comentarios:M.Union([M.String(),M.Null()]),unidad:M.Union([M.Number(),M.Null()]),id_tematica:M.Union([M.Number(),M.Null()]),id_estatus:M.Union([M.Number(),M.Null()]),tipo_convocatoria:M.Union([M.Number(),M.Null()]),inst_conv:M.Union([M.Number(),M.Null()]),detalle_apoyo:M.Union([M.String(),M.Null()]),apoyo:M.Union([M.Number(),M.Null()]),convocatoria:M.Union([M.String(),M.Null()]),academicos:M.Array(M.Object({id:M.Number(),jefe:M.Union([M.Literal(0),M.Literal(1)])}))}),xq={async crearProyectoConAcademicos($){let{nombre:X,monto:Y,fecha_postulacion:Q,comentarios:W,unidad:J,id_tematica:G,id_estatus:U,tipo_convocatoria:H,inst_conv:B,detalle_apoyo:q,apoyo:O,convocatoria:A,academicos:w}=$;try{return await P.query(`CALL crear_proyecto_con_academicos(
          $1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13
        )`,[X,Y,Q instanceof Date?Q.toISOString().split("T")[0]:Q,W,J,G,U,H,B,q,O,A,JSON.stringify(w)])}catch(N){throw console.error("Error calling crear_proyecto_con_academicos:",N),N}}};var kq=new o({prefix:"/funciones"}).get("/data",async()=>{try{return await Iq.getAll()}catch($){if($ instanceof Error)throw new Error(`Error getting proyectos: ${$.message}`);throw new Error("Unknown error occurred while getting proyectos")}},{response:M.Array($Q),detail:{tags:["Funciones"],description:"Obtiene todos los proyectos con datos ya intersectados con sus tablas relacionadas",table:{schema:$Q,name:"Proyectos Detallados",description:"Listado completo de proyectos con sus relaciones"}}}).get("/academicosXProyecto",async()=>{try{return await Tq.getAcademicosPorProyecto()}catch($){if($ instanceof Error)throw new Error(`Error getting acad\xE9micos por proyecto: ${$.message}`);throw new Error("Unknown error occurred while getting acad\xE9micos por proyecto")}},{response:M.Array(XQ),detail:{tags:["Funciones"],description:"Get list of academic staff grouped by project",table:{schema:XQ,name:"Acad\xE9micos por Proyecto",description:"Agrupaci\xF3n de acad\xE9micos por cada proyecto"}}}).post("/crearProyectoConAcademicos",async({body:$})=>{try{let X=$;return await xq.crearProyectoConAcademicos(X),{message:"Proyecto creado exitosamente con sus acad\xE9micos."}}catch(X){if(X instanceof Error)throw new Error(`Error creating project with academics: ${X.message}`);throw new Error("Unknown error occurred while creating project with academics")}},{body:YQ,detail:{tags:["Funciones"],description:"Crea un nuevo proyecto y asocia acad\xE9micos a \xE9l.",table:{schema:YQ,name:"Crear Proyecto con Acad\xE9micos",description:"Datos requeridos para crear un nuevo proyecto y asociar acad\xE9micos"}}});var gq=new o({prefix:"/health"}).get("/",()=>({status:"ok"}),{detail:{tags:["Health"],description:"Health check b\xE1sico",responses:{200:{description:"Servicio en funcionamiento"}}}}).get("/db",async()=>{let{rows:$}=await P.query("SELECT NOW() as time");return{db_time:$[0].time}},{detail:{tags:["Health"],description:"Verifica conexi\xF3n a la base de datos",responses:{200:{description:"Hora actual de la base de datos"}}}}).get("/tables",async()=>{let{rows:$}=await P.query(`
      SELECT table_name 
      FROM information_schema.tables 
      WHERE table_schema = 'public'
      ORDER BY table_name
    `);return{tables:$.map((X)=>X.table_name)}},{detail:{tags:["Health"],description:"Lista todas las tablas en la base de datos",responses:{200:{description:"Listado de tablas",content:{"application/json":{example:{tables:["academico","unidad_academica"]}}}}}}}).get("/tables-detailed",async()=>{let{rows:$}=await P.query(`
      SELECT 
        table_name,
        column_name,
        data_type,
        is_nullable,
        character_maximum_length
      FROM information_schema.columns
      WHERE table_schema = 'public'
      ORDER BY table_name, ordinal_position
    `);return{tables:$.reduce((Y,Q)=>{if(!Y[Q.table_name])Y[Q.table_name]=[];return Y[Q.table_name].push({column:Q.column_name,type:Q.data_type,nullable:Q.is_nullable==="YES",max_length:Q.character_maximum_length}),Y},{})}},{detail:{tags:["Health"],description:"Estructura detallada de todas las tablas",responses:{200:{description:"Metadatos de las tablas",content:{"application/json":{example:{tables:{academico:[{column:"id_academico",type:"integer",nullable:!1,max_length:null},{column:"nombre",type:"character varying",nullable:!0,max_length:255}]}}}}}}}});var QQ=M.Object({id:M.Number(),nombre:M.Optional(M.Union([M.String(),M.Null()]))}),l8={async create($){let{rows:X}=await P.query(`INSERT INTO inst_convo (nombre) 
       VALUES ($1) 
       RETURNING *`,[$.nombre]);return X[0]},async getAll(){let{rows:$}=await P.query("SELECT * FROM inst_convo ORDER BY nombre");return $},async getById($){let{rows:X}=await P.query("SELECT * FROM inst_convo WHERE id = $1",[$]);return X[0]||null},async update($,X){let Y={nombre:X.nombre===void 0?void 0:X.nombre},Q=[],W=[],J=1;for(let[H,B]of Object.entries(Y))if(B!==void 0)Q.push(`${H} = $${J}`),W.push(B),J++;if(Q.length===0)throw new Error("No hay campos para actualizar");let G=`
      UPDATE inst_convo 
      SET ${Q.join(", ")} 
      WHERE id = $${J} 
      RETURNING *
    `,{rows:U}=await P.query(G,[...W,$]);return U[0]||null},async delete($){let{rowCount:X}=await P.query("DELETE FROM inst_convo WHERE id = $1",[$]);return X!=null&&X>0},async searchByName($){let{rows:X}=await P.query(`SELECT * FROM inst_convo 
       WHERE nombre ILIKE $1`,[`%${$}%`]);return X}};var fq=new o({prefix:"/inst-convo"}).post("/",async({body:$})=>{try{return await l8.create($)}catch(X){if(X instanceof Error)throw new Error(`Error creating institution: ${X.message}`);throw new Error("Unknown error occurred while creating institution")}},{body:M.Omit(QQ,["id"]),detail:{tags:["Institutions"],description:"Create a new institution"}}).get("/",async()=>{try{return await l8.getAll()}catch($){if($ instanceof Error)throw new Error(`Error getting institutions: ${$.message}`);throw new Error("Unknown error occurred while getting institutions")}},{detail:{tags:["Institutions"],description:"Get all institutions"}}).get("/:id",async({params:{id:$}})=>{try{let X=await l8.getById(Number($));if(!X)throw new Error("Institution not found");return X}catch(X){if(X instanceof Error)throw new Error(`Error getting institution: ${X.message}`);throw new Error("Unknown error occurred while getting institution")}},{params:M.Object({id:M.Numeric()}),detail:{tags:["Institutions"],description:"Get a specific institution by ID"}}).put("/:id",async({params:{id:$},body:X})=>{try{let Y=await l8.update(Number($),X);if(!Y)throw new Error("Institution not found");return Y}catch(Y){if(Y instanceof Error)throw new Error(`Error updating institution: ${Y.message}`);throw new Error("Unknown error occurred while updating institution")}},{params:M.Object({id:M.Numeric()}),body:M.Partial(M.Omit(QQ,["id"])),detail:{tags:["Institutions"],description:"Update an institution by ID"}}).delete("/:id",async({params:{id:$}})=>{try{if(!await l8.delete(Number($)))throw new Error("Institution not found");return{message:"Institution deleted successfully"}}catch(X){if(X instanceof Error)throw new Error(`Error deleting institution: ${X.message}`);throw new Error("Unknown error occurred while deleting institution")}},{params:M.Object({id:M.Numeric()}),detail:{tags:["Institutions"],description:"Delete an institution by ID"}}).get("/search",async({query:{nombre:$}})=>{try{return await l8.searchByName($)}catch(X){if(X instanceof Error)throw new Error(`Error searching institutions: ${X.message}`);throw new Error("Unknown error occurred while searching institutions")}},{query:M.Object({nombre:M.String()}),detail:{tags:["Institutions"],description:"Search institutions by name"}});var WQ=M.Object({id_kth:M.Number(),id_proyecto:M.Number(),trl:M.Optional(M.Union([M.Number(),M.Null()])),crl:M.Optional(M.Union([M.Number(),M.Null()])),team:M.Optional(M.Union([M.Number(),M.Null()])),brl:M.Optional(M.Union([M.Number(),M.Null()])),iprl:M.Optional(M.Union([M.Number(),M.Null()])),frl:M.Optional(M.Union([M.Number(),M.Null()])),fecha_creacion:M.Optional(M.Union([M.Date(),M.String({format:"date-time"}),M.Null()]))}),p8={async create($){let{rows:X}=await P.query(`INSERT INTO kth (
        id_proyecto, trl, crl, team, brl, iprl, frl, fecha_creacion
      ) 
      VALUES ($1, $2, $3, $4, $5, $6, $7, $8)
      RETURNING *`,[$.id_proyecto,$.trl,$.crl,$.team,$.brl,$.iprl,$.frl,$.fecha_creacion]);return X[0]},async getAll(){let{rows:$}=await P.query("SELECT * FROM kth ORDER BY id_kth");return $},async getById($){let{rows:X}=await P.query("SELECT * FROM kth WHERE id_kth = $1",[$]);return X[0]||null},async getByProjectId($){let{rows:X}=await P.query("SELECT * FROM kth WHERE id_proyecto = $1",[$]);return X[0]||null},async update($,X){let Y={id_proyecto:X.id_proyecto===void 0?void 0:X.id_proyecto,trl:X.trl===void 0?void 0:X.trl,crl:X.crl===void 0?void 0:X.crl,team:X.team===void 0?void 0:X.team,brl:X.brl===void 0?void 0:X.brl,iprl:X.iprl===void 0?void 0:X.iprl,frl:X.frl===void 0?void 0:X.frl,fecha_creacion:X.fecha_creacion===void 0?void 0:X.fecha_creacion},Q=[],W=[],J=1;for(let[H,B]of Object.entries(Y))if(B!==void 0)Q.push(`${H} = $${J}`),W.push(B),J++;if(Q.length===0)throw new Error("No fields to update");let G=`
      UPDATE kth 
      SET ${Q.join(", ")} 
      WHERE id_kth = $${J} 
      RETURNING *
    `,{rows:U}=await P.query(G,[...W,$]);return U[0]||null},async delete($){let{rowCount:X}=await P.query("DELETE FROM kth WHERE id_kth = $1",[$]);return X!=null&&X>0},async deleteByProjectId($){let{rowCount:X}=await P.query("DELETE FROM kth WHERE id_proyecto = $1",[$]);return X!=null&&X>0}};var vq=new o({prefix:"/kth"}).post("/",async({body:$})=>{try{return await p8.create($)}catch(X){if(X instanceof Error)throw new Error(`Error creating KTH: ${X.message}`);throw new Error("Unknown error occurred while creating KTH")}},{body:M.Omit(WQ,["id_kth"]),detail:{tags:["KTH"],description:"Create a new KTH entry"}}).get("/",async()=>{try{return await p8.getAll()}catch($){if($ instanceof Error)throw new Error(`Error getting KTH entries: ${$.message}`);throw new Error("Unknown error occurred while getting KTH entries")}},{detail:{tags:["KTH"],description:"Get all KTH entries"}}).get("/:id",async({params:{id:$}})=>{try{let X=await p8.getById(Number($));if(!X)throw new Error("KTH entry not found");return X}catch(X){if(X instanceof Error)throw new Error(`Error getting KTH entry: ${X.message}`);throw new Error("Unknown error occurred while getting KTH entry")}},{params:M.Object({id:M.Numeric()}),detail:{tags:["KTH"],description:"Get a specific KTH entry by ID"}}).get("/project/:projectId",async({params:{projectId:$}})=>{try{let X=await p8.getByProjectId(Number($));if(!X)throw new Error("KTH entry not found for this project");return X}catch(X){if(X instanceof Error)throw new Error(`Error getting KTH entry: ${X.message}`);throw new Error("Unknown error occurred while getting KTH entry")}},{params:M.Object({projectId:M.Numeric()}),detail:{tags:["KTH"],description:"Get KTH entry by project ID"}}).put("/:id",async({params:{id:$},body:X})=>{try{let Y=await p8.update(Number($),X);if(!Y)throw new Error("KTH entry not found");return Y}catch(Y){if(Y instanceof Error)throw new Error(`Error updating KTH entry: ${Y.message}`);throw new Error("Unknown error occurred while updating KTH entry")}},{params:M.Object({id:M.Numeric()}),body:M.Partial(M.Omit(WQ,["id_kth"])),detail:{tags:["KTH"],description:"Update a KTH entry by ID"}}).delete("/:id",async({params:{id:$}})=>{try{if(!await p8.delete(Number($)))throw new Error("KTH entry not found");return{message:"KTH entry deleted successfully"}}catch(X){if(X instanceof Error)throw new Error(`Error deleting KTH entry: ${X.message}`);throw new Error("Unknown error occurred while deleting KTH entry")}},{params:M.Object({id:M.Numeric()}),detail:{tags:["KTH"],description:"Delete a KTH entry by ID"}});var I2=M.Object({id_proyecto:M.Number(),nombre:M.String(),monto:M.Optional(M.Union([M.Number(),M.Null()])),fecha_postulacion:M.Optional(M.Union([M.Date(),M.String({format:"date"}),M.Null()])),comentarios:M.Optional(M.Union([M.String(),M.Null()])),unidad:M.Optional(M.Union([M.Number(),M.Null()])),id_tematica:M.Optional(M.Union([M.Number(),M.Null()])),id_estatus:M.Optional(M.Union([M.Number(),M.Null()])),id_kth:M.Optional(M.Union([M.Number(),M.Null()])),convocatoria:M.Optional(M.Union([M.String(),M.Null()])),tipo_convocatoria:M.Optional(M.Union([M.Number(),M.Null()])),inst_conv:M.Optional(M.Union([M.Number(),M.Null()])),detalle_apoyo:M.Optional(M.Union([M.String(),M.Null()])),apoyo:M.Optional(M.Union([M.Number(),M.Null()]))}),T2={async create($){let{rows:X}=await P.query(`INSERT INTO proyecto (
        nombre, monto, fecha_postulacion, comentarios, unidad,
        id_tematica, id_estatus, id_kth, convocatoria, 
        tipo_convocatoria, inst_conv, detalle_apoyo, apoyo
      ) 
      VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13)
      RETURNING *`,[$.nombre,$.monto,$.fecha_postulacion,$.comentarios,$.unidad,$.id_tematica,$.id_estatus,$.id_kth,$.convocatoria,$.tipo_convocatoria,$.inst_conv,$.detalle_apoyo,$.apoyo]);return X[0]},async getAll(){let{rows:$}=await P.query("SELECT * FROM proyecto ORDER BY nombre");return $},async getById($){let{rows:X}=await P.query("SELECT * FROM proyecto WHERE id_proyecto = $1",[$]);return X[0]||null},async getByStatus($){let{rows:X}=await P.query("SELECT * FROM proyecto WHERE id_estatus = $1",[$]);return X},async getByConvocatoria($){let{rows:X}=await P.query("SELECT * FROM proyecto WHERE convocatoria ILIKE $1",[`%${$}%`]);return X},async update($,X){let Y=[],Q=[],W=1;for(let[U,H]of Object.entries(X))if(H!==void 0)Y.push(`${U} = $${W}`),Q.push(H),W++;if(Y.length===0)throw new Error("No fields to update");let J=`
      UPDATE proyecto 
      SET ${Y.join(", ")} 
      WHERE id_proyecto = $${W} 
      RETURNING *
    `,{rows:G}=await P.query(J,[...Q,$]);return G[0]||null},async delete($){let X=await P.connect();try{await X.query("BEGIN"),await X.query("DELETE FROM proyectoacademico WHERE id_proyecto = $1",[$]);let{rowCount:Y}=await X.query("DELETE FROM proyecto WHERE id_proyecto = $1",[$]);return await X.query("COMMIT"),Y!=null&&Y>0}catch(Y){throw await X.query("ROLLBACK"),Y}finally{X.release()}},async searchByName($){let{rows:X}=await P.query("SELECT * FROM proyecto WHERE nombre ILIKE $1",[`%${$}%`]);return X}};var yq=new o({prefix:"/proyectos"}).get("/crudo",async()=>{try{return await T2.getAll()}catch($){if($ instanceof Error)throw new Error(`Error getting proyectos: ${$.message}`);throw new Error("Unknown error occurred while getting proyectos")}},{response:M.Array(I2),detail:{tags:["Proyectos"],description:"Get all proyectos with related data"}}).get("/:id",async({params:{id:$}})=>{try{let X=await T2.getById(Number($));if(!X)throw new Error("Proyecto not found");return X}catch(X){if(X instanceof Error)throw new Error(`Error getting proyecto: ${X.message}`);throw new Error("Unknown error occurred while getting proyecto")}},{params:M.Object({id:M.Numeric()}),response:I2,detail:{tags:["Proyectos"],description:"Get a specific proyecto with complete related data by ID"}}).get("/status/:statusId",async({params:{statusId:$}})=>{try{return await T2.getByStatus(Number($))}catch(X){if(X instanceof Error)throw new Error(`Error getting proyectos by status: ${X.message}`);throw new Error("Unknown error occurred while getting proyectos by status")}},{params:M.Object({statusId:M.Numeric()}),response:M.Array(I2),detail:{tags:["Proyectos"],description:"Get proyectos filtered by status ID"}}).get("/convocatoria/:nombre",async({params:{nombre:$}})=>{try{return await T2.getByConvocatoria($)}catch(X){if(X instanceof Error)throw new Error(`Error getting proyectos by convocatoria: ${X.message}`);throw new Error("Unknown error occurred while getting proyectos by convocatoria")}},{params:M.Object({nombre:M.String()}),response:M.Array(I2),detail:{tags:["Proyectos"],description:"Get proyectos filtered by convocatoria name"}}).get("/search",async({query:{name:$}})=>{try{return await T2.searchByName($)}catch(X){if(X instanceof Error)throw new Error(`Error searching proyectos: ${X.message}`);throw new Error("Unknown error occurred while searching proyectos")}},{query:M.Object({name:M.String()}),response:M.Array(I2),detail:{tags:["Proyectos"],description:"Search proyectos by name"}}).put("/:id",async({params:{id:$},body:X})=>{try{let Y=await T2.update(Number($),X);if(!Y)throw new Error("Proyecto not found");return Y}catch(Y){if(Y instanceof Error)throw new Error(`Error updating proyecto: ${Y.message}`);throw new Error("Unknown error occurred while updating proyecto")}},{params:M.Object({id:M.Numeric()}),body:M.Partial(M.Omit(I2,["id_proyecto"])),response:I2,detail:{tags:["Proyectos"],description:"Update an existing proyecto"}}).post("/",async({body:$})=>{try{return await T2.create($)}catch(X){if(X instanceof Error)throw new Error(`Error creating proyecto: ${X.message}`);throw new Error("Unknown error occurred while creating proyecto")}},{body:M.Omit(I2,["id_proyecto"]),response:I2,detail:{tags:["Proyectos"],description:"Create a new proyecto"}}).delete("/:id",async({params:{id:$}})=>{try{if(!await T2.delete(Number($)))throw new Error("Proyecto not found");return{message:"Proyecto deleted successfully"}}catch(X){if(X instanceof Error)throw new Error(`Error deleting proyecto: ${X.message}`);throw new Error("Unknown error occurred while deleting proyecto")}},{params:M.Object({id:M.Numeric()}),response:M.Object({message:M.String()}),detail:{tags:["Proyectos"],description:"Delete a proyecto by ID"}});var JQ=M.Object({id:M.Number(),id_proyecto:M.Optional(M.Union([M.Number(),M.Null()])),id_academico:M.Optional(M.Union([M.Number(),M.Null()])),jefe:M.Optional(M.Union([M.Number(),M.Null()]))}),q5={async create($){let{rows:X}=await P.query(`INSERT INTO proyectoacademico (
        id_proyecto, id_academico, jefe
      ) 
      VALUES ($1, $2, $3)
      RETURNING *`,[$.id_proyecto,$.id_academico,$.jefe]);return X[0]},async getAll(){let{rows:$}=await P.query("SELECT * FROM proyectoacademico ORDER BY id");return $},async getById($){let{rows:X}=await P.query("SELECT * FROM proyectoacademico WHERE id = $1",[$]);return X[0]||null},async getByProjectId($){let{rows:X}=await P.query("SELECT * FROM proyectoacademico WHERE id_proyecto = $1",[$]);return X},async getByAcademicoId($){let{rows:X}=await P.query("SELECT * FROM proyectoacademico WHERE id_academico = $1",[$]);return X},async getJefes(){let{rows:$}=await P.query("SELECT * FROM proyectoacademico WHERE jefe = 1");return $},async update($,X){let Y={id_proyecto:X.id_proyecto===void 0?void 0:X.id_proyecto,id_academico:X.id_academico===void 0?void 0:X.id_academico,jefe:X.jefe===void 0?void 0:X.jefe},Q=[],W=[],J=1;for(let[H,B]of Object.entries(Y))if(B!==void 0)Q.push(`${H} = $${J}`),W.push(B),J++;if(Q.length===0)throw new Error("No fields to update");let G=`
      UPDATE proyectoacademico 
      SET ${Q.join(", ")} 
      WHERE id = $${J} 
      RETURNING *
    `,{rows:U}=await P.query(G,[...W,$]);return U[0]||null},async delete($){let{rowCount:X}=await P.query("DELETE FROM proyectoacademico WHERE id = $1",[$]);return X!=null&&X>0},async deleteByProjectId($){let{rowCount:X}=await P.query("DELETE FROM proyectoacademico WHERE id_proyecto = $1",[$]);return X!=null&&X>0},async deleteByAcademicoId($){let{rowCount:X}=await P.query("DELETE FROM proyectoacademico WHERE id_academico = $1",[$]);return X!=null&&X>0}};var hq=new o({prefix:"/proyectoacademico"}).post("/",async({body:$})=>{try{return await q5.create($)}catch(X){if(X instanceof Error)throw new Error(`Error creating proyectoacademico: ${X.message}`);throw new Error("Unknown error occurred while creating proyectoacademico")}},{body:M.Omit(JQ,["id"]),detail:{tags:["ProyectoAcademico"],description:"Create a new proyectoacademico relationship"}}).get("/",async()=>{try{return await q5.getAll()}catch($){if($ instanceof Error)throw new Error(`Error getting proyectoacademico relationships: ${$.message}`);throw new Error("Unknown error occurred while getting proyectoacademico relationships")}},{detail:{tags:["ProyectoAcademico"],description:"Get all proyectoacademico relationships"}}).get("/:id",async({params:{id:$}})=>{try{let X=await q5.getById(Number($));if(!X)throw new Error("Proyectoacademico relationship not found");return X}catch(X){if(X instanceof Error)throw new Error(`Error getting proyectoacademico relationship: ${X.message}`);throw new Error("Unknown error occurred while getting proyectoacademico relationship")}},{params:M.Object({id:M.Numeric()}),detail:{tags:["ProyectoAcademico"],description:"Get a specific proyectoacademico relationship by ID"}}).get("/project/:projectId",async({params:{projectId:$}})=>{try{return await q5.getByProjectId(Number($))}catch(X){if(X instanceof Error)throw new Error(`Error getting proyectoacademico relationships by project: ${X.message}`);throw new Error("Unknown error occurred while getting proyectoacademico relationships by project")}},{params:M.Object({projectId:M.Numeric()}),detail:{tags:["ProyectoAcademico"],description:"Get proyectoacademico relationships by project ID"}}).get("/academico/:academicoId",async({params:{academicoId:$}})=>{try{return await q5.getByAcademicoId(Number($))}catch(X){if(X instanceof Error)throw new Error(`Error getting proyectoacademico relationships by academico: ${X.message}`);throw new Error("Unknown error occurred while getting proyectoacademico relationships by academico")}},{params:M.Object({academicoId:M.Numeric()}),detail:{tags:["ProyectoAcademico"],description:"Get proyectoacademico relationships by academico ID"}}).get("/jefes",async()=>{try{return await q5.getJefes()}catch($){if($ instanceof Error)throw new Error(`Error getting jefes: ${$.message}`);throw new Error("Unknown error occurred while getting jefes")}},{detail:{tags:["ProyectoAcademico"],description:"Get all project leaders (jefes)"}}).put("/:id",async({params:{id:$},body:X})=>{try{let Y=await q5.update(Number($),X);if(!Y)throw new Error("Proyectoacademico relationship not found");return Y}catch(Y){if(Y instanceof Error)throw new Error(`Error updating proyectoacademico relationship: ${Y.message}`);throw new Error("Unknown error occurred while updating proyectoacademico relationship")}},{params:M.Object({id:M.Numeric()}),body:M.Partial(M.Omit(JQ,["id"])),detail:{tags:["ProyectoAcademico"],description:"Update a proyectoacademico relationship by ID"}}).delete("/:id",async({params:{id:$}})=>{try{if(!await q5.delete(Number($)))throw new Error("Proyectoacademico relationship not found");return{message:"Proyectoacademico relationship deleted successfully"}}catch(X){if(X instanceof Error)throw new Error(`Error deleting proyectoacademico relationship: ${X.message}`);throw new Error("Unknown error occurred while deleting proyectoacademico relationship")}},{params:M.Object({id:M.Numeric()}),detail:{tags:["ProyectoAcademico"],description:"Delete a proyectoacademico relationship by ID"}}).delete("/project/:projectId",async({params:{projectId:$}})=>{try{if(!await q5.deleteByProjectId(Number($)))throw new Error("No proyectoacademico relationships found for this project");return{message:"Proyectoacademico relationships deleted successfully"}}catch(X){if(X instanceof Error)throw new Error(`Error deleting proyectoacademico relationships: ${X.message}`);throw new Error("Unknown error occurred while deleting proyectoacademico relationships")}},{params:M.Object({projectId:M.Numeric()}),detail:{tags:["ProyectoAcademico"],description:"Delete all proyectoacademico relationships for a project"}}).delete("/academico/:academicoId",async({params:{academicoId:$}})=>{try{if(!await q5.deleteByAcademicoId(Number($)))throw new Error("No proyectoacademico relationships found for this academico");return{message:"Proyectoacademico relationships deleted successfully"}}catch(X){if(X instanceof Error)throw new Error(`Error deleting proyectoacademico relationships: ${X.message}`);throw new Error("Unknown error occurred while deleting proyectoacademico relationships")}},{params:M.Object({academicoId:M.Numeric()}),detail:{tags:["ProyectoAcademico"],description:"Delete all proyectoacademico relationships for an academico"}});var R6=M.Object({id:M.Number(),nombre_investigador:M.Number(),escuela:M.Number(),respuesta_1:M.Optional(M.String()),respuesta_2:M.Optional(M.String()),respuesta_3:M.Optional(M.String()),respuesta_4:M.Optional(M.String()),respuesta_5:M.Optional(M.String()),respuesta_6:M.Optional(M.String()),respuesta_7:M.Optional(M.String()),respuesta_8:M.Optional(M.String()),respuesta_9:M.Optional(M.String()),fecha_creacion:M.Date()}),q8={async create($){let{rows:X}=await P.query(`INSERT INTO cuestionario_respuestas (
        nombre_investigador, escuela, respuesta_1, respuesta_2, respuesta_3,
        respuesta_4, respuesta_5, respuesta_6, respuesta_7, respuesta_8, respuesta_9
      ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11)
      RETURNING *`,[$.nombre_investigador,$.escuela,$.respuesta_1,$.respuesta_2,$.respuesta_3,$.respuesta_4,$.respuesta_5,$.respuesta_6,$.respuesta_7,$.respuesta_8,$.respuesta_9]);return X[0]},async getAll(){let{rows:$}=await P.query("SELECT * FROM cuestionario_respuestas ORDER BY id");return $},async getById($){let{rows:X}=await P.query("SELECT * FROM cuestionario_respuestas WHERE id = $1",[$]);return X[0]||null},async update($,X){let Y=[],Q=[],W=1;for(let[U,H]of Object.entries(X))if(H!==void 0)Y.push(`${U} = $${W}`),Q.push(H),W++;if(Y.length===0)throw new Error("No hay campos para actualizar");let J=`
      UPDATE cuestionario_respuestas
      SET ${Y.join(", ")}
      WHERE id = $${W}
      RETURNING *
    `,{rows:G}=await P.query(J,[...Q,$]);return G[0]||null},async delete($){let{rowCount:X}=await P.query("DELETE FROM cuestionario_respuestas WHERE id = $1",[$]);return X!=null&&X>0},async getByInvestigador($){let{rows:X}=await P.query("SELECT * FROM cuestionario_respuestas WHERE nombre_investigador = $1",[$]);return X},async getByEscuela($){let{rows:X}=await P.query("SELECT * FROM cuestionario_respuestas WHERE escuela = $1",[$]);return X}};var dq=new o({prefix:"/respuestas-cuestionario"}).post("/",async({body:$})=>{return await q8.create({nombre_investigador:$.nombre_investigador,escuela:$.escuela,respuesta_1:$.respuesta_1??null,respuesta_2:$.respuesta_2??null,respuesta_3:$.respuesta_3??null,respuesta_4:$.respuesta_4??null,respuesta_5:$.respuesta_5??null,respuesta_6:$.respuesta_6??null,respuesta_7:$.respuesta_7??null,respuesta_8:$.respuesta_8??null,respuesta_9:$.respuesta_9??null})},{body:M.Object({nombre_investigador:M.Number(),escuela:M.Number(),respuesta_1:M.Optional(M.Union([M.String(),M.Null()])),respuesta_2:M.Optional(M.Union([M.String(),M.Null()])),respuesta_3:M.Optional(M.Union([M.String(),M.Null()])),respuesta_4:M.Optional(M.Union([M.String(),M.Null()])),respuesta_5:M.Optional(M.Union([M.String(),M.Null()])),respuesta_6:M.Optional(M.Union([M.String(),M.Null()])),respuesta_7:M.Optional(M.Union([M.String(),M.Null()])),respuesta_8:M.Optional(M.Union([M.String(),M.Null()])),respuesta_9:M.Optional(M.Union([M.String(),M.Null()]))}),response:R6,detail:{tags:["Respuestas Cuestionario"],description:"Registrar nuevas respuestas a un cuestionario"}}).get("/",async()=>{return await q8.getAll()},{response:M.Array(R6),detail:{tags:["Respuestas Cuestionario"],description:"Obtener todas las respuestas registradas"}}).get("/:id",async({params:{id:$}})=>{let X=await q8.getById(Number($));if(!X)throw new Error("Respuesta no encontrada");return X},{params:M.Object({id:M.Numeric()}),response:R6,detail:{tags:["Respuestas Cuestionario"],description:"Obtener una respuesta espec\xEDfica por ID"}}).patch("/:id",async({params:{id:$},body:X})=>{let Y=await q8.update(Number($),{...X,respuesta_1:X.respuesta_1??null,respuesta_2:X.respuesta_2??null,respuesta_3:X.respuesta_3??null,respuesta_4:X.respuesta_4??null,respuesta_5:X.respuesta_5??null,respuesta_6:X.respuesta_6??null,respuesta_7:X.respuesta_7??null,respuesta_8:X.respuesta_8??null,respuesta_9:X.respuesta_9??null});if(!Y)throw new Error("Respuesta no encontrada");return Y},{params:M.Object({id:M.Numeric()}),body:M.Partial(M.Object({nombre_investigador:M.Number(),escuela:M.Number(),respuesta_1:M.Optional(M.Union([M.String(),M.Null()])),respuesta_2:M.Optional(M.Union([M.String(),M.Null()])),respuesta_3:M.Optional(M.Union([M.String(),M.Null()])),respuesta_4:M.Optional(M.Union([M.String(),M.Null()])),respuesta_5:M.Optional(M.Union([M.String(),M.Null()])),respuesta_6:M.Optional(M.Union([M.String(),M.Null()])),respuesta_7:M.Optional(M.Union([M.String(),M.Null()])),respuesta_8:M.Optional(M.Union([M.String(),M.Null()])),respuesta_9:M.Optional(M.Union([M.String(),M.Null()]))})),response:R6,detail:{tags:["Respuestas Cuestionario"],description:"Actualizar una respuesta existente"}}).delete("/:id",async({params:{id:$}})=>{if(!await q8.delete(Number($)))throw new Error("Respuesta no encontrada");return{message:"Respuesta eliminada correctamente"}},{params:M.Object({id:M.Numeric()}),response:M.Object({message:M.String()}),detail:{tags:["Respuestas Cuestionario"],description:"Eliminar un cuestionario"}}).get("/investigador/:id",async({params:{id:$}})=>{return await q8.getByInvestigador(Number($))},{params:M.Object({id:M.Numeric()}),response:M.Array(R6),detail:{tags:["Respuestas Cuestionario"],description:"Obtener respuestas por ID de investigador"}}).get("/escuela/:id",async({params:{id:$}})=>{return await q8.getByEscuela(Number($))},{params:M.Object({id:M.Numeric()}),response:M.Array(R6),detail:{tags:["Respuestas Cuestionario"],description:"Obtener respuestas por ID de escuela"}});var i8=M.Object({id_apoyo:M.Number(),tag:M.String({maxLength:100})}),n8={async create($){let{rows:X}=await P.query(`INSERT INTO detalles_apoyo (tag) 
       VALUES ($1) 
       RETURNING *`,[$.tag]);return X[0]},async getAll(){let{rows:$}=await P.query("SELECT * FROM detalles_apoyo ORDER BY tag");return $},async getById($){let{rows:X}=await P.query("SELECT * FROM detalles_apoyo WHERE id_apoyo = $1",[$]);return X[0]||null},async update($,X){let Y=[],Q=[],W=1;for(let[U,H]of Object.entries(X))if(H!==void 0)Y.push(`${U} = $${W}`),Q.push(H),W++;if(Y.length===0)throw new Error("No hay campos para actualizar");let J=`
      UPDATE detalles_apoyo 
      SET ${Y.join(", ")} 
      WHERE id_apoyo = $${W} 
      RETURNING *
    `,{rows:G}=await P.query(J,[...Q,$]);return G[0]||null},async delete($){let{rowCount:X}=await P.query("DELETE FROM detalles_apoyo WHERE id_apoyo = $1",[$]);return X!=null&&X>0},async searchByTag($){let{rows:X}=await P.query(`SELECT * FROM detalles_apoyo 
       WHERE tag ILIKE $1`,[`%${$}%`]);return X}};var cq=new o({prefix:"/tags"}).post("/",async({body:$})=>{return await n8.create($)},{body:M.Omit(i8,["id_apoyo"]),response:i8,detail:{tags:["Tags"],description:"Crear un nuevo tag"}}).get("/",async()=>{return await n8.getAll()},{response:M.Array(i8),detail:{tags:["Tags"],description:"Obtener todos los tags"}}).get("/:id",async({params:{id:$}})=>{let X=await n8.getById(Number($));if(!X)throw new Error("Tag no encontrado");return X},{params:M.Object({id:M.Numeric()}),response:i8,detail:{tags:["Tags"],description:"Obtener un tag por ID"}}).patch("/:id",async({params:{id:$},body:X})=>{let Y=await n8.update(Number($),X);if(!Y)throw new Error("Tag no encontrado");return Y},{params:M.Object({id:M.Numeric()}),body:M.Partial(M.Omit(i8,["id_apoyo"])),response:i8,detail:{tags:["Tags"],description:"Actualizar un tag existente"}}).delete("/:id",async({params:{id:$}})=>{if(!await n8.delete(Number($)))throw new Error("Tag no encontrado");return{message:"Tag eliminado correctamente"}},{params:M.Object({id:M.Numeric()}),response:M.Object({message:M.String()}),detail:{tags:["Tags"],description:"Eliminar un tag"}}).get("/search/:tag",async({params:{tag:$}})=>{return await n8.searchByTag($)},{params:M.Object({tag:M.String()}),response:M.Array(i8),detail:{tags:["Tags"],description:"Buscar tags por texto"}});var GQ=M.Object({id_tematica:M.Number(),nombre:M.Optional(M.Union([M.String(),M.Null()]))}),o8={async create($){let{rows:X}=await P.query(`INSERT INTO tematica (nombre) 
       VALUES ($1) 
       RETURNING *`,[$.nombre]);return X[0]},async getAll(){let{rows:$}=await P.query("SELECT * FROM tematica ORDER BY nombre");return $},async getById($){let{rows:X}=await P.query("SELECT * FROM tematica WHERE id_tematica = $1",[$]);return X[0]||null},async update($,X){let Y={nombre:X.nombre===void 0?void 0:X.nombre},Q=[],W=[],J=1;for(let[H,B]of Object.entries(Y))if(B!==void 0)Q.push(`${H} = $${J}`),W.push(B),J++;if(Q.length===0)throw new Error("No fields to update");let G=`
      UPDATE tematica 
      SET ${Q.join(", ")} 
      WHERE id_tematica = $${J} 
      RETURNING *
    `,{rows:U}=await P.query(G,[...W,$]);return U[0]||null},async delete($){let{rowCount:X}=await P.query("DELETE FROM tematica WHERE id_tematica = $1",[$]);return X!=null&&X>0},async searchByName($){let{rows:X}=await P.query(`SELECT * FROM tematica 
       WHERE nombre ILIKE $1`,[`%${$}%`]);return X}};var mq=new o({prefix:"/tematicas"}).post("/",async({body:$})=>{try{return await o8.create($)}catch(X){if(X instanceof Error)throw new Error(`Error creating tematica: ${X.message}`);throw new Error("Unknown error occurred while creating tematica")}},{body:M.Omit(GQ,["id_tematica"]),detail:{tags:["Tematicas"],description:"Create a new tematica"}}).get("/",async()=>{try{return await o8.getAll()}catch($){if($ instanceof Error)throw new Error(`Error getting tematicas: ${$.message}`);throw new Error("Unknown error occurred while getting tematicas")}},{detail:{tags:["Tematicas"],description:"Get all tematicas"}}).get("/:id",async({params:{id:$}})=>{try{let X=await o8.getById(Number($));if(!X)throw new Error("Tematica not found");return X}catch(X){if(X instanceof Error)throw new Error(`Error getting tematica: ${X.message}`);throw new Error("Unknown error occurred while getting tematica")}},{params:M.Object({id:M.Numeric()}),detail:{tags:["Tematicas"],description:"Get a specific tematica by ID"}}).get("/search",async({query:{name:$}})=>{try{return await o8.searchByName($)}catch(X){if(X instanceof Error)throw new Error(`Error searching tematicas: ${X.message}`);throw new Error("Unknown error occurred while searching tematicas")}},{query:M.Object({name:M.String()}),detail:{tags:["Tematicas"],description:"Search tematicas by name"}}).put("/:id",async({params:{id:$},body:X})=>{try{let Y=await o8.update(Number($),X);if(!Y)throw new Error("Tematica not found");return Y}catch(Y){if(Y instanceof Error)throw new Error(`Error updating tematica: ${Y.message}`);throw new Error("Unknown error occurred while updating tematica")}},{params:M.Object({id:M.Numeric()}),body:M.Partial(M.Omit(GQ,["id_tematica"])),detail:{tags:["Tematicas"],description:"Update a tematica by ID"}}).delete("/:id",async({params:{id:$}})=>{try{if(!await o8.delete(Number($)))throw new Error("Tematica not found");return{message:"Tematica deleted successfully"}}catch(X){if(X instanceof Error)throw new Error(`Error deleting tematica: ${X.message}`);throw new Error("Unknown error occurred while deleting tematica")}},{params:M.Object({id:M.Numeric()}),detail:{tags:["Tematicas"],description:"Delete a tematica by ID"}});var MQ=M.Object({id_tipo_apoyo:M.Number(),tipo:M.String({maxLength:15})}),r8={async create($){let{rows:X}=await P.query(`INSERT INTO tipo_apoyo (tipo) 
       VALUES ($1) 
       RETURNING *`,[$.tipo]);return X[0]},async getAll(){let{rows:$}=await P.query("SELECT * FROM tipo_apoyo ORDER BY tipo");return $},async getById($){let{rows:X}=await P.query("SELECT * FROM tipo_apoyo WHERE id_tipo_apoyo = $1",[$]);return X[0]||null},async update($,X){if(!X.tipo)throw new Error("At least one field must be provided for update");let{rows:Y}=await P.query(`UPDATE tipo_apoyo 
       SET tipo = $1 
       WHERE id_tipo_apoyo = $2 
       RETURNING *`,[X.tipo,$]);return Y[0]||null},async delete($){let{rowCount:X}=await P.query("DELETE FROM tipo_apoyo WHERE id_tipo_apoyo = $1",[$]);return X!=null&&X>0},async searchByTipo($){let{rows:X}=await P.query(`SELECT * FROM tipo_apoyo 
       WHERE tipo ILIKE $1`,[`%${$}%`]);return X}};var uq=new o({prefix:"/tipo-apoyo"}).post("/",async({body:$})=>{try{return await r8.create($)}catch(X){if(X instanceof Error)throw new Error(`Error creating tipo apoyo: ${X.message}`);throw new Error("Unknown error occurred while creating tipo apoyo")}},{body:M.Omit(MQ,["id_tipo_apoyo"]),detail:{tags:["TipoApoyo"],description:"Create a new tipo apoyo"}}).get("/",async()=>{try{return await r8.getAll()}catch($){if($ instanceof Error)throw new Error(`Error getting tipos apoyo: ${$.message}`);throw new Error("Unknown error occurred while getting tipos apoyo")}},{detail:{tags:["TipoApoyo"],description:"Get all tipos apoyo"}}).get("/:id",async({params:{id:$}})=>{try{let X=await r8.getById(Number($));if(!X)throw new Error("Tipo apoyo not found");return X}catch(X){if(X instanceof Error)throw new Error(`Error getting tipo apoyo: ${X.message}`);throw new Error("Unknown error occurred while getting tipo apoyo")}},{params:M.Object({id:M.Numeric()}),detail:{tags:["TipoApoyo"],description:"Get a specific tipo apoyo by ID"}}).get("/search",async({query:{tipo:$}})=>{try{return await r8.searchByTipo($)}catch(X){if(X instanceof Error)throw new Error(`Error searching tipos apoyo: ${X.message}`);throw new Error("Unknown error occurred while searching tipos apoyo")}},{query:M.Object({tipo:M.String()}),detail:{tags:["TipoApoyo"],description:"Search tipos apoyo by tipo"}}).put("/:id",async({params:{id:$},body:X})=>{try{let Y=await r8.update(Number($),X);if(!Y)throw new Error("Tipo apoyo not found");return Y}catch(Y){if(Y instanceof Error)throw new Error(`Error updating tipo apoyo: ${Y.message}`);throw new Error("Unknown error occurred while updating tipo apoyo")}},{params:M.Object({id:M.Numeric()}),body:M.Partial(M.Omit(MQ,["id_tipo_apoyo"])),detail:{tags:["TipoApoyo"],description:"Update a tipo apoyo by ID"}}).delete("/:id",async({params:{id:$}})=>{try{if(!await r8.delete(Number($)))throw new Error("Tipo apoyo not found");return{message:"Tipo apoyo deleted successfully"}}catch(X){if(X instanceof Error)throw new Error(`Error deleting tipo apoyo: ${X.message}`);throw new Error("Unknown error occurred while deleting tipo apoyo")}},{params:M.Object({id:M.Numeric()}),detail:{tags:["TipoApoyo"],description:"Delete a tipo apoyo by ID"}});var UQ=M.Object({id:M.Number(),nombre:M.Optional(M.Union([M.String(),M.Null()]))}),s8={async create($){let{rows:X}=await P.query(`INSERT INTO tipo_convo (nombre) 
       VALUES ($1) 
       RETURNING *`,[$.nombre]);return X[0]},async getAll(){let{rows:$}=await P.query("SELECT * FROM tipo_convo ORDER BY nombre");return $},async getById($){let{rows:X}=await P.query("SELECT * FROM tipo_convo WHERE id = $1",[$]);return X[0]||null},async update($,X){let Y=[],Q=[],W=1;if(X.nombre!==void 0)Y.push(`nombre = $${W}`),Q.push(X.nombre),W++;if(Y.length===0)throw new Error("No fields to update");let J=`
      UPDATE tipo_convo 
      SET ${Y.join(", ")} 
      WHERE id = $${W} 
      RETURNING *
    `,{rows:G}=await P.query(J,[...Q,$]);return G[0]||null},async delete($){let{rowCount:X}=await P.query("DELETE FROM tipo_convo WHERE id = $1",[$]);return X!=null&&X>0},async searchByName($){let{rows:X}=await P.query(`SELECT * FROM tipo_convo 
       WHERE nombre ILIKE $1`,[`%${$}%`]);return X}};var lq=new o({prefix:"/tipo-convo"}).post("/",async({body:$})=>{try{return await s8.create($)}catch(X){if(X instanceof Error)throw new Error(`Error creating tipo convo: ${X.message}`);throw new Error("Unknown error occurred while creating tipo convo")}},{body:M.Omit(UQ,["id"]),detail:{tags:["TipoConvo"],description:"Create a new tipo convo"}}).get("/",async()=>{try{return await s8.getAll()}catch($){if($ instanceof Error)throw new Error(`Error getting tipo convos: ${$.message}`);throw new Error("Unknown error occurred while getting tipo convos")}},{detail:{tags:["TipoConvo"],description:"Get all tipo convos"}}).get("/:id",async({params:{id:$}})=>{try{let X=await s8.getById(Number($));if(!X)throw new Error("Tipo convo not found");return X}catch(X){if(X instanceof Error)throw new Error(`Error getting tipo convo: ${X.message}`);throw new Error("Unknown error occurred while getting tipo convo")}},{params:M.Object({id:M.Numeric()}),detail:{tags:["TipoConvo"],description:"Get a specific tipo convo by ID"}}).get("/search",async({query:{name:$}})=>{try{return await s8.searchByName($)}catch(X){if(X instanceof Error)throw new Error(`Error searching tipo convos: ${X.message}`);throw new Error("Unknown error occurred while searching tipo convos")}},{query:M.Object({name:M.String()}),detail:{tags:["TipoConvo"],description:"Search tipo convos by name"}}).put("/:id",async({params:{id:$},body:X})=>{try{let Y=await s8.update(Number($),X);if(!Y)throw new Error("Tipo convo not found");return Y}catch(Y){if(Y instanceof Error)throw new Error(`Error updating tipo convo: ${Y.message}`);throw new Error("Unknown error occurred while updating tipo convo")}},{params:M.Object({id:M.Numeric()}),body:M.Partial(M.Omit(UQ,["id"])),detail:{tags:["TipoConvo"],description:"Update a tipo convo by ID"}}).delete("/:id",async({params:{id:$}})=>{try{if(!await s8.delete(Number($)))throw new Error("Tipo convo not found");return{message:"Tipo convo deleted successfully"}}catch(X){if(X instanceof Error)throw new Error(`Error deleting tipo convo: ${X.message}`);throw new Error("Unknown error occurred while deleting tipo convo")}},{params:M.Object({id:M.Numeric()}),detail:{tags:["TipoConvo"],description:"Delete a tipo convo by ID"}});var dC=M.Object({id_unidad:M.Number(),nombre:M.String({minLength:3,maxLength:100})}),b$=M.Omit(dC,["id_unidad"]),N8={async create($){let{rows:X}=await P.query(`INSERT INTO unidadacademica (nombre) 
       VALUES ($1) 
       RETURNING *`,[$.nombre]);return X[0]},async getAll(){let{rows:$}=await P.query("SELECT * FROM unidadacademica ORDER BY nombre");return $},async getById($){let{rows:X}=await P.query("SELECT * FROM unidadacademica WHERE id_unidad = $1",[$]);return X[0]||null},async update($,X){let Y=Object.entries(X).filter(([G,U])=>U!==void 0);if(Y.length===0)throw new Error("No hay campos v\xE1lidos para actualizar");let Q=Y.map(([G],U)=>`${G} = $${U+1}`).join(", "),W=Y.map(([G,U])=>U),{rows:J}=await P.query(`UPDATE unidadacademica 
       SET ${Q} 
       WHERE id_unidad = $${Y.length+1} 
       RETURNING *`,[...W,$]);return J[0]||null},async delete($){let{rowCount:X}=await P.query("DELETE FROM unidadacademica WHERE id_unidad = $1",[$]);return X!=null&&X>0},async searchByName($){let{rows:X}=await P.query(`SELECT * FROM unidadacademica 
       WHERE nombre ILIKE $1
       ORDER BY id_unidad`,[`%${$}%`]);return X}};var pq=new o({prefix:"/unidades"}).post("/",async({body:$,set:X})=>{try{let Y=await N8.create($);return X.status=201,Y}catch(Y){return X.status=400,{error:"Error al crear unidad acad\xE9mica",details:Y instanceof Error?Y.message:String(Y)}}},{body:b$,detail:{tags:["Unidades Acad\xE9micas"],description:"Crea una nueva unidad acad\xE9mica",responses:{201:{description:"Unidad creada exitosamente"},400:{description:"Datos inv\xE1lidos"}}}}).get("/",async()=>{return await N8.getAll()},{detail:{tags:["Unidades Acad\xE9micas"],description:"Obtiene todas las unidades acad\xE9micas",responses:{200:{description:"Lista de unidades acad\xE9micas"}}}}).get("/:id",async({params:{id:$},set:X})=>{let Y=await N8.getById(Number($));if(!Y)return X.status=404,{error:"Unidad acad\xE9mica no encontrada"};return Y},{params:M.Object({id:M.Numeric()}),detail:{tags:["Unidades Acad\xE9micas"],description:"Obtiene una unidad acad\xE9mica por su ID",responses:{200:{description:"Unidad acad\xE9mica encontrada"},404:{description:"Unidad no encontrada"}}}}).put("/:id",async({params:{id:$},body:X,set:Y})=>{try{let Q=await N8.update(Number($),X);if(!Q)return Y.status=404,{error:"Unidad acad\xE9mica no encontrada"};return Q}catch(Q){return Y.status=400,{error:"Error al actualizar unidad acad\xE9mica",details:Q instanceof Error?Q.message:String(Q)}}},{params:M.Object({id:M.Numeric()}),body:b$,detail:{tags:["Unidades Acad\xE9micas"],description:"Actualiza todos los campos de una unidad acad\xE9mica",responses:{200:{description:"Unidad actualizada exitosamente"},400:{description:"Datos inv\xE1lidos"},404:{description:"Unidad no encontrada"}}}}).patch("/:id",async({params:{id:$},body:X,set:Y})=>{try{let Q=await N8.update(Number($),X);if(!Q)return Y.status=404,{error:"Unidad acad\xE9mica no encontrada"};return Q}catch(Q){return Y.status=400,{error:"Error al actualizar unidad acad\xE9mica",details:Q instanceof Error?Q.message:String(Q)}}},{params:M.Object({id:M.Numeric()}),body:M.Partial(b$),detail:{tags:["Unidades Acad\xE9micas"],description:"Actualiza campos espec\xEDficos de una unidad acad\xE9mica",responses:{200:{description:"Unidad actualizada exitosamente"},400:{description:"Datos inv\xE1lidos"},404:{description:"Unidad no encontrada"}}}}).delete("/:id",async({params:{id:$},set:X})=>{if(!await N8.delete(Number($)))return X.status=404,{error:"Unidad acad\xE9mica no encontrada"};return{success:!0}},{params:M.Object({id:M.Numeric()}),detail:{tags:["Unidades Acad\xE9micas"],description:"Elimina una unidad acad\xE9mica",responses:{200:{description:"Unidad eliminada exitosamente"},404:{description:"Unidad no encontrada"}}}}).get("/buscar/:nombre",async({params:{nombre:$}})=>{return await N8.searchByName($)},{params:M.Object({nombre:M.String()}),detail:{tags:["Unidades Acad\xE9micas"],description:"Busca unidades acad\xE9micas por nombre",responses:{200:{description:"Resultados de b\xFAsqueda"}}}});var iq={async getStudentsByProjectId($){let{rows:X}=await P.query(`SELECT
         E.nombre,
         E.a_paterno
       FROM
         PROYECTO_ESTUDIANTE AS PE
         JOIN ESTUDIANTES AS E ON E.ID_ESTUDIANTES = PE.ID_ESTUDIANTE
       WHERE
         ID_PROYECTO = $1`,[$]);return X}};var nq=new o({prefix:"/estudiantes"}).get("/EstudiantesPorProyecto/:idProyecto",async({params:{idProyecto:$}})=>{let X=await iq.getStudentsByProjectId(Number($));if(!X||X.length===0)return[];return X},{params:M.Object({idProyecto:M.Numeric()}),response:M.Array(M.Object({nombre:M.String(),a_paterno:M.String()})),detail:{tags:["Estudiantes"],description:"Obtener nombres y apellidos paternos de estudiantes por ID de proyecto"}});var oq=new o().use(Fq).use(Sq).use(Dq).use(Cq).use(Eq).use(bq).use(kq).use(gq).use(fq).use(vq).use(yq).use(hq).use(dq).use(cq).use(mq).use(uq).use(lq).use(pq).use(nq);var t8=new o,rq=C$(t8);t8.use(aU());if(rq.ENVIRONMENT==="development")t8.use(tU({path:"/docs",documentation:{info:{title:"API Proyectos I+D - Bun + Elysia",version:"1.0.0",description:"API para gesti\xF3n de datos acad\xE9micos"},tags:[{name:"Health",description:"Health checks del sistema"},{name:"Acad\xE9micos",description:"Gesti\xF3n de datos de acad\xE9micos"}],components:{schemas:{Academico:{type:"object",properties:{id_academico:{type:"number",example:103},nombre:{type:"string",example:"ABDON"},email:{type:"string",format:"email",example:"abdon.cifuentes@pucv.cl"},a_materno:{type:"string",example:"VALENZUELA"},a_paterno:{type:"string",example:"CIFUENTES"}}},Unidad_Academica:{type:"object",properties:{id_unidad:{type:"number",example:103},nombre:{type:"string",example:"Ing Civil Mecanica"}}}}}}}));t8.use(oq).listen(rq.PORT);console.log(`\uD83E\uDD8A Elysia running at ${t8.server?.hostname}:${t8.server?.port}`);console.log(`\uD83D\uDCDA Swagger docs: http://${t8.server?.hostname}:${t8.server?.port}/docs`);
