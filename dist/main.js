// @bun
var Uq=Object.create;var{getPrototypeOf:Hq,defineProperty:K$,getOwnPropertyNames:Bq}=Object;var qq=Object.prototype.hasOwnProperty;var R4=($,Y,X)=>{X=$!=null?Uq(Hq($)):{};let Q=Y||!$||!$.__esModule?K$(X,"default",{value:$,enumerable:!0}):X;for(let W of Bq($))if(!qq.call(Q,W))K$(Q,W,{get:()=>$[W],enumerable:!0});return Q};var Y0=($,Y)=>()=>(Y||$((Y={exports:{}}).exports,Y),Y.exports);var k2=($,Y)=>{for(var X in Y)K$($,X,{get:Y[X],enumerable:!0,configurable:!0,set:(Q)=>Y[X]=()=>Q})};var u0=($,Y)=>()=>($&&(Y=$($=0)),Y);var E0=import.meta.require;var h0,a8;var o4=u0(()=>{h0=class h0 extends Error{constructor(){super("End-Of-Stream");this.name="EndOfStreamError"}};a8=class a8 extends Error{constructor($="The operation was aborted"){super($);this.name="AbortError"}}});class BY{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise(($,Y)=>{this.reject=Y,this.resolve=$})}}class e8{constructor(){this.endOfStream=!1,this.interrupted=!1,this.peekQueue=[]}async peek($,Y=!1){let X=await this.read($,Y);return this.peekQueue.push($.subarray(0,X)),X}async read($,Y=!1){if($.length===0)return 0;let X=this.readFromPeekBuffer($);if(!this.endOfStream)X+=await this.readRemainderFromStream($.subarray(X),Y);if(X===0&&!Y)throw new h0;return X}readFromPeekBuffer($){let Y=$.length,X=0;while(this.peekQueue.length>0&&Y>0){let Q=this.peekQueue.pop();if(!Q)throw new Error("peekData should be defined");let W=Math.min(Q.length,Y);if($.set(Q.subarray(0,W),X),X+=W,Y-=W,W<Q.length)this.peekQueue.push(Q.subarray(W))}return X}async readRemainderFromStream($,Y){let X=0;while(X<$.length&&!this.endOfStream){if(this.interrupted)throw new a8;let Q=await this.readFromStream($.subarray(X),Y);if(Q===0)break;X+=Q}if(!Y&&X<$.length)throw new h0;return X}}var D7=u0(()=>{o4()});var L7;var cJ=u0(()=>{o4();D7();L7=class L7 extends e8{constructor($){super();if(this.s=$,this.deferred=null,!$.read||!$.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>{if(this.endOfStream=!0,this.deferred)this.deferred.resolve(0)}),this.s.once("error",(Y)=>this.reject(Y)),this.s.once("close",()=>this.abort())}async readFromStream($,Y){if($.length===0)return 0;let X=this.s.read($.length);if(X)return $.set(X),X.length;let Q={buffer:$,mayBeLess:Y,deferred:new BY};return this.deferred=Q.deferred,this.s.once("readable",()=>{this.readDeferred(Q)}),Q.deferred.promise}readDeferred($){let Y=this.s.read($.buffer.length);if(Y)$.buffer.set(Y),$.deferred.resolve(Y.length),this.deferred=null;else this.s.once("readable",()=>{this.readDeferred($)})}reject($){if(this.interrupted=!0,this.deferred)this.deferred.reject($),this.deferred=null}async abort(){this.reject(new a8)}async close(){return this.abort()}}});var qY;var mJ=u0(()=>{D7();qY=class qY extends e8{constructor($){super();this.reader=$}async abort(){return this.close()}async close(){this.reader.releaseLock()}}});var Z7;var NY=u0(()=>{mJ();Z7=class Z7 extends qY{async readFromStream($,Y){if($.length===0)return 0;let X=await this.reader.read(new Uint8Array($.length),{min:Y?void 0:$.length});if(X.done)this.endOfStream=X.done;if(X.value)return $.set(X.value),X.value.length;return 0}}});var n4;var zY=u0(()=>{o4();D7();n4=class n4 extends e8{constructor($){super();this.reader=$,this.buffer=null}writeChunk($,Y){let X=Math.min(Y.length,$.length);if($.set(Y.subarray(0,X)),X<Y.length)this.buffer=Y.subarray(X);else this.buffer=null;return X}async readFromStream($,Y){if($.length===0)return 0;let X=0;if(this.buffer)X+=this.writeChunk($,this.buffer);while(X<$.length&&!this.endOfStream){let Q=await this.reader.read();if(Q.done){this.endOfStream=!0;break}if(Q.value)X+=this.writeChunk($.subarray(X),Q.value)}if(!Y&&X===0&&this.endOfStream)throw new h0;return X}abort(){return this.interrupted=!0,this.reader.cancel()}async close(){await this.abort(),this.reader.releaseLock()}}});function AY($){try{let Y=$.getReader({mode:"byob"});if(Y instanceof ReadableStreamDefaultReader)return new n4(Y);return new Z7(Y)}catch(Y){if(Y instanceof TypeError)return new n4($.getReader());throw Y}}var uJ=u0(()=>{NY();zY()});var K8=u0(()=>{o4();cJ();NY();zY();uJ()});class s2{constructor($){if(this.numBuffer=new Uint8Array(8),this.position=0,this.onClose=$?.onClose,$?.abortSignal)$.abortSignal.addEventListener("abort",()=>{this.abort()})}async readToken($,Y=this.position){let X=new Uint8Array($.len);if(await this.readBuffer(X,{position:Y})<$.len)throw new h0;return $.get(X,0)}async peekToken($,Y=this.position){let X=new Uint8Array($.len);if(await this.peekBuffer(X,{position:Y})<$.len)throw new h0;return $.get(X,0)}async readNumber($){if(await this.readBuffer(this.numBuffer,{length:$.len})<$.len)throw new h0;return $.get(this.numBuffer,0)}async peekNumber($){if(await this.peekBuffer(this.numBuffer,{length:$.len})<$.len)throw new h0;return $.get(this.numBuffer,0)}async ignore($){if(this.fileInfo.size!==void 0){let Y=this.fileInfo.size-this.position;if($>Y)return this.position+=Y,Y}return this.position+=$,$}async close(){await this.abort(),await this.onClose?.()}normalizeOptions($,Y){if(!this.supportsRandomAccess()&&Y&&Y.position!==void 0&&Y.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return{...{mayBeLess:!1,offset:0,length:$.length,position:this.position},...Y}}abort(){return Promise.resolve()}}var d6=u0(()=>{K8()});var nj=256000,j7;var lJ=u0(()=>{d6();K8();j7=class j7 extends s2{constructor($,Y){super(Y);this.streamReader=$,this.fileInfo=Y?.fileInfo??{}}async readBuffer($,Y){let X=this.normalizeOptions($,Y),Q=X.position-this.position;if(Q>0)return await this.ignore(Q),this.readBuffer($,Y);if(Q<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(X.length===0)return 0;let W=await this.streamReader.read($.subarray(0,X.length),X.mayBeLess);if(this.position+=W,(!Y||!Y.mayBeLess)&&W<X.length)throw new h0;return W}async peekBuffer($,Y){let X=this.normalizeOptions($,Y),Q=0;if(X.position){let W=X.position-this.position;if(W>0){let J=new Uint8Array(X.length+W);return Q=await this.peekBuffer(J,{mayBeLess:X.mayBeLess}),$.set(J.subarray(W)),Q-W}if(W<0)throw new Error("Cannot peek from a negative offset in a stream")}if(X.length>0){try{Q=await this.streamReader.peek($.subarray(0,X.length),X.mayBeLess)}catch(W){if(Y?.mayBeLess&&W instanceof h0)return 0;throw W}if(!X.mayBeLess&&Q<X.length)throw new h0}return Q}async ignore($){let Y=Math.min(nj,$),X=new Uint8Array(Y),Q=0;while(Q<$){let W=$-Q,J=await this.readBuffer(X,{length:Math.min(Y,W)});if(J<0)return J;Q+=J}return Q}abort(){return this.streamReader.abort()}async close(){return this.streamReader.close()}supportsRandomAccess(){return!1}}});var wY;var pJ=u0(()=>{K8();d6();wY=class wY extends s2{constructor($,Y){super(Y);this.uint8Array=$,this.fileInfo={...Y?.fileInfo??{},...{size:$.length}}}async readBuffer($,Y){if(Y?.position)this.position=Y.position;let X=await this.peekBuffer($,Y);return this.position+=X,X}async peekBuffer($,Y){let X=this.normalizeOptions($,Y),Q=Math.min(this.uint8Array.length-X.position,X.length);if(!X.mayBeLess&&Q<X.length)throw new h0;return $.set(this.uint8Array.subarray(X.position,X.position+Q)),Q}close(){return super.close()}supportsRandomAccess(){return!0}setPosition($){this.position=$}}});var iJ=u0(()=>{K8();d6()});function oJ($,Y){let X=new L7($),Q=Y??{},W=Q.onClose;return Q.onClose=async()=>{if(await X.close(),W)return W()},new j7(X,Q)}function K7($,Y){let X=AY($),Q=Y??{},W=Q.onClose;return Q.onClose=async()=>{if(await X.close(),W)return W()},new j7(X,Q)}function nJ($,Y){return new wY($,Y)}var F7=u0(()=>{K8();lJ();pJ();iJ();K8();d6()});import{open as tj}from"fs/promises";var r4;var OY=u0(()=>{d6();K8();r4=class r4 extends s2{static async fromFile($){let Y=await tj($,"r"),X=await Y.stat();return new r4(Y,{fileInfo:{path:$,size:X.size}})}constructor($,Y){super(Y);this.fileHandle=$,this.fileInfo=Y.fileInfo}async readBuffer($,Y){let X=this.normalizeOptions($,Y);if(this.position=X.position,X.length===0)return 0;let Q=await this.fileHandle.read($,0,X.length,X.position);if(this.position+=Q.bytesRead,Q.bytesRead<X.length&&(!Y||!Y.mayBeLess))throw new h0;return Q.bytesRead}async peekBuffer($,Y){let X=this.normalizeOptions($,Y),Q=await this.fileHandle.read($,0,X.length,X.position);if(!X.mayBeLess&&Q.bytesRead<X.length)throw new h0;return Q.bytesRead}async close(){return await this.fileHandle.close(),super.close()}setPosition($){this.position=$}supportsRandomAccess(){return!0}}});import{stat as sj}from"fs/promises";async function rJ($,Y){let X=oJ($,Y);if($.path){let Q=await sj($.path);X.fileInfo.path=$.path,X.fileInfo.size=Q.size}return X}var tJ;var sJ=u0(()=>{F7();OY();OY();F7();tJ=r4.fromFile});var aJ=u0(()=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */});function Y5($){return new DataView($.buffer,$.byteOffset)}class j5{constructor($,Y){this.len=$,this.encoding=Y,this.textDecoder=new TextDecoder(Y)}get($,Y){return this.textDecoder.decode($.subarray(Y,Y+this.len))}}var eJ,s0,c6,N1,$G,YG,XG;var t4=u0(()=>{aJ();eJ={len:1,get($,Y){return Y5($).getUint8(Y)},put($,Y,X){return Y5($).setUint8(Y,X),Y+1}},s0={len:2,get($,Y){return Y5($).getUint16(Y,!0)},put($,Y,X){return Y5($).setUint16(Y,X,!0),Y+2}},c6={len:2,get($,Y){return Y5($).getUint16(Y)},put($,Y,X){return Y5($).setUint16(Y,X),Y+2}},N1={len:4,get($,Y){return Y5($).getUint32(Y,!0)},put($,Y,X){return Y5($).setUint32(Y,X,!0),Y+4}},$G={len:4,get($,Y){return Y5($).getUint32(Y)},put($,Y,X){return Y5($).setUint32(Y,X),Y+4}},YG={len:4,get($,Y){return Y5($).getInt32(Y)},put($,Y,X){return Y5($).setInt32(Y,X),Y+4}},XG={len:8,get($,Y){return Y5($).getBigUint64(Y,!0)},put($,Y,X){return Y5($).setBigUint64(Y,X,!0),Y+8}}});import{createRequire as YK}from"module";function DK($,Y){return jY($,{i:2},Y&&Y.out,Y&&Y.dictionary)}function LK($,Y){var X=AK($);if(X+8>$.length)K5(6,"invalid gzip data");return jY($.subarray(X,-8),{i:2},Y&&Y.out||new F5(wK($)),Y&&Y.dictionary)}function ZK($,Y){return jY($.subarray(OK($,Y&&Y.dictionary),-4),{i:2},Y&&Y.out,Y&&Y.dictionary)}function BG($,Y){return $[0]==31&&$[1]==139&&$[2]==8?LK($,Y):($[0]&15)!=8||$[0]>>4>7||($[0]<<8|$[1])%31?DK($,Y):ZK($,Y)}var XK,QK,F5,m6,WK,QG,WG,JK,JG=function($,Y){var X=new m6(31);for(var Q=0;Q<31;++Q)X[Q]=Y+=1<<$[Q-1];var W=new WK(X[30]);for(var Q=1;Q<30;++Q)for(var J=X[Q];J<X[Q+1];++J)W[J]=J-X[Q]<<5|Q;return{b:X,r:W}},GG,MG,GK,UG,MK,Nu,ZY,F2,N0,s4=function($,Y,X){var Q=$.length,W=0,J=new m6(Y);for(;W<Q;++W)if($[W])++J[$[W]-1];var G=new m6(Y);for(W=1;W<Y;++W)G[W]=G[W-1]+J[W-1]<<1;var M;if(X){M=new m6(1<<Y);var U=15-Y;for(W=0;W<Q;++W)if($[W]){var H=W<<4|$[W],B=Y-$[W],A=G[$[W]-1]++<<B;for(var O=A|(1<<B)-1;A<=O;++A)M[ZY[A]>>U]=H}}else{M=new m6(Q);for(W=0;W<Q;++W)if($[W])M[W]=ZY[G[$[W]-1]++]>>15-$[W]}return M},a4,N0,N0,N0,N0,HG,N0,UK,HK,DY=function($){var Y=$[0];for(var X=1;X<$.length;++X)if($[X]>Y)Y=$[X];return Y},Q2=function($,Y,X){var Q=Y/8|0;return($[Q]|$[Q+1]<<8)>>(Y&7)&X},LY=function($,Y){var X=Y/8|0;return($[X]|$[X+1]<<8|$[X+2]<<16)>>(Y&7)},BK=function($){return($+7)/8|0},qK=function($,Y,X){if(Y==null||Y<0)Y=0;if(X==null||X>$.length)X=$.length;return new F5($.subarray(Y,X))},NK,K5=function($,Y,X){var Q=new Error(Y||NK[$]);if(Q.code=$,Error.captureStackTrace)Error.captureStackTrace(Q,K5);if(!X)throw Q;return Q},jY=function($,Y,X,Q){var W=$.length,J=Q?Q.length:0;if(!W||Y.f&&!Y.l)return X||new F5(0);var G=!X,M=G||Y.i!=2,U=Y.i;if(G)X=new F5(W*3);var H=function(N){var F=X.length;if(N>F){var D=new F5(Math.max(F*2,N));D.set(X),X=D}},B=Y.f||0,A=Y.p||0,O=Y.b||0,w=Y.l,q=Y.d,L=Y.m,j=Y.n,h=W*8;do{if(!w){B=Q2($,A,1);var V=Q2($,A+1,3);if(A+=3,!V){var I=BK(A)+4,o=$[I-4]|$[I-3]<<8,Q0=I+o;if(Q0>W){if(U)K5(0);break}if(M)H(O+o);X.set($.subarray(I,Q0),O),Y.b=O+=o,Y.p=A=Q0*8,Y.f=B;continue}else if(V==1)w=UK,q=HK,L=9,j=5;else if(V==2){var g=Q2($,A,31)+257,x=Q2($,A+10,15)+4,f=g+Q2($,A+5,31)+1;A+=14;var C=new F5(f),l=new F5(19);for(var $0=0;$0<x;++$0)l[JK[$0]]=Q2($,A+$0*3,7);A+=x*3;var H0=DY(l),A0=(1<<H0)-1,B5=s4(l,H0,1);for(var $0=0;$0<f;){var S0=B5[Q2($,A,A0)];A+=S0&15;var I=S0>>4;if(I<16)C[$0++]=I;else{var o1=0,I2=0;if(I==16)I2=3+Q2($,A,3),A+=2,o1=C[$0-1];else if(I==17)I2=3+Q2($,A,7),A+=3;else if(I==18)I2=11+Q2($,A,127),A+=7;while(I2--)C[$0++]=o1}}var T2=C.subarray(0,g),_5=C.subarray(g);L=DY(T2),j=DY(_5),w=s4(T2,L,1),q=s4(_5,j,1)}else K5(1);if(A>h){if(U)K5(0);break}}if(M)H(O+131072);var A2=(1<<L)-1,J1=(1<<j)-1,z1=A;for(;;z1=A){var o1=w[LY($,A)&A2],R1=o1>>4;if(A+=o1&15,A>h){if(U)K5(0);break}if(!o1)K5(2);if(R1<256)X[O++]=R1;else if(R1==256){z1=A,w=null;break}else{var d5=R1-254;if(R1>264){var $0=R1-257,d1=QG[$0];d5=Q2($,A,(1<<d1)-1)+MG[$0],A+=d1}var R5=q[LY($,A)&J1],q8=R5>>4;if(!R5)K5(3);A+=R5&15;var _5=MK[q8];if(q8>3){var d1=WG[q8];_5+=LY($,A)&(1<<d1)-1,A+=d1}if(A>h){if(U)K5(0);break}if(M)H(O+131072);var c5=O+d5;if(O<_5){var d=J-_5,E=Math.min(_5,c5);if(d+O<0)K5(3);for(;O<E;++O)X[O]=Q[d+O]}for(;O<c5;++O)X[O]=X[O-_5]}}if(Y.l=w,Y.p=z1,Y.b=O,Y.f=B,w)B=1,Y.m=L,Y.d=q,Y.n=j}while(!B);return O!=X.length&&G?qK(X,0,O):X.subarray(0,O)},zK,AK=function($){if($[0]!=31||$[1]!=139||$[2]!=8)K5(6,"invalid gzip data");var Y=$[3],X=10;if(Y&4)X+=($[10]|$[11]<<8)+2;for(var Q=(Y>>3&1)+(Y>>4&1);Q>0;Q-=!$[X++]);return X+(Y&2)},wK=function($){var Y=$.length;return($[Y-4]|$[Y-3]<<8|$[Y-2]<<16|$[Y-1]<<24)>>>0},OK=function($,Y){if(($[0]&15)!=8||$[0]>>4>7||($[0]<<8|$[1])%31)K5(6,"invalid zlib data");if(($[1]>>5&1)==+!Y)K5(6,"invalid zlib data: "+($[1]&32?"need":"unexpected")+" dictionary");return($[1]>>3&4)+2},jK,KK=0;var qG=u0(()=>{XK=YK("/");try{QK=XK("worker_threads").Worker}catch($){}F5=Uint8Array,m6=Uint16Array,WK=Int32Array,QG=new F5([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),WG=new F5([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),JK=new F5([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),GG=JG(QG,2),MG=GG.b,GK=GG.r;MG[28]=258,GK[258]=28;UG=JG(WG,0),MK=UG.b,Nu=UG.r,ZY=new m6(32768);for(N0=0;N0<32768;++N0)F2=(N0&43690)>>1|(N0&21845)<<1,F2=(F2&52428)>>2|(F2&13107)<<2,F2=(F2&61680)>>4|(F2&3855)<<4,ZY[N0]=((F2&65280)>>8|(F2&255)<<8)>>1;a4=new F5(288);for(N0=0;N0<144;++N0)a4[N0]=8;for(N0=144;N0<256;++N0)a4[N0]=9;for(N0=256;N0<280;++N0)a4[N0]=7;for(N0=280;N0<288;++N0)a4[N0]=8;HG=new F5(32);for(N0=0;N0<32;++N0)HG[N0]=5;UK=s4(a4,9,1),HK=s4(HG,5,1),NK=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],zK=new F5(0);jK=typeof TextDecoder!="undefined"&&new TextDecoder;try{jK.decode(zK,{stream:!0}),KK=1}catch($){}});var zG=Y0((Au,NG)=>{var u6=1000,l6=u6*60,p6=l6*60,$6=p6*24,FK=$6*7,SK=$6*365.25;NG.exports=function($,Y){Y=Y||{};var X=typeof $;if(X==="string"&&$.length>0)return _K($);else if(X==="number"&&isFinite($))return Y.long?PK($):RK($);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))};function _K($){if($=String($),$.length>100)return;var Y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec($);if(!Y)return;var X=parseFloat(Y[1]),Q=(Y[2]||"ms").toLowerCase();switch(Q){case"years":case"year":case"yrs":case"yr":case"y":return X*SK;case"weeks":case"week":case"w":return X*FK;case"days":case"day":case"d":return X*$6;case"hours":case"hour":case"hrs":case"hr":case"h":return X*p6;case"minutes":case"minute":case"mins":case"min":case"m":return X*l6;case"seconds":case"second":case"secs":case"sec":case"s":return X*u6;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return X;default:return}}function RK($){var Y=Math.abs($);if(Y>=$6)return Math.round($/$6)+"d";if(Y>=p6)return Math.round($/p6)+"h";if(Y>=l6)return Math.round($/l6)+"m";if(Y>=u6)return Math.round($/u6)+"s";return $+"ms"}function PK($){var Y=Math.abs($);if(Y>=$6)return S7($,Y,$6,"day");if(Y>=p6)return S7($,Y,p6,"hour");if(Y>=l6)return S7($,Y,l6,"minute");if(Y>=u6)return S7($,Y,u6,"second");return $+" ms"}function S7($,Y,X,Q){var W=Y>=X*1.5;return Math.round($/X)+" "+Q+(W?"s":"")}});var KY=Y0((wu,AG)=>{function CK($){X.debug=X,X.default=X,X.coerce=U,X.disable=G,X.enable=W,X.enabled=M,X.humanize=zG(),X.destroy=H,Object.keys($).forEach((B)=>{X[B]=$[B]}),X.names=[],X.skips=[],X.formatters={};function Y(B){let A=0;for(let O=0;O<B.length;O++)A=(A<<5)-A+B.charCodeAt(O),A|=0;return X.colors[Math.abs(A)%X.colors.length]}X.selectColor=Y;function X(B){let A,O=null,w,q;function L(...j){if(!L.enabled)return;let h=L,V=Number(new Date),I=V-(A||V);if(h.diff=I,h.prev=A,h.curr=V,A=V,j[0]=X.coerce(j[0]),typeof j[0]!=="string")j.unshift("%O");let o=0;j[0]=j[0].replace(/%([a-zA-Z%])/g,(g,x)=>{if(g==="%%")return"%";o++;let f=X.formatters[x];if(typeof f==="function"){let C=j[o];g=f.call(h,C),j.splice(o,1),o--}return g}),X.formatArgs.call(h,j),(h.log||X.log).apply(h,j)}if(L.namespace=B,L.useColors=X.useColors(),L.color=X.selectColor(B),L.extend=Q,L.destroy=X.destroy,Object.defineProperty(L,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(O!==null)return O;if(w!==X.namespaces)w=X.namespaces,q=X.enabled(B);return q},set:(j)=>{O=j}}),typeof X.init==="function")X.init(L);return L}function Q(B,A){let O=X(this.namespace+(typeof A==="undefined"?":":A)+B);return O.log=this.log,O}function W(B){X.save(B),X.namespaces=B,X.names=[],X.skips=[];let A=(typeof B==="string"?B:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let O of A)if(O[0]==="-")X.skips.push(O.slice(1));else X.names.push(O)}function J(B,A){let O=0,w=0,q=-1,L=0;while(O<B.length)if(w<A.length&&(A[w]===B[O]||A[w]==="*"))if(A[w]==="*")q=w,L=O,w++;else O++,w++;else if(q!==-1)w=q+1,L++,O=L;else return!1;while(w<A.length&&A[w]==="*")w++;return w===A.length}function G(){let B=[...X.names,...X.skips.map((A)=>"-"+A)].join(",");return X.enable(""),B}function M(B){for(let A of X.skips)if(J(B,A))return!1;for(let A of X.names)if(J(B,A))return!0;return!1}function U(B){if(B instanceof Error)return B.stack||B.message;return B}function H(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return X.enable(X.load()),X}AG.exports=CK});var OG=Y0((wG,_7)=>{wG.formatArgs=EK;wG.save=bK;wG.load=IK;wG.useColors=VK;wG.storage=TK();wG.destroy=(()=>{let $=!1;return()=>{if(!$)$=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();wG.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function VK(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let $;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&($=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt($[1],10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function EK($){if($[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+$[0]+(this.useColors?"%c ":" ")+"+"+_7.exports.humanize(this.diff),!this.useColors)return;let Y="color: "+this.color;$.splice(1,0,Y,"color: inherit");let X=0,Q=0;$[0].replace(/%[a-zA-Z%]/g,(W)=>{if(W==="%%")return;if(X++,W==="%c")Q=X}),$.splice(Q,0,Y)}wG.log=console.debug||console.log||(()=>{});function bK($){try{if($)wG.storage.setItem("debug",$);else wG.storage.removeItem("debug")}catch(Y){}}function IK(){let $;try{$=wG.storage.getItem("debug")||wG.storage.getItem("DEBUG")}catch(Y){}if(!$&&typeof process!=="undefined"&&"env"in process)$=process.env.DEBUG;return $}function TK(){try{return localStorage}catch($){}}_7.exports=KY()(wG);var{formatters:xK}=_7.exports;xK.j=function($){try{return JSON.stringify($)}catch(Y){return"[UnexpectedJSONParseError]: "+Y.message}}});var LG=Y0((Du,DG)=>{DG.exports=($,Y)=>{Y=Y||process.argv;let X=$.startsWith("-")?"":$.length===1?"-":"--",Q=Y.indexOf(X+$),W=Y.indexOf("--");return Q!==-1&&(W===-1?!0:Q<W)}});var jG=Y0((Lu,ZG)=>{var cK=E0("os"),W2=LG(),v1=process.env,i6;if(W2("no-color")||W2("no-colors")||W2("color=false"))i6=!1;else if(W2("color")||W2("colors")||W2("color=true")||W2("color=always"))i6=!0;if("FORCE_COLOR"in v1)i6=v1.FORCE_COLOR.length===0||parseInt(v1.FORCE_COLOR,10)!==0;function mK($){if($===0)return!1;return{level:$,hasBasic:!0,has256:$>=2,has16m:$>=3}}function uK($){if(i6===!1)return 0;if(W2("color=16m")||W2("color=full")||W2("color=truecolor"))return 3;if(W2("color=256"))return 2;if($&&!$.isTTY&&i6!==!0)return 0;let Y=i6?1:0;if(process.platform==="win32"){let X=cK.release().split(".");if(Number(process.versions.node.split(".")[0])>=8&&Number(X[0])>=10&&Number(X[2])>=10586)return Number(X[2])>=14931?3:2;return 1}if("CI"in v1){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((X)=>(X in v1))||v1.CI_NAME==="codeship")return 1;return Y}if("TEAMCITY_VERSION"in v1)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(v1.TEAMCITY_VERSION)?1:0;if(v1.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in v1){let X=parseInt((v1.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(v1.TERM_PROGRAM){case"iTerm.app":return X>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(v1.TERM))return 2;if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(v1.TERM))return 1;if("COLORTERM"in v1)return 1;if(v1.TERM==="dumb")return Y;return Y}function FY($){let Y=uK($);return mK(Y)}ZG.exports={supportsColor:FY,stdout:FY(process.stdout),stderr:FY(process.stderr)}});var _G=Y0((FG,P7)=>{var lK=E0("tty"),R7=E0("util");FG.init=sK;FG.log=nK;FG.formatArgs=iK;FG.save=rK;FG.load=tK;FG.useColors=pK;FG.destroy=R7.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");FG.colors=[6,2,3,4,5,1];try{let $=jG();if($&&($.stderr||$).level>=2)FG.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch($){}FG.inspectOpts=Object.keys(process.env).filter(($)=>{return/^debug_/i.test($)}).reduce(($,Y)=>{let X=Y.substring(6).toLowerCase().replace(/_([a-z])/g,(W,J)=>{return J.toUpperCase()}),Q=process.env[Y];if(/^(yes|on|true|enabled)$/i.test(Q))Q=!0;else if(/^(no|off|false|disabled)$/i.test(Q))Q=!1;else if(Q==="null")Q=null;else Q=Number(Q);return $[X]=Q,$},{});function pK(){return"colors"in FG.inspectOpts?Boolean(FG.inspectOpts.colors):lK.isatty(process.stderr.fd)}function iK($){let{namespace:Y,useColors:X}=this;if(X){let Q=this.color,W="\x1B[3"+(Q<8?Q:"8;5;"+Q),J=`  ${W};1m${Y} \x1B[0m`;$[0]=J+$[0].split(`
`).join(`
`+J),$.push(W+"m+"+P7.exports.humanize(this.diff)+"\x1B[0m")}else $[0]=oK()+Y+" "+$[0]}function oK(){if(FG.inspectOpts.hideDate)return"";return new Date().toISOString()+" "}function nK(...$){return process.stderr.write(R7.formatWithOptions(FG.inspectOpts,...$)+`
`)}function rK($){if($)process.env.DEBUG=$;else delete process.env.DEBUG}function tK(){return process.env.DEBUG}function sK($){$.inspectOpts={};let Y=Object.keys(FG.inspectOpts);for(let X=0;X<Y.length;X++)$.inspectOpts[Y[X]]=FG.inspectOpts[Y[X]]}P7.exports=KY()(FG);var{formatters:KG}=P7.exports;KG.o=function($){return this.inspectOpts.colors=this.useColors,R7.inspect($,this.inspectOpts).split(`
`).map((Y)=>Y.trim()).join(" ")};KG.O=function($){return this.inspectOpts.colors=this.useColors,R7.inspect($,this.inspectOpts)}});var RG=Y0((ju,SY)=>{if(typeof process==="undefined"||process.type==="renderer"||!1||process.__nwjs)SY.exports=OG();else SY.exports=_G()});var X6,_Y,PG,CG,VG;var EG=u0(()=>{t4();X6={LocalFileHeader:67324752,DataDescriptor:134695760,CentralFileHeader:33639248,EndOfCentralDirectory:101010256},_Y={get($){let Y=s0.get($,6);return{signature:N1.get($,0),compressedSize:N1.get($,8),uncompressedSize:N1.get($,12)}},len:16},PG={get($){let Y=s0.get($,6);return{signature:N1.get($,0),minVersion:s0.get($,4),dataDescriptor:!!(Y&8),compressedMethod:s0.get($,8),compressedSize:N1.get($,18),uncompressedSize:N1.get($,22),filenameLength:s0.get($,26),extraFieldLength:s0.get($,28),filename:null}},len:30},CG={get($){return{signature:N1.get($,0),nrOfThisDisk:s0.get($,4),nrOfThisDiskWithTheStart:s0.get($,6),nrOfEntriesOnThisDisk:s0.get($,8),nrOfEntriesOfSize:s0.get($,10),sizeOfCd:N1.get($,12),offsetOfStartOfCd:N1.get($,16),zipFileCommentLength:s0.get($,20)}},len:22},VG={get($){let Y=s0.get($,8);return{signature:N1.get($,0),minVersion:s0.get($,6),dataDescriptor:!!(Y&8),compressedMethod:s0.get($,10),compressedSize:N1.get($,20),uncompressedSize:N1.get($,24),filenameLength:s0.get($,28),extraFieldLength:s0.get($,30),fileCommentLength:s0.get($,32),relativeOffsetOfLocalHeader:N1.get($,42),filename:null}},len:46}});function IG($){let Y=new Uint8Array(N1.len);return N1.put(Y,0,$),Y}class PY{constructor($){this.tokenizer=$,this.syncBuffer=new Uint8Array(RY)}async isZip(){return await this.peekSignature()===X6.LocalFileHeader}peekSignature(){return this.tokenizer.peekToken(N1)}async findEndOfCentralDirectoryLocator(){let $=this.tokenizer,Y=Math.min(16384,$.fileInfo.size),X=this.syncBuffer.subarray(0,Y);await this.tokenizer.readBuffer(X,{position:$.fileInfo.size-Y});for(let Q=X.length-4;Q>=0;Q--)if(X[Q]===C7[0]&&X[Q+1]===C7[1]&&X[Q+2]===C7[2]&&X[Q+3]===C7[3])return $.fileInfo.size-Y+Q;return-1}async readCentralDirectory(){if(!this.tokenizer.supportsRandomAccess()){S2("Cannot reading central-directory without random-read support");return}S2("Reading central-directory...");let $=this.tokenizer.position,Y=await this.findEndOfCentralDirectoryLocator();if(Y>0){S2("Central-directory 32-bit signature found");let X=await this.tokenizer.readToken(CG,Y),Q=[];this.tokenizer.setPosition(X.offsetOfStartOfCd);for(let W=0;W<X.nrOfEntriesOfSize;++W){let J=await this.tokenizer.readToken(VG);if(J.signature!==X6.CentralFileHeader)throw new Error("Expected Central-File-Header signature");J.filename=await this.tokenizer.readToken(new j5(J.filenameLength,"utf-8")),await this.tokenizer.ignore(J.extraFieldLength),await this.tokenizer.ignore(J.fileCommentLength),Q.push(J),S2(`Add central-directory file-entry: n=${W+1}/${Q.length}: filename=${Q[W].filename}`)}return this.tokenizer.setPosition($),Q}this.tokenizer.setPosition($)}async unzip($){let Y=await this.readCentralDirectory();if(Y)return this.iterateOverCentralDirectory(Y,$);let X=!1;do{let Q=await this.readLocalFileHeader();if(!Q)break;let W=$(Q);X=!!W.stop;let J=void 0;if(await this.tokenizer.ignore(Q.extraFieldLength),Q.dataDescriptor&&Q.compressedSize===0){let G=[],M=RY;S2("Compressed-file-size unknown, scanning for next data-descriptor-signature....");let U=-1;while(U<0&&M===RY){M=await this.tokenizer.peekBuffer(this.syncBuffer,{mayBeLess:!0}),U=GF(this.syncBuffer.subarray(0,M),JF);let H=U>=0?U:M;if(W.handler){let B=new Uint8Array(H);await this.tokenizer.readBuffer(B),G.push(B)}else await this.tokenizer.ignore(H)}if(S2(`Found data-descriptor-signature at pos=${this.tokenizer.position}`),W.handler)await this.inflate(Q,MF(G),W.handler)}else if(W.handler)S2(`Reading compressed-file-data: ${Q.compressedSize} bytes`),J=new Uint8Array(Q.compressedSize),await this.tokenizer.readBuffer(J),await this.inflate(Q,J,W.handler);else S2(`Ignoring compressed-file-data: ${Q.compressedSize} bytes`),await this.tokenizer.ignore(Q.compressedSize);if(S2(`Reading data-descriptor at pos=${this.tokenizer.position}`),Q.dataDescriptor){if((await this.tokenizer.readToken(_Y)).signature!==134695760)throw new Error(`Expected data-descriptor-signature at position ${this.tokenizer.position-_Y.len}`)}}while(!X)}async iterateOverCentralDirectory($,Y){for(let X of $){let Q=Y(X);if(Q.handler){this.tokenizer.setPosition(X.relativeOffsetOfLocalHeader);let W=await this.readLocalFileHeader();if(W){await this.tokenizer.ignore(W.extraFieldLength);let J=new Uint8Array(X.compressedSize);await this.tokenizer.readBuffer(J),await this.inflate(W,J,Q.handler)}}if(Q.stop)break}}inflate($,Y,X){if($.compressedMethod===0)return X(Y);S2(`Decompress filename=${$.filename}, compressed-size=${Y.length}`);let Q=BG(Y);return X(Q)}async readLocalFileHeader(){let $=await this.tokenizer.peekToken(N1);if($===X6.LocalFileHeader){let Y=await this.tokenizer.readToken(PG);return Y.filename=await this.tokenizer.readToken(new j5(Y.filenameLength,"utf-8")),Y}if($===X6.CentralFileHeader)return!1;if($===3759263696)throw new Error("Encrypted ZIP");throw new Error("Unexpected signature")}}function GF($,Y){let X=$.length,Q=Y.length;if(Q>X)return-1;for(let W=0;W<=X-Q;W++){let J=!0;for(let G=0;G<Q;G++)if($[W+G]!==Y[G]){J=!1;break}if(J)return W}return-1}function MF($){let Y=$.reduce((W,J)=>W+J.length,0),X=new Uint8Array(Y),Q=0;for(let W of $)X.set(W,Q),Q+=W.length;return X}var bG,S2,RY=262144,JF,C7;var TG=u0(()=>{t4();qG();bG=R4(RG(),1);EG();S2=bG.default("tokenizer:inflate"),JF=IG(X6.DataDescriptor),C7=IG(X6.EndOfCentralDirectory)});function CY($){let{byteLength:Y}=$;if(Y===6)return $.getUint16(0)*4294967296+$.getUint32(2);if(Y===5)return $.getUint8(0)*4294967296+$.getUint32(1);if(Y===4)return $.getUint32(0);if(Y===3)return $.getUint8(0)*65536+$.getUint16(1);if(Y===2)return $.getUint16(0);if(Y===1)return $.getUint8(0)}var Cu,Vu,Eu;var xG=u0(()=>{Cu={utf8:new globalThis.TextDecoder("utf8")},Vu=new globalThis.TextEncoder,Eu=Array.from({length:256},($,Y)=>Y.toString(16).padStart(2,"0"))});function kG($){return[...$].map((Y)=>Y.charCodeAt(0))}function gG($,Y=0){let X=Number.parseInt(new j5(6).get($,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(X))return!1;let Q=256;for(let W=Y;W<Y+148;W++)Q+=$[W];for(let W=Y+156;W<Y+512;W++)Q+=$[W];return X===Q}var fG;var vG=u0(()=>{t4();fG={get:($,Y)=>$[Y+3]&127|$[Y+2]<<7|$[Y+1]<<14|$[Y]<<21,len:4}});var yG,hG;var dG=u0(()=>{yG=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ttc","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx","vtt","apk","drc","lz4","potx","xltx","dotx","xltm","ott","ots","otp","odg","otg","xlsm","docm","dotm","potm","pptm","jar","rm","ppsm","ppsx"],hG=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/vnd.apache.arrow.file","video/mp4","audio/midi","video/matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","video/ogg","audio/ogg","audio/ogg; codecs=opus","application/ogg","audio/flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","font/collection","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","text/vtt","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/vnd.apache.parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio","application/vnd.android.package-archive","application/vnd.google.draco","application/x-lz4","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-excel.template.macroenabled.12","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.presentation-template","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.graphics-template","application/vnd.ms-excel.sheet.macroenabled.12","application/vnd.ms-word.document.macroenabled.12","application/vnd.ms-word.template.macroenabled.12","application/vnd.ms-powerpoint.template.macroenabled.12","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/java-archive","application/vnd.rn-realmedia"]});async function cG($,Y){return new o6(Y).fromBuffer($)}async function mG($,Y){return new o6(Y).fromBlob($)}function VY($){switch($=$.toLowerCase(),$){case"application/epub+zip":return{ext:"epub",mime:$};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:$};case"application/vnd.oasis.opendocument.text-template":return{ext:"ott",mime:$};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:$};case"application/vnd.oasis.opendocument.spreadsheet-template":return{ext:"ots",mime:$};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:$};case"application/vnd.oasis.opendocument.presentation-template":return{ext:"otp",mime:$};case"application/vnd.oasis.opendocument.graphics":return{ext:"odg",mime:$};case"application/vnd.oasis.opendocument.graphics-template":return{ext:"otg",mime:$};case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":return{ext:"ppsx",mime:$};case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return{ext:"xlsx",mime:$};case"application/vnd.ms-excel.sheet.macroenabled":return{ext:"xlsm",mime:"application/vnd.ms-excel.sheet.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":return{ext:"xltx",mime:$};case"application/vnd.ms-excel.template.macroenabled":return{ext:"xltm",mime:"application/vnd.ms-excel.template.macroenabled.12"};case"application/vnd.ms-powerpoint.slideshow.macroenabled":return{ext:"ppsm",mime:"application/vnd.ms-powerpoint.slideshow.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return{ext:"docx",mime:$};case"application/vnd.ms-word.document.macroenabled":return{ext:"docm",mime:"application/vnd.ms-word.document.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":return{ext:"dotx",mime:$};case"application/vnd.ms-word.template.macroenabledtemplate":return{ext:"dotm",mime:"application/vnd.ms-word.template.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.presentationml.template":return{ext:"potx",mime:$};case"application/vnd.ms-powerpoint.template.macroenabled":return{ext:"potm",mime:"application/vnd.ms-powerpoint.template.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return{ext:"pptx",mime:$};case"application/vnd.ms-powerpoint.presentation.macroenabled":return{ext:"pptm",mime:"application/vnd.ms-powerpoint.presentation.macroenabled.12"};case"application/vnd.ms-visio.drawing":return{ext:"vsdx",mime:"application/vnd.visio"};case"application/vnd.ms-package.3dmanufacturing-3dmodel+xml":return{ext:"3mf",mime:"model/3mf"};default:}}function _2($,Y,X){X={offset:0,...X};for(let[Q,W]of Y.entries())if(X.mask){if(W!==(X.mask[Q]&$[Q+X.offset]))return!1}else if(W!==$[Q+X.offset])return!1;return!0}async function uG($,Y){return new o6(Y).fromTokenizer($)}class o6{constructor($){this.options={mpegOffsetTolerance:0,...$},this.detectors=[...$?.customDetectors??[],{id:"core",detect:this.detectConfident},{id:"core.imprecise",detect:this.detectImprecise}],this.tokenizerOptions={abortSignal:$?.signal}}async fromTokenizer($){let Y=$.position;for(let X of this.detectors){let Q=await X.detect($);if(Q)return Q;if(Y!==$.position)return}}async fromBuffer($){if(!($ instanceof Uint8Array||$ instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof $}\``);let Y=$ instanceof Uint8Array?$:new Uint8Array($);if(!(Y?.length>1))return;return this.fromTokenizer(nJ(Y,this.tokenizerOptions))}async fromBlob($){return this.fromStream($.stream())}async fromStream($){let Y=await K7($,this.tokenizerOptions);try{return await this.fromTokenizer(Y)}finally{await Y.close()}}async toDetectionStream($,Y){let{sampleSize:X=$9}=Y,Q,W,J=$.getReader({mode:"byob"});try{let{value:U,done:H}=await J.read(new Uint8Array(X));if(W=U,!H&&U)try{Q=await this.fromBuffer(U.subarray(0,X))}catch(B){if(!(B instanceof h0))throw B;Q=void 0}W=U}finally{J.releaseLock()}let G=new TransformStream({async start(U){U.enqueue(W)},transform(U,H){H.enqueue(U)}}),M=$.pipeThrough(G);return M.fileType=Q,M}check($,Y){return _2(this.buffer,$,Y)}checkString($,Y){return this.check(kG($),Y)}detectConfident=async($)=>{if(this.buffer=new Uint8Array($9),$.fileInfo.size===void 0)$.fileInfo.size=Number.MAX_SAFE_INTEGER;if(this.tokenizer=$,await $.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33])){if(await $.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14}))return{ext:"eps",mime:"application/eps"};return{ext:"ps",mime:"application/postscript"}}if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.detectConfident($);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await $.ignore(6);let Y=await $.readToken(fG);if($.position+Y>$.fileInfo.size)return{ext:"mp3",mime:"audio/mpeg"};return await $.ignore(Y),this.fromTokenizer($)}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255])){if(this.check([247],{offset:3}))return{ext:"jls",mime:"image/jls"};return{ext:"jpg",mime:"image/jpeg"}}if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){let Y;return await new PY($).unzip((X)=>{switch(X.filename){case"META-INF/mozilla.rsa":return Y={ext:"xpi",mime:"application/x-xpinstall"},{stop:!0};case"META-INF/MANIFEST.MF":return Y={ext:"jar",mime:"application/java-archive"},{stop:!0};case"mimetype":return{async handler(Q){let W=new TextDecoder("utf-8").decode(Q).trim();Y=VY(W)},stop:!0};case"[Content_Types].xml":return{async handler(Q){let W=new TextDecoder("utf-8").decode(Q),J=W.indexOf('.main+xml"');if(J===-1){if(W.includes('ContentType="application/vnd.ms-package.3dmanufacturing-3dmodel+xml"'))Y=VY("application/vnd.ms-package.3dmanufacturing-3dmodel+xml")}else{W=W.slice(0,Math.max(0,J));let G=W.lastIndexOf('"'),M=W.slice(Math.max(0,G+1));Y=VY(M)}},stop:!0};default:if(/classes\d*\.dex/.test(X.filename))return Y={ext:"apk",mime:"application/vnd.android.package-archive"},{stop:!0};return{}}}),Y??{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await $.ignore(28);let Y=new Uint8Array(8);if(await $.readBuffer(Y),_2(Y,[79,112,117,115,72,101,97,100]))return{ext:"opus",mime:"audio/ogg; codecs=opus"};if(_2(Y,[128,116,104,101,111,114,97]))return{ext:"ogv",mime:"video/ogg"};if(_2(Y,[1,118,105,100,101,111,0]))return{ext:"ogm",mime:"video/ogg"};if(_2(Y,[127,70,76,65,67]))return{ext:"oga",mime:"audio/ogg"};if(_2(Y,[83,112,101,101,120,32,32]))return{ext:"spx",mime:"audio/ogg"};if(_2(Y,[1,118,111,114,98,105,115]))return{ext:"ogg",mime:"audio/ogg"};return{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF"))return{ext:"pdf",mime:"application/pdf"};if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){let Y=await this.readTiffHeader(!1);if(Y)return Y}if(this.check([77,77])){let Y=await this.readTiffHeader(!0);if(Y)return Y}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function Y(){let G=await $.peekNumber(eJ),M=128,U=0;while((G&M)===0&&M!==0)++U,M>>=1;let H=new Uint8Array(U+1);return await $.readBuffer(H),H}async function X(){let G=await Y(),M=await Y();M[0]^=128>>M.length-1;let U=Math.min(6,M.length),H=new DataView(G.buffer),B=new DataView(M.buffer,M.length-U,U);return{id:CY(H),len:CY(B)}}async function Q(G){while(G>0){let M=await X();if(M.id===17026)return(await $.readToken(new j5(M.len))).replaceAll(/\00.*$/g,"");await $.ignore(M.len),--G}}let W=await X();switch(await Q(W.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/matroska"};default:return}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1")||this.checkString("PARE"))return{ext:"parquet",mime:"application/vnd.apache.parquet"};if(this.checkString("ttcf"))return{ext:"ttc",mime:"font/collection"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([4,34,77,24]))return{ext:"lz4",mime:"application/x-lz4"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.checkString(".RMF"))return{ext:"rm",mime:"application/vnd.rn-realmedia"};if(this.checkString("DRACO"))return{ext:"drc",mime:"application/vnd.google.draco"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){let Y=new j5(4,"latin1").get(this.buffer,2);if(Y.match("^d*")&&Y>=1000&&Y<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>")){if(await $.ignore(8),await $.readToken(new j5(13,"ascii"))==="debian-binary")return{ext:"deb",mime:"application/x-deb"};return{ext:"ar",mime:"application/x-unix-archive"}}if(this.checkString("WEBVTT")&&[`
`,"\r","\t"," ","\x00"].some((Y)=>this.checkString(Y,{offset:6})))return{ext:"vtt",mime:"text/vtt"};if(this.check([137,80,78,71,13,10,26,10])){await $.ignore(8);async function Y(){return{length:await $.readToken(YG),type:await $.readToken(new j5(4,"latin1"))}}do{let X=await Y();if(X.length<0)return;switch(X.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await $.ignore(X.length+4)}}while($.position+8<$.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/vnd.apache.arrow.file"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.checkString("ftyp",{offset:4})&&(this.buffer[8]&96)!==0){let Y=new j5(4,"latin1").get(this.buffer,8).replace("\x00"," ").trim();switch(Y){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:if(Y.startsWith("3g")){if(Y.startsWith("3g2"))return{ext:"3g2",mime:"video/3gpp2"};return{ext:"3gp",mime:"video/3gpp"}}return{ext:"mp4",mime:"video/mp4"}}}if(this.check([82,73,70,70])){if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function Y(){let X=new Uint8Array(16);return await $.readBuffer(X),{id:X,size:Number(await $.readToken(XG))}}await $.ignore(30);while($.position+24<$.fileInfo.size){let X=await Y(),Q=X.size-24;if(_2(X.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let W=new Uint8Array(16);if(Q-=await $.readBuffer(W),_2(W,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_2(W,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await $.ignore(Q)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await $.ignore(20),await $.readToken(new j5(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255])){if(this.check([0,60,0,63,0,120,0,109,0,108],{offset:2}))return{ext:"xml",mime:"application/xml"};return}if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await $.peekBuffer(this.buffer,{length:Math.min(256,$.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("**ACE",{offset:7})&&this.checkString("**",{offset:12}))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){let Y=new DataView(this.buffer.buffer).getUint32(12,!0);if(Y>12&&this.buffer.length>=Y+16)try{let X=new TextDecoder().decode(this.buffer.subarray(16,Y+16));if(JSON.parse(X).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \x00"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await $.peekBuffer(this.buffer,{length:Math.min(512,$.fileInfo.size),mayBeLess:!0}),this.checkString("ustar",{offset:257})&&(this.checkString("\x00",{offset:262})||this.checkString(" ",{offset:262}))||this.check([0,0,0,0,0,0],{offset:257})&&gG(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254])){if(this.check([60,0,63,0,120,0,109,0,108,0],{offset:2}))return{ext:"xml",mime:"application/xml"};if(this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2}))return{ext:"skp",mime:"application/vnd.sketchup.skp"};return}if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"}};detectImprecise=async($)=>{if(this.buffer=new Uint8Array($9),await $.peekBuffer(this.buffer,{length:Math.min(8,$.fileInfo.size),mayBeLess:!0}),this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(await $.peekBuffer(this.buffer,{length:Math.min(2+this.options.mpegOffsetTolerance,$.fileInfo.size),mayBeLess:!0}),this.buffer.length>=2+this.options.mpegOffsetTolerance)for(let Y=0;Y<=this.options.mpegOffsetTolerance;++Y){let X=this.scanMpeg(Y);if(X)return X}};async readTiffTag($){let Y=await this.tokenizer.readToken($?c6:s0);switch(this.tokenizer.ignore(10),Y){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"};default:}}async readTiffIFD($){let Y=await this.tokenizer.readToken($?c6:s0);for(let X=0;X<Y;++X){let Q=await this.readTiffTag($);if(Q)return Q}}async readTiffHeader($){let Y=($?c6:s0).get(this.buffer,2),X=($?$G:N1).get(this.buffer,4);if(Y===42){if(X>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(X>=8){let W=($?c6:s0).get(this.buffer,8),J=($?c6:s0).get(this.buffer,10);if(W===28&&J===254||W===31&&J===11)return{ext:"nef",mime:"image/x-nikon-nef"}}}return await this.tokenizer.ignore(X),await this.readTiffIFD($)??{ext:"tif",mime:"image/tiff"}}if(Y===43)return{ext:"tif",mime:"image/tiff"}}scanMpeg($){if(this.check([255,224],{offset:$,mask:[255,224]})){if(this.check([16],{offset:$+1,mask:[22]})){if(this.check([8],{offset:$+1,mask:[8]}))return{ext:"aac",mime:"audio/aac"};return{ext:"aac",mime:"audio/aac"}}if(this.check([2],{offset:$+1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:$+1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:$+1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}}var $9=4100,lG,pG;var EY=u0(()=>{t4();F7();TG();xG();vG();dG();lG=new Set(yG),pG=new Set(hG)});var oG={};k2(oG,{supportedMimeTypes:()=>pG,supportedExtensions:()=>lG,fileTypeStream:()=>zF,fileTypeFromTokenizer:()=>uG,fileTypeFromStream:()=>NF,fileTypeFromFile:()=>qF,fileTypeFromBuffer:()=>cG,fileTypeFromBlob:()=>mG,FileTypeParser:()=>Y9});import{ReadableStream as UF}from"stream/web";import{pipeline as iG,PassThrough as HF,Readable as BF}from"stream";async function qF($,Y){return new Y9(Y).fromFile($,Y)}async function NF($,Y){return new Y9(Y).fromStream($)}async function zF($,Y={}){return new Y9(Y).toDetectionStream($,Y)}var Y9;var nG=u0(()=>{sJ();EY();EY();Y9=class Y9 extends o6{async fromStream($){let Y=await($ instanceof UF?K7($,this.tokenizerOptions):rJ($,this.tokenizerOptions));try{return await super.fromTokenizer(Y)}finally{await Y.close()}}async fromFile($){let Y=await tJ($);try{return await super.fromTokenizer(Y)}finally{await Y.close()}}async toDetectionStream($,Y={}){if(!($ instanceof BF))return super.toDetectionStream($,Y);let{sampleSize:X=$9}=Y;return new Promise((Q,W)=>{$.on("error",W),$.once("readable",()=>{(async()=>{try{let J=new HF,G=iG?iG($,J,()=>{}):$.pipe(J),M=$.read(X)??$.read()??new Uint8Array(0);try{J.fileType=await this.fromBuffer(M)}catch(U){if(U instanceof h0)J.fileType=void 0;else W(U)}Q(G)}catch(J){W(J)}})()})})}}});var UX=Y0((W3)=>{W3.parse=function($,Y){return new MX($,Y).parse()};class MX{constructor($,Y){this.source=$,this.transform=Y||Q3,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var $=this.source[this.position++];if($==="\\")return{value:this.source[this.position++],escaped:!0};return{value:$,escaped:!1}}record($){this.recorded.push($)}newEntry($){var Y;if(this.recorded.length>0||$){if(Y=this.recorded.join(""),Y==="NULL"&&!$)Y=null;if(Y!==null)Y=this.transform(Y);this.entries.push(Y),this.recorded=[]}}consumeDimensions(){if(this.source[0]==="[")while(!this.isEof()){var $=this.nextCharacter();if($.value==="=")break}}parse($){var Y,X,Q;this.consumeDimensions();while(!this.isEof())if(Y=this.nextCharacter(),Y.value==="{"&&!Q){if(this.dimension++,this.dimension>1)X=new MX(this.source.substr(this.position-1),this.transform),this.entries.push(X.parse(!0)),this.position+=X.position-2}else if(Y.value==="}"&&!Q){if(this.dimension--,!this.dimension){if(this.newEntry(),$)return this.entries}}else if(Y.value==='"'&&!Y.escaped){if(Q)this.newEntry(!0);Q=!Q}else if(Y.value===","&&!Q)this.newEntry();else this.record(Y.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}}function Q3($){return $}});var HX=Y0((xp,bU)=>{var G3=UX();bU.exports={create:function($,Y){return{parse:function(){return G3.parse($,Y)}}}}});var xU=Y0((kp,TU)=>{var M3=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,U3=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,H3=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,B3=/^-?infinity$/;TU.exports=function $(Y){if(B3.test(Y))return Number(Y.replace("i","I"));var X=M3.exec(Y);if(!X)return q3(Y)||null;var Q=!!X[8],W=parseInt(X[1],10);if(Q)W=IU(W);var J=parseInt(X[2],10)-1,G=X[3],M=parseInt(X[4],10),U=parseInt(X[5],10),H=parseInt(X[6],10),B=X[7];B=B?1000*parseFloat(B):0;var A,O=N3(Y);if(O!=null){if(A=new Date(Date.UTC(W,J,G,M,U,H,B)),BX(W))A.setUTCFullYear(W);if(O!==0)A.setTime(A.getTime()-O)}else if(A=new Date(W,J,G,M,U,H,B),BX(W))A.setFullYear(W);return A};function q3($){var Y=U3.exec($);if(!Y)return;var X=parseInt(Y[1],10),Q=!!Y[4];if(Q)X=IU(X);var W=parseInt(Y[2],10)-1,J=Y[3],G=new Date(X,W,J);if(BX(X))G.setFullYear(X);return G}function N3($){if($.endsWith("+00"))return 0;var Y=H3.exec($.split(" ")[1]);if(!Y)return;var X=Y[1];if(X==="Z")return 0;var Q=X==="-"?-1:1,W=parseInt(Y[2],10)*3600+parseInt(Y[3]||0,10)*60+parseInt(Y[4]||0,10);return W*Q*1000}function IU($){return-($-1)}function BX($){return $>=0&&$<100}});var gU=Y0((gp,kU)=>{kU.exports=A3;var z3=Object.prototype.hasOwnProperty;function A3($){for(var Y=1;Y<arguments.length;Y++){var X=arguments[Y];for(var Q in X)if(z3.call(X,Q))$[Q]=X[Q]}return $}});var yU=Y0((fp,vU)=>{var w3=gU();vU.exports=O4;function O4($){if(!(this instanceof O4))return new O4($);w3(this,C3($))}var O3=["seconds","minutes","hours","days","months","years"];O4.prototype.toPostgres=function(){var $=O3.filter(this.hasOwnProperty,this);if(this.milliseconds&&$.indexOf("seconds")<0)$.push("seconds");if($.length===0)return"0";return $.map(function(Y){var X=this[Y]||0;if(Y==="seconds"&&this.milliseconds)X=(X+this.milliseconds/1000).toFixed(6).replace(/\.?0+$/,"");return X+" "+Y},this).join(" ")};var D3={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},L3=["years","months","days"],Z3=["hours","minutes","seconds"];O4.prototype.toISOString=O4.prototype.toISO=function(){var $=L3.map(X,this).join(""),Y=Z3.map(X,this).join("");return"P"+$+"T"+Y;function X(Q){var W=this[Q]||0;if(Q==="seconds"&&this.milliseconds)W=(W+this.milliseconds/1000).toFixed(6).replace(/0+$/,"");return W+D3[Q]}};var qX="([+-]?\\d+)",j3=qX+"\\s+years?",K3=qX+"\\s+mons?",F3=qX+"\\s+days?",S3="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",_3=new RegExp([j3,K3,F3,S3].map(function($){return"("+$+")?"}).join("\\s*")),fU={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},R3=["hours","minutes","seconds","milliseconds"];function P3($){var Y=$+"000000".slice($.length);return parseInt(Y,10)/1000}function C3($){if(!$)return{};var Y=_3.exec($),X=Y[8]==="-";return Object.keys(fU).reduce(function(Q,W){var J=fU[W],G=Y[J];if(!G)return Q;if(G=W==="milliseconds"?P3(G):parseInt(G,10),!G)return Q;if(X&&~R3.indexOf(W))G*=-1;return Q[W]=G,Q},{})}});var dU=Y0((vp,hU)=>{hU.exports=function $(Y){if(/^\\x/.test(Y))return new Buffer(Y.substr(2),"hex");var X="",Q=0;while(Q<Y.length)if(Y[Q]!=="\\")X+=Y[Q],++Q;else if(/[0-7]{3}/.test(Y.substr(Q+1,3)))X+=String.fromCharCode(parseInt(Y.substr(Q+1,3),8)),Q+=4;else{var W=1;while(Q+W<Y.length&&Y[Q+W]==="\\")W++;for(var J=0;J<Math.floor(W/2);++J)X+="\\";Q+=Math.floor(W/2)*2}return new Buffer(X,"binary")}});var oU=Y0((yp,iU)=>{var F9=UX(),S9=HX(),J$=xU(),mU=yU(),uU=dU();function G$($){return function Y(X){if(X===null)return X;return $(X)}}function lU($){if($===null)return $;return $==="TRUE"||$==="t"||$==="true"||$==="y"||$==="yes"||$==="on"||$==="1"}function V3($){if(!$)return null;return F9.parse($,lU)}function E3($){return parseInt($,10)}function NX($){if(!$)return null;return F9.parse($,G$(E3))}function b3($){if(!$)return null;return F9.parse($,G$(function(Y){return pU(Y).trim()}))}var I3=function($){if(!$)return null;var Y=S9.create($,function(X){if(X!==null)X=OX(X);return X});return Y.parse()},zX=function($){if(!$)return null;var Y=S9.create($,function(X){if(X!==null)X=parseFloat(X);return X});return Y.parse()},f5=function($){if(!$)return null;var Y=S9.create($);return Y.parse()},AX=function($){if(!$)return null;var Y=S9.create($,function(X){if(X!==null)X=J$(X);return X});return Y.parse()},T3=function($){if(!$)return null;var Y=S9.create($,function(X){if(X!==null)X=mU(X);return X});return Y.parse()},x3=function($){if(!$)return null;return F9.parse($,G$(uU))},wX=function($){return parseInt($,10)},pU=function($){var Y=String($);if(/^\d+$/.test(Y))return Y;return $},cU=function($){if(!$)return null;return F9.parse($,G$(JSON.parse))},OX=function($){if($[0]!=="(")return null;return $=$.substring(1,$.length-1).split(","),{x:parseFloat($[0]),y:parseFloat($[1])}},k3=function($){if($[0]!=="<"&&$[1]!=="(")return null;var Y="(",X="",Q=!1;for(var W=2;W<$.length-1;W++){if(!Q)Y+=$[W];if($[W]===")"){Q=!0;continue}else if(!Q)continue;if($[W]===",")continue;X+=$[W]}var J=OX(Y);return J.radius=parseFloat(X),J},g3=function($){$(20,pU),$(21,wX),$(23,wX),$(26,wX),$(700,parseFloat),$(701,parseFloat),$(16,lU),$(1082,J$),$(1114,J$),$(1184,J$),$(600,OX),$(651,f5),$(718,k3),$(1000,V3),$(1001,x3),$(1005,NX),$(1007,NX),$(1028,NX),$(1016,b3),$(1017,I3),$(1021,zX),$(1022,zX),$(1231,zX),$(1014,f5),$(1015,f5),$(1008,f5),$(1009,f5),$(1040,f5),$(1041,f5),$(1115,AX),$(1182,AX),$(1185,AX),$(1186,mU),$(1187,T3),$(17,uU),$(114,JSON.parse.bind(JSON)),$(3802,JSON.parse.bind(JSON)),$(199,cU),$(3807,cU),$(3907,f5),$(2951,f5),$(791,f5),$(1183,f5),$(1270,f5)};iU.exports={init:g3}});var rU=Y0((hp,nU)=>{var U5=1e6;function f3($){var Y=$.readInt32BE(0),X=$.readUInt32BE(4),Q="";if(Y<0)Y=~Y+(X===0),X=~X+1>>>0,Q="-";var W="",J,G,M,U,H,B;{if(J=Y%U5,Y=Y/U5>>>0,G=4294967296*J+X,X=G/U5>>>0,M=""+(G-U5*X),X===0&&Y===0)return Q+M+W;U="",H=6-M.length;for(B=0;B<H;B++)U+="0";W=U+M+W}{if(J=Y%U5,Y=Y/U5>>>0,G=4294967296*J+X,X=G/U5>>>0,M=""+(G-U5*X),X===0&&Y===0)return Q+M+W;U="",H=6-M.length;for(B=0;B<H;B++)U+="0";W=U+M+W}{if(J=Y%U5,Y=Y/U5>>>0,G=4294967296*J+X,X=G/U5>>>0,M=""+(G-U5*X),X===0&&Y===0)return Q+M+W;U="",H=6-M.length;for(B=0;B<H;B++)U+="0";W=U+M+W}return J=Y%U5,G=4294967296*J+X,M=""+G%U5,Q+M+W}nU.exports=f3});var $H=Y0((dp,eU)=>{var v3=rU(),X1=function($,Y,X,Q,W){X=X||0,Q=Q||!1,W=W||function(w,q,L){return w*Math.pow(2,L)+q};var J=X>>3,G=function(w){if(Q)return~w&255;return w},M=255,U=8-X%8;if(Y<U)M=255<<8-Y&255,U=Y;if(X)M=M>>X%8;var H=0;if(X%8+Y>=8)H=W(0,G($[J])&M,U);var B=Y+X>>3;for(var A=J+1;A<B;A++)H=W(H,G($[A]),8);var O=(Y+X)%8;if(O>0)H=W(H,G($[B])>>8-O,O);return H},aU=function($,Y,X){var Q=Math.pow(2,X-1)-1,W=X1($,1),J=X1($,X,1);if(J===0)return 0;var G=1,M=function(H,B,A){if(H===0)H=1;for(var O=1;O<=A;O++)if(G/=2,(B&1<<A-O)>0)H+=G;return H},U=X1($,Y,X+1,!1,M);if(J==Math.pow(2,X+1)-1){if(U===0)return W===0?1/0:-1/0;return NaN}return(W===0?1:-1)*Math.pow(2,J-Q)*U},y3=function($){if(X1($,1)==1)return-1*(X1($,15,1,!0)+1);return X1($,15,1)},tU=function($){if(X1($,1)==1)return-1*(X1($,31,1,!0)+1);return X1($,31,1)},h3=function($){return aU($,23,8)},d3=function($){return aU($,52,11)},c3=function($){var Y=X1($,16,32);if(Y==49152)return NaN;var X=Math.pow(1e4,X1($,16,16)),Q=0,W=[],J=X1($,16);for(var G=0;G<J;G++)Q+=X1($,16,64+16*G)*X,X/=1e4;var M=Math.pow(10,X1($,16,48));return(Y===0?1:-1)*Math.round(Q*M)/M},sU=function($,Y){var X=X1(Y,1),Q=X1(Y,63,1),W=new Date((X===0?1:-1)*Q/1000+946684800000);if(!$)W.setTime(W.getTime()+W.getTimezoneOffset()*60000);return W.usec=Q%1000,W.getMicroSeconds=function(){return this.usec},W.setMicroSeconds=function(J){this.usec=J},W.getUTCMicroSeconds=function(){return this.usec},W},_9=function($){var Y=X1($,32),X=X1($,32,32),Q=X1($,32,64),W=96,J=[];for(var G=0;G<Y;G++)J[G]=X1($,32,W),W+=32,W+=32;var M=function(H){var B=X1($,32,W);if(W+=32,B==4294967295)return null;var A;if(H==23||H==20)return A=X1($,B*8,W),W+=B*8,A;else if(H==25)return A=$.toString(this.encoding,W>>3,(W+=B<<3)>>3),A;else console.log("ERROR: ElementType not implemented: "+H)},U=function(H,B){var A=[],O;if(H.length>1){var w=H.shift();for(O=0;O<w;O++)A[O]=U(H,B);H.unshift(w)}else for(O=0;O<H[0];O++)A[O]=M(B);return A};return U(J,Q)},m3=function($){return $.toString("utf8")},u3=function($){if($===null)return null;return X1($,8)>0},l3=function($){$(20,v3),$(21,y3),$(23,tU),$(26,tU),$(1700,c3),$(700,h3),$(701,d3),$(16,u3),$(1114,sU.bind(null,!1)),$(1184,sU.bind(null,!0)),$(1000,_9),$(1007,_9),$(1016,_9),$(1008,_9),$(1009,_9),$(25,m3)};eU.exports={init:l3}});var XH=Y0((cp,YH)=>{YH.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var P9=Y0((s3)=>{var p3=oU(),i3=$H(),o3=HX(),n3=XH();s3.getTypeParser=r3;s3.setTypeParser=t3;s3.arrayParser=o3;s3.builtins=n3;var R9={text:{},binary:{}};function QH($){return String($)}function r3($,Y){if(Y=Y||"text",!R9[Y])return QH;return R9[Y][$]||QH}function t3($,Y,X){if(typeof Y=="function")X=Y,Y="text";R9[Y][$]=X}p3.init(function($,Y){R9.text[$]=Y});i3.init(function($,Y){R9.binary[$]=Y})});var C9=Y0((up,DX)=>{DX.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:30000,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var D4=P9(),XR=D4.getTypeParser(20,"text"),QR=D4.getTypeParser(1016,"text");DX.exports.__defineSetter__("parseInt8",function($){D4.setTypeParser(20,"text",$?D4.getTypeParser(23,"text"):XR),D4.setTypeParser(1016,"text",$?D4.getTypeParser(1007,"text"):QR)})});var L4=Y0((lp,JH)=>{var WR=C9();function JR($){return'"'+$.replace(/\\/g,"\\\\").replace(/"/g,"\\\"")+'"'}function WH($){let Y="{";for(let X=0;X<$.length;X++){if(X>0)Y=Y+",";if($[X]===null||typeof $[X]==="undefined")Y=Y+"NULL";else if(Array.isArray($[X]))Y=Y+WH($[X]);else if(ArrayBuffer.isView($[X])){let Q=$[X];if(!(Q instanceof Buffer)){let W=Buffer.from(Q.buffer,Q.byteOffset,Q.byteLength);if(W.length===Q.byteLength)Q=W;else Q=W.slice(Q.byteOffset,Q.byteOffset+Q.byteLength)}Y+="\\\\x"+Q.toString("hex")}else Y+=JR(M$($[X]))}return Y=Y+"}",Y}var M$=function($,Y){if($==null)return null;if(typeof $==="object"){if($ instanceof Buffer)return $;if(ArrayBuffer.isView($)){let X=Buffer.from($.buffer,$.byteOffset,$.byteLength);if(X.length===$.byteLength)return X;return X.slice($.byteOffset,$.byteOffset+$.byteLength)}if($ instanceof Date)if(WR.parseInputDatesAsUTC)return UR($);else return MR($);if(Array.isArray($))return WH($);return GR($,Y)}return $.toString()};function GR($,Y){if($&&typeof $.toPostgres==="function"){if(Y=Y||[],Y.indexOf($)!==-1)throw new Error('circular reference detected while preparing "'+$+'" for query');return Y.push($),M$($.toPostgres(M$),Y)}return JSON.stringify($)}function MR($){let Y=-$.getTimezoneOffset(),X=$.getFullYear(),Q=X<1;if(Q)X=Math.abs(X)+1;let W=String(X).padStart(4,"0")+"-"+String($.getMonth()+1).padStart(2,"0")+"-"+String($.getDate()).padStart(2,"0")+"T"+String($.getHours()).padStart(2,"0")+":"+String($.getMinutes()).padStart(2,"0")+":"+String($.getSeconds()).padStart(2,"0")+"."+String($.getMilliseconds()).padStart(3,"0");if(Y<0)W+="-",Y*=-1;else W+="+";if(W+=String(Math.floor(Y/60)).padStart(2,"0")+":"+String(Y%60).padStart(2,"0"),Q)W+=" BC";return W}function UR($){let Y=$.getUTCFullYear(),X=Y<1;if(X)Y=Math.abs(Y)+1;let Q=String(Y).padStart(4,"0")+"-"+String($.getUTCMonth()+1).padStart(2,"0")+"-"+String($.getUTCDate()).padStart(2,"0")+"T"+String($.getUTCHours()).padStart(2,"0")+":"+String($.getUTCMinutes()).padStart(2,"0")+":"+String($.getUTCSeconds()).padStart(2,"0")+"."+String($.getUTCMilliseconds()).padStart(3,"0");if(Q+="+00:00",X)Q+=" BC";return Q}function HR($,Y,X){if($=typeof $==="string"?{text:$}:$,Y)if(typeof Y==="function")$.callback=Y;else $.values=Y;if(X)$.callback=X;return $}var BR=function($){return'"'+$.replace(/"/g,'""')+'"'},qR=function($){let Y=!1,X="'";for(let Q=0;Q<$.length;Q++){let W=$[Q];if(W==="'")X+=W+W;else if(W==="\\")X+=W+W,Y=!0;else X+=W}if(X+="'",Y===!0)X=" E"+X;return X};JH.exports={prepareValue:function $(Y){return M$(Y)},normalizeQueryConfig:HR,escapeIdentifier:BR,escapeLiteral:qR}});var MH=Y0((pp,GH)=>{var Z4=E0("crypto");function LX($){return Z4.createHash("md5").update($,"utf-8").digest("hex")}function NR($,Y,X){let Q=LX(Y+$);return"md5"+LX(Buffer.concat([Buffer.from(Q),X]))}function zR($){return Z4.createHash("sha256").update($).digest()}function AR($,Y){return $=$.replace(/(\D)-/,"$1"),Z4.createHash($).update(Y).digest()}function wR($,Y){return Z4.createHmac("sha256",$).update(Y).digest()}async function OR($,Y,X){return Z4.pbkdf2Sync($,Y,X,32,"sha256")}GH.exports={postgresMd5PasswordHash:NR,randomBytes:Z4.randomBytes,deriveKey:OR,sha256:zR,hashByName:AR,hmacSha256:wR,md5:LX}});var qH=Y0((ip,BH)=>{var UH=E0("crypto");BH.exports={postgresMd5PasswordHash:LR,randomBytes:DR,deriveKey:FR,sha256:ZR,hashByName:jR,hmacSha256:KR,md5:ZX};var HH=UH.webcrypto||globalThis.crypto,q6=HH.subtle,jX=new TextEncoder;function DR($){return HH.getRandomValues(Buffer.alloc($))}async function ZX($){try{return UH.createHash("md5").update($,"utf-8").digest("hex")}catch(Y){let X=typeof $==="string"?jX.encode($):$,Q=await q6.digest("MD5",X);return Array.from(new Uint8Array(Q)).map((W)=>W.toString(16).padStart(2,"0")).join("")}}async function LR($,Y,X){let Q=await ZX(Y+$);return"md5"+await ZX(Buffer.concat([Buffer.from(Q),X]))}async function ZR($){return await q6.digest("SHA-256",$)}async function jR($,Y){return await q6.digest($,Y)}async function KR($,Y){let X=await q6.importKey("raw",$,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await q6.sign("HMAC",X,jX.encode(Y))}async function FR($,Y,X){let Q=await q6.importKey("raw",jX.encode($),"PBKDF2",!1,["deriveBits"]),W={name:"PBKDF2",hash:"SHA-256",salt:Y,iterations:X};return await q6.deriveBits(W,Q,256,["deriveBits"])}});var FX=Y0((op,KX)=>{var SR=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;if(SR)KX.exports=MH();else KX.exports=qH()});var AH=Y0((np,zH)=>{function N6($,Y){return new Error("SASL channel binding: "+$+" when parsing public certificate "+Y.toString("base64"))}function SX($,Y){let X=$[Y++];if(X<128)return{length:X,index:Y};let Q=X&127;if(Q>4)throw N6("bad length",$);X=0;for(let W=0;W<Q;W++)X=X<<8|$[Y++];return{length:X,index:Y}}function NH($,Y){if($[Y++]!==6)throw N6("non-OID data",$);let{length:X,index:Q}=SX($,Y);Y=Q;let W=Y+X,J=$[Y++],G=(J/40>>0)+"."+J%40;while(Y<W){let M=0;while(Y<W){let U=$[Y++];if(M=M<<7|U&127,U<128)break}G+="."+M}return{oid:G,index:Y}}function V9($,Y){if($[Y++]!==48)throw N6("non-sequence data",$);return SX($,Y)}function _R($,Y){if(Y===void 0)Y=0;Y=V9($,Y).index;let{length:X,index:Q}=V9($,Y);Y=Q+X,Y=V9($,Y).index;let{oid:W,index:J}=NH($,Y);switch(W){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(Y=J,Y=V9($,Y).index,$[Y++]!==160)throw N6("non-tag data",$);Y=SX($,Y).index,Y=V9($,Y).index;let{oid:G}=NH($,Y);switch(G){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw N6("unknown hash OID "+G,$)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw N6("Ed448 certificate channel binding is not currently supported by Postgres")}throw N6("unknown OID "+W,$)}zH.exports={signatureAlgorithmHashFromCertificate:_R}});var LH=Y0((rp,DH)=>{var f8=FX(),{signatureAlgorithmHashFromCertificate:RR}=AH();function PR($,Y){let X=["SCRAM-SHA-256"];if(Y)X.unshift("SCRAM-SHA-256-PLUS");let Q=X.find((G)=>$.includes(G));if(!Q)throw new Error("SASL: Only mechanism(s) "+X.join(" and ")+" are supported");if(Q==="SCRAM-SHA-256-PLUS"&&typeof Y.getPeerCertificate!=="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let W=f8.randomBytes(18).toString("base64");return{mechanism:Q,clientNonce:W,response:(Q==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":Y?"y":"n")+",,n=*,r="+W,message:"SASLInitialResponse"}}async function CR($,Y,X,Q){if($.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof Y!=="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(Y==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof X!=="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let W=bR(X);if(!W.nonce.startsWith($.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");else if(W.nonce.length===$.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let J="n=*,r="+$.clientNonce,G="r="+W.nonce+",s="+W.salt+",i="+W.iteration,M=Q?"eSws":"biws";if($.mechanism==="SCRAM-SHA-256-PLUS"){let V=Q.getPeerCertificate().raw,I=RR(V);if(I==="MD5"||I==="SHA-1")I="SHA-256";let o=await f8.hashByName(I,V);M=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(o)]).toString("base64")}let U="c="+M+",r="+W.nonce,H=J+","+G+","+U,B=Buffer.from(W.salt,"base64"),A=await f8.deriveKey(Y,B,W.iteration),O=await f8.hmacSha256(A,"Client Key"),w=await f8.sha256(O),q=await f8.hmacSha256(w,H),L=TR(Buffer.from(O),Buffer.from(q)).toString("base64"),j=await f8.hmacSha256(A,"Server Key"),h=await f8.hmacSha256(j,H);$.message="SASLResponse",$.serverSignature=Buffer.from(h).toString("base64"),$.response=U+",p="+L}function VR($,Y){if($.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof Y!=="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:X}=IR(Y);if(X!==$.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function ER($){if(typeof $!=="string")throw new TypeError("SASL: text must be a string");return $.split("").map((Y,X)=>$.charCodeAt(X)).every((Y)=>Y>=33&&Y<=43||Y>=45&&Y<=126)}function wH($){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test($)}function OH($){if(typeof $!=="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map($.split(",").map((Y)=>{if(!/^.=/.test(Y))throw new Error("SASL: Invalid attribute pair entry");let X=Y[0],Q=Y.substring(2);return[X,Q]}))}function bR($){let Y=OH($),X=Y.get("r");if(!X)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");else if(!ER(X))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters");let Q=Y.get("s");if(!Q)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");else if(!wH(Q))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64");let W=Y.get("i");if(!W)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");else if(!/^[1-9][0-9]*$/.test(W))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count");let J=parseInt(W,10);return{nonce:X,salt:Q,iteration:J}}function IR($){let X=OH($).get("v");if(!X)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");else if(!wH(X))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64");return{serverSignature:X}}function TR($,Y){if(!Buffer.isBuffer($))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(Y))throw new TypeError("second argument must be a Buffer");if($.length!==Y.length)throw new Error("Buffer lengths must match");if($.length===0)throw new Error("Buffers cannot be empty");return Buffer.from($.map((X,Q)=>$[Q]^Y[Q]))}DH.exports={startSession:PR,continueSession:CR,finalizeSession:VR}});var H$=Y0((tp,ZH)=>{var xR=P9();function U$($){this._types=$||xR,this.text={},this.binary={}}U$.prototype.getOverrides=function($){switch($){case"text":return this.text;case"binary":return this.binary;default:return{}}};U$.prototype.setTypeParser=function($,Y,X){if(typeof Y==="function")X=Y,Y="text";this.getOverrides(Y)[$]=X};U$.prototype.getTypeParser=function($,Y){return Y=Y||"text",this.getOverrides(Y)[$]||this._types.getTypeParser($,Y)};ZH.exports=U$});var FH=Y0((sp,KH)=>{function j4($,Y={}){if($.charAt(0)==="/"){let U=$.split(" ");return{host:U[0],database:U[1]}}let X={},Q,W=!1;if(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test($))$=encodeURI($).replace(/%25(\d\d)/g,"%$1");try{Q=new URL($,"postgres://base")}catch(U){Q=new URL($.replace("@/","@___DUMMY___/"),"postgres://base"),W=!0}for(let U of Q.searchParams.entries())X[U[0]]=U[1];if(X.user=X.user||decodeURIComponent(Q.username),X.password=X.password||decodeURIComponent(Q.password),Q.protocol=="socket:")return X.host=decodeURI(Q.pathname),X.database=Q.searchParams.get("db"),X.client_encoding=Q.searchParams.get("encoding"),X;let J=W?"":Q.hostname;if(!X.host)X.host=decodeURIComponent(J);else if(J&&/^%2f/i.test(J))Q.pathname=J+Q.pathname;if(!X.port)X.port=Q.port;let G=Q.pathname.slice(1)||null;if(X.database=G?decodeURI(G):null,X.ssl==="true"||X.ssl==="1")X.ssl=!0;if(X.ssl==="0")X.ssl=!1;if(X.sslcert||X.sslkey||X.sslrootcert||X.sslmode)X.ssl={};let M=X.sslcert||X.sslkey||X.sslrootcert?E0("fs"):null;if(X.sslcert)X.ssl.cert=M.readFileSync(X.sslcert).toString();if(X.sslkey)X.ssl.key=M.readFileSync(X.sslkey).toString();if(X.sslrootcert)X.ssl.ca=M.readFileSync(X.sslrootcert).toString();if(Y.useLibpqCompat&&X.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(X.uselibpqcompat==="true"||Y.useLibpqCompat)switch(X.sslmode){case"disable":{X.ssl=!1;break}case"prefer":{X.ssl.rejectUnauthorized=!1;break}case"require":{if(X.sslrootcert)X.ssl.checkServerIdentity=function(){};else X.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!X.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");X.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(X.sslmode){case"disable":{X.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{X.ssl.rejectUnauthorized=!1;break}}return X}function kR($){return Object.entries($).reduce((X,[Q,W])=>{if(W!==void 0&&W!==null)X[Q]=W;return X},{})}function jH($){return Object.entries($).reduce((X,[Q,W])=>{if(Q==="ssl"){let J=W;if(typeof J==="boolean")X[Q]=J;if(typeof J==="object")X[Q]=kR(J)}else if(W!==void 0&&W!==null)if(Q==="port"){if(W!==""){let J=parseInt(W,10);if(isNaN(J))throw new Error(`Invalid ${Q}: ${W}`);X[Q]=J}}else X[Q]=W;return X},{})}function gR($){return jH(j4($))}KH.exports=j4;j4.parse=j4;j4.toClientConfig=jH;j4.parseIntoClientConfig=gR});var _X=Y0((ap,PH)=>{var fR=E0("dns"),_H=C9(),SH=FH().parse,i1=function($,Y,X){if(X===void 0)X=process.env["PG"+$.toUpperCase()];else if(X===!1);else X=process.env[X];return Y[$]||X||_H[$]},vR=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return _H.ssl},K4=function($){return"'"+(""+$).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},v5=function($,Y,X){let Q=Y[X];if(Q!==void 0&&Q!==null)$.push(X+"="+K4(Q))};class RH{constructor($){if($=typeof $==="string"?SH($):$||{},$.connectionString)$=Object.assign({},$,SH($.connectionString));if(this.user=i1("user",$),this.database=i1("database",$),this.database===void 0)this.database=this.user;if(this.port=parseInt(i1("port",$),10),this.host=i1("host",$),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:i1("password",$)}),this.binary=i1("binary",$),this.options=i1("options",$),this.ssl=typeof $.ssl==="undefined"?vR():$.ssl,typeof this.ssl==="string"){if(this.ssl==="true")this.ssl=!0}if(this.ssl==="no-verify")this.ssl={rejectUnauthorized:!1};if(this.ssl&&this.ssl.key)Object.defineProperty(this.ssl,"key",{enumerable:!1});if(this.client_encoding=i1("client_encoding",$),this.replication=i1("replication",$),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=i1("application_name",$,"PGAPPNAME"),this.fallback_application_name=i1("fallback_application_name",$,!1),this.statement_timeout=i1("statement_timeout",$,!1),this.lock_timeout=i1("lock_timeout",$,!1),this.idle_in_transaction_session_timeout=i1("idle_in_transaction_session_timeout",$,!1),this.query_timeout=i1("query_timeout",$,!1),$.connectionTimeoutMillis===void 0)this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0;else this.connect_timeout=Math.floor($.connectionTimeoutMillis/1000);if($.keepAlive===!1)this.keepalives=0;else if($.keepAlive===!0)this.keepalives=1;if(typeof $.keepAliveInitialDelayMillis==="number")this.keepalives_idle=Math.floor($.keepAliveInitialDelayMillis/1000)}getLibpqConnectionString($){let Y=[];v5(Y,this,"user"),v5(Y,this,"password"),v5(Y,this,"port"),v5(Y,this,"application_name"),v5(Y,this,"fallback_application_name"),v5(Y,this,"connect_timeout"),v5(Y,this,"options");let X=typeof this.ssl==="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(v5(Y,X,"sslmode"),v5(Y,X,"sslca"),v5(Y,X,"sslkey"),v5(Y,X,"sslcert"),v5(Y,X,"sslrootcert"),this.database)Y.push("dbname="+K4(this.database));if(this.replication)Y.push("replication="+K4(this.replication));if(this.host)Y.push("host="+K4(this.host));if(this.isDomainSocket)return $(null,Y.join(" "));if(this.client_encoding)Y.push("client_encoding="+K4(this.client_encoding));fR.lookup(this.host,function(Q,W){if(Q)return $(Q,null);return Y.push("hostaddr="+K4(W)),$(null,Y.join(" "))})}}PH.exports=RH});var RX=Y0((ep,EH)=>{var yR=P9(),CH=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/;class VH{constructor($,Y){if(this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=Y,this.RowCtor=null,this.rowAsArray=$==="array",this.rowAsArray)this.parseRow=this._parseRowAsArray;this._prebuiltEmptyResultObject=null}addCommandComplete($){let Y;if($.text)Y=CH.exec($.text);else Y=CH.exec($.command);if(Y){if(this.command=Y[1],Y[3])this.oid=parseInt(Y[2],10),this.rowCount=parseInt(Y[3],10);else if(Y[2])this.rowCount=parseInt(Y[2],10)}}_parseRowAsArray($){let Y=new Array($.length);for(let X=0,Q=$.length;X<Q;X++){let W=$[X];if(W!==null)Y[X]=this._parsers[X](W);else Y[X]=null}return Y}parseRow($){let Y={...this._prebuiltEmptyResultObject};for(let X=0,Q=$.length;X<Q;X++){let W=$[X],J=this.fields[X].name;if(W!==null)Y[J]=this._parsers[X](W);else Y[J]=null}return Y}addRow($){this.rows.push($)}addFields($){if(this.fields=$,this.fields.length)this._parsers=new Array($.length);let Y={};for(let X=0;X<$.length;X++){let Q=$[X];if(Y[Q.name]=null,this._types)this._parsers[X]=this._types.getTypeParser(Q.dataTypeID,Q.format||"text");else this._parsers[X]=yR.getTypeParser(Q.dataTypeID,Q.format||"text")}this._prebuiltEmptyResultObject={...Y}}}EH.exports=VH});var kH=Y0(($i,xH)=>{var{EventEmitter:hR}=E0("events"),bH=RX(),IH=L4();class TH extends hR{constructor($,Y,X){super();if($=IH.normalizeQueryConfig($,Y,X),this.text=$.text,this.values=$.values,this.rows=$.rows,this.types=$.types,this.name=$.name,this.queryMode=$.queryMode,this.binary=$.binary,this.portal=$.portal||"",this.callback=$.callback,this._rowMode=$.rowMode,process.domain&&$.callback)this.callback=process.domain.bind($.callback);this._result=new bH(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){if(this.queryMode==="extended")return!0;if(this.name)return!0;if(this.rows)return!0;if(!this.text)return!1;if(!this.values)return!1;return this.values.length>0}_checkForMultirow(){if(this._result.command){if(!Array.isArray(this._results))this._results=[this._result];this._result=new bH(this._rowMode,this._result._types),this._results.push(this._result)}}handleRowDescription($){this._checkForMultirow(),this._result.addFields($.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow($){let Y;if(this._canceledDueToError)return;try{Y=this._result.parseRow($.fields)}catch(X){this._canceledDueToError=X;return}if(this.emit("row",Y,this._result),this._accumulateRows)this._result.addRow(Y)}handleCommandComplete($,Y){if(this._checkForMultirow(),this._result.addCommandComplete($),this.rows)Y.sync()}handleEmptyQuery($){if(this.rows)$.sync()}handleError($,Y){if(this._canceledDueToError)$=this._canceledDueToError,this._canceledDueToError=!1;if(this.callback)return this.callback($);this.emit("error",$)}handleReadyForQuery($){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,$);if(this.callback)try{this.callback(null,this._results)}catch(Y){process.nextTick(()=>{throw Y})}this.emit("end",this._results)}submit($){if(typeof this.text!=="string"&&typeof this.name!=="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let Y=$.parsedStatements[this.name];if(this.text&&Y&&this.text!==Y)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){$.stream.cork&&$.stream.cork();try{this.prepare($)}finally{$.stream.uncork&&$.stream.uncork()}}else $.query(this.text);return null}hasBeenParsed($){return this.name&&$.parsedStatements[this.name]}handlePortalSuspended($){this._getRows($,this.rows)}_getRows($,Y){if($.execute({portal:this.portal,rows:Y}),!Y)$.sync();else $.flush()}prepare($){if(!this.hasBeenParsed($))$.parse({text:this.text,name:this.name,types:this.types});try{$.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:IH.prepareValue})}catch(Y){this.handleError(Y,$);return}$.describe({type:"P",name:this.portal||""}),this._getRows($,this.rows)}handleCopyInResponse($){$.sendCopyFail("No source stream defined")}handleCopyData($,Y){}}xH.exports=TH});var PX=Y0((rH)=>{Object.defineProperty(rH,"__esModule",{value:!0});rH.NoticeMessage=rH.DataRowMessage=rH.CommandCompleteMessage=rH.ReadyForQueryMessage=rH.NotificationResponseMessage=rH.BackendKeyDataMessage=rH.AuthenticationMD5Password=rH.ParameterStatusMessage=rH.ParameterDescriptionMessage=rH.RowDescriptionMessage=rH.Field=rH.CopyResponse=rH.CopyDataMessage=rH.DatabaseError=rH.copyDone=rH.emptyQuery=rH.replicationStart=rH.portalSuspended=rH.noData=rH.closeComplete=rH.bindComplete=rH.parseComplete=void 0;rH.parseComplete={name:"parseComplete",length:5};rH.bindComplete={name:"bindComplete",length:5};rH.closeComplete={name:"closeComplete",length:5};rH.noData={name:"noData",length:5};rH.portalSuspended={name:"portalSuspended",length:5};rH.replicationStart={name:"replicationStart",length:4};rH.emptyQuery={name:"emptyQuery",length:4};rH.copyDone={name:"copyDone",length:4};class gH extends Error{constructor($,Y,X){super($);this.length=Y,this.name=X}}rH.DatabaseError=gH;class fH{constructor($,Y){this.length=$,this.chunk=Y,this.name="copyData"}}rH.CopyDataMessage=fH;class vH{constructor($,Y,X,Q){this.length=$,this.name=Y,this.binary=X,this.columnTypes=new Array(Q)}}rH.CopyResponse=vH;class yH{constructor($,Y,X,Q,W,J,G){this.name=$,this.tableID=Y,this.columnID=X,this.dataTypeID=Q,this.dataTypeSize=W,this.dataTypeModifier=J,this.format=G}}rH.Field=yH;class hH{constructor($,Y){this.length=$,this.fieldCount=Y,this.name="rowDescription",this.fields=new Array(this.fieldCount)}}rH.RowDescriptionMessage=hH;class dH{constructor($,Y){this.length=$,this.parameterCount=Y,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}}rH.ParameterDescriptionMessage=dH;class cH{constructor($,Y,X){this.length=$,this.parameterName=Y,this.parameterValue=X,this.name="parameterStatus"}}rH.ParameterStatusMessage=cH;class mH{constructor($,Y){this.length=$,this.salt=Y,this.name="authenticationMD5Password"}}rH.AuthenticationMD5Password=mH;class uH{constructor($,Y,X){this.length=$,this.processID=Y,this.secretKey=X,this.name="backendKeyData"}}rH.BackendKeyDataMessage=uH;class lH{constructor($,Y,X,Q){this.length=$,this.processId=Y,this.channel=X,this.payload=Q,this.name="notification"}}rH.NotificationResponseMessage=lH;class pH{constructor($,Y){this.length=$,this.status=Y,this.name="readyForQuery"}}rH.ReadyForQueryMessage=pH;class iH{constructor($,Y){this.length=$,this.text=Y,this.name="commandComplete"}}rH.CommandCompleteMessage=iH;class oH{constructor($,Y){this.length=$,this.fields=Y,this.name="dataRow",this.fieldCount=Y.length}}rH.DataRowMessage=oH;class nH{constructor($,Y){this.length=$,this.message=Y,this.name="notice"}}rH.NoticeMessage=nH});var $B=Y0((aH)=>{Object.defineProperty(aH,"__esModule",{value:!0});aH.Writer=void 0;class sH{constructor($=256){this.size=$,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe($)}ensure($){if(this.buffer.length-this.offset<$){let X=this.buffer,Q=X.length+(X.length>>1)+$;this.buffer=Buffer.allocUnsafe(Q),X.copy(this.buffer)}}addInt32($){return this.ensure(4),this.buffer[this.offset++]=$>>>24&255,this.buffer[this.offset++]=$>>>16&255,this.buffer[this.offset++]=$>>>8&255,this.buffer[this.offset++]=$>>>0&255,this}addInt16($){return this.ensure(2),this.buffer[this.offset++]=$>>>8&255,this.buffer[this.offset++]=$>>>0&255,this}addCString($){if(!$)this.ensure(1);else{let Y=Buffer.byteLength($);this.ensure(Y+1),this.buffer.write($,this.offset,"utf-8"),this.offset+=Y}return this.buffer[this.offset++]=0,this}addString($=""){let Y=Buffer.byteLength($);return this.ensure(Y),this.buffer.write($,this.offset),this.offset+=Y,this}add($){return this.ensure($.length),$.copy(this.buffer,this.offset),this.offset+=$.length,this}join($){if($){this.buffer[this.headerPosition]=$;let Y=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(Y,this.headerPosition+1)}return this.buffer.slice($?0:5,this.offset)}flush($){let Y=this.join($);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),Y}}aH.Writer=sH});var WB=Y0((XB)=>{Object.defineProperty(XB,"__esModule",{value:!0});XB.serialize=void 0;var CX=$B(),Q1=new CX.Writer,MP=($)=>{Q1.addInt16(3).addInt16(0);for(let Q of Object.keys($))Q1.addCString(Q).addCString($[Q]);Q1.addCString("client_encoding").addCString("UTF8");let Y=Q1.addCString("").flush(),X=Y.length+4;return new CX.Writer().addInt32(X).add(Y).flush()},UP=()=>{let $=Buffer.allocUnsafe(8);return $.writeInt32BE(8,0),$.writeInt32BE(80877103,4),$},HP=($)=>{return Q1.addCString($).flush(112)},BP=function($,Y){return Q1.addCString($).addInt32(Buffer.byteLength(Y)).addString(Y),Q1.flush(112)},qP=function($){return Q1.addString($).flush(112)},NP=($)=>{return Q1.addCString($).flush(81)},YB=[],zP=($)=>{let Y=$.name||"";if(Y.length>63)console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",Y,Y.length),console.error("This can cause conflicts and silent errors executing queries");let X=$.types||YB,Q=X.length,W=Q1.addCString(Y).addCString($.text).addInt16(Q);for(let J=0;J<Q;J++)W.addInt32(X[J]);return Q1.flush(80)},F4=new CX.Writer,AP=function($,Y){for(let X=0;X<$.length;X++){let Q=Y?Y($[X],X):$[X];if(Q==null)Q1.addInt16(0),F4.addInt32(-1);else if(Q instanceof Buffer)Q1.addInt16(1),F4.addInt32(Q.length),F4.add(Q);else Q1.addInt16(0),F4.addInt32(Buffer.byteLength(Q)),F4.addString(Q)}},wP=($={})=>{let Y=$.portal||"",X=$.statement||"",Q=$.binary||!1,W=$.values||YB,J=W.length;return Q1.addCString(Y).addCString(X),Q1.addInt16(J),AP(W,$.valueMapper),Q1.addInt16(J),Q1.add(F4.flush()),Q1.addInt16(Q?1:0),Q1.flush(66)},OP=Buffer.from([69,0,0,0,9,0,0,0,0,0]),DP=($)=>{if(!$||!$.portal&&!$.rows)return OP;let Y=$.portal||"",X=$.rows||0,Q=Buffer.byteLength(Y),W=4+Q+1+4,J=Buffer.allocUnsafe(1+W);return J[0]=69,J.writeInt32BE(W,1),J.write(Y,5,"utf-8"),J[Q+5]=0,J.writeUInt32BE(X,J.length-4),J},LP=($,Y)=>{let X=Buffer.allocUnsafe(16);return X.writeInt32BE(16,0),X.writeInt16BE(1234,4),X.writeInt16BE(5678,6),X.writeInt32BE($,8),X.writeInt32BE(Y,12),X},VX=($,Y)=>{let Q=4+Buffer.byteLength(Y)+1,W=Buffer.allocUnsafe(1+Q);return W[0]=$,W.writeInt32BE(Q,1),W.write(Y,5,"utf-8"),W[Q]=0,W},ZP=Q1.addCString("P").flush(68),jP=Q1.addCString("S").flush(68),KP=($)=>{return $.name?VX(68,`${$.type}${$.name||""}`):$.type==="P"?ZP:jP},FP=($)=>{let Y=`${$.type}${$.name||""}`;return VX(67,Y)},SP=($)=>{return Q1.add($).flush(100)},_P=($)=>{return VX(102,$)},B$=($)=>Buffer.from([$,0,0,0,4]),RP=B$(72),PP=B$(83),CP=B$(88),VP=B$(99),EP={startup:MP,password:HP,requestSsl:UP,sendSASLInitialResponseMessage:BP,sendSCRAMClientFinalMessage:qP,query:NP,parse:zP,bind:wP,execute:DP,describe:KP,close:FP,flush:()=>RP,sync:()=>PP,end:()=>CP,copyData:SP,copyDone:()=>VP,copyFail:_P,cancel:LP};XB.serialize=EP});var UB=Y0((GB)=>{Object.defineProperty(GB,"__esModule",{value:!0});GB.BufferReader=void 0;var bP=Buffer.allocUnsafe(0);class JB{constructor($=0){this.offset=$,this.buffer=bP,this.encoding="utf-8"}setBuffer($,Y){this.offset=$,this.buffer=Y}int16(){let $=this.buffer.readInt16BE(this.offset);return this.offset+=2,$}byte(){let $=this.buffer[this.offset];return this.offset++,$}int32(){let $=this.buffer.readInt32BE(this.offset);return this.offset+=4,$}uint32(){let $=this.buffer.readUInt32BE(this.offset);return this.offset+=4,$}string($){let Y=this.buffer.toString(this.encoding,this.offset,this.offset+$);return this.offset+=$,Y}cstring(){let $=this.offset,Y=$;while(this.buffer[Y++]!==0);return this.offset=Y,this.buffer.toString(this.encoding,$,Y-1)}bytes($){let Y=this.buffer.slice(this.offset,this.offset+$);return this.offset+=$,Y}}GB.BufferReader=JB});var AB=Y0((NB)=>{Object.defineProperty(NB,"__esModule",{value:!0});NB.Parser=void 0;var W1=PX(),IP=UB(),EX=1,TP=4,HB=EX+TP,BB=Buffer.allocUnsafe(0);class qB{constructor($){if(this.buffer=BB,this.bufferLength=0,this.bufferOffset=0,this.reader=new IP.BufferReader,($===null||$===void 0?void 0:$.mode)==="binary")throw new Error("Binary mode not supported yet");this.mode=($===null||$===void 0?void 0:$.mode)||"text"}parse($,Y){this.mergeBuffer($);let X=this.bufferOffset+this.bufferLength,Q=this.bufferOffset;while(Q+HB<=X){let W=this.buffer[Q],J=this.buffer.readUInt32BE(Q+EX),G=EX+J;if(G+Q<=X){let M=this.handlePacket(Q+HB,W,J,this.buffer);Y(M),Q+=G}else break}if(Q===X)this.buffer=BB,this.bufferLength=0,this.bufferOffset=0;else this.bufferLength=X-Q,this.bufferOffset=Q}mergeBuffer($){if(this.bufferLength>0){let Y=this.bufferLength+$.byteLength;if(Y+this.bufferOffset>this.buffer.byteLength){let Q;if(Y<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)Q=this.buffer;else{let W=this.buffer.byteLength*2;while(Y>=W)W*=2;Q=Buffer.allocUnsafe(W)}this.buffer.copy(Q,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=Q,this.bufferOffset=0}$.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=Y}else this.buffer=$,this.bufferOffset=0,this.bufferLength=$.byteLength}handlePacket($,Y,X,Q){switch(Y){case 50:return W1.bindComplete;case 49:return W1.parseComplete;case 51:return W1.closeComplete;case 110:return W1.noData;case 115:return W1.portalSuspended;case 99:return W1.copyDone;case 87:return W1.replicationStart;case 73:return W1.emptyQuery;case 68:return this.parseDataRowMessage($,X,Q);case 67:return this.parseCommandCompleteMessage($,X,Q);case 90:return this.parseReadyForQueryMessage($,X,Q);case 65:return this.parseNotificationMessage($,X,Q);case 82:return this.parseAuthenticationResponse($,X,Q);case 83:return this.parseParameterStatusMessage($,X,Q);case 75:return this.parseBackendKeyData($,X,Q);case 69:return this.parseErrorMessage($,X,Q,"error");case 78:return this.parseErrorMessage($,X,Q,"notice");case 84:return this.parseRowDescriptionMessage($,X,Q);case 116:return this.parseParameterDescriptionMessage($,X,Q);case 71:return this.parseCopyInMessage($,X,Q);case 72:return this.parseCopyOutMessage($,X,Q);case 100:return this.parseCopyData($,X,Q);default:return new W1.DatabaseError("received invalid response: "+Y.toString(16),X,"error")}}parseReadyForQueryMessage($,Y,X){this.reader.setBuffer($,X);let Q=this.reader.string(1);return new W1.ReadyForQueryMessage(Y,Q)}parseCommandCompleteMessage($,Y,X){this.reader.setBuffer($,X);let Q=this.reader.cstring();return new W1.CommandCompleteMessage(Y,Q)}parseCopyData($,Y,X){let Q=X.slice($,$+(Y-4));return new W1.CopyDataMessage(Y,Q)}parseCopyInMessage($,Y,X){return this.parseCopyMessage($,Y,X,"copyInResponse")}parseCopyOutMessage($,Y,X){return this.parseCopyMessage($,Y,X,"copyOutResponse")}parseCopyMessage($,Y,X,Q){this.reader.setBuffer($,X);let W=this.reader.byte()!==0,J=this.reader.int16(),G=new W1.CopyResponse(Y,Q,W,J);for(let M=0;M<J;M++)G.columnTypes[M]=this.reader.int16();return G}parseNotificationMessage($,Y,X){this.reader.setBuffer($,X);let Q=this.reader.int32(),W=this.reader.cstring(),J=this.reader.cstring();return new W1.NotificationResponseMessage(Y,Q,W,J)}parseRowDescriptionMessage($,Y,X){this.reader.setBuffer($,X);let Q=this.reader.int16(),W=new W1.RowDescriptionMessage(Y,Q);for(let J=0;J<Q;J++)W.fields[J]=this.parseField();return W}parseField(){let $=this.reader.cstring(),Y=this.reader.uint32(),X=this.reader.int16(),Q=this.reader.uint32(),W=this.reader.int16(),J=this.reader.int32(),G=this.reader.int16()===0?"text":"binary";return new W1.Field($,Y,X,Q,W,J,G)}parseParameterDescriptionMessage($,Y,X){this.reader.setBuffer($,X);let Q=this.reader.int16(),W=new W1.ParameterDescriptionMessage(Y,Q);for(let J=0;J<Q;J++)W.dataTypeIDs[J]=this.reader.int32();return W}parseDataRowMessage($,Y,X){this.reader.setBuffer($,X);let Q=this.reader.int16(),W=new Array(Q);for(let J=0;J<Q;J++){let G=this.reader.int32();W[J]=G===-1?null:this.reader.string(G)}return new W1.DataRowMessage(Y,W)}parseParameterStatusMessage($,Y,X){this.reader.setBuffer($,X);let Q=this.reader.cstring(),W=this.reader.cstring();return new W1.ParameterStatusMessage(Y,Q,W)}parseBackendKeyData($,Y,X){this.reader.setBuffer($,X);let Q=this.reader.int32(),W=this.reader.int32();return new W1.BackendKeyDataMessage(Y,Q,W)}parseAuthenticationResponse($,Y,X){this.reader.setBuffer($,X);let Q=this.reader.int32(),W={name:"authenticationOk",length:Y};switch(Q){case 0:break;case 3:if(W.length===8)W.name="authenticationCleartextPassword";break;case 5:if(W.length===12){W.name="authenticationMD5Password";let J=this.reader.bytes(4);return new W1.AuthenticationMD5Password(Y,J)}break;case 10:{W.name="authenticationSASL",W.mechanisms=[];let J;do if(J=this.reader.cstring(),J)W.mechanisms.push(J);while(J)}break;case 11:W.name="authenticationSASLContinue",W.data=this.reader.string(Y-8);break;case 12:W.name="authenticationSASLFinal",W.data=this.reader.string(Y-8);break;default:throw new Error("Unknown authenticationOk message type "+Q)}return W}parseErrorMessage($,Y,X,Q){this.reader.setBuffer($,X);let W={},J=this.reader.string(1);while(J!=="\x00")W[J]=this.reader.cstring(),J=this.reader.string(1);let G=W.M,M=Q==="notice"?new W1.NoticeMessage(Y,G):new W1.DatabaseError(G,Y,Q);return M.severity=W.S,M.code=W.C,M.detail=W.D,M.hint=W.H,M.position=W.P,M.internalPosition=W.p,M.internalQuery=W.q,M.where=W.W,M.schema=W.s,M.table=W.t,M.column=W.c,M.dataType=W.d,M.constraint=W.n,M.file=W.F,M.line=W.L,M.routine=W.R,M}}NB.Parser=qB});var bX=Y0((q$)=>{Object.defineProperty(q$,"__esModule",{value:!0});q$.DatabaseError=q$.serialize=q$.parse=void 0;var xP=PX();Object.defineProperty(q$,"DatabaseError",{enumerable:!0,get:function(){return xP.DatabaseError}});var kP=WB();Object.defineProperty(q$,"serialize",{enumerable:!0,get:function(){return kP.serialize}});var gP=AB();function fP($,Y){let X=new gP.Parser;return $.on("data",(Q)=>X.parse(Q,Y)),new Promise((Q)=>$.on("end",()=>Q()))}q$.parse=fP});var LB=Y0((OB)=>{Object.defineProperty(OB,"__esModule",{value:!0});OB.CloudflareSocket=void 0;var hP=E0("events");class wB extends hP.EventEmitter{constructor($){super();this.ssl=$,this.writable=!1,this.destroyed=!1,this._upgrading=!1,this._upgraded=!1,this._cfSocket=null,this._cfWriter=null,this._cfReader=null}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}async connect($,Y,X){try{if(S5("connecting"),X)this.once("connect",X);let Q=this.ssl?{secureTransport:"starttls"}:{},J=(await import("cloudflare:sockets")).connect;if(this._cfSocket=J(`${Y}:${$}`,Q),this._cfWriter=this._cfSocket.writable.getWriter(),this._addClosedHandler(),this._cfReader=this._cfSocket.readable.getReader(),this.ssl)this._listenOnce().catch((G)=>this.emit("error",G));else this._listen().catch((G)=>this.emit("error",G));return await this._cfWriter.ready,S5("socket ready"),this.writable=!0,this.emit("connect"),this}catch(Q){this.emit("error",Q)}}async _listen(){while(!0){S5("awaiting receive from CF socket");let{done:$,value:Y}=await this._cfReader.read();if(S5("CF socket received:",$,Y),$){S5("done");break}this.emit("data",Buffer.from(Y))}}async _listenOnce(){S5("awaiting first receive from CF socket");let{done:$,value:Y}=await this._cfReader.read();S5("First CF socket received:",$,Y),this.emit("data",Buffer.from(Y))}write($,Y="utf8",X=()=>{}){if($.length===0)return X();if(typeof $==="string")$=Buffer.from($,Y);return S5("sending data direct:",$),this._cfWriter.write($).then(()=>{S5("data sent"),X()},(Q)=>{S5("send error",Q),X(Q)}),!0}end($=Buffer.alloc(0),Y="utf8",X=()=>{}){return S5("ending CF socket"),this.write($,Y,(Q)=>{if(this._cfSocket.close(),X)X(Q)}),this}destroy($){return S5("destroying CF socket",$),this.destroyed=!0,this.end()}startTls($){if(this._upgraded){this.emit("error","Cannot call `startTls()` more than once on a socket");return}this._cfWriter.releaseLock(),this._cfReader.releaseLock(),this._upgrading=!0,this._cfSocket=this._cfSocket.startTls($),this._cfWriter=this._cfSocket.writable.getWriter(),this._cfReader=this._cfSocket.readable.getReader(),this._addClosedHandler(),this._listen().catch((Y)=>this.emit("error",Y))}_addClosedHandler(){this._cfSocket.closed.then(()=>{if(!this._upgrading)S5("CF socket closed"),this._cfSocket=null,this.emit("close");else this._upgrading=!1,this._upgraded=!0}).catch(($)=>this.emit("error",$))}}OB.CloudflareSocket=wB;var dP=!1;function cP($){if($ instanceof Uint8Array||$ instanceof ArrayBuffer){let Y=Buffer.from($).toString("hex");return`
>>> STR: "${new TextDecoder().decode($).replace(/\n/g,"\\n")}"
>>> HEX: ${Y}
`}else return $}function S5(...$){dP&&console.log(...$.map(cP))}});var jB=Y0((Hi,ZB)=>{var{getStream:mP,getSecureStream:uP}=oP();ZB.exports={getStream:mP,getSecureStream:uP};function lP(){function $(X){return new(E0("net")).Socket}function Y(X){return E0("tls").connect(X)}return{getStream:$,getSecureStream:Y}}function pP(){function $(X){let{CloudflareSocket:Q}=LB();return new Q(X)}function Y(X){return X.socket.startTls(X),X.socket}return{getStream:$,getSecureStream:Y}}function iP(){if(typeof navigator==="object"&&navigator!==null&&typeof navigator.userAgent==="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response==="function"){let $=new Response(null,{cf:{thing:!0}});if(typeof $.cf==="object"&&$.cf!==null&&$.cf.thing)return!0}return!1}function oP(){if(iP())return pP();return lP()}});var IX=Y0((Bi,FB)=>{var nP=E0("events").EventEmitter,{parse:rP,serialize:_1}=bX(),{getStream:tP,getSecureStream:sP}=jB(),aP=_1.flush(),eP=_1.sync(),$C=_1.end();class KB extends nP{constructor($){super();if($=$||{},this.stream=$.stream||tP($.ssl),typeof this.stream==="function")this.stream=this.stream($);this._keepAlive=$.keepAlive,this._keepAliveInitialDelayMillis=$.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=$.ssl||!1,this._ending=!1,this._emitMessage=!1;let Y=this;this.on("newListener",function(X){if(X==="message")Y._emitMessage=!0})}connect($,Y){let X=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect($,Y),this.stream.once("connect",function(){if(X._keepAlive)X.stream.setKeepAlive(!0,X._keepAliveInitialDelayMillis);X.emit("connect")});let Q=function(W){if(X._ending&&(W.code==="ECONNRESET"||W.code==="EPIPE"))return;X.emit("error",W)};if(this.stream.on("error",Q),this.stream.on("close",function(){X.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(W){switch(W.toString("utf8")){case"S":break;case"N":return X.stream.end(),X.emit("error",new Error("The server does not support SSL connections"));default:return X.stream.end(),X.emit("error",new Error("There was an error establishing an SSL connection"))}let G={socket:X.stream};if(X.ssl!==!0){if(Object.assign(G,X.ssl),"key"in X.ssl)G.key=X.ssl.key}let M=E0("net");if(M.isIP&&M.isIP(Y)===0)G.servername=Y;try{X.stream=sP(G)}catch(U){return X.emit("error",U)}X.attachListeners(X.stream),X.stream.on("error",Q),X.emit("sslconnect")})}attachListeners($){rP($,(Y)=>{let X=Y.name==="error"?"errorMessage":Y.name;if(this._emitMessage)this.emit("message",Y);this.emit(X,Y)})}requestSsl(){this.stream.write(_1.requestSsl())}startup($){this.stream.write(_1.startup($))}cancel($,Y){this._send(_1.cancel($,Y))}password($){this._send(_1.password($))}sendSASLInitialResponseMessage($,Y){this._send(_1.sendSASLInitialResponseMessage($,Y))}sendSCRAMClientFinalMessage($){this._send(_1.sendSCRAMClientFinalMessage($))}_send($){if(!this.stream.writable)return!1;return this.stream.write($)}query($){this._send(_1.query($))}parse($){this._send(_1.parse($))}bind($){this._send(_1.bind($))}execute($){this._send(_1.execute($))}flush(){if(this.stream.writable)this.stream.write(aP)}sync(){this._ending=!0,this._send(eP)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write($C,()=>{this.stream.end()})}close($){this._send(_1.close($))}describe($){this._send(_1.describe($))}sendCopyFromChunk($){this._send(_1.copyData($))}endCopyFrom(){this._send(_1.copyDone())}sendCopyFail($){this._send(_1.copyFail($))}}FB.exports=KB});var PB=Y0((qi,RB)=>{var{Transform:YC}=E0("stream"),{StringDecoder:XC}=E0("string_decoder"),v8=Symbol("last"),N$=Symbol("decoder");function QC($,Y,X){let Q;if(this.overflow){if(Q=this[N$].write($).split(this.matcher),Q.length===1)return X();Q.shift(),this.overflow=!1}else this[v8]+=this[N$].write($),Q=this[v8].split(this.matcher);this[v8]=Q.pop();for(let W=0;W<Q.length;W++)try{_B(this,this.mapper(Q[W]))}catch(J){return X(J)}if(this.overflow=this[v8].length>this.maxLength,this.overflow&&!this.skipOverflow){X(new Error("maximum buffer reached"));return}X()}function WC($){if(this[v8]+=this[N$].end(),this[v8])try{_B(this,this.mapper(this[v8]))}catch(Y){return $(Y)}$()}function _B($,Y){if(Y!==void 0)$.push(Y)}function SB($){return $}function JC($,Y,X){switch($=$||/\r?\n/,Y=Y||SB,X=X||{},arguments.length){case 1:if(typeof $==="function")Y=$,$=/\r?\n/;else if(typeof $==="object"&&!($ instanceof RegExp)&&!$[Symbol.split])X=$,$=/\r?\n/;break;case 2:if(typeof $==="function")X=Y,Y=$,$=/\r?\n/;else if(typeof Y==="object")X=Y,Y=SB}X=Object.assign({},X),X.autoDestroy=!0,X.transform=QC,X.flush=WC,X.readableObjectMode=!0;let Q=new YC(X);return Q[v8]="",Q[N$]=new XC("utf8"),Q.matcher=$,Q.mapper=Y,Q.maxLength=X.maxLength,Q.skipOverflow=X.skipOverflow||!1,Q.overflow=!1,Q._destroy=function(W,J){this._writableState.errorEmitted=!1,J(W)},Q}RB.exports=JC});var EB=Y0((LC,U8)=>{var CB=E0("path"),GC=E0("stream").Stream,MC=PB(),VB=E0("util"),UC=5432,z$=process.platform==="win32",E9=process.stderr,HC=56,BC=7,qC=61440,NC=32768;function zC($){return($&qC)==NC}var S4=["host","port","database","user","password"],TX=S4.length,AC=S4[TX-1];function xX(){var $=E9 instanceof GC&&E9.writable===!0;if($){var Y=Array.prototype.slice.call(arguments).concat(`
`);E9.write(VB.format.apply(VB,Y))}}Object.defineProperty(LC,"isWin",{get:function(){return z$},set:function($){z$=$}});LC.warnTo=function($){var Y=E9;return E9=$,Y};LC.getFileName=function($){var Y=$||process.env,X=Y.PGPASSFILE||(z$?CB.join(Y.APPDATA||"./","postgresql","pgpass.conf"):CB.join(Y.HOME||"./",".pgpass"));return X};LC.usePgPass=function($,Y){if(Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD"))return!1;if(z$)return!0;if(Y=Y||"<unkn>",!zC($.mode))return xX('WARNING: password file "%s" is not a plain file',Y),!1;if($.mode&(HC|BC))return xX('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',Y),!1;return!0};var wC=LC.match=function($,Y){return S4.slice(0,-1).reduce(function(X,Q,W){if(W==1){if(Number($[Q]||UC)===Number(Y[Q]))return X&&!0}return X&&(Y[Q]==="*"||Y[Q]===$[Q])},!0)};LC.getPassword=function($,Y,X){var Q,W=Y.pipe(MC());function J(U){var H=OC(U);if(H&&DC(H)&&wC($,H))Q=H[AC],W.end()}var G=function(){Y.destroy(),X(Q)},M=function(U){Y.destroy(),xX("WARNING: error on reading file: %s",U),X(void 0)};Y.on("error",M),W.on("data",J).on("end",G).on("error",M)};var OC=LC.parseLine=function($){if($.length<11||$.match(/^\s+#/))return null;var Y="",X="",Q=0,W=0,J=0,G={},M=!1,U=function(B,A,O){var w=$.substring(A,O);if(!Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE"))w=w.replace(/\\([:\\])/g,"$1");G[S4[B]]=w};for(var H=0;H<$.length-1;H+=1){if(Y=$.charAt(H+1),X=$.charAt(H),M=Q==TX-1,M){U(Q,W);break}if(H>=0&&Y==":"&&X!=="\\")U(Q,W,H+1),W=H+2,Q+=1}return G=Object.keys(G).length===TX?G:null,G},DC=LC.isValidEntry=function($){var Y={0:function(G){return G.length>0},1:function(G){if(G==="*")return!0;return G=Number(G),isFinite(G)&&G>0&&G<9007199254740992&&Math.floor(G)===G},2:function(G){return G.length>0},3:function(G){return G.length>0},4:function(G){return G.length>0}};for(var X=0;X<S4.length;X+=1){var Q=Y[X],W=$[S4[X]]||"",J=Q(W);if(!J)return!1}return!0}});var IB=Y0((Oi,kX)=>{var wi=E0("path"),bB=E0("fs"),A$=EB();kX.exports=function($,Y){var X=A$.getFileName();bB.stat(X,function(Q,W){if(Q||!A$.usePgPass(W,X))return Y(void 0);var J=bB.createReadStream(X);A$.getPassword($,J,Y)})};kX.exports.warnTo=A$.warnTo});var gB=Y0((Di,kB)=>{var SC=E0("events").EventEmitter,TB=L4(),gX=LH(),_C=H$(),RC=_X(),xB=kH(),PC=C9(),CC=IX(),VC=FX();class fX extends SC{constructor($){super();this.connectionParameters=new RC($),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let Y=$||{};if(this._Promise=Y.Promise||global.Promise,this._types=new _C(Y.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=Boolean(Y.enableChannelBinding),this.connection=Y.connection||new CC({stream:Y.stream,ssl:this.connectionParameters.ssl,keepAlive:Y.keepAlive||!1,keepAliveInitialDelayMillis:Y.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=Y.binary||PC.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key)Object.defineProperty(this.ssl,"key",{enumerable:!1});this._connectionTimeoutMillis=Y.connectionTimeoutMillis||0}_errorAllQueries($){let Y=(X)=>{process.nextTick(()=>{X.handleError($,this.connection)})};if(this.activeQuery)Y(this.activeQuery),this.activeQuery=null;this.queryQueue.forEach(Y),this.queryQueue.length=0}_connect($){let Y=this,X=this.connection;if(this._connectionCallback=$,this._connecting||this._connected){let Q=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{$(Q)});return}if(this._connecting=!0,this._connectionTimeoutMillis>0){if(this.connectionTimeoutHandle=setTimeout(()=>{X._ending=!0,X.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref)this.connectionTimeoutHandle.unref()}if(this.host&&this.host.indexOf("/")===0)X.connect(this.host+"/.s.PGSQL."+this.port);else X.connect(this.port,this.host);X.on("connect",function(){if(Y.ssl)X.requestSsl();else X.startup(Y.getStartupConf())}),X.on("sslconnect",function(){X.startup(Y.getStartupConf())}),this._attachListeners(X),X.once("end",()=>{let Q=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");if(clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(Q),this._ended=!0,!this._ending){if(this._connecting&&!this._connectionError)if(this._connectionCallback)this._connectionCallback(Q);else this._handleErrorEvent(Q);else if(!this._connectionError)this._handleErrorEvent(Q)}process.nextTick(()=>{this.emit("end")})})}connect($){if($){this._connect($);return}return new this._Promise((Y,X)=>{this._connect((Q)=>{if(Q)X(Q);else Y()})})}_attachListeners($){$.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),$.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),$.on("authenticationSASL",this._handleAuthSASL.bind(this)),$.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),$.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),$.on("backendKeyData",this._handleBackendKeyData.bind(this)),$.on("error",this._handleErrorEvent.bind(this)),$.on("errorMessage",this._handleErrorMessage.bind(this)),$.on("readyForQuery",this._handleReadyForQuery.bind(this)),$.on("notice",this._handleNotice.bind(this)),$.on("rowDescription",this._handleRowDescription.bind(this)),$.on("dataRow",this._handleDataRow.bind(this)),$.on("portalSuspended",this._handlePortalSuspended.bind(this)),$.on("emptyQuery",this._handleEmptyQuery.bind(this)),$.on("commandComplete",this._handleCommandComplete.bind(this)),$.on("parseComplete",this._handleParseComplete.bind(this)),$.on("copyInResponse",this._handleCopyInResponse.bind(this)),$.on("copyData",this._handleCopyData.bind(this)),$.on("notification",this._handleNotification.bind(this))}_checkPgPass($){let Y=this.connection;if(typeof this.password==="function")this._Promise.resolve().then(()=>this.password()).then((X)=>{if(X!==void 0){if(typeof X!=="string"){Y.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=X}else this.connectionParameters.password=this.password=null;$()}).catch((X)=>{Y.emit("error",X)});else if(this.password!==null)$();else try{IB()(this.connectionParameters,(Q)=>{if(Q!==void 0)this.connectionParameters.password=this.password=Q;$()})}catch(X){this.emit("error",X)}}_handleAuthCleartextPassword($){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password($){this._checkPgPass(async()=>{try{let Y=await VC.postgresMd5PasswordHash(this.user,this.password,$.salt);this.connection.password(Y)}catch(Y){this.emit("error",Y)}})}_handleAuthSASL($){this._checkPgPass(()=>{try{this.saslSession=gX.startSession($.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(Y){this.connection.emit("error",Y)}})}async _handleAuthSASLContinue($){try{await gX.continueSession(this.saslSession,this.password,$.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(Y){this.connection.emit("error",Y)}}_handleAuthSASLFinal($){try{gX.finalizeSession(this.saslSession,$.data),this.saslSession=null}catch(Y){this.connection.emit("error",Y)}}_handleBackendKeyData($){this.processID=$.processID,this.secretKey=$.secretKey}_handleReadyForQuery($){if(this._connecting){if(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)this._connectionCallback(null,this),this._connectionCallback=null;this.emit("connect")}let{activeQuery:Y}=this;if(this.activeQuery=null,this.readyForQuery=!0,Y)Y.handleReadyForQuery(this.connection);this._pulseQueryQueue()}_handleErrorWhileConnecting($){if(this._connectionError)return;if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback($);this.emit("error",$)}_handleErrorEvent($){if(this._connecting)return this._handleErrorWhileConnecting($);this._queryable=!1,this._errorAllQueries($),this.emit("error",$)}_handleErrorMessage($){if(this._connecting)return this._handleErrorWhileConnecting($);let Y=this.activeQuery;if(!Y){this._handleErrorEvent($);return}this.activeQuery=null,Y.handleError($,this.connection)}_handleRowDescription($){this.activeQuery.handleRowDescription($)}_handleDataRow($){this.activeQuery.handleDataRow($)}_handlePortalSuspended($){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery($){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete($){if(this.activeQuery==null){let Y=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(Y);return}this.activeQuery.handleCommandComplete($,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let $=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent($);return}if(this.activeQuery.name)this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text}_handleCopyInResponse($){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData($){this.activeQuery.handleCopyData($,this.connection)}_handleNotification($){this.emit("notification",$)}_handleNotice($){this.emit("notice",$)}getStartupConf(){let $=this.connectionParameters,Y={user:$.user,database:$.database},X=$.application_name||$.fallback_application_name;if(X)Y.application_name=X;if($.replication)Y.replication=""+$.replication;if($.statement_timeout)Y.statement_timeout=String(parseInt($.statement_timeout,10));if($.lock_timeout)Y.lock_timeout=String(parseInt($.lock_timeout,10));if($.idle_in_transaction_session_timeout)Y.idle_in_transaction_session_timeout=String(parseInt($.idle_in_transaction_session_timeout,10));if($.options)Y.options=$.options;return Y}cancel($,Y){if($.activeQuery===Y){let X=this.connection;if(this.host&&this.host.indexOf("/")===0)X.connect(this.host+"/.s.PGSQL."+this.port);else X.connect(this.port,this.host);X.on("connect",function(){X.cancel($.processID,$.secretKey)})}else if($.queryQueue.indexOf(Y)!==-1)$.queryQueue.splice($.queryQueue.indexOf(Y),1)}setTypeParser($,Y,X){return this._types.setTypeParser($,Y,X)}getTypeParser($,Y){return this._types.getTypeParser($,Y)}escapeIdentifier($){return TB.escapeIdentifier($)}escapeLiteral($){return TB.escapeLiteral($)}_pulseQueryQueue(){if(this.readyForQuery===!0){if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let $=this.activeQuery.submit(this.connection);if($)process.nextTick(()=>{this.activeQuery.handleError($,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else if(this.hasExecuted)this.activeQuery=null,this.emit("drain")}}query($,Y,X){let Q,W,J,G,M;if($===null||$===void 0)throw new TypeError("Client was passed a null or undefined query");else if(typeof $.submit==="function"){if(J=$.query_timeout||this.connectionParameters.query_timeout,W=Q=$,typeof Y==="function")Q.callback=Q.callback||Y}else if(J=$.query_timeout||this.connectionParameters.query_timeout,Q=new xB($,Y,X),!Q.callback)W=new this._Promise((U,H)=>{Q.callback=(B,A)=>B?H(B):U(A)}).catch((U)=>{throw Error.captureStackTrace(U),U});if(J)M=Q.callback,G=setTimeout(()=>{let U=new Error("Query read timeout");process.nextTick(()=>{Q.handleError(U,this.connection)}),M(U),Q.callback=()=>{};let H=this.queryQueue.indexOf(Q);if(H>-1)this.queryQueue.splice(H,1);this._pulseQueryQueue()},J),Q.callback=(U,H)=>{clearTimeout(G),M(U,H)};if(this.binary&&!Q.binary)Q.binary=!0;if(Q._result&&!Q._result._types)Q._result._types=this._types;if(!this._queryable)return process.nextTick(()=>{Q.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),W;if(this._ending)return process.nextTick(()=>{Q.handleError(new Error("Client was closed and is not queryable"),this.connection)}),W;return this.queryQueue.push(Q),this._pulseQueryQueue(),W}ref(){this.connection.ref()}unref(){this.connection.unref()}end($){if(this._ending=!0,!this.connection._connecting||this._ended)if($)$();else return this._Promise.resolve();if(this.activeQuery||!this._queryable)this.connection.stream.destroy();else this.connection.end();if($)this.connection.once("end",$);else return new this._Promise((Y)=>{this.connection.once("end",Y)})}}fX.Query=xB;kB.exports=fX});var cB=Y0((Li,dB)=>{var EC=E0("events").EventEmitter,fB=function(){},vB=($,Y)=>{let X=$.findIndex(Y);return X===-1?void 0:$.splice(X,1)[0]};class yB{constructor($,Y,X){this.client=$,this.idleListener=Y,this.timeoutId=X}}class b9{constructor($){this.callback=$}}function bC(){throw new Error("Release called on client which has already been released to the pool.")}function w$($,Y){if(Y)return{callback:Y,result:void 0};let X,Q,W=function(G,M){G?X(G):Q(M)},J=new $(function(G,M){Q=G,X=M}).catch((G)=>{throw Error.captureStackTrace(G),G});return{callback:W,result:J}}function IC($,Y){return function X(Q){Q.client=Y,Y.removeListener("error",X),Y.on("error",()=>{$.log("additional client error after disconnection due to error",Q)}),$._remove(Y),$.emit("error",Q,Y)}}class hB extends EC{constructor($,Y){super();if(this.options=Object.assign({},$),$!=null&&"password"in $)Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:$.password});if($!=null&&$.ssl&&$.ssl.key)Object.defineProperty(this.options.ssl,"key",{enumerable:!1});if(this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||Y||vX().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis==="undefined")this.options.idleTimeoutMillis=1e4;this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){if(this.log("pulse queue on ending"),this._idle.length)this._idle.slice().map((Y)=>{this._remove(Y.client)});if(!this._clients.length)this.ended=!0,this._endCallback();return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let $=this._pendingQueue.shift();if(this._idle.length){let Y=this._idle.pop();clearTimeout(Y.timeoutId);let X=Y.client;X.ref&&X.ref();let Q=Y.idleListener;return this._acquireClient(X,$,Q,!1)}if(!this._isFull())return this.newClient($);throw new Error("unexpected condition")}_remove($){let Y=vB(this._idle,(X)=>X.client===$);if(Y!==void 0)clearTimeout(Y.timeoutId);this._clients=this._clients.filter((X)=>X!==$),$.end(),this.emit("remove",$)}connect($){if(this.ending){let Q=new Error("Cannot use a pool after calling end on the pool");return $?$(Q):this.Promise.reject(Q)}let Y=w$(this.Promise,$),X=Y.result;if(this._isFull()||this._idle.length){if(this._idle.length)process.nextTick(()=>this._pulseQueue());if(!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new b9(Y.callback)),X;let Q=(G,M,U)=>{clearTimeout(J),Y.callback(G,M,U)},W=new b9(Q),J=setTimeout(()=>{vB(this._pendingQueue,(G)=>G.callback===Q),W.timedOut=!0,Y.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);if(J.unref)J.unref();return this._pendingQueue.push(W),X}return this.newClient(new b9(Y.callback)),X}newClient($){let Y=new this.Client(this.options);this._clients.push(Y);let X=IC(this,Y);this.log("checking client timeout");let Q,W=!1;if(this.options.connectionTimeoutMillis)Q=setTimeout(()=>{this.log("ending client due to timeout"),W=!0,Y.connection?Y.connection.stream.destroy():Y.end()},this.options.connectionTimeoutMillis);this.log("connecting new client"),Y.connect((J)=>{if(Q)clearTimeout(Q);if(Y.on("error",X),J){if(this.log("client failed to connect",J),this._clients=this._clients.filter((G)=>G!==Y),W)J=new Error("Connection terminated due to connection timeout",{cause:J});if(this._pulseQueue(),!$.timedOut)$.callback(J,void 0,fB)}else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let G=setTimeout(()=>{if(this.log("ending client due to expired lifetime"),this._expired.add(Y),this._idle.findIndex((U)=>U.client===Y)!==-1)this._acquireClient(Y,new b9((U,H,B)=>B()),X,!1)},this.options.maxLifetimeSeconds*1000);G.unref(),Y.once("end",()=>clearTimeout(G))}return this._acquireClient(Y,$,X,!0)}})}_acquireClient($,Y,X,Q){if(Q)this.emit("connect",$);if(this.emit("acquire",$),$.release=this._releaseOnce($,X),$.removeListener("error",X),!Y.timedOut)if(Q&&this.options.verify)this.options.verify($,(W)=>{if(W)return $.release(W),Y.callback(W,void 0,fB);Y.callback(void 0,$,$.release)});else Y.callback(void 0,$,$.release);else if(Q&&this.options.verify)this.options.verify($,$.release);else $.release()}_releaseOnce($,Y){let X=!1;return(Q)=>{if(X)bC();X=!0,this._release($,Y,Q)}}_release($,Y,X){if($.on("error",Y),$._poolUseCount=($._poolUseCount||0)+1,this.emit("release",X,$),X||this.ending||!$._queryable||$._ending||$._poolUseCount>=this.options.maxUses){if($._poolUseCount>=this.options.maxUses)this.log("remove expended client");this._remove($),this._pulseQueue();return}if(this._expired.has($)){this.log("remove expired client"),this._expired.delete($),this._remove($),this._pulseQueue();return}let W;if(this.options.idleTimeoutMillis&&this._isAboveMin()){if(W=setTimeout(()=>{this.log("remove idle client"),this._remove($)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle)W.unref()}if(this.options.allowExitOnIdle)$.unref();this._idle.push(new yB($,Y,W)),this._pulseQueue()}query($,Y,X){if(typeof $==="function"){let W=w$(this.Promise,$);return setImmediate(function(){return W.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),W.result}if(typeof Y==="function")X=Y,Y=void 0;let Q=w$(this.Promise,X);return X=Q.callback,this.connect((W,J)=>{if(W)return X(W);let G=!1,M=(U)=>{if(G)return;G=!0,J.release(U),X(U)};J.once("error",M),this.log("dispatching query");try{J.query($,Y,(U,H)=>{if(this.log("query dispatched"),J.removeListener("error",M),G)return;if(G=!0,J.release(U),U)return X(U);return X(void 0,H)})}catch(U){return J.release(U),X(U)}}),Q.result}end($){if(this.log("ending"),this.ending){let X=new Error("Called end on pool more than once");return $?$(X):this.Promise.reject(X)}this.ending=!0;let Y=w$(this.Promise,$);return this._endCallback=Y.callback,this._pulseQueue(),Y.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce(($,Y)=>$+(this._expired.has(Y)?1:0),0)}get totalCount(){return this._clients.length}}dB.exports=hB});var lB=Y0((Zi,uB)=>{var mB=E0("events").EventEmitter,TC=E0("util"),yX=L4(),_4=uB.exports=function($,Y,X){mB.call(this),$=yX.normalizeQueryConfig($,Y,X),this.text=$.text,this.values=$.values,this.name=$.name,this.queryMode=$.queryMode,this.callback=$.callback,this.state="new",this._arrayMode=$.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(Q){if(Q==="row")this._emitRowEvents=!0}.bind(this))};TC.inherits(_4,mB);var xC={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};_4.prototype.handleError=function($){let Y=this.native.pq.resultErrorFields();if(Y)for(let X in Y){let Q=xC[X]||X;$[Q]=Y[X]}if(this.callback)this.callback($);else this.emit("error",$);this.state="error"};_4.prototype.then=function($,Y){return this._getPromise().then($,Y)};_4.prototype.catch=function($){return this._getPromise().catch($)};_4.prototype._getPromise=function(){if(this._promise)return this._promise;return this._promise=new Promise(function($,Y){this._once("end",$),this._once("error",Y)}.bind(this)),this._promise};_4.prototype.submit=function($){this.state="running";let Y=this;this.native=$.native,$.native.arrayMode=this._arrayMode;let X=function(Q,W,J){if($.native.arrayMode=!1,setImmediate(function(){Y.emit("_done")}),Q)return Y.handleError(Q);if(Y._emitRowEvents)if(J.length>1)W.forEach((G,M)=>{G.forEach((U)=>{Y.emit("row",U,J[M])})});else W.forEach(function(G){Y.emit("row",G,J)});if(Y.state="end",Y.emit("end",J),Y.callback)Y.callback(null,J)};if(process.domain)X=process.domain.bind(X);if(this.name){if(this.name.length>63)console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries");let Q=(this.values||[]).map(yX.prepareValue);if($.namedQueries[this.name]){if(this.text&&$.namedQueries[this.name]!==this.text){let W=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return X(W)}return $.native.execute(this.name,Q,X)}return $.native.prepare(this.name,this.text,Q.length,function(W){if(W)return X(W);return $.namedQueries[Y.name]=Y.text,Y.native.execute(Y.name,Q,X)})}else if(this.values){if(!Array.isArray(this.values)){let W=new Error("Query values must be an array");return X(W)}let Q=this.values.map(yX.prepareValue);$.native.query(this.text,Q,X)}else if(this.queryMode==="extended")$.native.query(this.text,[],X);else $.native.query(this.text,X)}});var hX=Y0((ji,nB)=>{var pB;try{pB=(()=>{throw new Error("Cannot require module "+"pg-native");})()}catch($){throw $}var kC=H$(),iB=E0("events").EventEmitter,gC=E0("util"),fC=_X(),oB=lB(),H5=nB.exports=function($){iB.call(this),$=$||{},this._Promise=$.Promise||global.Promise,this._types=new kC($.types),this.native=new pB({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let Y=this.connectionParameters=new fC($);if($.nativeConnectionString)Y.nativeConnectionString=$.nativeConnectionString;this.user=Y.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Y.password}),this.database=Y.database,this.host=Y.host,this.port=Y.port,this.namedQueries={}};H5.Query=oB;gC.inherits(H5,iB);H5.prototype._errorAllQueries=function($){let Y=(X)=>{process.nextTick(()=>{X.native=this.native,X.handleError($)})};if(this._hasActiveQuery())Y(this._activeQuery),this._activeQuery=null;this._queryQueue.forEach(Y),this._queryQueue.length=0};H5.prototype._connect=function($){let Y=this;if(this._connecting){process.nextTick(()=>$(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(X,Q){if(Y.connectionParameters.nativeConnectionString)Q=Y.connectionParameters.nativeConnectionString;if(X)return $(X);Y.native.connect(Q,function(W){if(W)return Y.native.end(),$(W);Y._connected=!0,Y.native.on("error",function(J){Y._queryable=!1,Y._errorAllQueries(J),Y.emit("error",J)}),Y.native.on("notification",function(J){Y.emit("notification",{channel:J.relname,payload:J.extra})}),Y.emit("connect"),Y._pulseQueryQueue(!0),$()})})};H5.prototype.connect=function($){if($){this._connect($);return}return new this._Promise((Y,X)=>{this._connect((Q)=>{if(Q)X(Q);else Y()})})};H5.prototype.query=function($,Y,X){let Q,W,J,G,M;if($===null||$===void 0)throw new TypeError("Client was passed a null or undefined query");else if(typeof $.submit==="function"){if(J=$.query_timeout||this.connectionParameters.query_timeout,W=Q=$,typeof Y==="function")$.callback=Y}else if(J=$.query_timeout||this.connectionParameters.query_timeout,Q=new oB($,Y,X),!Q.callback){let U,H;W=new this._Promise((B,A)=>{U=B,H=A}).catch((B)=>{throw Error.captureStackTrace(B),B}),Q.callback=(B,A)=>B?H(B):U(A)}if(J)M=Q.callback,G=setTimeout(()=>{let U=new Error("Query read timeout");process.nextTick(()=>{Q.handleError(U,this.connection)}),M(U),Q.callback=()=>{};let H=this._queryQueue.indexOf(Q);if(H>-1)this._queryQueue.splice(H,1);this._pulseQueryQueue()},J),Q.callback=(U,H)=>{clearTimeout(G),M(U,H)};if(!this._queryable)return Q.native=this.native,process.nextTick(()=>{Q.handleError(new Error("Client has encountered a connection error and is not queryable"))}),W;if(this._ending)return Q.native=this.native,process.nextTick(()=>{Q.handleError(new Error("Client was closed and is not queryable"))}),W;return this._queryQueue.push(Q),this._pulseQueryQueue(),W};H5.prototype.end=function($){let Y=this;if(this._ending=!0,!this._connected)this.once("connect",this.end.bind(this,$));let X;if(!$)X=new this._Promise(function(Q,W){$=(J)=>J?W(J):Q()});return this.native.end(function(){Y._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{if(Y.emit("end"),$)$()})}),X};H5.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};H5.prototype._pulseQueryQueue=function($){if(!this._connected)return;if(this._hasActiveQuery())return;let Y=this._queryQueue.shift();if(!Y){if(!$)this.emit("drain");return}this._activeQuery=Y,Y.submit(this);let X=this;Y.once("_done",function(){X._pulseQueryQueue()})};H5.prototype.cancel=function($){if(this._activeQuery===$)this.native.cancel(function(){});else if(this._queryQueue.indexOf($)!==-1)this._queryQueue.splice(this._queryQueue.indexOf($),1)};H5.prototype.ref=function(){};H5.prototype.unref=function(){};H5.prototype.setTypeParser=function($,Y,X){return this._types.setTypeParser($,Y,X)};H5.prototype.getTypeParser=function($,Y){return this._types.getTypeParser($,Y)}});var vX=Y0((Ki,I9)=>{var vC=gB(),yC=C9(),hC=IX(),dC=RX(),cC=L4(),mC=cB(),uC=H$(),{DatabaseError:lC}=bX(),{escapeIdentifier:pC,escapeLiteral:iC}=L4(),oC=($)=>{return class Y extends mC{constructor(X){super(X,$)}}},dX=function($){this.defaults=yC,this.Client=$,this.Query=this.Client.Query,this.Pool=oC(this.Client),this._pools=[],this.Connection=hC,this.types=P9(),this.DatabaseError=lC,this.TypeOverrides=uC,this.escapeIdentifier=pC,this.escapeLiteral=iC,this.Result=dC,this.utils=cC};if(typeof process.env.NODE_PG_FORCE_NATIVE!=="undefined")I9.exports=new dX(hX());else I9.exports=new dX(vC),Object.defineProperty(I9.exports,"native",{configurable:!0,enumerable:!1,get(){let $=null;try{$=new dX(hX())}catch(Y){if(Y.code!=="MODULE_NOT_FOUND")throw Y}return Object.defineProperty(I9.exports,"native",{value:$}),$}})});var T1={};k2(T1,{IsUndefined:()=>H1,IsUint8Array:()=>f2,IsSymbol:()=>P$,IsString:()=>v0,IsRegExp:()=>C4,IsObject:()=>I0,IsNumber:()=>N5,IsNull:()=>R$,IsIterator:()=>_$,IsFunction:()=>S$,IsDate:()=>d8,IsBoolean:()=>g2,IsBigInt:()=>P4,IsAsyncIterator:()=>F$,IsArray:()=>U1,HasPropertyKey:()=>T9});function T9($,Y){return Y in $}function F$($){return I0($)&&!U1($)&&!f2($)&&Symbol.asyncIterator in $}function U1($){return Array.isArray($)}function P4($){return typeof $==="bigint"}function g2($){return typeof $==="boolean"}function d8($){return $ instanceof globalThis.Date}function S$($){return typeof $==="function"}function _$($){return I0($)&&!U1($)&&!f2($)&&Symbol.iterator in $}function R$($){return $===null}function N5($){return typeof $==="number"}function I0($){return typeof $==="object"&&$!==null}function C4($){return $ instanceof globalThis.RegExp}function v0($){return typeof $==="string"}function P$($){return typeof $==="symbol"}function f2($){return $ instanceof globalThis.Uint8Array}function H1($){return $===void 0}function Nq($){return $.map((Y)=>x9(Y))}function zq($){return new Date($.getTime())}function Aq($){return new Uint8Array($)}function wq($){return new RegExp($.source,$.flags)}function Oq($){let Y={};for(let X of Object.getOwnPropertyNames($))Y[X]=x9($[X]);for(let X of Object.getOwnPropertySymbols($))Y[X]=x9($[X]);return Y}function x9($){return U1($)?Nq($):d8($)?zq($):f2($)?Aq($):C4($)?wq($):I0($)?Oq($):$}function l0($){return x9($)}function w6($,Y){return Y===void 0?l0($):l0({...Y,...$})}function k9($){return J0($)&&globalThis.Symbol.asyncIterator in $}function g9($){return J0($)&&globalThis.Symbol.iterator in $}function C$($){return J0($)&&(globalThis.Object.getPrototypeOf($)===Object.prototype||globalThis.Object.getPrototypeOf($)===null)}function f9($){return $ instanceof globalThis.Promise}function c1($){return $ instanceof Date&&globalThis.Number.isFinite($.getTime())}function cX($){return $ instanceof globalThis.Map}function mX($){return $ instanceof globalThis.Set}function P5($){return globalThis.ArrayBuffer.isView($)}function O6($){return $ instanceof globalThis.Uint8Array}function s($,Y){return Y in $}function J0($){return $!==null&&typeof $==="object"}function a($){return globalThis.Array.isArray($)&&!globalThis.ArrayBuffer.isView($)}function p0($){return $===void 0}function v2($){return $===null}function w2($){return typeof $==="boolean"}function i($){return typeof $==="number"}function v9($){return globalThis.Number.isInteger($)}function C1($){return typeof $==="bigint"}function D0($){return typeof $==="string"}function N8($){return typeof $==="function"}function y2($){return typeof $==="symbol"}function z5($){return C1($)||w2($)||v2($)||i($)||D0($)||y2($)||p0($)}var d0;(function($){$.InstanceMode="default",$.ExactOptionalPropertyTypes=!1,$.AllowArrayObject=!1,$.AllowNaN=!1,$.AllowNullVoid=!1;function Y(G,M){return $.ExactOptionalPropertyTypes?M in G:G[M]!==void 0}$.IsExactOptionalProperty=Y;function X(G){let M=J0(G);return $.AllowArrayObject?M:M&&!a(G)}$.IsObjectLike=X;function Q(G){return X(G)&&!(G instanceof Date)&&!(G instanceof Uint8Array)}$.IsRecordLike=Q;function W(G){return $.AllowNaN?i(G):Number.isFinite(G)}$.IsNumberLike=W;function J(G){let M=p0(G);return $.AllowNullVoid?M||G===null:M}$.IsVoidLike=J})(d0||(d0={}));function Dq($){return globalThis.Object.freeze($).map((Y)=>V4(Y))}function Lq($){return $}function Zq($){return $}function jq($){return $}function Kq($){let Y={};for(let X of Object.getOwnPropertyNames($))Y[X]=V4($[X]);for(let X of Object.getOwnPropertySymbols($))Y[X]=V4($[X]);return globalThis.Object.freeze(Y)}function V4($){return U1($)?Dq($):d8($)?Lq($):f2($)?Zq($):C4($)?jq($):I0($)?Kq($):$}function R($,Y){let X=Y!==void 0?{...Y,...$}:$;switch(d0.InstanceMode){case"freeze":return V4(X);case"clone":return l0(X);default:return X}}class n extends Error{constructor($){super($)}}var k0=Symbol.for("TypeBox.Transform"),m5=Symbol.for("TypeBox.Readonly"),B1=Symbol.for("TypeBox.Optional"),C5=Symbol.for("TypeBox.Hint"),K=Symbol.for("TypeBox.Kind");function D6($){return I0($)&&$[m5]==="Readonly"}function n1($){return I0($)&&$[B1]==="Optional"}function V$($){return w0($,"Any")}function E$($){return w0($,"Argument")}function u5($){return w0($,"Array")}function c8($){return w0($,"AsyncIterator")}function m8($){return w0($,"BigInt")}function h2($){return w0($,"Boolean")}function l5($){return w0($,"Computed")}function p5($){return w0($,"Constructor")}function Fq($){return w0($,"Date")}function i5($){return w0($,"Function")}function o5($){return w0($,"Integer")}function a0($){return w0($,"Intersect")}function u8($){return w0($,"Iterator")}function w0($,Y){return I0($)&&K in $&&$[K]===Y}function y9($){return g2($)||N5($)||v0($)}function A5($){return w0($,"Literal")}function w5($){return w0($,"MappedKey")}function i0($){return w0($,"MappedResult")}function z8($){return w0($,"Never")}function Sq($){return w0($,"Not")}function E4($){return w0($,"Null")}function n5($){return w0($,"Number")}function q1($){return w0($,"Object")}function l8($){return w0($,"Promise")}function p8($){return w0($,"Record")}function G1($){return w0($,"Ref")}function b$($){return w0($,"RegExp")}function d2($){return w0($,"String")}function b4($){return w0($,"Symbol")}function O5($){return w0($,"TemplateLiteral")}function _q($){return w0($,"This")}function _0($){return I0($)&&k0 in $}function D5($){return w0($,"Tuple")}function c2($){return w0($,"Undefined")}function L0($){return w0($,"Union")}function Rq($){return w0($,"Uint8Array")}function Pq($){return w0($,"Unknown")}function Cq($){return w0($,"Unsafe")}function Vq($){return w0($,"Void")}function A8($){return I0($)&&K in $&&v0($[K])}function r0($){return V$($)||E$($)||u5($)||h2($)||m8($)||c8($)||l5($)||p5($)||Fq($)||i5($)||o5($)||a0($)||u8($)||A5($)||w5($)||i0($)||z8($)||Sq($)||E4($)||n5($)||q1($)||l8($)||p8($)||G1($)||b$($)||d2($)||b4($)||O5($)||_q($)||D5($)||c2($)||L0($)||Rq($)||Pq($)||Cq($)||Vq($)||A8($)}var Z={};k2(Z,{TypeGuardUnknownTypeError:()=>uX,IsVoid:()=>bQ,IsUnsafe:()=>EQ,IsUnknown:()=>VQ,IsUnionLiteral:()=>vq,IsUnion:()=>x$,IsUndefined:()=>PQ,IsUint8Array:()=>CQ,IsTuple:()=>RQ,IsTransform:()=>_Q,IsThis:()=>SQ,IsTemplateLiteral:()=>FQ,IsSymbol:()=>KQ,IsString:()=>jQ,IsSchema:()=>o0,IsRegExp:()=>ZQ,IsRef:()=>LQ,IsRecursive:()=>fq,IsRecord:()=>DQ,IsReadonly:()=>Tq,IsProperties:()=>h9,IsPromise:()=>OQ,IsOptional:()=>xq,IsObject:()=>wQ,IsNumber:()=>AQ,IsNull:()=>zQ,IsNot:()=>NQ,IsNever:()=>qQ,IsMappedResult:()=>BQ,IsMappedKey:()=>HQ,IsLiteralValue:()=>UQ,IsLiteralString:()=>GQ,IsLiteralNumber:()=>MQ,IsLiteralBoolean:()=>gq,IsLiteral:()=>T4,IsKindOf:()=>U0,IsKind:()=>IQ,IsIterator:()=>JQ,IsIntersect:()=>WQ,IsInteger:()=>QQ,IsImport:()=>kq,IsFunction:()=>XQ,IsDate:()=>YQ,IsConstructor:()=>$Q,IsComputed:()=>eX,IsBoolean:()=>aX,IsBigInt:()=>sX,IsAsyncIterator:()=>tX,IsArray:()=>rX,IsArgument:()=>nX,IsAny:()=>oX});class uX extends n{}var Eq=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function lX($){try{return new RegExp($),!0}catch{return!1}}function I$($){if(!v0($))return!1;for(let Y=0;Y<$.length;Y++){let X=$.charCodeAt(Y);if(X>=7&&X<=13||X===27||X===127)return!1}return!0}function pX($){return T$($)||o0($)}function I4($){return H1($)||P4($)}function y0($){return H1($)||N5($)}function T$($){return H1($)||g2($)}function T0($){return H1($)||v0($)}function bq($){return H1($)||v0($)&&I$($)&&lX($)}function Iq($){return H1($)||v0($)&&I$($)}function iX($){return H1($)||o0($)}function Tq($){return I0($)&&$[m5]==="Readonly"}function xq($){return I0($)&&$[B1]==="Optional"}function oX($){return U0($,"Any")&&T0($.$id)}function nX($){return U0($,"Argument")&&N5($.index)}function rX($){return U0($,"Array")&&$.type==="array"&&T0($.$id)&&o0($.items)&&y0($.minItems)&&y0($.maxItems)&&T$($.uniqueItems)&&iX($.contains)&&y0($.minContains)&&y0($.maxContains)}function tX($){return U0($,"AsyncIterator")&&$.type==="AsyncIterator"&&T0($.$id)&&o0($.items)}function sX($){return U0($,"BigInt")&&$.type==="bigint"&&T0($.$id)&&I4($.exclusiveMaximum)&&I4($.exclusiveMinimum)&&I4($.maximum)&&I4($.minimum)&&I4($.multipleOf)}function aX($){return U0($,"Boolean")&&$.type==="boolean"&&T0($.$id)}function eX($){return U0($,"Computed")&&v0($.target)&&U1($.parameters)&&$.parameters.every((Y)=>o0(Y))}function $Q($){return U0($,"Constructor")&&$.type==="Constructor"&&T0($.$id)&&U1($.parameters)&&$.parameters.every((Y)=>o0(Y))&&o0($.returns)}function YQ($){return U0($,"Date")&&$.type==="Date"&&T0($.$id)&&y0($.exclusiveMaximumTimestamp)&&y0($.exclusiveMinimumTimestamp)&&y0($.maximumTimestamp)&&y0($.minimumTimestamp)&&y0($.multipleOfTimestamp)}function XQ($){return U0($,"Function")&&$.type==="Function"&&T0($.$id)&&U1($.parameters)&&$.parameters.every((Y)=>o0(Y))&&o0($.returns)}function kq($){return U0($,"Import")&&T9($,"$defs")&&I0($.$defs)&&h9($.$defs)&&T9($,"$ref")&&v0($.$ref)&&$.$ref in $.$defs}function QQ($){return U0($,"Integer")&&$.type==="integer"&&T0($.$id)&&y0($.exclusiveMaximum)&&y0($.exclusiveMinimum)&&y0($.maximum)&&y0($.minimum)&&y0($.multipleOf)}function h9($){return I0($)&&Object.entries($).every(([Y,X])=>I$(Y)&&o0(X))}function WQ($){return U0($,"Intersect")&&(v0($.type)&&$.type!=="object"?!1:!0)&&U1($.allOf)&&$.allOf.every((Y)=>o0(Y)&&!_Q(Y))&&T0($.type)&&(T$($.unevaluatedProperties)||iX($.unevaluatedProperties))&&T0($.$id)}function JQ($){return U0($,"Iterator")&&$.type==="Iterator"&&T0($.$id)&&o0($.items)}function U0($,Y){return I0($)&&K in $&&$[K]===Y}function GQ($){return T4($)&&v0($.const)}function MQ($){return T4($)&&N5($.const)}function gq($){return T4($)&&g2($.const)}function T4($){return U0($,"Literal")&&T0($.$id)&&UQ($.const)}function UQ($){return g2($)||N5($)||v0($)}function HQ($){return U0($,"MappedKey")&&U1($.keys)&&$.keys.every((Y)=>N5(Y)||v0(Y))}function BQ($){return U0($,"MappedResult")&&h9($.properties)}function qQ($){return U0($,"Never")&&I0($.not)&&Object.getOwnPropertyNames($.not).length===0}function NQ($){return U0($,"Not")&&o0($.not)}function zQ($){return U0($,"Null")&&$.type==="null"&&T0($.$id)}function AQ($){return U0($,"Number")&&$.type==="number"&&T0($.$id)&&y0($.exclusiveMaximum)&&y0($.exclusiveMinimum)&&y0($.maximum)&&y0($.minimum)&&y0($.multipleOf)}function wQ($){return U0($,"Object")&&$.type==="object"&&T0($.$id)&&h9($.properties)&&pX($.additionalProperties)&&y0($.minProperties)&&y0($.maxProperties)}function OQ($){return U0($,"Promise")&&$.type==="Promise"&&T0($.$id)&&o0($.item)}function DQ($){return U0($,"Record")&&$.type==="object"&&T0($.$id)&&pX($.additionalProperties)&&I0($.patternProperties)&&((Y)=>{let X=Object.getOwnPropertyNames(Y.patternProperties);return X.length===1&&lX(X[0])&&I0(Y.patternProperties)&&o0(Y.patternProperties[X[0]])})($)}function fq($){return I0($)&&C5 in $&&$[C5]==="Recursive"}function LQ($){return U0($,"Ref")&&T0($.$id)&&v0($.$ref)}function ZQ($){return U0($,"RegExp")&&T0($.$id)&&v0($.source)&&v0($.flags)&&y0($.maxLength)&&y0($.minLength)}function jQ($){return U0($,"String")&&$.type==="string"&&T0($.$id)&&y0($.minLength)&&y0($.maxLength)&&bq($.pattern)&&Iq($.format)}function KQ($){return U0($,"Symbol")&&$.type==="symbol"&&T0($.$id)}function FQ($){return U0($,"TemplateLiteral")&&$.type==="string"&&v0($.pattern)&&$.pattern[0]==="^"&&$.pattern[$.pattern.length-1]==="$"}function SQ($){return U0($,"This")&&T0($.$id)&&v0($.$ref)}function _Q($){return I0($)&&k0 in $}function RQ($){return U0($,"Tuple")&&$.type==="array"&&T0($.$id)&&N5($.minItems)&&N5($.maxItems)&&$.minItems===$.maxItems&&(H1($.items)&&H1($.additionalItems)&&$.minItems===0||U1($.items)&&$.items.every((Y)=>o0(Y)))}function PQ($){return U0($,"Undefined")&&$.type==="undefined"&&T0($.$id)}function vq($){return x$($)&&$.anyOf.every((Y)=>GQ(Y)||MQ(Y))}function x$($){return U0($,"Union")&&T0($.$id)&&I0($)&&U1($.anyOf)&&$.anyOf.every((Y)=>o0(Y))}function CQ($){return U0($,"Uint8Array")&&$.type==="Uint8Array"&&T0($.$id)&&y0($.minByteLength)&&y0($.maxByteLength)}function VQ($){return U0($,"Unknown")&&T0($.$id)}function EQ($){return U0($,"Unsafe")}function bQ($){return U0($,"Void")&&$.type==="void"&&T0($.$id)}function IQ($){return I0($)&&K in $&&v0($[K])&&!Eq.includes($[K])}function o0($){return I0($)&&(oX($)||nX($)||rX($)||aX($)||sX($)||tX($)||eX($)||$Q($)||YQ($)||XQ($)||QQ($)||WQ($)||JQ($)||T4($)||HQ($)||BQ($)||qQ($)||NQ($)||zQ($)||AQ($)||wQ($)||OQ($)||DQ($)||LQ($)||ZQ($)||jQ($)||KQ($)||FQ($)||SQ($)||RQ($)||PQ($)||x$($)||CQ($)||VQ($)||EQ($)||bQ($)||IQ($))}var TQ="(true|false)",d9="(0|[1-9][0-9]*)",xQ="(.*)";var O2="^(0|[1-9][0-9]*)$",D2="^(.*)$",kQ="^(?!.*)$";var b0={};k2(b0,{Set:()=>mq,Has:()=>cq,Get:()=>uq,Entries:()=>yq,Delete:()=>dq,Clear:()=>hq});var L6=new Map;function yq(){return new Map(L6)}function hq(){return L6.clear()}function dq($){return L6.delete($)}function cq($){return L6.has($)}function mq($,Y){L6.set($,Y)}function uq($){return L6.get($)}var D1={};k2(D1,{Set:()=>nq,Has:()=>oq,Get:()=>rq,Entries:()=>lq,Delete:()=>iq,Clear:()=>pq});var Z6=new Map;function lq(){return new Map(Z6)}function pq(){return Z6.clear()}function iq($){return Z6.delete($)}function oq($){return Z6.has($)}function nq($,Y){Z6.set($,Y)}function rq($){return Z6.get($)}function gQ($,Y){return $.includes(Y)}function fQ($){return[...new Set($)]}function tq($,Y){return $.filter((X)=>Y.includes(X))}function sq($,Y){return $.reduce((X,Q)=>{return tq(X,Q)},Y)}function vQ($){return $.length===1?$[0]:$.length>1?sq($.slice(1),$[0]):[]}function yQ($){let Y=[];for(let X of $)Y.push(...X);return Y}function w8($){return R({[K]:"Any"},$)}function j6($,Y){return R({[K]:"Array",type:"array",items:$},Y)}function hQ($){return R({[K]:"Argument",index:$})}function K6($,Y){return R({[K]:"AsyncIterator",type:"AsyncIterator",items:$},Y)}function c0($,Y,X){return R({[K]:"Computed",target:$,parameters:Y},X)}function aq($,Y){let{[Y]:X,...Q}=$;return Q}function e0($,Y){return Y.reduce((X,Q)=>aq(X,Q),$)}function W0($){return R({[K]:"Never",not:{}},$)}function Z0($){return R({[K]:"MappedResult",properties:$})}function F6($,Y,X){return R({[K]:"Constructor",type:"Constructor",parameters:$,returns:Y},X)}function L2($,Y,X){return R({[K]:"Function",type:"Function",parameters:$,returns:Y},X)}function x4($,Y){return R({[K]:"Union",anyOf:$},Y)}function eq($){return $.some((Y)=>n1(Y))}function dQ($){return $.map((Y)=>n1(Y)?$N(Y):Y)}function $N($){return e0($,[B1])}function YN($,Y){return eq($)?x1(x4(dQ($),Y)):x4(dQ($),Y)}function Z2($,Y){return $.length===1?R($[0],Y):$.length===0?W0(Y):YN($,Y)}function R0($,Y){return $.length===0?W0(Y):$.length===1?R($[0],Y):x4($,Y)}class k$ extends n{}function XN($){return $.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}function g$($,Y,X){return $[Y]===X&&$.charCodeAt(Y-1)!==92}function u2($,Y){return g$($,Y,"(")}function k4($,Y){return g$($,Y,")")}function cQ($,Y){return g$($,Y,"|")}function QN($){if(!(u2($,0)&&k4($,$.length-1)))return!1;let Y=0;for(let X=0;X<$.length;X++){if(u2($,X))Y+=1;if(k4($,X))Y-=1;if(Y===0&&X!==$.length-1)return!1}return!0}function WN($){return $.slice(1,$.length-1)}function JN($){let Y=0;for(let X=0;X<$.length;X++){if(u2($,X))Y+=1;if(k4($,X))Y-=1;if(cQ($,X)&&Y===0)return!0}return!1}function GN($){for(let Y=0;Y<$.length;Y++)if(u2($,Y))return!0;return!1}function MN($){let[Y,X]=[0,0],Q=[];for(let J=0;J<$.length;J++){if(u2($,J))Y+=1;if(k4($,J))Y-=1;if(cQ($,J)&&Y===0){let G=$.slice(X,J);if(G.length>0)Q.push(S6(G));X=J+1}}let W=$.slice(X);if(W.length>0)Q.push(S6(W));if(Q.length===0)return{type:"const",const:""};if(Q.length===1)return Q[0];return{type:"or",expr:Q}}function UN($){function Y(W,J){if(!u2(W,J))throw new k$("TemplateLiteralParser: Index must point to open parens");let G=0;for(let M=J;M<W.length;M++){if(u2(W,M))G+=1;if(k4(W,M))G-=1;if(G===0)return[J,M]}throw new k$("TemplateLiteralParser: Unclosed group parens in expression")}function X(W,J){for(let G=J;G<W.length;G++)if(u2(W,G))return[J,G];return[J,W.length]}let Q=[];for(let W=0;W<$.length;W++)if(u2($,W)){let[J,G]=Y($,W),M=$.slice(J,G+1);Q.push(S6(M)),W=G}else{let[J,G]=X($,W),M=$.slice(J,G);if(M.length>0)Q.push(S6(M));W=G-1}return Q.length===0?{type:"const",const:""}:Q.length===1?Q[0]:{type:"and",expr:Q}}function S6($){return QN($)?S6(WN($)):JN($)?MN($):GN($)?UN($):{type:"const",const:XN($)}}function _6($){return S6($.slice(1,$.length-1))}class mQ extends n{}function HN($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="0"&&$.expr[1].type==="const"&&$.expr[1].const==="[1-9][0-9]*"}function BN($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="true"&&$.expr[1].type==="const"&&$.expr[1].const==="false"}function qN($){return $.type==="const"&&$.const===".*"}function i8($){return HN($)||qN($)?!1:BN($)?!0:$.type==="and"?$.expr.every((Y)=>i8(Y)):$.type==="or"?$.expr.every((Y)=>i8(Y)):$.type==="const"?!0:(()=>{throw new mQ("Unknown expression type")})()}function c9($){let Y=_6($.pattern);return i8(Y)}class uQ extends n{}function*lQ($){if($.length===1)return yield*$[0];for(let Y of $[0])for(let X of lQ($.slice(1)))yield`${Y}${X}`}function*NN($){return yield*lQ($.expr.map((Y)=>[...g4(Y)]))}function*zN($){for(let Y of $.expr)yield*g4(Y)}function*AN($){return yield $.const}function*g4($){return $.type==="and"?yield*NN($):$.type==="or"?yield*zN($):$.type==="const"?yield*AN($):(()=>{throw new uQ("Unknown expression")})()}function R6($){let Y=_6($.pattern);return i8(Y)?[...g4(Y)]:[]}function O0($,Y){return R({[K]:"Literal",const:$,type:typeof $},Y)}function m9($){return R({[K]:"Boolean",type:"boolean"},$)}function P6($){return R({[K]:"BigInt",type:"bigint"},$)}function V5($){return R({[K]:"Number",type:"number"},$)}function m1($){return R({[K]:"String",type:"string"},$)}function*wN($){let Y=$.trim().replace(/"|'/g,"");return Y==="boolean"?yield m9():Y==="number"?yield V5():Y==="bigint"?yield P6():Y==="string"?yield m1():yield(()=>{let X=Y.split("|").map((Q)=>O0(Q.trim()));return X.length===0?W0():X.length===1?X[0]:Z2(X)})()}function*ON($){if($[1]!=="{"){let Y=O0("$"),X=f$($.slice(1));return yield*[Y,...X]}for(let Y=2;Y<$.length;Y++)if($[Y]==="}"){let X=wN($.slice(2,Y)),Q=f$($.slice(Y+1));return yield*[...X,...Q]}yield O0($)}function*f$($){for(let Y=0;Y<$.length;Y++)if($[Y]==="$"){let X=O0($.slice(0,Y)),Q=ON($.slice(Y));return yield*[X,...Q]}yield O0($)}function pQ($){return[...f$($)]}class iQ extends n{}function DN($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function oQ($,Y){return O5($)?$.pattern.slice(1,$.pattern.length-1):L0($)?`(${$.anyOf.map((X)=>oQ(X,Y)).join("|")})`:n5($)?`${Y}${d9}`:o5($)?`${Y}${d9}`:m8($)?`${Y}${d9}`:d2($)?`${Y}${xQ}`:A5($)?`${Y}${DN($.const.toString())}`:h2($)?`${Y}${TQ}`:(()=>{throw new iQ(`Unexpected Kind '${$[K]}'`)})()}function v$($){return`^${$.map((Y)=>oQ(Y,"")).join("")}$`}function o8($){let X=R6($).map((Q)=>O0(Q));return Z2(X)}function u9($,Y){let X=v0($)?v$(pQ($)):v$($);return R({[K]:"TemplateLiteral",type:"string",pattern:X},Y)}function LN($){return R6($).map((X)=>X.toString())}function ZN($){let Y=[];for(let X of $)Y.push(...r1(X));return Y}function jN($){return[$.toString()]}function r1($){return[...new Set(O5($)?LN($):L0($)?ZN($.anyOf):A5($)?jN($.const):n5($)?["[number]"]:o5($)?["[number]"]:[])]}function KN($,Y,X){let Q={};for(let W of Object.getOwnPropertyNames(Y))Q[W]=O8($,r1(Y[W]),X);return Q}function FN($,Y,X){return KN($,Y.properties,X)}function nQ($,Y,X){let Q=FN($,Y,X);return Z0(Q)}function tQ($,Y){return $.map((X)=>sQ(X,Y))}function SN($){return $.filter((Y)=>!z8(Y))}function _N($,Y){return l9(SN(tQ($,Y)))}function RN($){return $.some((Y)=>z8(Y))?[]:$}function PN($,Y){return Z2(RN(tQ($,Y)))}function CN($,Y){return Y in $?$[Y]:Y==="[number]"?Z2($):W0()}function VN($,Y){return Y==="[number]"?$:W0()}function EN($,Y){return Y in $?$[Y]:W0()}function sQ($,Y){return a0($)?_N($.allOf,Y):L0($)?PN($.anyOf,Y):D5($)?CN($.items??[],Y):u5($)?VN($.items,Y):q1($)?EN($.properties,Y):W0()}function f4($,Y){return Y.map((X)=>sQ($,X))}function rQ($,Y){return Z2(f4($,Y))}function O8($,Y,X){if(G1($)||G1(Y)){if(!r0($)||!r0(Y))throw new n("Index types using Ref parameters require both Type and Key to be of TSchema");return c0("Index",[$,Y])}if(i0(Y))return nQ($,Y,X);if(w5(Y))return aQ($,Y,X);return R(r0(Y)?rQ($,r1(Y)):rQ($,Y),X)}function bN($,Y,X){return{[Y]:O8($,[Y],l0(X))}}function IN($,Y,X){return Y.reduce((Q,W)=>{return{...Q,...bN($,W,X)}},{})}function TN($,Y,X){return IN($,Y.keys,X)}function aQ($,Y,X){let Q=TN($,Y,X);return Z0(Q)}function C6($,Y){return R({[K]:"Iterator",type:"Iterator",items:$},Y)}function xN($){let Y=[];for(let X in $)if(!n1($[X]))Y.push(X);return Y}function kN($,Y){let X=xN($),Q=X.length>0?{[K]:"Object",type:"object",properties:$,required:X}:{[K]:"Object",type:"object",properties:$};return R(Q,Y)}var P0=kN;function p9($,Y){return R({[K]:"Promise",type:"Promise",item:$},Y)}function gN($){return R(e0($,[m5]))}function fN($){return R({...$,[m5]:"Readonly"})}function vN($,Y){return Y===!1?gN($):fN($)}function t1($,Y){let X=Y??!0;return i0($)?eQ($,X):vN($,X)}function yN($,Y){let X={};for(let Q of globalThis.Object.getOwnPropertyNames($))X[Q]=t1($[Q],Y);return X}function hN($,Y){return yN($.properties,Y)}function eQ($,Y){let X=hN($,Y);return Z0(X)}function E5($,Y){return R($.length>0?{[K]:"Tuple",type:"array",items:$,additionalItems:!1,minItems:$.length,maxItems:$.length}:{[K]:"Tuple",type:"array",minItems:$.length,maxItems:$.length},Y)}function $W($,Y){return $ in Y?b5($,Y[$]):Z0(Y)}function dN($){return{[$]:O0($)}}function cN($){let Y={};for(let X of $)Y[X]=O0(X);return Y}function mN($,Y){return gQ(Y,$)?dN($):cN(Y)}function uN($,Y){let X=mN($,Y);return $W($,X)}function v4($,Y){return Y.map((X)=>b5($,X))}function lN($,Y){let X={};for(let Q of globalThis.Object.getOwnPropertyNames(Y))X[Q]=b5($,Y[Q]);return X}function b5($,Y){let X={...Y};return n1(Y)?x1(b5($,e0(Y,[B1]))):D6(Y)?t1(b5($,e0(Y,[m5]))):i0(Y)?$W($,Y.properties):w5(Y)?uN($,Y.keys):p5(Y)?F6(v4($,Y.parameters),b5($,Y.returns),X):i5(Y)?L2(v4($,Y.parameters),b5($,Y.returns),X):c8(Y)?K6(b5($,Y.items),X):u8(Y)?C6(b5($,Y.items),X):a0(Y)?k1(v4($,Y.allOf),X):L0(Y)?R0(v4($,Y.anyOf),X):D5(Y)?E5(v4($,Y.items??[]),X):q1(Y)?P0(lN($,Y.properties),X):u5(Y)?j6(b5($,Y.items),X):l8(Y)?p9(b5($,Y.item),X):Y}function pN($,Y){let X={};for(let Q of $)X[Q]=b5(Q,Y);return X}function YW($,Y,X){let Q=r0($)?r1($):$,W=Y({[K]:"MappedKey",keys:Q}),J=pN(Q,W);return P0(J,X)}function iN($){return R(e0($,[B1]))}function oN($){return R({...$,[B1]:"Optional"})}function nN($,Y){return Y===!1?iN($):oN($)}function x1($,Y){let X=Y??!0;return i0($)?XW($,X):nN($,X)}function rN($,Y){let X={};for(let Q of globalThis.Object.getOwnPropertyNames($))X[Q]=x1($[Q],Y);return X}function tN($,Y){return rN($.properties,Y)}function XW($,Y){let X=tN($,Y);return Z0(X)}function y4($,Y={}){let X=$.every((W)=>q1(W)),Q=r0(Y.unevaluatedProperties)?{unevaluatedProperties:Y.unevaluatedProperties}:{};return R(Y.unevaluatedProperties===!1||r0(Y.unevaluatedProperties)||X?{...Q,[K]:"Intersect",type:"object",allOf:$}:{...Q,[K]:"Intersect",allOf:$},Y)}function sN($){return $.every((Y)=>n1(Y))}function aN($){return e0($,[B1])}function QW($){return $.map((Y)=>n1(Y)?aN(Y):Y)}function eN($,Y){return sN($)?x1(y4(QW($),Y)):y4(QW($),Y)}function l9($,Y={}){if($.length===1)return R($[0],Y);if($.length===0)return W0(Y);if($.some((X)=>_0(X)))throw new Error("Cannot intersect transform types");return eN($,Y)}function k1($,Y){if($.length===1)return R($[0],Y);if($.length===0)return W0(Y);if($.some((X)=>_0(X)))throw new Error("Cannot intersect transform types");return y4($,Y)}function I5(...$){let[Y,X]=typeof $[0]==="string"?[$[0],$[1]]:[$[0].$id,$[1]];if(typeof Y!=="string")throw new n("Ref: $ref must be a string");return R({[K]:"Ref",$ref:Y},X)}function $z($,Y){return c0("Awaited",[c0($,Y)])}function Yz($){return c0("Awaited",[I5($)])}function Xz($){return k1(WW($))}function Qz($){return R0(WW($))}function Wz($){return V6($)}function WW($){return $.map((Y)=>V6(Y))}function V6($,Y){return R(l5($)?$z($.target,$.parameters):a0($)?Xz($.allOf):L0($)?Qz($.anyOf):l8($)?Wz($.item):G1($)?Yz($.$ref):$,Y)}function JW($){let Y=[];for(let X of $)Y.push(s1(X));return Y}function Jz($){let Y=JW($);return yQ(Y)}function Gz($){let Y=JW($);return vQ(Y)}function Mz($){return $.map((Y,X)=>X.toString())}function Uz($){return["[number]"]}function Hz($){return globalThis.Object.getOwnPropertyNames($)}function Bz($){if(!y$)return[];return globalThis.Object.getOwnPropertyNames($).map((X)=>{return X[0]==="^"&&X[X.length-1]==="$"?X.slice(1,X.length-1):X})}function s1($){return a0($)?Jz($.allOf):L0($)?Gz($.anyOf):D5($)?Mz($.items??[]):u5($)?Uz($.items):q1($)?Hz($.properties):p8($)?Bz($.patternProperties):[]}var y$=!1;function l2($){y$=!0;let Y=s1($);return y$=!1,`^(${Y.map((Q)=>`(${Q})`).join("|")})$`}function qz($,Y){return c0("KeyOf",[c0($,Y)])}function Nz($){return c0("KeyOf",[I5($)])}function zz($,Y){let X=s1($),Q=Az(X),W=Z2(Q);return R(W,Y)}function Az($){return $.map((Y)=>Y==="[number]"?V5():O0(Y))}function E6($,Y){return l5($)?qz($.target,$.parameters):G1($)?Nz($.$ref):i0($)?GW($,Y):zz($,Y)}function wz($,Y){let X={};for(let Q of globalThis.Object.getOwnPropertyNames($))X[Q]=E6($[Q],l0(Y));return X}function Oz($,Y){return wz($.properties,Y)}function GW($,Y){let X=Oz($,Y);return Z0(X)}function i9($){let Y=s1($),X=f4($,Y);return Y.map((Q,W)=>[Y[W],X[W]])}function Dz($){let Y=[];for(let X of $)Y.push(...s1(X));return fQ(Y)}function Lz($){return $.filter((Y)=>!z8(Y))}function Zz($,Y){let X=[];for(let Q of $)X.push(...f4(Q,[Y]));return Lz(X)}function jz($,Y){let X={};for(let Q of Y)X[Q]=l9(Zz($,Q));return X}function MW($,Y){let X=Dz($),Q=jz($,X);return P0(Q,Y)}function o9($){return R({[K]:"Date",type:"Date"},$)}function n9($){return R({[K]:"Null",type:"null"},$)}function r9($){return R({[K]:"Symbol",type:"symbol"},$)}function t9($){return R({[K]:"Undefined",type:"undefined"},$)}function s9($){return R({[K]:"Uint8Array",type:"Uint8Array"},$)}function r5($){return R({[K]:"Unknown"},$)}function Kz($){return $.map((Y)=>h$(Y,!1))}function Fz($){let Y={};for(let X of globalThis.Object.getOwnPropertyNames($))Y[X]=t1(h$($[X],!1));return Y}function a9($,Y){return Y===!0?$:t1($)}function h$($,Y){return F$($)?a9(w8(),Y):_$($)?a9(w8(),Y):U1($)?t1(E5(Kz($))):f2($)?s9():d8($)?o9():I0($)?a9(P0(Fz($)),Y):S$($)?a9(L2([],r5()),Y):H1($)?t9():R$($)?n9():P$($)?r9():P4($)?P6():N5($)?O0($):g2($)?O0($):v0($)?O0($):P0({})}function UW($,Y){return R(h$($,!0),Y)}function HW($,Y){return p5($)?E5($.parameters,Y):W0(Y)}function BW($,Y){if(H1($))throw new Error("Enum undefined or empty");let X=globalThis.Object.getOwnPropertyNames($).filter((J)=>isNaN(J)).map((J)=>$[J]),W=[...new Set(X)].map((J)=>O0(J));return R0(W,{...Y,[C5]:"Enum"})}class wW extends n{}var P;(function($){$[$.Union=0]="Union",$[$.True=1]="True",$[$.False=2]="False"})(P||(P={}));function T5($){return $===P.False?$:P.True}function b6($){throw new wW($)}function A1($){return Z.IsNever($)||Z.IsIntersect($)||Z.IsUnion($)||Z.IsUnknown($)||Z.IsAny($)}function w1($,Y){return Z.IsNever(Y)?LW($,Y):Z.IsIntersect(Y)?e9($,Y):Z.IsUnion(Y)?l$($,Y):Z.IsUnknown(Y)?FW($,Y):Z.IsAny(Y)?u$($,Y):b6("StructuralRight")}function u$($,Y){return P.True}function Sz($,Y){return Z.IsIntersect(Y)?e9($,Y):Z.IsUnion(Y)&&Y.anyOf.some((X)=>Z.IsAny(X)||Z.IsUnknown(X))?P.True:Z.IsUnion(Y)?P.Union:Z.IsUnknown(Y)?P.True:Z.IsAny(Y)?P.True:P.Union}function _z($,Y){return Z.IsUnknown($)?P.False:Z.IsAny($)?P.Union:Z.IsNever($)?P.True:P.False}function Rz($,Y){return Z.IsObject(Y)&&$7(Y)?P.True:A1(Y)?w1($,Y):!Z.IsArray(Y)?P.False:T5(x0($.items,Y.items))}function Pz($,Y){return A1(Y)?w1($,Y):!Z.IsAsyncIterator(Y)?P.False:T5(x0($.items,Y.items))}function Cz($,Y){return A1(Y)?w1($,Y):Z.IsObject(Y)?g1($,Y):Z.IsRecord(Y)?x5($,Y):Z.IsBigInt(Y)?P.True:P.False}function OW($,Y){return Z.IsLiteralBoolean($)?P.True:Z.IsBoolean($)?P.True:P.False}function Vz($,Y){return A1(Y)?w1($,Y):Z.IsObject(Y)?g1($,Y):Z.IsRecord(Y)?x5($,Y):Z.IsBoolean(Y)?P.True:P.False}function Ez($,Y){return A1(Y)?w1($,Y):Z.IsObject(Y)?g1($,Y):!Z.IsConstructor(Y)?P.False:$.parameters.length>Y.parameters.length?P.False:!$.parameters.every((X,Q)=>T5(x0(Y.parameters[Q],X))===P.True)?P.False:T5(x0($.returns,Y.returns))}function bz($,Y){return A1(Y)?w1($,Y):Z.IsObject(Y)?g1($,Y):Z.IsRecord(Y)?x5($,Y):Z.IsDate(Y)?P.True:P.False}function Iz($,Y){return A1(Y)?w1($,Y):Z.IsObject(Y)?g1($,Y):!Z.IsFunction(Y)?P.False:$.parameters.length>Y.parameters.length?P.False:!$.parameters.every((X,Q)=>T5(x0(Y.parameters[Q],X))===P.True)?P.False:T5(x0($.returns,Y.returns))}function DW($,Y){return Z.IsLiteral($)&&T1.IsNumber($.const)?P.True:Z.IsNumber($)||Z.IsInteger($)?P.True:P.False}function Tz($,Y){return Z.IsInteger(Y)||Z.IsNumber(Y)?P.True:A1(Y)?w1($,Y):Z.IsObject(Y)?g1($,Y):Z.IsRecord(Y)?x5($,Y):P.False}function e9($,Y){return Y.allOf.every((X)=>x0($,X)===P.True)?P.True:P.False}function xz($,Y){return $.allOf.some((X)=>x0(X,Y)===P.True)?P.True:P.False}function kz($,Y){return A1(Y)?w1($,Y):!Z.IsIterator(Y)?P.False:T5(x0($.items,Y.items))}function gz($,Y){return Z.IsLiteral(Y)&&Y.const===$.const?P.True:A1(Y)?w1($,Y):Z.IsObject(Y)?g1($,Y):Z.IsRecord(Y)?x5($,Y):Z.IsString(Y)?KW($,Y):Z.IsNumber(Y)?ZW($,Y):Z.IsInteger(Y)?DW($,Y):Z.IsBoolean(Y)?OW($,Y):P.False}function LW($,Y){return P.False}function fz($,Y){return P.True}function qW($){let[Y,X]=[$,0];while(!0){if(!Z.IsNot(Y))break;Y=Y.not,X+=1}return X%2===0?Y:r5()}function vz($,Y){return Z.IsNot($)?x0(qW($),Y):Z.IsNot(Y)?x0($,qW(Y)):b6("Invalid fallthrough for Not")}function yz($,Y){return A1(Y)?w1($,Y):Z.IsObject(Y)?g1($,Y):Z.IsRecord(Y)?x5($,Y):Z.IsNull(Y)?P.True:P.False}function ZW($,Y){return Z.IsLiteralNumber($)?P.True:Z.IsNumber($)||Z.IsInteger($)?P.True:P.False}function hz($,Y){return A1(Y)?w1($,Y):Z.IsObject(Y)?g1($,Y):Z.IsRecord(Y)?x5($,Y):Z.IsInteger(Y)||Z.IsNumber(Y)?P.True:P.False}function a1($,Y){return Object.getOwnPropertyNames($.properties).length===Y}function NW($){return $7($)}function zW($){return a1($,0)||a1($,1)&&"description"in $.properties&&Z.IsUnion($.properties.description)&&$.properties.description.anyOf.length===2&&(Z.IsString($.properties.description.anyOf[0])&&Z.IsUndefined($.properties.description.anyOf[1])||Z.IsString($.properties.description.anyOf[1])&&Z.IsUndefined($.properties.description.anyOf[0]))}function d$($){return a1($,0)}function AW($){return a1($,0)}function dz($){return a1($,0)}function cz($){return a1($,0)}function mz($){return $7($)}function uz($){let Y=V5();return a1($,0)||a1($,1)&&"length"in $.properties&&T5(x0($.properties.length,Y))===P.True}function lz($){return a1($,0)}function $7($){let Y=V5();return a1($,0)||a1($,1)&&"length"in $.properties&&T5(x0($.properties.length,Y))===P.True}function pz($){let Y=L2([w8()],w8());return a1($,0)||a1($,1)&&"then"in $.properties&&T5(x0($.properties.then,Y))===P.True}function jW($,Y){return x0($,Y)===P.False?P.False:Z.IsOptional($)&&!Z.IsOptional(Y)?P.False:P.True}function g1($,Y){return Z.IsUnknown($)?P.False:Z.IsAny($)?P.Union:Z.IsNever($)||Z.IsLiteralString($)&&NW(Y)||Z.IsLiteralNumber($)&&d$(Y)||Z.IsLiteralBoolean($)&&AW(Y)||Z.IsSymbol($)&&zW(Y)||Z.IsBigInt($)&&dz(Y)||Z.IsString($)&&NW(Y)||Z.IsSymbol($)&&zW(Y)||Z.IsNumber($)&&d$(Y)||Z.IsInteger($)&&d$(Y)||Z.IsBoolean($)&&AW(Y)||Z.IsUint8Array($)&&mz(Y)||Z.IsDate($)&&cz(Y)||Z.IsConstructor($)&&lz(Y)||Z.IsFunction($)&&uz(Y)?P.True:Z.IsRecord($)&&Z.IsString(c$($))?(()=>{return Y[C5]==="Record"?P.True:P.False})():Z.IsRecord($)&&Z.IsNumber(c$($))?(()=>{return a1(Y,0)?P.True:P.False})():P.False}function iz($,Y){return A1(Y)?w1($,Y):Z.IsRecord(Y)?x5($,Y):!Z.IsObject(Y)?P.False:(()=>{for(let X of Object.getOwnPropertyNames(Y.properties)){if(!(X in $.properties)&&!Z.IsOptional(Y.properties[X]))return P.False;if(Z.IsOptional(Y.properties[X]))return P.True;if(jW($.properties[X],Y.properties[X])===P.False)return P.False}return P.True})()}function oz($,Y){return A1(Y)?w1($,Y):Z.IsObject(Y)&&pz(Y)?P.True:!Z.IsPromise(Y)?P.False:T5(x0($.item,Y.item))}function c$($){return O2 in $.patternProperties?V5():(D2 in $.patternProperties)?m1():b6("Unknown record key pattern")}function m$($){return O2 in $.patternProperties?$.patternProperties[O2]:(D2 in $.patternProperties)?$.patternProperties[D2]:b6("Unable to get record value schema")}function x5($,Y){let[X,Q]=[c$(Y),m$(Y)];return Z.IsLiteralString($)&&Z.IsNumber(X)&&T5(x0($,Q))===P.True?P.True:Z.IsUint8Array($)&&Z.IsNumber(X)?x0($,Q):Z.IsString($)&&Z.IsNumber(X)?x0($,Q):Z.IsArray($)&&Z.IsNumber(X)?x0($,Q):Z.IsObject($)?(()=>{for(let W of Object.getOwnPropertyNames($.properties))if(jW(Q,$.properties[W])===P.False)return P.False;return P.True})():P.False}function nz($,Y){return A1(Y)?w1($,Y):Z.IsObject(Y)?g1($,Y):!Z.IsRecord(Y)?P.False:x0(m$($),m$(Y))}function rz($,Y){let X=Z.IsRegExp($)?m1():$,Q=Z.IsRegExp(Y)?m1():Y;return x0(X,Q)}function KW($,Y){return Z.IsLiteral($)&&T1.IsString($.const)?P.True:Z.IsString($)?P.True:P.False}function tz($,Y){return A1(Y)?w1($,Y):Z.IsObject(Y)?g1($,Y):Z.IsRecord(Y)?x5($,Y):Z.IsString(Y)?P.True:P.False}function sz($,Y){return A1(Y)?w1($,Y):Z.IsObject(Y)?g1($,Y):Z.IsRecord(Y)?x5($,Y):Z.IsSymbol(Y)?P.True:P.False}function az($,Y){return Z.IsTemplateLiteral($)?x0(o8($),Y):Z.IsTemplateLiteral(Y)?x0($,o8(Y)):b6("Invalid fallthrough for TemplateLiteral")}function ez($,Y){return Z.IsArray(Y)&&$.items!==void 0&&$.items.every((X)=>x0(X,Y.items)===P.True)}function $A($,Y){return Z.IsNever($)?P.True:Z.IsUnknown($)?P.False:Z.IsAny($)?P.Union:P.False}function YA($,Y){return A1(Y)?w1($,Y):Z.IsObject(Y)&&$7(Y)?P.True:Z.IsArray(Y)&&ez($,Y)?P.True:!Z.IsTuple(Y)?P.False:T1.IsUndefined($.items)&&!T1.IsUndefined(Y.items)||!T1.IsUndefined($.items)&&T1.IsUndefined(Y.items)?P.False:T1.IsUndefined($.items)&&!T1.IsUndefined(Y.items)?P.True:$.items.every((X,Q)=>x0(X,Y.items[Q])===P.True)?P.True:P.False}function XA($,Y){return A1(Y)?w1($,Y):Z.IsObject(Y)?g1($,Y):Z.IsRecord(Y)?x5($,Y):Z.IsUint8Array(Y)?P.True:P.False}function QA($,Y){return A1(Y)?w1($,Y):Z.IsObject(Y)?g1($,Y):Z.IsRecord(Y)?x5($,Y):Z.IsVoid(Y)?GA($,Y):Z.IsUndefined(Y)?P.True:P.False}function l$($,Y){return Y.anyOf.some((X)=>x0($,X)===P.True)?P.True:P.False}function WA($,Y){return $.anyOf.every((X)=>x0(X,Y)===P.True)?P.True:P.False}function FW($,Y){return P.True}function JA($,Y){return Z.IsNever(Y)?LW($,Y):Z.IsIntersect(Y)?e9($,Y):Z.IsUnion(Y)?l$($,Y):Z.IsAny(Y)?u$($,Y):Z.IsString(Y)?KW($,Y):Z.IsNumber(Y)?ZW($,Y):Z.IsInteger(Y)?DW($,Y):Z.IsBoolean(Y)?OW($,Y):Z.IsArray(Y)?_z($,Y):Z.IsTuple(Y)?$A($,Y):Z.IsObject(Y)?g1($,Y):Z.IsUnknown(Y)?P.True:P.False}function GA($,Y){return Z.IsUndefined($)?P.True:Z.IsUndefined($)?P.True:P.False}function MA($,Y){return Z.IsIntersect(Y)?e9($,Y):Z.IsUnion(Y)?l$($,Y):Z.IsUnknown(Y)?FW($,Y):Z.IsAny(Y)?u$($,Y):Z.IsObject(Y)?g1($,Y):Z.IsVoid(Y)?P.True:P.False}function x0($,Y){return Z.IsTemplateLiteral($)||Z.IsTemplateLiteral(Y)?az($,Y):Z.IsRegExp($)||Z.IsRegExp(Y)?rz($,Y):Z.IsNot($)||Z.IsNot(Y)?vz($,Y):Z.IsAny($)?Sz($,Y):Z.IsArray($)?Rz($,Y):Z.IsBigInt($)?Cz($,Y):Z.IsBoolean($)?Vz($,Y):Z.IsAsyncIterator($)?Pz($,Y):Z.IsConstructor($)?Ez($,Y):Z.IsDate($)?bz($,Y):Z.IsFunction($)?Iz($,Y):Z.IsInteger($)?Tz($,Y):Z.IsIntersect($)?xz($,Y):Z.IsIterator($)?kz($,Y):Z.IsLiteral($)?gz($,Y):Z.IsNever($)?fz($,Y):Z.IsNull($)?yz($,Y):Z.IsNumber($)?hz($,Y):Z.IsObject($)?iz($,Y):Z.IsRecord($)?nz($,Y):Z.IsString($)?tz($,Y):Z.IsSymbol($)?sz($,Y):Z.IsTuple($)?YA($,Y):Z.IsPromise($)?oz($,Y):Z.IsUint8Array($)?XA($,Y):Z.IsUndefined($)?QA($,Y):Z.IsUnion($)?WA($,Y):Z.IsUnknown($)?JA($,Y):Z.IsVoid($)?MA($,Y):b6(`Unknown left type operand '${$[K]}'`)}function D8($,Y){return x0($,Y)}function UA($,Y,X,Q,W){let J={};for(let G of globalThis.Object.getOwnPropertyNames($))J[G]=I6($[G],Y,X,Q,l0(W));return J}function HA($,Y,X,Q,W){return UA($.properties,Y,X,Q,W)}function SW($,Y,X,Q,W){let J=HA($,Y,X,Q,W);return Z0(J)}function BA($,Y,X,Q){let W=D8($,Y);return W===P.Union?R0([X,Q]):W===P.True?X:Q}function I6($,Y,X,Q,W){return i0($)?SW($,Y,X,Q,W):w5($)?R(_W($,Y,X,Q,W)):R(BA($,Y,X,Q),W)}function qA($,Y,X,Q,W){return{[$]:I6(O0($),Y,X,Q,l0(W))}}function NA($,Y,X,Q,W){return $.reduce((J,G)=>{return{...J,...qA(G,Y,X,Q,W)}},{})}function zA($,Y,X,Q,W){return NA($.keys,Y,X,Q,W)}function _W($,Y,X,Q,W){let J=zA($,Y,X,Q,W);return Z0(J)}function AA($){return $.allOf.every((Y)=>p2(Y))}function wA($){return $.anyOf.some((Y)=>p2(Y))}function OA($){return!p2($.not)}function p2($){return $[K]==="Intersect"?AA($):$[K]==="Union"?wA($):$[K]==="Not"?OA($):$[K]==="Undefined"?!0:!1}function RW($,Y){return T6(o8($),Y)}function DA($,Y){let X=$.filter((Q)=>D8(Q,Y)===P.False);return X.length===1?X[0]:R0(X)}function T6($,Y,X={}){if(O5($))return R(RW($,Y),X);if(i0($))return R(PW($,Y),X);return R(L0($)?DA($.anyOf,Y):D8($,Y)!==P.False?W0():$,X)}function LA($,Y){let X={};for(let Q of globalThis.Object.getOwnPropertyNames($))X[Q]=T6($[Q],Y);return X}function ZA($,Y){return LA($.properties,Y)}function PW($,Y){let X=ZA($,Y);return Z0(X)}function CW($,Y){return x6(o8($),Y)}function jA($,Y){let X=$.filter((Q)=>D8(Q,Y)!==P.False);return X.length===1?X[0]:R0(X)}function x6($,Y,X){if(O5($))return R(CW($,Y),X);if(i0($))return R(VW($,Y),X);return R(L0($)?jA($.anyOf,Y):D8($,Y)!==P.False?$:W0(),X)}function KA($,Y){let X={};for(let Q of globalThis.Object.getOwnPropertyNames($))X[Q]=x6($[Q],Y);return X}function FA($,Y){return KA($.properties,Y)}function VW($,Y){let X=FA($,Y);return Z0(X)}function EW($,Y){return p5($)?R($.returns,Y):W0(Y)}function Y7($){return t1(x1($))}function n8($,Y,X){return R({[K]:"Record",type:"object",patternProperties:{[$]:Y}},X)}function p$($,Y,X){let Q={};for(let W of $)Q[W]=Y;return P0(Q,{...X,[C5]:"Record"})}function SA($,Y,X){return c9($)?p$(r1($),Y,X):n8($.pattern,Y,X)}function _A($,Y,X){return p$(r1(R0($)),Y,X)}function RA($,Y,X){return p$([$.toString()],Y,X)}function PA($,Y,X){return n8($.source,Y,X)}function CA($,Y,X){let Q=H1($.pattern)?D2:$.pattern;return n8(Q,Y,X)}function VA($,Y,X){return n8(D2,Y,X)}function EA($,Y,X){return n8(kQ,Y,X)}function bA($,Y,X){return P0({true:Y,false:Y},X)}function IA($,Y,X){return n8(O2,Y,X)}function TA($,Y,X){return n8(O2,Y,X)}function X7($,Y,X={}){return L0($)?_A($.anyOf,Y,X):O5($)?SA($,Y,X):A5($)?RA($.const,Y,X):h2($)?bA($,Y,X):o5($)?IA($,Y,X):n5($)?TA($,Y,X):b$($)?PA($,Y,X):d2($)?CA($,Y,X):V$($)?VA($,Y,X):z8($)?EA($,Y,X):W0(X)}function Q7($){return globalThis.Object.getOwnPropertyNames($.patternProperties)[0]}function bW($){let Y=Q7($);return Y===D2?m1():Y===O2?V5():m1({pattern:Y})}function W7($){return $.patternProperties[Q7($)]}function xA($,Y){return Y.parameters=h4($,Y.parameters),Y.returns=t5($,Y.returns),Y}function kA($,Y){return Y.parameters=h4($,Y.parameters),Y.returns=t5($,Y.returns),Y}function gA($,Y){return Y.allOf=h4($,Y.allOf),Y}function fA($,Y){return Y.anyOf=h4($,Y.anyOf),Y}function vA($,Y){if(H1(Y.items))return Y;return Y.items=h4($,Y.items),Y}function yA($,Y){return Y.items=t5($,Y.items),Y}function hA($,Y){return Y.items=t5($,Y.items),Y}function dA($,Y){return Y.items=t5($,Y.items),Y}function cA($,Y){return Y.item=t5($,Y.item),Y}function mA($,Y){let X=iA($,Y.properties);return{...Y,...P0(X)}}function uA($,Y){let X=t5($,bW(Y)),Q=t5($,W7(Y)),W=X7(X,Q);return{...Y,...W}}function lA($,Y){return Y.index in $?$[Y.index]:r5()}function pA($,Y){let X=D6(Y),Q=n1(Y),W=t5($,Y);return X&&Q?Y7(W):X&&!Q?t1(W):!X&&Q?x1(W):W}function iA($,Y){return globalThis.Object.getOwnPropertyNames(Y).reduce((X,Q)=>{return{...X,[Q]:pA($,Y[Q])}},{})}function h4($,Y){return Y.map((X)=>t5($,X))}function t5($,Y){return p5(Y)?xA($,Y):i5(Y)?kA($,Y):a0(Y)?gA($,Y):L0(Y)?fA($,Y):D5(Y)?vA($,Y):u5(Y)?yA($,Y):c8(Y)?hA($,Y):u8(Y)?dA($,Y):l8(Y)?cA($,Y):q1(Y)?mA($,Y):p8(Y)?uA($,Y):E$(Y)?lA($,Y):Y}function IW($,Y){return t5(Y,w6($))}function TW($){return R({[K]:"Integer",type:"integer"},$)}function oA($,Y,X){return{[$]:s5(O0($),Y,l0(X))}}function nA($,Y,X){return $.reduce((W,J)=>{return{...W,...oA(J,Y,X)}},{})}function rA($,Y,X){return nA($.keys,Y,X)}function xW($,Y,X){let Q=rA($,Y,X);return Z0(Q)}function tA($){let[Y,X]=[$.slice(0,1),$.slice(1)];return[Y.toLowerCase(),X].join("")}function sA($){let[Y,X]=[$.slice(0,1),$.slice(1)];return[Y.toUpperCase(),X].join("")}function aA($){return $.toUpperCase()}function eA($){return $.toLowerCase()}function $w($,Y,X){let Q=_6($.pattern);if(!i8(Q))return{...$,pattern:kW($.pattern,Y)};let G=[...g4(Q)].map((H)=>O0(H)),M=gW(G,Y),U=R0(M);return u9([U],X)}function kW($,Y){return typeof $==="string"?Y==="Uncapitalize"?tA($):Y==="Capitalize"?sA($):Y==="Uppercase"?aA($):Y==="Lowercase"?eA($):$:$.toString()}function gW($,Y){return $.map((X)=>s5(X,Y))}function s5($,Y,X={}){return w5($)?xW($,Y,X):O5($)?$w($,Y,X):L0($)?R0(gW($.anyOf,Y),X):A5($)?O0(kW($.const,Y),X):R($,X)}function fW($,Y={}){return s5($,"Capitalize",Y)}function vW($,Y={}){return s5($,"Lowercase",Y)}function yW($,Y={}){return s5($,"Uncapitalize",Y)}function hW($,Y={}){return s5($,"Uppercase",Y)}function Yw($,Y,X){let Q={};for(let W of globalThis.Object.getOwnPropertyNames($))Q[W]=L8($[W],Y,l0(X));return Q}function Xw($,Y,X){return Yw($.properties,Y,X)}function dW($,Y,X){let Q=Xw($,Y,X);return Z0(Q)}function Qw($,Y){return $.map((X)=>i$(X,Y))}function Ww($,Y){return $.map((X)=>i$(X,Y))}function Jw($,Y){let{[Y]:X,...Q}=$;return Q}function Gw($,Y){return Y.reduce((X,Q)=>Jw(X,Q),$)}function Mw($,Y){let X=e0($,[k0,"$id","required","properties"]),Q=Gw($.properties,Y);return P0(Q,X)}function Uw($){let Y=$.reduce((X,Q)=>y9(Q)?[...X,O0(Q)]:X,[]);return R0(Y)}function i$($,Y){return a0($)?k1(Qw($.allOf,Y)):L0($)?R0(Ww($.anyOf,Y)):q1($)?Mw($,Y):P0({})}function L8($,Y,X){let Q=U1(Y)?Uw(Y):Y,W=r0(Y)?r1(Y):Y,J=G1($),G=G1(Y);return i0($)?dW($,W,X):w5(Y)?cW($,Y,X):J&&G?c0("Omit",[$,Q],X):!J&&G?c0("Omit",[$,Q],X):J&&!G?c0("Omit",[$,Q],X):R({...i$($,W),...X})}function Hw($,Y,X){return{[Y]:L8($,[Y],l0(X))}}function Bw($,Y,X){return Y.reduce((Q,W)=>{return{...Q,...Hw($,W,X)}},{})}function qw($,Y,X){return Bw($,Y.keys,X)}function cW($,Y,X){let Q=qw($,Y,X);return Z0(Q)}function Nw($,Y,X){let Q={};for(let W of globalThis.Object.getOwnPropertyNames($))Q[W]=Z8($[W],Y,l0(X));return Q}function zw($,Y,X){return Nw($.properties,Y,X)}function mW($,Y,X){let Q=zw($,Y,X);return Z0(Q)}function Aw($,Y){return $.map((X)=>o$(X,Y))}function ww($,Y){return $.map((X)=>o$(X,Y))}function Ow($,Y){let X={};for(let Q of Y)if(Q in $)X[Q]=$[Q];return X}function Dw($,Y){let X=e0($,[k0,"$id","required","properties"]),Q=Ow($.properties,Y);return P0(Q,X)}function Lw($){let Y=$.reduce((X,Q)=>y9(Q)?[...X,O0(Q)]:X,[]);return R0(Y)}function o$($,Y){return a0($)?k1(Aw($.allOf,Y)):L0($)?R0(ww($.anyOf,Y)):q1($)?Dw($,Y):P0({})}function Z8($,Y,X){let Q=U1(Y)?Lw(Y):Y,W=r0(Y)?r1(Y):Y,J=G1($),G=G1(Y);return i0($)?mW($,W,X):w5(Y)?uW($,Y,X):J&&G?c0("Pick",[$,Q],X):!J&&G?c0("Pick",[$,Q],X):J&&!G?c0("Pick",[$,Q],X):R({...o$($,W),...X})}function Zw($,Y,X){return{[Y]:Z8($,[Y],l0(X))}}function jw($,Y,X){return Y.reduce((Q,W)=>{return{...Q,...Zw($,W,X)}},{})}function Kw($,Y,X){return jw($,Y.keys,X)}function uW($,Y,X){let Q=Kw($,Y,X);return Z0(Q)}function Fw($,Y){return c0("Partial",[c0($,Y)])}function Sw($){return c0("Partial",[I5($)])}function _w($){let Y={};for(let X of globalThis.Object.getOwnPropertyNames($))Y[X]=x1($[X]);return Y}function Rw($){let Y=e0($,[k0,"$id","required","properties"]),X=_w($.properties);return P0(X,Y)}function lW($){return $.map((Y)=>pW(Y))}function pW($){return l5($)?Fw($.target,$.parameters):G1($)?Sw($.$ref):a0($)?k1(lW($.allOf)):L0($)?R0(lW($.anyOf)):q1($)?Rw($):m8($)?$:h2($)?$:o5($)?$:A5($)?$:E4($)?$:n5($)?$:d2($)?$:b4($)?$:c2($)?$:P0({})}function k6($,Y){if(i0($))return iW($,Y);else return R({...pW($),...Y})}function Pw($,Y){let X={};for(let Q of globalThis.Object.getOwnPropertyNames($))X[Q]=k6($[Q],l0(Y));return X}function Cw($,Y){return Pw($.properties,Y)}function iW($,Y){let X=Cw($,Y);return Z0(X)}function Vw($,Y){return c0("Required",[c0($,Y)])}function Ew($){return c0("Required",[I5($)])}function bw($){let Y={};for(let X of globalThis.Object.getOwnPropertyNames($))Y[X]=e0($[X],[B1]);return Y}function Iw($){let Y=e0($,[k0,"$id","required","properties"]),X=bw($.properties);return P0(X,Y)}function oW($){return $.map((Y)=>nW(Y))}function nW($){return l5($)?Vw($.target,$.parameters):G1($)?Ew($.$ref):a0($)?k1(oW($.allOf)):L0($)?R0(oW($.anyOf)):q1($)?Iw($):m8($)?$:h2($)?$:o5($)?$:A5($)?$:E4($)?$:n5($)?$:d2($)?$:b4($)?$:c2($)?$:P0({})}function g6($,Y){if(i0($))return rW($,Y);else return R({...nW($),...Y})}function Tw($,Y){let X={};for(let Q of globalThis.Object.getOwnPropertyNames($))X[Q]=g6($[Q],Y);return X}function xw($,Y){return Tw($.properties,Y)}function rW($,Y){let X=xw($,Y);return Z0(X)}function kw($,Y){return Y.map((X)=>{return G1(X)?n$($,X.$ref):L5($,X)})}function n$($,Y){return Y in $?G1($[Y])?n$($,$[Y].$ref):L5($,$[Y]):W0()}function gw($){return V6($[0])}function fw($){return O8($[0],$[1])}function vw($){return E6($[0])}function yw($){return k6($[0])}function hw($){return L8($[0],$[1])}function dw($){return Z8($[0],$[1])}function cw($){return g6($[0])}function mw($,Y,X){let Q=kw($,X);return Y==="Awaited"?gw(Q):Y==="Index"?fw(Q):Y==="KeyOf"?vw(Q):Y==="Partial"?yw(Q):Y==="Omit"?hw(Q):Y==="Pick"?dw(Q):Y==="Required"?cw(Q):W0()}function uw($,Y){return j6(L5($,Y))}function lw($,Y){return K6(L5($,Y))}function pw($,Y,X){return F6(d4($,Y),L5($,X))}function iw($,Y,X){return L2(d4($,Y),L5($,X))}function ow($,Y){return k1(d4($,Y))}function nw($,Y){return C6(L5($,Y))}function rw($,Y){return P0(globalThis.Object.keys(Y).reduce((X,Q)=>{return{...X,[Q]:L5($,Y[Q])}},{}))}function tw($,Y){let[X,Q]=[L5($,W7(Y)),Q7(Y)],W=w6(Y);return W.patternProperties[Q]=X,W}function sw($,Y){return G1(Y)?{...n$($,Y.$ref),[k0]:Y[k0]}:Y}function aw($,Y){return E5(d4($,Y))}function ew($,Y){return R0(d4($,Y))}function d4($,Y){return Y.map((X)=>L5($,X))}function L5($,Y){return n1(Y)?R(L5($,e0(Y,[B1])),Y):D6(Y)?R(L5($,e0(Y,[m5])),Y):_0(Y)?R(sw($,Y),Y):u5(Y)?R(uw($,Y.items),Y):c8(Y)?R(lw($,Y.items),Y):l5(Y)?R(mw($,Y.target,Y.parameters)):p5(Y)?R(pw($,Y.parameters,Y.returns),Y):i5(Y)?R(iw($,Y.parameters,Y.returns),Y):a0(Y)?R(ow($,Y.allOf),Y):u8(Y)?R(nw($,Y.items),Y):q1(Y)?R(rw($,Y.properties),Y):p8(Y)?R(tw($,Y)):D5(Y)?R(aw($,Y.items||[]),Y):L0(Y)?R(ew($,Y.anyOf),Y):Y}function $O($,Y){return Y in $?L5($,$[Y]):W0()}function tW($){return globalThis.Object.getOwnPropertyNames($).reduce((Y,X)=>{return{...Y,[X]:$O($,X)}},{})}class sW{constructor($){let Y=tW($),X=this.WithIdentifiers(Y);this.$defs=X}Import($,Y){let X={...this.$defs,[$]:R(this.$defs[$],Y)};return R({[K]:"Import",$defs:X,$ref:$})}WithIdentifiers($){return globalThis.Object.getOwnPropertyNames($).reduce((Y,X)=>{return{...Y,[X]:{...$[X],$id:X}}},{})}}function aW($){return new sW($)}function eW($,Y){return R({[K]:"Not",not:$},Y)}function $J($,Y){return i5($)?E5($.parameters,Y):W0()}var YO=0;function YJ($,Y={}){if(H1(Y.$id))Y.$id=`T${YO++}`;let X=w6($({[K]:"This",$ref:`${Y.$id}`}));return X.$id=Y.$id,R({[C5]:"Recursive",...X},Y)}function XJ($,Y){let X=v0($)?new globalThis.RegExp($):$;return R({[K]:"RegExp",type:"RegExp",source:X.source,flags:X.flags},Y)}function XO($){return a0($)?$.allOf:L0($)?$.anyOf:D5($)?$.items??[]:[]}function QJ($){return XO($)}function WJ($,Y){return i5($)?R($.returns,Y):W0(Y)}class JJ{constructor($){this.schema=$}Decode($){return new GJ(this.schema,$)}}class GJ{constructor($,Y){this.schema=$,this.decode=Y}EncodeTransform($,Y){let W={Encode:(J)=>Y[k0].Encode($(J)),Decode:(J)=>this.decode(Y[k0].Decode(J))};return{...Y,[k0]:W}}EncodeSchema($,Y){let X={Decode:this.decode,Encode:$};return{...Y,[k0]:X}}Encode($){return _0(this.schema)?this.EncodeTransform($,this.schema):this.EncodeSchema($,this.schema)}}function MJ($){return new JJ($)}function J7($={}){return R({[K]:$[K]??"Unsafe"},$)}function UJ($){return R({[K]:"Void",type:"void"},$)}var r$={};k2(r$,{Void:()=>UJ,Uppercase:()=>hW,Unsafe:()=>J7,Unknown:()=>r5,Union:()=>R0,Undefined:()=>t9,Uncapitalize:()=>yW,Uint8Array:()=>s9,Tuple:()=>E5,Transform:()=>MJ,TemplateLiteral:()=>u9,Symbol:()=>r9,String:()=>m1,ReturnType:()=>WJ,Rest:()=>QJ,Required:()=>g6,RegExp:()=>XJ,Ref:()=>I5,Recursive:()=>YJ,Record:()=>X7,ReadonlyOptional:()=>Y7,Readonly:()=>t1,Promise:()=>p9,Pick:()=>Z8,Partial:()=>k6,Parameters:()=>$J,Optional:()=>x1,Omit:()=>L8,Object:()=>P0,Number:()=>V5,Null:()=>n9,Not:()=>eW,Never:()=>W0,Module:()=>aW,Mapped:()=>YW,Lowercase:()=>vW,Literal:()=>O0,KeyOf:()=>E6,Iterator:()=>C6,Intersect:()=>k1,Integer:()=>TW,Instantiate:()=>IW,InstanceType:()=>EW,Index:()=>O8,Function:()=>L2,Extract:()=>x6,Extends:()=>I6,Exclude:()=>T6,Enum:()=>BW,Date:()=>o9,ConstructorParameters:()=>HW,Constructor:()=>F6,Const:()=>UW,Composite:()=>MW,Capitalize:()=>fW,Boolean:()=>m9,BigInt:()=>P6,Awaited:()=>V6,AsyncIterator:()=>K6,Array:()=>j6,Argument:()=>hQ,Any:()=>w8});var i2=r$;function QO($){switch($.errorType){case _.ArrayContains:return"Expected array to contain at least one matching value";case _.ArrayMaxContains:return`Expected array to contain no more than ${$.schema.maxContains} matching values`;case _.ArrayMinContains:return`Expected array to contain at least ${$.schema.minContains} matching values`;case _.ArrayMaxItems:return`Expected array length to be less or equal to ${$.schema.maxItems}`;case _.ArrayMinItems:return`Expected array length to be greater or equal to ${$.schema.minItems}`;case _.ArrayUniqueItems:return"Expected array elements to be unique";case _.Array:return"Expected array";case _.AsyncIterator:return"Expected AsyncIterator";case _.BigIntExclusiveMaximum:return`Expected bigint to be less than ${$.schema.exclusiveMaximum}`;case _.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${$.schema.exclusiveMinimum}`;case _.BigIntMaximum:return`Expected bigint to be less or equal to ${$.schema.maximum}`;case _.BigIntMinimum:return`Expected bigint to be greater or equal to ${$.schema.minimum}`;case _.BigIntMultipleOf:return`Expected bigint to be a multiple of ${$.schema.multipleOf}`;case _.BigInt:return"Expected bigint";case _.Boolean:return"Expected boolean";case _.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${$.schema.exclusiveMinimumTimestamp}`;case _.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${$.schema.exclusiveMaximumTimestamp}`;case _.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${$.schema.minimumTimestamp}`;case _.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${$.schema.maximumTimestamp}`;case _.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${$.schema.multipleOfTimestamp}`;case _.Date:return"Expected Date";case _.Function:return"Expected function";case _.IntegerExclusiveMaximum:return`Expected integer to be less than ${$.schema.exclusiveMaximum}`;case _.IntegerExclusiveMinimum:return`Expected integer to be greater than ${$.schema.exclusiveMinimum}`;case _.IntegerMaximum:return`Expected integer to be less or equal to ${$.schema.maximum}`;case _.IntegerMinimum:return`Expected integer to be greater or equal to ${$.schema.minimum}`;case _.IntegerMultipleOf:return`Expected integer to be a multiple of ${$.schema.multipleOf}`;case _.Integer:return"Expected integer";case _.IntersectUnevaluatedProperties:return"Unexpected property";case _.Intersect:return"Expected all values to match";case _.Iterator:return"Expected Iterator";case _.Literal:return`Expected ${typeof $.schema.const==="string"?`'${$.schema.const}'`:$.schema.const}`;case _.Never:return"Never";case _.Not:return"Value should not match";case _.Null:return"Expected null";case _.NumberExclusiveMaximum:return`Expected number to be less than ${$.schema.exclusiveMaximum}`;case _.NumberExclusiveMinimum:return`Expected number to be greater than ${$.schema.exclusiveMinimum}`;case _.NumberMaximum:return`Expected number to be less or equal to ${$.schema.maximum}`;case _.NumberMinimum:return`Expected number to be greater or equal to ${$.schema.minimum}`;case _.NumberMultipleOf:return`Expected number to be a multiple of ${$.schema.multipleOf}`;case _.Number:return"Expected number";case _.Object:return"Expected object";case _.ObjectAdditionalProperties:return"Unexpected property";case _.ObjectMaxProperties:return`Expected object to have no more than ${$.schema.maxProperties} properties`;case _.ObjectMinProperties:return`Expected object to have at least ${$.schema.minProperties} properties`;case _.ObjectRequiredProperty:return"Expected required property";case _.Promise:return"Expected Promise";case _.RegExp:return"Expected string to match regular expression";case _.StringFormatUnknown:return`Unknown format '${$.schema.format}'`;case _.StringFormat:return`Expected string to match '${$.schema.format}' format`;case _.StringMaxLength:return`Expected string length less or equal to ${$.schema.maxLength}`;case _.StringMinLength:return`Expected string length greater or equal to ${$.schema.minLength}`;case _.StringPattern:return`Expected string to match '${$.schema.pattern}'`;case _.String:return"Expected string";case _.Symbol:return"Expected symbol";case _.TupleLength:return`Expected tuple to have ${$.schema.maxItems||0} elements`;case _.Tuple:return"Expected tuple";case _.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${$.schema.maxByteLength}`;case _.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${$.schema.minByteLength}`;case _.Uint8Array:return"Expected Uint8Array";case _.Undefined:return"Expected undefined";case _.Union:return"Expected union value";case _.Void:return"Expected void";case _.Kind:return`Expected kind '${$.schema[K]}'`;default:return"Unknown error type"}}var WO=QO;function HJ(){return WO}class BJ extends n{constructor($){super(`Unable to dereference schema with $id '${$.$ref}'`);this.schema=$}}function JO($,Y){let X=Y.find((Q)=>Q.$id===$.$ref);if(X===void 0)throw new BJ($);return j0(X,Y)}function j1($,Y){if(!D0($.$id)||Y.some((X)=>X.$id===$.$id))return Y;return Y.push($),Y}function j0($,Y){return $[K]==="This"||$[K]==="Ref"?JO($,Y):$}class qJ extends n{constructor($){super("Unable to hash value");this.value=$}}var Z5;(function($){$[$.Undefined=0]="Undefined",$[$.Null=1]="Null",$[$.Boolean=2]="Boolean",$[$.Number=3]="Number",$[$.String=4]="String",$[$.Object=5]="Object",$[$.Array=6]="Array",$[$.Date=7]="Date",$[$.Uint8Array=8]="Uint8Array",$[$.Symbol=9]="Symbol",$[$.BigInt=10]="BigInt"})(Z5||(Z5={}));var f6=BigInt("14695981039346656037"),[GO,MO]=[BigInt("1099511628211"),BigInt("18446744073709551616")],UO=Array.from({length:256}).map(($,Y)=>BigInt(Y)),NJ=new Float64Array(1),zJ=new DataView(NJ.buffer),AJ=new Uint8Array(NJ.buffer);function*HO($){let Y=$===0?1:Math.ceil(Math.floor(Math.log2($)+1)/8);for(let X=0;X<Y;X++)yield $>>8*(Y-1-X)&255}function BO($){f1(Z5.Array);for(let Y of $)v6(Y)}function qO($){f1(Z5.Boolean),f1($?1:0)}function NO($){f1(Z5.BigInt),zJ.setBigInt64(0,$);for(let Y of AJ)f1(Y)}function zO($){f1(Z5.Date),v6($.getTime())}function AO($){f1(Z5.Null)}function wO($){f1(Z5.Number),zJ.setFloat64(0,$);for(let Y of AJ)f1(Y)}function OO($){f1(Z5.Object);for(let Y of globalThis.Object.getOwnPropertyNames($).sort())v6(Y),v6($[Y])}function DO($){f1(Z5.String);for(let Y=0;Y<$.length;Y++)for(let X of HO($.charCodeAt(Y)))f1(X)}function LO($){f1(Z5.Symbol),v6($.description)}function ZO($){f1(Z5.Uint8Array);for(let Y=0;Y<$.length;Y++)f1($[Y])}function jO($){return f1(Z5.Undefined)}function v6($){if(a($))return BO($);if(w2($))return qO($);if(C1($))return NO($);if(c1($))return zO($);if(v2($))return AO($);if(i($))return wO($);if(J0($))return OO($);if(D0($))return DO($);if(y2($))return LO($);if(O6($))return ZO($);if(p0($))return jO($);throw new qJ($)}function f1($){f6=f6^UO[$],f6=f6*GO%MO}function j8($){return f6=BigInt("14695981039346656037"),v6($),f6}class wJ extends n{constructor($){super("Unknown type");this.schema=$}}function KO($){return $[K]==="Any"||$[K]==="Unknown"}function B0($){return $!==void 0}function FO($,Y,X){return!0}function SO($,Y,X){return!0}function _O($,Y,X){if(!a(X))return!1;if(B0($.minItems)&&!(X.length>=$.minItems))return!1;if(B0($.maxItems)&&!(X.length<=$.maxItems))return!1;if(!X.every((J)=>K1($.items,Y,J)))return!1;if($.uniqueItems===!0&&!function(){let J=new Set;for(let G of X){let M=j8(G);if(J.has(M))return!1;else J.add(M)}return!0}())return!1;if(!(B0($.contains)||i($.minContains)||i($.maxContains)))return!0;let Q=B0($.contains)?$.contains:W0(),W=X.reduce((J,G)=>K1(Q,Y,G)?J+1:J,0);if(W===0)return!1;if(i($.minContains)&&W<$.minContains)return!1;if(i($.maxContains)&&W>$.maxContains)return!1;return!0}function RO($,Y,X){return k9(X)}function PO($,Y,X){if(!C1(X))return!1;if(B0($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))return!1;if(B0($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))return!1;if(B0($.maximum)&&!(X<=$.maximum))return!1;if(B0($.minimum)&&!(X>=$.minimum))return!1;if(B0($.multipleOf)&&X%$.multipleOf!==BigInt(0))return!1;return!0}function CO($,Y,X){return w2(X)}function VO($,Y,X){return K1($.returns,Y,X.prototype)}function EO($,Y,X){if(!c1(X))return!1;if(B0($.exclusiveMaximumTimestamp)&&!(X.getTime()<$.exclusiveMaximumTimestamp))return!1;if(B0($.exclusiveMinimumTimestamp)&&!(X.getTime()>$.exclusiveMinimumTimestamp))return!1;if(B0($.maximumTimestamp)&&!(X.getTime()<=$.maximumTimestamp))return!1;if(B0($.minimumTimestamp)&&!(X.getTime()>=$.minimumTimestamp))return!1;if(B0($.multipleOfTimestamp)&&X.getTime()%$.multipleOfTimestamp!==0)return!1;return!0}function bO($,Y,X){return N8(X)}function IO($,Y,X){let Q=globalThis.Object.values($.$defs),W=$.$defs[$.$ref];return K1(W,[...Y,...Q],X)}function TO($,Y,X){if(!v9(X))return!1;if(B0($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))return!1;if(B0($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))return!1;if(B0($.maximum)&&!(X<=$.maximum))return!1;if(B0($.minimum)&&!(X>=$.minimum))return!1;if(B0($.multipleOf)&&X%$.multipleOf!==0)return!1;return!0}function xO($,Y,X){let Q=$.allOf.every((W)=>K1(W,Y,X));if($.unevaluatedProperties===!1){let W=new RegExp(l2($)),J=Object.getOwnPropertyNames(X).every((G)=>W.test(G));return Q&&J}else if(r0($.unevaluatedProperties)){let W=new RegExp(l2($)),J=Object.getOwnPropertyNames(X).every((G)=>W.test(G)||K1($.unevaluatedProperties,Y,X[G]));return Q&&J}else return Q}function kO($,Y,X){return g9(X)}function gO($,Y,X){return X===$.const}function fO($,Y,X){return!1}function vO($,Y,X){return!K1($.not,Y,X)}function yO($,Y,X){return v2(X)}function hO($,Y,X){if(!d0.IsNumberLike(X))return!1;if(B0($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))return!1;if(B0($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))return!1;if(B0($.minimum)&&!(X>=$.minimum))return!1;if(B0($.maximum)&&!(X<=$.maximum))return!1;if(B0($.multipleOf)&&X%$.multipleOf!==0)return!1;return!0}function dO($,Y,X){if(!d0.IsObjectLike(X))return!1;if(B0($.minProperties)&&!(Object.getOwnPropertyNames(X).length>=$.minProperties))return!1;if(B0($.maxProperties)&&!(Object.getOwnPropertyNames(X).length<=$.maxProperties))return!1;let Q=Object.getOwnPropertyNames($.properties);for(let W of Q){let J=$.properties[W];if($.required&&$.required.includes(W)){if(!K1(J,Y,X[W]))return!1;if((p2(J)||KO(J))&&!(W in X))return!1}else if(d0.IsExactOptionalProperty(X,W)&&!K1(J,Y,X[W]))return!1}if($.additionalProperties===!1){let W=Object.getOwnPropertyNames(X);if($.required&&$.required.length===Q.length&&W.length===Q.length)return!0;else return W.every((J)=>Q.includes(J))}else if(typeof $.additionalProperties==="object")return Object.getOwnPropertyNames(X).every((J)=>Q.includes(J)||K1($.additionalProperties,Y,X[J]));else return!0}function cO($,Y,X){return f9(X)}function mO($,Y,X){if(!d0.IsRecordLike(X))return!1;if(B0($.minProperties)&&!(Object.getOwnPropertyNames(X).length>=$.minProperties))return!1;if(B0($.maxProperties)&&!(Object.getOwnPropertyNames(X).length<=$.maxProperties))return!1;let[Q,W]=Object.entries($.patternProperties)[0],J=new RegExp(Q),G=Object.entries(X).every(([H,B])=>{return J.test(H)?K1(W,Y,B):!0}),M=typeof $.additionalProperties==="object"?Object.entries(X).every(([H,B])=>{return!J.test(H)?K1($.additionalProperties,Y,B):!0}):!0,U=$.additionalProperties===!1?Object.getOwnPropertyNames(X).every((H)=>{return J.test(H)}):!0;return G&&M&&U}function uO($,Y,X){return K1(j0($,Y),Y,X)}function lO($,Y,X){let Q=new RegExp($.source,$.flags);if(B0($.minLength)){if(!(X.length>=$.minLength))return!1}if(B0($.maxLength)){if(!(X.length<=$.maxLength))return!1}return Q.test(X)}function pO($,Y,X){if(!D0(X))return!1;if(B0($.minLength)){if(!(X.length>=$.minLength))return!1}if(B0($.maxLength)){if(!(X.length<=$.maxLength))return!1}if(B0($.pattern)){if(!new RegExp($.pattern).test(X))return!1}if(B0($.format)){if(!b0.Has($.format))return!1;return b0.Get($.format)(X)}return!0}function iO($,Y,X){return y2(X)}function oO($,Y,X){return D0(X)&&new RegExp($.pattern).test(X)}function nO($,Y,X){return K1(j0($,Y),Y,X)}function rO($,Y,X){if(!a(X))return!1;if($.items===void 0&&X.length!==0)return!1;if(X.length!==$.maxItems)return!1;if(!$.items)return!0;for(let Q=0;Q<$.items.length;Q++)if(!K1($.items[Q],Y,X[Q]))return!1;return!0}function tO($,Y,X){return p0(X)}function sO($,Y,X){return $.anyOf.some((Q)=>K1(Q,Y,X))}function aO($,Y,X){if(!O6(X))return!1;if(B0($.maxByteLength)&&!(X.length<=$.maxByteLength))return!1;if(B0($.minByteLength)&&!(X.length>=$.minByteLength))return!1;return!0}function eO($,Y,X){return!0}function $D($,Y,X){return d0.IsVoidLike(X)}function YD($,Y,X){if(!D1.Has($[K]))return!1;return D1.Get($[K])($,X)}function K1($,Y,X){let Q=B0($.$id)?j1($,Y):Y,W=$;switch(W[K]){case"Any":return FO(W,Q,X);case"Argument":return SO(W,Q,X);case"Array":return _O(W,Q,X);case"AsyncIterator":return RO(W,Q,X);case"BigInt":return PO(W,Q,X);case"Boolean":return CO(W,Q,X);case"Constructor":return VO(W,Q,X);case"Date":return EO(W,Q,X);case"Function":return bO(W,Q,X);case"Import":return IO(W,Q,X);case"Integer":return TO(W,Q,X);case"Intersect":return xO(W,Q,X);case"Iterator":return kO(W,Q,X);case"Literal":return gO(W,Q,X);case"Never":return fO(W,Q,X);case"Not":return vO(W,Q,X);case"Null":return yO(W,Q,X);case"Number":return hO(W,Q,X);case"Object":return dO(W,Q,X);case"Promise":return cO(W,Q,X);case"Record":return mO(W,Q,X);case"Ref":return uO(W,Q,X);case"RegExp":return lO(W,Q,X);case"String":return pO(W,Q,X);case"Symbol":return iO(W,Q,X);case"TemplateLiteral":return oO(W,Q,X);case"This":return nO(W,Q,X);case"Tuple":return rO(W,Q,X);case"Undefined":return tO(W,Q,X);case"Union":return sO(W,Q,X);case"Uint8Array":return aO(W,Q,X);case"Unknown":return eO(W,Q,X);case"Void":return $D(W,Q,X);default:if(!D1.Has(W[K]))throw new wJ(W);return YD(W,Q,X)}}function G0(...$){return $.length===3?K1($[0],$[1],$[2]):K1($[0],[],$[1])}var _;(function($){$[$.ArrayContains=0]="ArrayContains",$[$.ArrayMaxContains=1]="ArrayMaxContains",$[$.ArrayMaxItems=2]="ArrayMaxItems",$[$.ArrayMinContains=3]="ArrayMinContains",$[$.ArrayMinItems=4]="ArrayMinItems",$[$.ArrayUniqueItems=5]="ArrayUniqueItems",$[$.Array=6]="Array",$[$.AsyncIterator=7]="AsyncIterator",$[$.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",$[$.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",$[$.BigIntMaximum=10]="BigIntMaximum",$[$.BigIntMinimum=11]="BigIntMinimum",$[$.BigIntMultipleOf=12]="BigIntMultipleOf",$[$.BigInt=13]="BigInt",$[$.Boolean=14]="Boolean",$[$.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",$[$.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",$[$.DateMaximumTimestamp=17]="DateMaximumTimestamp",$[$.DateMinimumTimestamp=18]="DateMinimumTimestamp",$[$.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",$[$.Date=20]="Date",$[$.Function=21]="Function",$[$.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",$[$.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",$[$.IntegerMaximum=24]="IntegerMaximum",$[$.IntegerMinimum=25]="IntegerMinimum",$[$.IntegerMultipleOf=26]="IntegerMultipleOf",$[$.Integer=27]="Integer",$[$.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",$[$.Intersect=29]="Intersect",$[$.Iterator=30]="Iterator",$[$.Kind=31]="Kind",$[$.Literal=32]="Literal",$[$.Never=33]="Never",$[$.Not=34]="Not",$[$.Null=35]="Null",$[$.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",$[$.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",$[$.NumberMaximum=38]="NumberMaximum",$[$.NumberMinimum=39]="NumberMinimum",$[$.NumberMultipleOf=40]="NumberMultipleOf",$[$.Number=41]="Number",$[$.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",$[$.ObjectMaxProperties=43]="ObjectMaxProperties",$[$.ObjectMinProperties=44]="ObjectMinProperties",$[$.ObjectRequiredProperty=45]="ObjectRequiredProperty",$[$.Object=46]="Object",$[$.Promise=47]="Promise",$[$.RegExp=48]="RegExp",$[$.StringFormatUnknown=49]="StringFormatUnknown",$[$.StringFormat=50]="StringFormat",$[$.StringMaxLength=51]="StringMaxLength",$[$.StringMinLength=52]="StringMinLength",$[$.StringPattern=53]="StringPattern",$[$.String=54]="String",$[$.Symbol=55]="Symbol",$[$.TupleLength=56]="TupleLength",$[$.Tuple=57]="Tuple",$[$.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",$[$.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",$[$.Uint8Array=60]="Uint8Array",$[$.Undefined=61]="Undefined",$[$.Union=62]="Union",$[$.Void=63]="Void"})(_||(_={}));class OJ extends n{constructor($){super("Unknown type");this.schema=$}}function o2($){return $.replace(/~/g,"~0").replace(/\//g,"~1")}function q0($){return $!==void 0}class r8{constructor($){this.iterator=$}[Symbol.iterator](){return this.iterator}First(){let $=this.iterator.next();return $.done?void 0:$.value}}function m($,Y,X,Q,W=[]){return{type:$,schema:Y,path:X,value:Q,message:HJ()({errorType:$,path:X,schema:Y,value:Q,errors:W}),errors:W}}function*XD($,Y,X,Q){}function*QD($,Y,X,Q){}function*WD($,Y,X,Q){if(!a(Q))return yield m(_.Array,$,X,Q);if(q0($.minItems)&&!(Q.length>=$.minItems))yield m(_.ArrayMinItems,$,X,Q);if(q0($.maxItems)&&!(Q.length<=$.maxItems))yield m(_.ArrayMaxItems,$,X,Q);for(let G=0;G<Q.length;G++)yield*F1($.items,Y,`${X}/${G}`,Q[G]);if($.uniqueItems===!0&&!function(){let G=new Set;for(let M of Q){let U=j8(M);if(G.has(U))return!1;else G.add(U)}return!0}())yield m(_.ArrayUniqueItems,$,X,Q);if(!(q0($.contains)||q0($.minContains)||q0($.maxContains)))return;let W=q0($.contains)?$.contains:W0(),J=Q.reduce((G,M,U)=>F1(W,Y,`${X}${U}`,M).next().done===!0?G+1:G,0);if(J===0)yield m(_.ArrayContains,$,X,Q);if(i($.minContains)&&J<$.minContains)yield m(_.ArrayMinContains,$,X,Q);if(i($.maxContains)&&J>$.maxContains)yield m(_.ArrayMaxContains,$,X,Q)}function*JD($,Y,X,Q){if(!k9(Q))yield m(_.AsyncIterator,$,X,Q)}function*GD($,Y,X,Q){if(!C1(Q))return yield m(_.BigInt,$,X,Q);if(q0($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield m(_.BigIntExclusiveMaximum,$,X,Q);if(q0($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield m(_.BigIntExclusiveMinimum,$,X,Q);if(q0($.maximum)&&!(Q<=$.maximum))yield m(_.BigIntMaximum,$,X,Q);if(q0($.minimum)&&!(Q>=$.minimum))yield m(_.BigIntMinimum,$,X,Q);if(q0($.multipleOf)&&Q%$.multipleOf!==BigInt(0))yield m(_.BigIntMultipleOf,$,X,Q)}function*MD($,Y,X,Q){if(!w2(Q))yield m(_.Boolean,$,X,Q)}function*UD($,Y,X,Q){yield*F1($.returns,Y,X,Q.prototype)}function*HD($,Y,X,Q){if(!c1(Q))return yield m(_.Date,$,X,Q);if(q0($.exclusiveMaximumTimestamp)&&!(Q.getTime()<$.exclusiveMaximumTimestamp))yield m(_.DateExclusiveMaximumTimestamp,$,X,Q);if(q0($.exclusiveMinimumTimestamp)&&!(Q.getTime()>$.exclusiveMinimumTimestamp))yield m(_.DateExclusiveMinimumTimestamp,$,X,Q);if(q0($.maximumTimestamp)&&!(Q.getTime()<=$.maximumTimestamp))yield m(_.DateMaximumTimestamp,$,X,Q);if(q0($.minimumTimestamp)&&!(Q.getTime()>=$.minimumTimestamp))yield m(_.DateMinimumTimestamp,$,X,Q);if(q0($.multipleOfTimestamp)&&Q.getTime()%$.multipleOfTimestamp!==0)yield m(_.DateMultipleOfTimestamp,$,X,Q)}function*BD($,Y,X,Q){if(!N8(Q))yield m(_.Function,$,X,Q)}function*qD($,Y,X,Q){let W=globalThis.Object.values($.$defs),J=$.$defs[$.$ref];yield*F1(J,[...Y,...W],X,Q)}function*ND($,Y,X,Q){if(!v9(Q))return yield m(_.Integer,$,X,Q);if(q0($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield m(_.IntegerExclusiveMaximum,$,X,Q);if(q0($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield m(_.IntegerExclusiveMinimum,$,X,Q);if(q0($.maximum)&&!(Q<=$.maximum))yield m(_.IntegerMaximum,$,X,Q);if(q0($.minimum)&&!(Q>=$.minimum))yield m(_.IntegerMinimum,$,X,Q);if(q0($.multipleOf)&&Q%$.multipleOf!==0)yield m(_.IntegerMultipleOf,$,X,Q)}function*zD($,Y,X,Q){let W=!1;for(let J of $.allOf)for(let G of F1(J,Y,X,Q))W=!0,yield G;if(W)return yield m(_.Intersect,$,X,Q);if($.unevaluatedProperties===!1){let J=new RegExp(l2($));for(let G of Object.getOwnPropertyNames(Q))if(!J.test(G))yield m(_.IntersectUnevaluatedProperties,$,`${X}/${G}`,Q)}if(typeof $.unevaluatedProperties==="object"){let J=new RegExp(l2($));for(let G of Object.getOwnPropertyNames(Q))if(!J.test(G)){let M=F1($.unevaluatedProperties,Y,`${X}/${G}`,Q[G]).next();if(!M.done)yield M.value}}}function*AD($,Y,X,Q){if(!g9(Q))yield m(_.Iterator,$,X,Q)}function*wD($,Y,X,Q){if(Q!==$.const)yield m(_.Literal,$,X,Q)}function*OD($,Y,X,Q){yield m(_.Never,$,X,Q)}function*DD($,Y,X,Q){if(F1($.not,Y,X,Q).next().done===!0)yield m(_.Not,$,X,Q)}function*LD($,Y,X,Q){if(!v2(Q))yield m(_.Null,$,X,Q)}function*ZD($,Y,X,Q){if(!d0.IsNumberLike(Q))return yield m(_.Number,$,X,Q);if(q0($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield m(_.NumberExclusiveMaximum,$,X,Q);if(q0($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield m(_.NumberExclusiveMinimum,$,X,Q);if(q0($.maximum)&&!(Q<=$.maximum))yield m(_.NumberMaximum,$,X,Q);if(q0($.minimum)&&!(Q>=$.minimum))yield m(_.NumberMinimum,$,X,Q);if(q0($.multipleOf)&&Q%$.multipleOf!==0)yield m(_.NumberMultipleOf,$,X,Q)}function*jD($,Y,X,Q){if(!d0.IsObjectLike(Q))return yield m(_.Object,$,X,Q);if(q0($.minProperties)&&!(Object.getOwnPropertyNames(Q).length>=$.minProperties))yield m(_.ObjectMinProperties,$,X,Q);if(q0($.maxProperties)&&!(Object.getOwnPropertyNames(Q).length<=$.maxProperties))yield m(_.ObjectMaxProperties,$,X,Q);let W=Array.isArray($.required)?$.required:[],J=Object.getOwnPropertyNames($.properties),G=Object.getOwnPropertyNames(Q);for(let M of W){if(G.includes(M))continue;yield m(_.ObjectRequiredProperty,$.properties[M],`${X}/${o2(M)}`,void 0)}if($.additionalProperties===!1){for(let M of G)if(!J.includes(M))yield m(_.ObjectAdditionalProperties,$,`${X}/${o2(M)}`,Q[M])}if(typeof $.additionalProperties==="object")for(let M of G){if(J.includes(M))continue;yield*F1($.additionalProperties,Y,`${X}/${o2(M)}`,Q[M])}for(let M of J){let U=$.properties[M];if($.required&&$.required.includes(M)){if(yield*F1(U,Y,`${X}/${o2(M)}`,Q[M]),p2($)&&!(M in Q))yield m(_.ObjectRequiredProperty,U,`${X}/${o2(M)}`,void 0)}else if(d0.IsExactOptionalProperty(Q,M))yield*F1(U,Y,`${X}/${o2(M)}`,Q[M])}}function*KD($,Y,X,Q){if(!f9(Q))yield m(_.Promise,$,X,Q)}function*FD($,Y,X,Q){if(!d0.IsRecordLike(Q))return yield m(_.Object,$,X,Q);if(q0($.minProperties)&&!(Object.getOwnPropertyNames(Q).length>=$.minProperties))yield m(_.ObjectMinProperties,$,X,Q);if(q0($.maxProperties)&&!(Object.getOwnPropertyNames(Q).length<=$.maxProperties))yield m(_.ObjectMaxProperties,$,X,Q);let[W,J]=Object.entries($.patternProperties)[0],G=new RegExp(W);for(let[M,U]of Object.entries(Q))if(G.test(M))yield*F1(J,Y,`${X}/${o2(M)}`,U);if(typeof $.additionalProperties==="object"){for(let[M,U]of Object.entries(Q))if(!G.test(M))yield*F1($.additionalProperties,Y,`${X}/${o2(M)}`,U)}if($.additionalProperties===!1)for(let[M,U]of Object.entries(Q)){if(G.test(M))continue;return yield m(_.ObjectAdditionalProperties,$,`${X}/${o2(M)}`,U)}}function*SD($,Y,X,Q){yield*F1(j0($,Y),Y,X,Q)}function*_D($,Y,X,Q){if(!D0(Q))return yield m(_.String,$,X,Q);if(q0($.minLength)&&!(Q.length>=$.minLength))yield m(_.StringMinLength,$,X,Q);if(q0($.maxLength)&&!(Q.length<=$.maxLength))yield m(_.StringMaxLength,$,X,Q);if(!new RegExp($.source,$.flags).test(Q))return yield m(_.RegExp,$,X,Q)}function*RD($,Y,X,Q){if(!D0(Q))return yield m(_.String,$,X,Q);if(q0($.minLength)&&!(Q.length>=$.minLength))yield m(_.StringMinLength,$,X,Q);if(q0($.maxLength)&&!(Q.length<=$.maxLength))yield m(_.StringMaxLength,$,X,Q);if(D0($.pattern)){if(!new RegExp($.pattern).test(Q))yield m(_.StringPattern,$,X,Q)}if(D0($.format)){if(!b0.Has($.format))yield m(_.StringFormatUnknown,$,X,Q);else if(!b0.Get($.format)(Q))yield m(_.StringFormat,$,X,Q)}}function*PD($,Y,X,Q){if(!y2(Q))yield m(_.Symbol,$,X,Q)}function*CD($,Y,X,Q){if(!D0(Q))return yield m(_.String,$,X,Q);if(!new RegExp($.pattern).test(Q))yield m(_.StringPattern,$,X,Q)}function*VD($,Y,X,Q){yield*F1(j0($,Y),Y,X,Q)}function*ED($,Y,X,Q){if(!a(Q))return yield m(_.Tuple,$,X,Q);if($.items===void 0&&Q.length!==0)return yield m(_.TupleLength,$,X,Q);if(Q.length!==$.maxItems)return yield m(_.TupleLength,$,X,Q);if(!$.items)return;for(let W=0;W<$.items.length;W++)yield*F1($.items[W],Y,`${X}/${W}`,Q[W])}function*bD($,Y,X,Q){if(!p0(Q))yield m(_.Undefined,$,X,Q)}function*ID($,Y,X,Q){if(G0($,Y,Q))return;let W=$.anyOf.map((J)=>new r8(F1(J,Y,X,Q)));yield m(_.Union,$,X,Q,W)}function*TD($,Y,X,Q){if(!O6(Q))return yield m(_.Uint8Array,$,X,Q);if(q0($.maxByteLength)&&!(Q.length<=$.maxByteLength))yield m(_.Uint8ArrayMaxByteLength,$,X,Q);if(q0($.minByteLength)&&!(Q.length>=$.minByteLength))yield m(_.Uint8ArrayMinByteLength,$,X,Q)}function*xD($,Y,X,Q){}function*kD($,Y,X,Q){if(!d0.IsVoidLike(Q))yield m(_.Void,$,X,Q)}function*gD($,Y,X,Q){if(!D1.Get($[K])($,Q))yield m(_.Kind,$,X,Q)}function*F1($,Y,X,Q){let W=q0($.$id)?[...Y,$]:Y,J=$;switch(J[K]){case"Any":return yield*XD(J,W,X,Q);case"Argument":return yield*QD(J,W,X,Q);case"Array":return yield*WD(J,W,X,Q);case"AsyncIterator":return yield*JD(J,W,X,Q);case"BigInt":return yield*GD(J,W,X,Q);case"Boolean":return yield*MD(J,W,X,Q);case"Constructor":return yield*UD(J,W,X,Q);case"Date":return yield*HD(J,W,X,Q);case"Function":return yield*BD(J,W,X,Q);case"Import":return yield*qD(J,W,X,Q);case"Integer":return yield*ND(J,W,X,Q);case"Intersect":return yield*zD(J,W,X,Q);case"Iterator":return yield*AD(J,W,X,Q);case"Literal":return yield*wD(J,W,X,Q);case"Never":return yield*OD(J,W,X,Q);case"Not":return yield*DD(J,W,X,Q);case"Null":return yield*LD(J,W,X,Q);case"Number":return yield*ZD(J,W,X,Q);case"Object":return yield*jD(J,W,X,Q);case"Promise":return yield*KD(J,W,X,Q);case"Record":return yield*FD(J,W,X,Q);case"Ref":return yield*SD(J,W,X,Q);case"RegExp":return yield*_D(J,W,X,Q);case"String":return yield*RD(J,W,X,Q);case"Symbol":return yield*PD(J,W,X,Q);case"TemplateLiteral":return yield*CD(J,W,X,Q);case"This":return yield*VD(J,W,X,Q);case"Tuple":return yield*ED(J,W,X,Q);case"Undefined":return yield*bD(J,W,X,Q);case"Union":return yield*ID(J,W,X,Q);case"Uint8Array":return yield*TD(J,W,X,Q);case"Unknown":return yield*xD(J,W,X,Q);case"Void":return yield*kD(J,W,X,Q);default:if(!D1.Has(J[K]))throw new OJ($);return yield*gD(J,W,X,Q)}}function j2(...$){let Y=$.length===3?F1($[0],$[1],"",$[2]):F1($[0],[],"",$[1]);return new r8(Y)}var fD=function($,Y,X,Q,W){if(Q==="m")throw new TypeError("Private method is not writable");if(Q==="a"&&!W)throw new TypeError("Private accessor was defined without a setter");if(typeof Y==="function"?$!==Y||!W:!Y.has($))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Q==="a"?W.call($,X):W?W.value=X:Y.set($,X),X},LJ=function($,Y,X,Q){if(X==="a"&&!Q)throw new TypeError("Private accessor was defined without a getter");if(typeof Y==="function"?$!==Y||!Q:!Y.has($))throw new TypeError("Cannot read private member from an object whose class did not declare it");return X==="m"?Q:X==="a"?Q.call($):Q?Q.value:Y.get($)},t$,G7,ZJ;class jJ extends n{constructor($){let Y=$.First();super(Y===void 0?"Invalid Value":Y.message);t$.add(this),G7.set(this,void 0),fD(this,G7,$,"f"),this.error=Y}Errors(){return new r8(LJ(this,t$,"m",ZJ).call(this))}}G7=new WeakMap,t$=new WeakSet,ZJ=function*$(){if(this.error)yield this.error;yield*LJ(this,G7,"f")};function DJ($,Y,X){if(G0($,Y,X))return;throw new jJ(j2($,Y,X))}function M7(...$){return $.length===3?DJ($[0],$[1],$[2]):DJ($[0],[],$[1])}function vD($){let Y={};for(let X of Object.getOwnPropertyNames($))Y[X]=K0($[X]);for(let X of Object.getOwnPropertySymbols($))Y[X]=K0($[X]);return Y}function yD($){return $.map((Y)=>K0(Y))}function hD($){return $.slice()}function dD($){return new Map(K0([...$.entries()]))}function cD($){return new Set(K0([...$.entries()]))}function mD($){return new Date($.toISOString())}function uD($){return $}function K0($){if(a($))return yD($);if(c1($))return mD($);if(P5($))return hD($);if(cX($))return dD($);if(mX($))return cD($);if(J0($))return vD($);if(z5($))return uD($);throw new Error("ValueClone: Unable to clone value")}class k5 extends n{constructor($,Y){super(Y);this.schema=$}}function F0($){return N8($)?$():K0($)}function lD($,Y){if(s($,"default"))return F0($.default);else return{}}function pD($,Y){return{}}function iD($,Y){if($.uniqueItems===!0&&!s($,"default"))throw new k5($,"Array with the uniqueItems constraint requires a default value");else if("contains"in $&&!s($,"default"))throw new k5($,"Array with the contains constraint requires a default value");else if("default"in $)return F0($.default);else if($.minItems!==void 0)return Array.from({length:$.minItems}).map((X)=>{return e1($.items,Y)});else return[]}function oD($,Y){if(s($,"default"))return F0($.default);else return async function*(){}()}function nD($,Y){if(s($,"default"))return F0($.default);else return BigInt(0)}function rD($,Y){if(s($,"default"))return F0($.default);else return!1}function tD($,Y){if(s($,"default"))return F0($.default);else{let X=e1($.returns,Y);if(typeof X==="object"&&!Array.isArray(X))return class{constructor(){for(let[Q,W]of Object.entries(X)){let J=this;J[Q]=W}}};else return class{}}}function sD($,Y){if(s($,"default"))return F0($.default);else if($.minimumTimestamp!==void 0)return new Date($.minimumTimestamp);else return new Date}function aD($,Y){if(s($,"default"))return F0($.default);else return()=>e1($.returns,Y)}function eD($,Y){let X=globalThis.Object.values($.$defs),Q=$.$defs[$.$ref];return e1(Q,[...Y,...X])}function $L($,Y){if(s($,"default"))return F0($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function YL($,Y){if(s($,"default"))return F0($.default);else{let X=$.allOf.reduce((Q,W)=>{let J=e1(W,Y);return typeof J==="object"?{...Q,...J}:J},{});if(!G0($,Y,X))throw new k5($,"Intersect produced invalid value. Consider using a default value.");return X}}function XL($,Y){if(s($,"default"))return F0($.default);else return function*(){}()}function QL($,Y){if(s($,"default"))return F0($.default);else return $.const}function WL($,Y){if(s($,"default"))return F0($.default);else throw new k5($,"Never types cannot be created. Consider using a default value.")}function JL($,Y){if(s($,"default"))return F0($.default);else throw new k5($,"Not types must have a default value")}function GL($,Y){if(s($,"default"))return F0($.default);else return null}function ML($,Y){if(s($,"default"))return F0($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function UL($,Y){if(s($,"default"))return F0($.default);else{let X=new Set($.required),Q={};for(let[W,J]of Object.entries($.properties)){if(!X.has(W))continue;Q[W]=e1(J,Y)}return Q}}function HL($,Y){if(s($,"default"))return F0($.default);else return Promise.resolve(e1($.item,Y))}function BL($,Y){let[X,Q]=Object.entries($.patternProperties)[0];if(s($,"default"))return F0($.default);else if(!(X===D2||X===O2)){let W=X.slice(1,X.length-1).split("|"),J={};for(let G of W)J[G]=e1(Q,Y);return J}else return{}}function qL($,Y){if(s($,"default"))return F0($.default);else return e1(j0($,Y),Y)}function NL($,Y){if(s($,"default"))return F0($.default);else throw new k5($,"RegExp types cannot be created. Consider using a default value.")}function zL($,Y){if($.pattern!==void 0)if(!s($,"default"))throw new k5($,"String types with patterns must specify a default value");else return F0($.default);else if($.format!==void 0)if(!s($,"default"))throw new k5($,"String types with formats must specify a default value");else return F0($.default);else if(s($,"default"))return F0($.default);else if($.minLength!==void 0)return Array.from({length:$.minLength}).map(()=>" ").join("");else return""}function AL($,Y){if(s($,"default"))return F0($.default);else if("value"in $)return Symbol.for($.value);else return Symbol()}function wL($,Y){if(s($,"default"))return F0($.default);if(!c9($))throw new k5($,"Can only create template literals that produce a finite variants. Consider using a default value.");return R6($)[0]}function OL($,Y){if(KJ++>_L)throw new k5($,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");if(s($,"default"))return F0($.default);else return e1(j0($,Y),Y)}function DL($,Y){if(s($,"default"))return F0($.default);if($.items===void 0)return[];else return Array.from({length:$.minItems}).map((X,Q)=>e1($.items[Q],Y))}function LL($,Y){if(s($,"default"))return F0($.default);else return}function ZL($,Y){if(s($,"default"))return F0($.default);else if($.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");else return e1($.anyOf[0],Y)}function jL($,Y){if(s($,"default"))return F0($.default);else if($.minByteLength!==void 0)return new Uint8Array($.minByteLength);else return new Uint8Array(0)}function KL($,Y){if(s($,"default"))return F0($.default);else return{}}function FL($,Y){if(s($,"default"))return F0($.default);else return}function SL($,Y){if(s($,"default"))return F0($.default);else throw new Error("User defined types must specify a default value")}function e1($,Y){let X=j1($,Y),Q=$;switch(Q[K]){case"Any":return lD(Q,X);case"Argument":return pD(Q,X);case"Array":return iD(Q,X);case"AsyncIterator":return oD(Q,X);case"BigInt":return nD(Q,X);case"Boolean":return rD(Q,X);case"Constructor":return tD(Q,X);case"Date":return sD(Q,X);case"Function":return aD(Q,X);case"Import":return eD(Q,X);case"Integer":return $L(Q,X);case"Intersect":return YL(Q,X);case"Iterator":return XL(Q,X);case"Literal":return QL(Q,X);case"Never":return WL(Q,X);case"Not":return JL(Q,X);case"Null":return GL(Q,X);case"Number":return ML(Q,X);case"Object":return UL(Q,X);case"Promise":return HL(Q,X);case"Record":return BL(Q,X);case"Ref":return qL(Q,X);case"RegExp":return NL(Q,X);case"String":return zL(Q,X);case"Symbol":return AL(Q,X);case"TemplateLiteral":return wL(Q,X);case"This":return OL(Q,X);case"Tuple":return DL(Q,X);case"Undefined":return LL(Q,X);case"Union":return ZL(Q,X);case"Uint8Array":return jL(Q,X);case"Unknown":return KL(Q,X);case"Void":return FL(Q,X);default:if(!D1.Has(Q[K]))throw new k5(Q,"Unknown type");return SL(Q,X)}}var _L=512,KJ=0;function g5(...$){return KJ=0,$.length===2?e1($[0],$[1]):e1($[0],[])}class s$ extends n{constructor($,Y){super(Y);this.schema=$}}function RL($,Y,X){if($[K]==="Object"&&typeof X==="object"&&!v2(X)){let Q=$,W=Object.getOwnPropertyNames(X),J=Object.entries(Q.properties),[G,M]=[1/J.length,J.length];return J.reduce((U,[H,B])=>{let A=B[K]==="Literal"&&B.const===X[H]?M:0,O=G0(B,Y,X[H])?G:0,w=W.includes(H)?G:0;return U+(A+O+w)},0)}else return G0($,Y,X)?1:0}function PL($,Y,X){let Q=$.anyOf.map((G)=>j0(G,Y)),[W,J]=[Q[0],0];for(let G of Q){let M=RL(G,Y,X);if(M>J)W=G,J=M}return W}function CL($,Y,X){if("default"in $)return typeof X==="function"?$.default:K0($.default);else{let Q=PL($,Y,X);return c4(Q,Y,X)}}function VL($,Y,X){return G0($,Y,X)?K0(X):g5($,Y)}function EL($,Y,X){return G0($,Y,X)?X:g5($,Y)}function bL($,Y,X){if(G0($,Y,X))return K0(X);let Q=a(X)?K0(X):g5($,Y),W=i($.minItems)&&Q.length<$.minItems?[...Q,...Array.from({length:$.minItems-Q.length},()=>null)]:Q,G=(i($.maxItems)&&W.length>$.maxItems?W.slice(0,$.maxItems):W).map((U)=>a5($.items,Y,U));if($.uniqueItems!==!0)return G;let M=[...new Set(G)];if(!G0($,Y,M))throw new s$($,"Array cast produced invalid data due to uniqueItems constraint");return M}function IL($,Y,X){if(G0($,Y,X))return g5($,Y);let Q=new Set($.returns.required||[]),W=function(){};for(let[J,G]of Object.entries($.returns.properties)){if(!Q.has(J)&&X.prototype[J]===void 0)continue;W.prototype[J]=a5(G,Y,X.prototype[J])}return W}function TL($,Y,X){let Q=globalThis.Object.values($.$defs),W=$.$defs[$.$ref];return a5(W,[...Y,...Q],X)}function xL($,Y,X){let Q=g5($,Y),W=J0(Q)&&J0(X)?{...Q,...X}:X;return G0($,Y,W)?W:g5($,Y)}function kL($,Y,X){throw new s$($,"Never types cannot be cast")}function gL($,Y,X){if(G0($,Y,X))return X;if(X===null||typeof X!=="object")return g5($,Y);let Q=new Set($.required||[]),W={};for(let[J,G]of Object.entries($.properties)){if(!Q.has(J)&&X[J]===void 0)continue;W[J]=a5(G,Y,X[J])}if(typeof $.additionalProperties==="object"){let J=Object.getOwnPropertyNames($.properties);for(let G of Object.getOwnPropertyNames(X)){if(J.includes(G))continue;W[G]=a5($.additionalProperties,Y,X[G])}}return W}function fL($,Y,X){if(G0($,Y,X))return K0(X);if(X===null||typeof X!=="object"||Array.isArray(X)||X instanceof Date)return g5($,Y);let Q=Object.getOwnPropertyNames($.patternProperties)[0],W=$.patternProperties[Q],J={};for(let[G,M]of Object.entries(X))J[G]=a5(W,Y,M);return J}function vL($,Y,X){return a5(j0($,Y),Y,X)}function yL($,Y,X){return a5(j0($,Y),Y,X)}function hL($,Y,X){if(G0($,Y,X))return K0(X);if(!a(X))return g5($,Y);if($.items===void 0)return[];return $.items.map((Q,W)=>a5(Q,Y,X[W]))}function dL($,Y,X){return G0($,Y,X)?K0(X):CL($,Y,X)}function a5($,Y,X){let Q=D0($.$id)?j1($,Y):Y,W=$;switch($[K]){case"Array":return bL(W,Q,X);case"Constructor":return IL(W,Q,X);case"Import":return TL(W,Q,X);case"Intersect":return xL(W,Q,X);case"Never":return kL(W,Q,X);case"Object":return gL(W,Q,X);case"Record":return fL(W,Q,X);case"Ref":return vL(W,Q,X);case"This":return yL(W,Q,X);case"Tuple":return hL(W,Q,X);case"Union":return dL(W,Q,X);case"Date":case"Symbol":case"Uint8Array":return VL($,Y,X);default:return EL(W,Q,X)}}function c4(...$){return $.length===3?a5($[0],$[1],$[2]):a5($[0],[],$[1])}function cL($){return A8($)&&$[K]!=="Unsafe"}function mL($,Y,X){if(!a(X))return X;return X.map((Q)=>$5($.items,Y,Q))}function uL($,Y,X){let Q=globalThis.Object.values($.$defs),W=$.$defs[$.$ref];return $5(W,[...Y,...Q],X)}function lL($,Y,X){let Q=$.unevaluatedProperties,J=$.allOf.map((M)=>$5(M,Y,K0(X))).reduce((M,U)=>J0(U)?{...M,...U}:U,{});if(!J0(X)||!J0(J)||!A8(Q))return J;let G=s1($);for(let M of Object.getOwnPropertyNames(X)){if(G.includes(M))continue;if(G0(Q,Y,X[M]))J[M]=$5(Q,Y,X[M])}return J}function pL($,Y,X){if(!J0(X)||a(X))return X;let Q=$.additionalProperties;for(let W of Object.getOwnPropertyNames(X)){if(s($.properties,W)){X[W]=$5($.properties[W],Y,X[W]);continue}if(A8(Q)&&G0(Q,Y,X[W])){X[W]=$5(Q,Y,X[W]);continue}delete X[W]}return X}function iL($,Y,X){if(!J0(X))return X;let Q=$.additionalProperties,W=Object.getOwnPropertyNames(X),[J,G]=Object.entries($.patternProperties)[0],M=new RegExp(J);for(let U of W){if(M.test(U)){X[U]=$5(G,Y,X[U]);continue}if(A8(Q)&&G0(Q,Y,X[U])){X[U]=$5(Q,Y,X[U]);continue}delete X[U]}return X}function oL($,Y,X){return $5(j0($,Y),Y,X)}function nL($,Y,X){return $5(j0($,Y),Y,X)}function rL($,Y,X){if(!a(X))return X;if(p0($.items))return[];let Q=Math.min(X.length,$.items.length);for(let W=0;W<Q;W++)X[W]=$5($.items[W],Y,X[W]);return X.length>Q?X.slice(0,Q):X}function tL($,Y,X){for(let Q of $.anyOf)if(cL(Q)&&G0(Q,Y,X))return $5(Q,Y,X);return X}function $5($,Y,X){let Q=D0($.$id)?j1($,Y):Y,W=$;switch(W[K]){case"Array":return mL(W,Q,X);case"Import":return uL(W,Q,X);case"Intersect":return lL(W,Q,X);case"Object":return pL(W,Q,X);case"Record":return iL(W,Q,X);case"Ref":return oL(W,Q,X);case"This":return nL(W,Q,X);case"Tuple":return rL(W,Q,X);case"Union":return tL(W,Q,X);default:return X}}function U7(...$){return $.length===3?$5($[0],$[1],$[2]):$5($[0],[],$[1])}function H7($){return D0($)&&!isNaN($)&&!isNaN(parseFloat($))}function sL($){return C1($)||w2($)||i($)}function m4($){return $===!0||i($)&&$===1||C1($)&&$===BigInt("1")||D0($)&&($.toLowerCase()==="true"||$==="1")}function u4($){return $===!1||i($)&&($===0||Object.is($,-0))||C1($)&&$===BigInt("0")||D0($)&&($.toLowerCase()==="false"||$==="0"||$==="-0")}function aL($){return D0($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function eL($){return D0($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function $Z($){return D0($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function YZ($){return D0($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function XZ($){return D0($)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test($)}function QZ($,Y){let X=SJ($);return X===Y?X:$}function WZ($,Y){let X=_J($);return X===Y?X:$}function JZ($,Y){let X=FJ($);return X===Y?X:$}function GZ($,Y){return D0($.const)?QZ(Y,$.const):i($.const)?WZ(Y,$.const):w2($.const)?JZ(Y,$.const):Y}function FJ($){return m4($)?!0:u4($)?!1:$}function MZ($){let Y=(X)=>X.split(".")[0];return H7($)?BigInt(Y($)):i($)?BigInt(Math.trunc($)):u4($)?BigInt(0):m4($)?BigInt(1):$}function SJ($){return y2($)&&$.description!==void 0?$.description.toString():sL($)?$.toString():$}function _J($){return H7($)?parseFloat($):m4($)?1:u4($)?0:$}function UZ($){return H7($)?parseInt($):i($)?Math.trunc($):m4($)?1:u4($)?0:$}function HZ($){return D0($)&&$.toLowerCase()==="null"?null:$}function BZ($){return D0($)&&$==="undefined"?void 0:$}function qZ($){return c1($)?$:i($)?new Date($):m4($)?new Date(1):u4($)?new Date(0):H7($)?new Date(parseInt($)):eL($)?new Date(`1970-01-01T${$}.000Z`):aL($)?new Date(`1970-01-01T${$}`):YZ($)?new Date(`${$}.000Z`):$Z($)?new Date($):XZ($)?new Date(`${$}T00:00:00.000Z`):$}function NZ($){return $}function zZ($,Y,X){return(a(X)?X:[X]).map((W)=>e5($.items,Y,W))}function AZ($,Y,X){return MZ(X)}function wZ($,Y,X){return FJ(X)}function OZ($,Y,X){return qZ(X)}function DZ($,Y,X){let Q=globalThis.Object.values($.$defs),W=$.$defs[$.$ref];return e5(W,[...Y,...Q],X)}function LZ($,Y,X){return UZ(X)}function ZZ($,Y,X){return $.allOf.reduce((Q,W)=>e5(W,Y,Q),X)}function jZ($,Y,X){return GZ($,X)}function KZ($,Y,X){return HZ(X)}function FZ($,Y,X){return _J(X)}function SZ($,Y,X){if(!J0(X))return X;for(let Q of Object.getOwnPropertyNames($.properties)){if(!s(X,Q))continue;X[Q]=e5($.properties[Q],Y,X[Q])}return X}function _Z($,Y,X){if(!J0(X))return X;let W=Object.getOwnPropertyNames($.patternProperties)[0],J=$.patternProperties[W];for(let[G,M]of Object.entries(X))X[G]=e5(J,Y,M);return X}function RZ($,Y,X){return e5(j0($,Y),Y,X)}function PZ($,Y,X){return SJ(X)}function CZ($,Y,X){return D0(X)||i(X)?Symbol(X):X}function VZ($,Y,X){return e5(j0($,Y),Y,X)}function EZ($,Y,X){if(!(a(X)&&!p0($.items)))return X;return X.map((W,J)=>{return J<$.items.length?e5($.items[J],Y,W):W})}function bZ($,Y,X){return BZ(X)}function IZ($,Y,X){for(let Q of $.anyOf){let W=e5(Q,Y,K0(X));if(!G0(Q,Y,W))continue;return W}return X}function e5($,Y,X){let Q=j1($,Y),W=$;switch($[K]){case"Array":return zZ(W,Q,X);case"BigInt":return AZ(W,Q,X);case"Boolean":return wZ(W,Q,X);case"Date":return OZ(W,Q,X);case"Import":return DZ(W,Q,X);case"Integer":return LZ(W,Q,X);case"Intersect":return ZZ(W,Q,X);case"Literal":return jZ(W,Q,X);case"Null":return KZ(W,Q,X);case"Number":return FZ(W,Q,X);case"Object":return SZ(W,Q,X);case"Record":return _Z(W,Q,X);case"Ref":return RZ(W,Q,X);case"String":return PZ(W,Q,X);case"Symbol":return CZ(W,Q,X);case"This":return VZ(W,Q,X);case"Tuple":return EZ(W,Q,X);case"Undefined":return bZ(W,Q,X);case"Union":return IZ(W,Q,X);default:return NZ(X)}}function B7(...$){return $.length===3?e5($[0],$[1],$[2]):e5($[0],[],$[1])}class l4 extends n{constructor($,Y,X){super("Unable to decode value as it does not match the expected schema");this.schema=$,this.value=Y,this.error=X}}class q7 extends n{constructor($,Y,X,Q){super(Q instanceof Error?Q.message:"Unknown error");this.schema=$,this.path=Y,this.value=X,this.error=Q}}function t0($,Y,X){try{return _0($)?$[k0].Decode(X):X}catch(Q){throw new q7($,Y,X,Q)}}function TZ($,Y,X,Q){return a(Q)?t0($,X,Q.map((W,J)=>$2($.items,Y,`${X}/${J}`,W))):t0($,X,Q)}function xZ($,Y,X,Q){if(!J0(Q)||z5(Q))return t0($,X,Q);let W=i9($),J=W.map((B)=>B[0]),G={...Q};for(let[B,A]of W)if(B in G)G[B]=$2(A,Y,`${X}/${B}`,G[B]);if(!_0($.unevaluatedProperties))return t0($,X,G);let M=Object.getOwnPropertyNames(G),U=$.unevaluatedProperties,H={...G};for(let B of M)if(!J.includes(B))H[B]=t0(U,`${X}/${B}`,H[B]);return t0($,X,H)}function kZ($,Y,X,Q){let W=globalThis.Object.values($.$defs),J=$.$defs[$.$ref],G=$2(J,[...Y,...W],X,Q);return t0($,X,G)}function gZ($,Y,X,Q){return t0($,X,$2($.not,Y,X,Q))}function fZ($,Y,X,Q){if(!J0(Q))return t0($,X,Q);let W=s1($),J={...Q};for(let H of W){if(!s(J,H))continue;if(p0(J[H])&&(!c2($.properties[H])||d0.IsExactOptionalProperty(J,H)))continue;J[H]=$2($.properties[H],Y,`${X}/${H}`,J[H])}if(!r0($.additionalProperties))return t0($,X,J);let G=Object.getOwnPropertyNames(J),M=$.additionalProperties,U={...J};for(let H of G)if(!W.includes(H))U[H]=t0(M,`${X}/${H}`,U[H]);return t0($,X,U)}function vZ($,Y,X,Q){if(!J0(Q))return t0($,X,Q);let W=Object.getOwnPropertyNames($.patternProperties)[0],J=new RegExp(W),G={...Q};for(let B of Object.getOwnPropertyNames(Q))if(J.test(B))G[B]=$2($.patternProperties[W],Y,`${X}/${B}`,G[B]);if(!r0($.additionalProperties))return t0($,X,G);let M=Object.getOwnPropertyNames(G),U=$.additionalProperties,H={...G};for(let B of M)if(!J.test(B))H[B]=t0(U,`${X}/${B}`,H[B]);return t0($,X,H)}function yZ($,Y,X,Q){let W=j0($,Y);return t0($,X,$2(W,Y,X,Q))}function hZ($,Y,X,Q){let W=j0($,Y);return t0($,X,$2(W,Y,X,Q))}function dZ($,Y,X,Q){return a(Q)&&a($.items)?t0($,X,$.items.map((W,J)=>$2(W,Y,`${X}/${J}`,Q[J]))):t0($,X,Q)}function cZ($,Y,X,Q){for(let W of $.anyOf){if(!G0(W,Y,Q))continue;let J=$2(W,Y,X,Q);return t0($,X,J)}return t0($,X,Q)}function $2($,Y,X,Q){let W=j1($,Y),J=$;switch($[K]){case"Array":return TZ(J,W,X,Q);case"Import":return kZ(J,W,X,Q);case"Intersect":return xZ(J,W,X,Q);case"Not":return gZ(J,W,X,Q);case"Object":return fZ(J,W,X,Q);case"Record":return vZ(J,W,X,Q);case"Ref":return yZ(J,W,X,Q);case"Symbol":return t0(J,X,Q);case"This":return hZ(J,W,X,Q);case"Tuple":return dZ(J,W,X,Q);case"Union":return cZ(J,W,X,Q);default:return t0(J,X,Q)}}function y6($,Y,X){return $2($,Y,"",X)}class p4 extends n{constructor($,Y,X){super("The encoded value does not match the expected schema");this.schema=$,this.value=Y,this.error=X}}class RJ extends n{constructor($,Y,X,Q){super(`${Q instanceof Error?Q.message:"Unknown error"}`);this.schema=$,this.path=Y,this.value=X,this.error=Q}}function V1($,Y,X){try{return _0($)?$[k0].Encode(X):X}catch(Q){throw new RJ($,Y,X,Q)}}function mZ($,Y,X,Q){let W=V1($,X,Q);return a(W)?W.map((J,G)=>Y2($.items,Y,`${X}/${G}`,J)):W}function uZ($,Y,X,Q){let W=globalThis.Object.values($.$defs),J=$.$defs[$.$ref],G=V1($,X,Q);return Y2(J,[...Y,...W],X,G)}function lZ($,Y,X,Q){let W=V1($,X,Q);if(!J0(Q)||z5(Q))return W;let J=i9($),G=J.map((A)=>A[0]),M={...W};for(let[A,O]of J)if(A in M)M[A]=Y2(O,Y,`${X}/${A}`,M[A]);if(!_0($.unevaluatedProperties))return M;let U=Object.getOwnPropertyNames(M),H=$.unevaluatedProperties,B={...M};for(let A of U)if(!G.includes(A))B[A]=V1(H,`${X}/${A}`,B[A]);return B}function pZ($,Y,X,Q){return V1($.not,X,V1($,X,Q))}function iZ($,Y,X,Q){let W=V1($,X,Q);if(!J0(W))return W;let J=s1($),G={...W};for(let B of J){if(!s(G,B))continue;if(p0(G[B])&&(!c2($.properties[B])||d0.IsExactOptionalProperty(G,B)))continue;G[B]=Y2($.properties[B],Y,`${X}/${B}`,G[B])}if(!r0($.additionalProperties))return G;let M=Object.getOwnPropertyNames(G),U=$.additionalProperties,H={...G};for(let B of M)if(!J.includes(B))H[B]=V1(U,`${X}/${B}`,H[B]);return H}function oZ($,Y,X,Q){let W=V1($,X,Q);if(!J0(Q))return W;let J=Object.getOwnPropertyNames($.patternProperties)[0],G=new RegExp(J),M={...W};for(let A of Object.getOwnPropertyNames(Q))if(G.test(A))M[A]=Y2($.patternProperties[J],Y,`${X}/${A}`,M[A]);if(!r0($.additionalProperties))return M;let U=Object.getOwnPropertyNames(M),H=$.additionalProperties,B={...M};for(let A of U)if(!G.test(A))B[A]=V1(H,`${X}/${A}`,B[A]);return B}function nZ($,Y,X,Q){let W=j0($,Y),J=Y2(W,Y,X,Q);return V1($,X,J)}function rZ($,Y,X,Q){let W=j0($,Y),J=Y2(W,Y,X,Q);return V1($,X,J)}function tZ($,Y,X,Q){let W=V1($,X,Q);return a($.items)?$.items.map((J,G)=>Y2(J,Y,`${X}/${G}`,W[G])):[]}function sZ($,Y,X,Q){for(let W of $.anyOf){if(!G0(W,Y,Q))continue;let J=Y2(W,Y,X,Q);return V1($,X,J)}for(let W of $.anyOf){let J=Y2(W,Y,X,Q);if(!G0($,Y,J))continue;return V1($,X,J)}return V1($,X,Q)}function Y2($,Y,X,Q){let W=j1($,Y),J=$;switch($[K]){case"Array":return mZ(J,W,X,Q);case"Import":return uZ(J,W,X,Q);case"Intersect":return lZ(J,W,X,Q);case"Not":return pZ(J,W,X,Q);case"Object":return iZ(J,W,X,Q);case"Record":return oZ(J,W,X,Q);case"Ref":return nZ(J,W,X,Q);case"This":return rZ(J,W,X,Q);case"Tuple":return tZ(J,W,X,Q);case"Union":return sZ(J,W,X,Q);default:return V1(J,X,Q)}}function h6($,Y,X){return Y2($,Y,"",X)}function aZ($,Y){return _0($)||L1($.items,Y)}function eZ($,Y){return _0($)||L1($.items,Y)}function $j($,Y){return _0($)||L1($.returns,Y)||$.parameters.some((X)=>L1(X,Y))}function Yj($,Y){return _0($)||L1($.returns,Y)||$.parameters.some((X)=>L1(X,Y))}function Xj($,Y){return _0($)||_0($.unevaluatedProperties)||$.allOf.some((X)=>L1(X,Y))}function Qj($,Y){let X=globalThis.Object.getOwnPropertyNames($.$defs).reduce((W,J)=>[...W,$.$defs[J]],[]),Q=$.$defs[$.$ref];return _0($)||L1(Q,[...X,...Y])}function Wj($,Y){return _0($)||L1($.items,Y)}function Jj($,Y){return _0($)||L1($.not,Y)}function Gj($,Y){return _0($)||Object.values($.properties).some((X)=>L1(X,Y))||r0($.additionalProperties)&&L1($.additionalProperties,Y)}function Mj($,Y){return _0($)||L1($.item,Y)}function Uj($,Y){let X=Object.getOwnPropertyNames($.patternProperties)[0],Q=$.patternProperties[X];return _0($)||L1(Q,Y)||r0($.additionalProperties)&&_0($.additionalProperties)}function Hj($,Y){if(_0($))return!0;return L1(j0($,Y),Y)}function Bj($,Y){if(_0($))return!0;return L1(j0($,Y),Y)}function qj($,Y){return _0($)||!p0($.items)&&$.items.some((X)=>L1(X,Y))}function Nj($,Y){return _0($)||$.anyOf.some((X)=>L1(X,Y))}function L1($,Y){let X=j1($,Y),Q=$;if($.$id&&a$.has($.$id))return!1;if($.$id)a$.add($.$id);switch($[K]){case"Array":return aZ(Q,X);case"AsyncIterator":return eZ(Q,X);case"Constructor":return $j(Q,X);case"Function":return Yj(Q,X);case"Import":return Qj(Q,X);case"Intersect":return Xj(Q,X);case"Iterator":return Wj(Q,X);case"Not":return Jj(Q,X);case"Object":return Gj(Q,X);case"Promise":return Mj(Q,X);case"Record":return Uj(Q,X);case"Ref":return Hj(Q,X);case"This":return Bj(Q,X);case"Tuple":return qj(Q,X);case"Union":return Nj(Q,X);default:return _0($)}}var a$=new Set;function n2($,Y){return a$.clear(),L1($,Y)}function PJ(...$){let[Y,X,Q]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]];if(!G0(Y,X,Q))throw new l4(Y,Q,j2(Y,X,Q).First());return n2(Y,X)?y6(Y,X,Q):Q}function r2($,Y){let X=s($,"default")?$.default:void 0,Q=N8(X)?X():K0(X);return p0(Y)?Q:J0(Y)&&J0(Q)?Object.assign(Q,Y):Y}function e$($){return A8($)&&"default"in $}function zj($,Y,X){if(a(X)){for(let W=0;W<X.length;W++)X[W]=u1($.items,Y,X[W]);return X}let Q=r2($,X);if(!a(Q))return Q;for(let W=0;W<Q.length;W++)Q[W]=u1($.items,Y,Q[W]);return Q}function Aj($,Y,X){return c1(X)?X:r2($,X)}function wj($,Y,X){let Q=globalThis.Object.values($.$defs),W=$.$defs[$.$ref];return u1(W,[...Y,...Q],X)}function Oj($,Y,X){let Q=r2($,X);return $.allOf.reduce((W,J)=>{let G=u1(J,Y,Q);return J0(G)?{...W,...G}:G},{})}function Dj($,Y,X){let Q=r2($,X);if(!J0(Q))return Q;let W=Object.getOwnPropertyNames($.properties);for(let J of W){let G=u1($.properties[J],Y,Q[J]);if(p0(G))continue;Q[J]=u1($.properties[J],Y,Q[J])}if(!e$($.additionalProperties))return Q;for(let J of Object.getOwnPropertyNames(Q)){if(W.includes(J))continue;Q[J]=u1($.additionalProperties,Y,Q[J])}return Q}function Lj($,Y,X){let Q=r2($,X);if(!J0(Q))return Q;let W=$.additionalProperties,[J,G]=Object.entries($.patternProperties)[0],M=new RegExp(J);for(let U of Object.getOwnPropertyNames(Q)){if(!(M.test(U)&&e$(G)))continue;Q[U]=u1(G,Y,Q[U])}if(!e$(W))return Q;for(let U of Object.getOwnPropertyNames(Q)){if(M.test(U))continue;Q[U]=u1(W,Y,Q[U])}return Q}function Zj($,Y,X){return u1(j0($,Y),Y,r2($,X))}function jj($,Y,X){return u1(j0($,Y),Y,X)}function Kj($,Y,X){let Q=r2($,X);if(!a(Q)||p0($.items))return Q;let[W,J]=[$.items,Math.max($.items.length,Q.length)];for(let G=0;G<J;G++)if(G<W.length)Q[G]=u1(W[G],Y,Q[G]);return Q}function Fj($,Y,X){let Q=r2($,X);for(let W of $.anyOf){let J=u1(W,Y,K0(Q));if(G0(W,Y,J))return J}return Q}function u1($,Y,X){let Q=j1($,Y),W=$;switch(W[K]){case"Array":return zj(W,Q,X);case"Date":return Aj(W,Q,X);case"Import":return wj(W,Q,X);case"Intersect":return Oj(W,Q,X);case"Object":return Dj(W,Q,X);case"Record":return Lj(W,Q,X);case"Ref":return Zj(W,Q,X);case"This":return jj(W,Q,X);case"Tuple":return Kj(W,Q,X);case"Union":return Fj(W,Q,X);default:return r2(W,X)}}function N7(...$){return $.length===3?u1($[0],$[1],$[2]):u1($[0],[],$[1])}var X2={};k2(X2,{ValuePointerRootSetError:()=>$Y,ValuePointerRootDeleteError:()=>YY,Set:()=>Sj,Has:()=>Rj,Get:()=>Pj,Format:()=>i4,Delete:()=>_j});class $Y extends n{constructor($,Y,X){super("Cannot set root value");this.value=$,this.path=Y,this.update=X}}class YY extends n{constructor($,Y){super("Cannot delete root value");this.value=$,this.path=Y}}function CJ($){return $.indexOf("~")===-1?$:$.replace(/~1/g,"/").replace(/~0/g,"~")}function*i4($){if($==="")return;let[Y,X]=[0,0];for(let Q=0;Q<$.length;Q++)if($.charAt(Q)==="/")if(Q===0)Y=Q+1;else X=Q,yield CJ($.slice(Y,X)),Y=Q+1;else X=Q;yield CJ($.slice(Y))}function Sj($,Y,X){if(Y==="")throw new $Y($,Y,X);let[Q,W,J]=[null,$,""];for(let G of i4(Y)){if(W[G]===void 0)W[G]={};Q=W,W=W[G],J=G}Q[J]=X}function _j($,Y){if(Y==="")throw new YY($,Y);let[X,Q,W]=[null,$,""];for(let J of i4(Y)){if(Q[J]===void 0||Q[J]===null)return;X=Q,Q=Q[J],W=J}if(Array.isArray(X)){let J=parseInt(W);X.splice(J,1)}else delete X[W]}function Rj($,Y){if(Y==="")return!0;let[X,Q,W]=[null,$,""];for(let J of i4(Y)){if(Q[J]===void 0)return!1;X=Q,Q=Q[J],W=J}return Object.getOwnPropertyNames(X).includes(W)}function Pj($,Y){if(Y==="")return $;let X=$;for(let Q of i4(Y)){if(X[Q]===void 0)return;X=X[Q]}return X}function Cj($,Y){if(!J0(Y))return!1;let X=[...Object.keys($),...Object.getOwnPropertySymbols($)],Q=[...Object.keys(Y),...Object.getOwnPropertySymbols(Y)];if(X.length!==Q.length)return!1;return X.every((W)=>t8($[W],Y[W]))}function Vj($,Y){return c1(Y)&&$.getTime()===Y.getTime()}function Ej($,Y){if(!a(Y)||$.length!==Y.length)return!1;return $.every((X,Q)=>t8(X,Y[Q]))}function bj($,Y){if(!P5(Y)||$.length!==Y.length||Object.getPrototypeOf($).constructor.name!==Object.getPrototypeOf(Y).constructor.name)return!1;return $.every((X,Q)=>t8(X,Y[Q]))}function Ij($,Y){return $===Y}function t8($,Y){if(c1($))return Vj($,Y);if(P5($))return bj($,Y);if(a($))return Ej($,Y);if(J0($))return Cj($,Y);if(z5($))return Ij($,Y);throw new Error("ValueEquals: Unable to compare value")}var Tj=P0({type:O0("insert"),path:m1(),value:r5()}),xj=P0({type:O0("update"),path:m1(),value:r5()}),kj=P0({type:O0("delete"),path:m1()}),EJ=R0([Tj,xj,kj]);class XY extends n{constructor($,Y){super(Y);this.value=$}}function z7($,Y){return{type:"update",path:$,value:Y}}function bJ($,Y){return{type:"insert",path:$,value:Y}}function IJ($){return{type:"delete",path:$}}function VJ($){if(globalThis.Object.getOwnPropertySymbols($).length>0)throw new XY($,"Cannot diff objects with symbols")}function*gj($,Y,X){if(VJ(Y),VJ(X),!C$(X))return yield z7($,X);let Q=globalThis.Object.getOwnPropertyNames(Y),W=globalThis.Object.getOwnPropertyNames(X);for(let J of W){if(s(Y,J))continue;yield bJ(`${$}/${J}`,X[J])}for(let J of Q){if(!s(X,J))continue;if(t8(Y,X))continue;yield*A7(`${$}/${J}`,Y[J],X[J])}for(let J of Q){if(s(X,J))continue;yield IJ(`${$}/${J}`)}}function*fj($,Y,X){if(!a(X))return yield z7($,X);for(let Q=0;Q<Math.min(Y.length,X.length);Q++)yield*A7(`${$}/${Q}`,Y[Q],X[Q]);for(let Q=0;Q<X.length;Q++){if(Q<Y.length)continue;yield bJ(`${$}/${Q}`,X[Q])}for(let Q=Y.length-1;Q>=0;Q--){if(Q<X.length)continue;yield IJ(`${$}/${Q}`)}}function*vj($,Y,X){if(!P5(X)||Y.length!==X.length||globalThis.Object.getPrototypeOf(Y).constructor.name!==globalThis.Object.getPrototypeOf(X).constructor.name)return yield z7($,X);for(let Q=0;Q<Math.min(Y.length,X.length);Q++)yield*A7(`${$}/${Q}`,Y[Q],X[Q])}function*yj($,Y,X){if(Y===X)return;yield z7($,X)}function*A7($,Y,X){if(C$(Y))return yield*gj($,Y,X);if(a(Y))return yield*fj($,Y,X);if(P5(Y))return yield*vj($,Y,X);if(z5(Y))return yield*yj($,Y,X);throw new XY(Y,"Unable to diff value")}function TJ($,Y){return[...A7("",$,Y)]}function hj($){return $.length>0&&$[0].path===""&&$[0].type==="update"}function dj($){return $.length===0}function xJ($,Y){if(hj(Y))return K0(Y[0].value);if(dj(Y))return K0($);let X=K0($);for(let Q of Y)switch(Q.type){case"insert":{X2.Set(X,Q.path,Q.value);break}case"update":{X2.Set(X,Q.path,Q.value);break}case"delete":{X2.Delete(X,Q.path);break}}return X}function kJ(...$){let[Y,X,Q]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]],W=n2(Y,X)?h6(Y,X,Q):Q;if(!G0(Y,X,W))throw new p4(Y,W,j2(Y,X,W).First());return W}function w7($){return J0($)&&!a($)}class QY extends n{constructor($){super($)}}function cj($,Y,X,Q){if(!w7(X))X2.Set($,Y,K0(Q));else{let W=Object.getOwnPropertyNames(X),J=Object.getOwnPropertyNames(Q);for(let G of W)if(!J.includes(G))delete X[G];for(let G of J)if(!W.includes(G))X[G]=null;for(let G of J)WY($,`${Y}/${G}`,X[G],Q[G])}}function mj($,Y,X,Q){if(!a(X))X2.Set($,Y,K0(Q));else{for(let W=0;W<Q.length;W++)WY($,`${Y}/${W}`,X[W],Q[W]);X.splice(Q.length)}}function uj($,Y,X,Q){if(P5(X)&&X.length===Q.length)for(let W=0;W<X.length;W++)X[W]=Q[W];else X2.Set($,Y,K0(Q))}function lj($,Y,X,Q){if(X===Q)return;X2.Set($,Y,Q)}function WY($,Y,X,Q){if(a(Q))return mj($,Y,X,Q);if(P5(Q))return uj($,Y,X,Q);if(w7(Q))return cj($,Y,X,Q);if(z5(Q))return lj($,Y,X,Q)}function gJ($){return P5($)||z5($)}function pj($,Y){return w7($)&&a(Y)||a($)&&w7(Y)}function fJ($,Y){if(gJ($)||gJ(Y))throw new QY("Only object and array types can be mutated at the root level");if(pj($,Y))throw new QY("Cannot assign due type mismatch of assignable values");WY($,"",$,Y)}class GY extends n{constructor($){super($)}}var JY;(function($){let Y=new Map([["Assert",(J,G,M)=>{return M7(J,G,M),M}],["Cast",(J,G,M)=>c4(J,G,M)],["Clean",(J,G,M)=>U7(J,G,M)],["Clone",(J,G,M)=>K0(M)],["Convert",(J,G,M)=>B7(J,G,M)],["Decode",(J,G,M)=>n2(J,G)?y6(J,G,M):M],["Default",(J,G,M)=>N7(J,G,M)],["Encode",(J,G,M)=>n2(J,G)?h6(J,G,M):M]]);function X(J){Y.delete(J)}$.Delete=X;function Q(J,G){Y.set(J,G)}$.Set=Q;function W(J){return Y.get(J)}$.Get=W})(JY||(JY={}));var vJ=["Clone","Clean","Default","Convert","Assert","Decode"];function ij($,Y,X,Q){return $.reduce((W,J)=>{let G=JY.Get(J);if(p0(G))throw new GY(`Unable to find Parse operation '${J}'`);return G(Y,X,W)},Q)}function yJ(...$){let[Y,X,Q,W]=$.length===4?[$[0],$[1],$[2],$[3]]:$.length===3?a($[0])?[$[0],$[1],[],$[2]]:[vJ,$[0],$[1],$[2]]:$.length===2?[vJ,$[0],[],$[1]]:(()=>{throw new GY("Invalid Arguments")})();return ij(Y,X,Q,W)}var C0={};k2(C0,{ValueErrorIterator:()=>r8,Patch:()=>xJ,Parse:()=>yJ,Mutate:()=>fJ,Hash:()=>j8,Errors:()=>j2,Equal:()=>t8,Encode:()=>kJ,Edit:()=>EJ,Diff:()=>TJ,Default:()=>N7,Decode:()=>PJ,Create:()=>g5,Convert:()=>B7,Clone:()=>K0,Clean:()=>U7,Check:()=>G0,Cast:()=>c4,Assert:()=>M7});class hJ{constructor($,Y,X,Q){this.schema=$,this.references=Y,this.checkFunc=X,this.code=Q,this.hasTransform=n2($,Y)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors($){return j2(this.schema,this.references,$)}Check($){return this.checkFunc($)}Decode($){if(!this.checkFunc($))throw new l4(this.schema,$,this.Errors($).First());return this.hasTransform?y6(this.schema,this.references,$):$}Encode($){let Y=this.hasTransform?h6(this.schema,this.references,$):$;if(!this.checkFunc(Y))throw new p4(this.schema,$,this.Errors($).First());return Y}}var t2;(function($){function Y(J){return J===36}$.DollarSign=Y;function X(J){return J===95}$.IsUnderscore=X;function Q(J){return J>=65&&J<=90||J>=97&&J<=122}$.IsAlpha=Q;function W(J){return J>=48&&J<=57}$.IsNumeric=W})(t2||(t2={}));var O7;(function($){function Y(J){if(J.length===0)return!1;return t2.IsNumeric(J.charCodeAt(0))}function X(J){if(Y(J))return!1;for(let G=0;G<J.length;G++){let M=J.charCodeAt(G);if(!(t2.IsAlpha(M)||t2.IsNumeric(M)||t2.DollarSign(M)||t2.IsUnderscore(M)))return!1}return!0}function Q(J){return J.replace(/'/g,"\\'")}function W(J,G){return X(G)?`${J}.${G}`:`${J}['${Q(G)}']`}$.Encode=W})(O7||(O7={}));var MY;(function($){function Y(X){let Q=[];for(let W=0;W<X.length;W++){let J=X.charCodeAt(W);if(t2.IsNumeric(J)||t2.IsAlpha(J))Q.push(X.charAt(W));else Q.push(`_${J}_`)}return Q.join("").replace(/__/g,"_")}$.Encode=Y})(MY||(MY={}));var UY;(function($){function Y(X){return X.replace(/'/g,"\\'")}$.Escape=Y})(UY||(UY={}));class dJ extends n{constructor($){super("Unknown type");this.schema=$}}class HY extends n{constructor($){super("Preflight validation check failed to guard for the given schema");this.schema=$}}var s8;(function($){function Y(G,M,U){return d0.ExactOptionalPropertyTypes?`('${M}' in ${G} ? ${U} : true)`:`(${O7.Encode(G,M)} !== undefined ? ${U} : true)`}$.IsExactOptionalProperty=Y;function X(G){return!d0.AllowArrayObject?`(typeof ${G} === 'object' && ${G} !== null && !Array.isArray(${G}))`:`(typeof ${G} === 'object' && ${G} !== null)`}$.IsObjectLike=X;function Q(G){return!d0.AllowArrayObject?`(typeof ${G} === 'object' && ${G} !== null && !Array.isArray(${G}) && !(${G} instanceof Date) && !(${G} instanceof Uint8Array))`:`(typeof ${G} === 'object' && ${G} !== null && !(${G} instanceof Date) && !(${G} instanceof Uint8Array))`}$.IsRecordLike=Q;function W(G){return d0.AllowNaN?`typeof ${G} === 'number'`:`Number.isFinite(${G})`}$.IsNumberLike=W;function J(G){return d0.AllowNullVoid?`(${G} === undefined || ${G} === null)`:`${G} === undefined`}$.IsVoidLike=J})(s8||(s8={}));var K2;(function($){function Y(N){return N[K]==="Any"||N[K]==="Unknown"}function*X(N,F,D){yield"true"}function*Q(N,F,D){yield"true"}function*W(N,F,D){yield`Array.isArray(${D})`;let[k,b]=[R5("value","any"),R5("acc","number")];if(i(N.maxItems))yield`${D}.length <= ${N.maxItems}`;if(i(N.minItems))yield`${D}.length >= ${N.minItems}`;let v=z1(N.items,F,"value");if(yield`${D}.every((${k}) => ${v})`,o0(N.contains)||i(N.minContains)||i(N.maxContains)){let p=o0(N.contains)?N.contains:W0(),f0=z1(p,F,"value"),I1=i(N.minContains)?[`(count >= ${N.minContains})`]:[],P1=i(N.maxContains)?[`(count <= ${N.maxContains})`]:[],q5=`const count = value.reduce((${b}, ${k}) => ${f0} ? acc + 1 : acc, 0)`,x2=["(count > 0)",...I1,...P1].join(" && ");yield`((${k}) => { ${q5}; return ${x2}})(${D})`}if(N.uniqueItems===!0)yield`((${k}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${D})`}function*J(N,F,D){yield`(typeof value === 'object' && Symbol.asyncIterator in ${D})`}function*G(N,F,D){if(yield`(typeof ${D} === 'bigint')`,C1(N.exclusiveMaximum))yield`${D} < BigInt(${N.exclusiveMaximum})`;if(C1(N.exclusiveMinimum))yield`${D} > BigInt(${N.exclusiveMinimum})`;if(C1(N.maximum))yield`${D} <= BigInt(${N.maximum})`;if(C1(N.minimum))yield`${D} >= BigInt(${N.minimum})`;if(C1(N.multipleOf))yield`(${D} % BigInt(${N.multipleOf})) === 0`}function*M(N,F,D){yield`(typeof ${D} === 'boolean')`}function*U(N,F,D){yield*A2(N.returns,F,`${D}.prototype`)}function*H(N,F,D){if(yield`(${D} instanceof Date) && Number.isFinite(${D}.getTime())`,i(N.exclusiveMaximumTimestamp))yield`${D}.getTime() < ${N.exclusiveMaximumTimestamp}`;if(i(N.exclusiveMinimumTimestamp))yield`${D}.getTime() > ${N.exclusiveMinimumTimestamp}`;if(i(N.maximumTimestamp))yield`${D}.getTime() <= ${N.maximumTimestamp}`;if(i(N.minimumTimestamp))yield`${D}.getTime() >= ${N.minimumTimestamp}`;if(i(N.multipleOfTimestamp))yield`(${D}.getTime() % ${N.multipleOfTimestamp}) === 0`}function*B(N,F,D){yield`(typeof ${D} === 'function')`}function*A(N,F,D){let k=globalThis.Object.getOwnPropertyNames(N.$defs).reduce((b,v)=>{return[...b,N.$defs[v]]},[]);yield*A2(I5(N.$ref),[...F,...k],D)}function*O(N,F,D){if(yield`Number.isInteger(${D})`,i(N.exclusiveMaximum))yield`${D} < ${N.exclusiveMaximum}`;if(i(N.exclusiveMinimum))yield`${D} > ${N.exclusiveMinimum}`;if(i(N.maximum))yield`${D} <= ${N.maximum}`;if(i(N.minimum))yield`${D} >= ${N.minimum}`;if(i(N.multipleOf))yield`(${D} % ${N.multipleOf}) === 0`}function*w(N,F,D){let k=N.allOf.map((b)=>z1(b,F,D)).join(" && ");if(N.unevaluatedProperties===!1){let b=d5(`${new RegExp(l2(N))};`),v=`Object.getOwnPropertyNames(${D}).every(key => ${b}.test(key))`;yield`(${k} && ${v})`}else if(o0(N.unevaluatedProperties)){let b=d5(`${new RegExp(l2(N))};`),v=`Object.getOwnPropertyNames(${D}).every(key => ${b}.test(key) || ${z1(N.unevaluatedProperties,F,`${D}[key]`)})`;yield`(${k} && ${v})`}else yield`(${k})`}function*q(N,F,D){yield`(typeof value === 'object' && Symbol.iterator in ${D})`}function*L(N,F,D){if(typeof N.const==="number"||typeof N.const==="boolean")yield`(${D} === ${N.const})`;else yield`(${D} === '${UY.Escape(N.const)}')`}function*j(N,F,D){yield"false"}function*h(N,F,D){yield`(!${z1(N.not,F,D)})`}function*V(N,F,D){yield`(${D} === null)`}function*I(N,F,D){if(yield s8.IsNumberLike(D),i(N.exclusiveMaximum))yield`${D} < ${N.exclusiveMaximum}`;if(i(N.exclusiveMinimum))yield`${D} > ${N.exclusiveMinimum}`;if(i(N.maximum))yield`${D} <= ${N.maximum}`;if(i(N.minimum))yield`${D} >= ${N.minimum}`;if(i(N.multipleOf))yield`(${D} % ${N.multipleOf}) === 0`}function*o(N,F,D){if(yield s8.IsObjectLike(D),i(N.minProperties))yield`Object.getOwnPropertyNames(${D}).length >= ${N.minProperties}`;if(i(N.maxProperties))yield`Object.getOwnPropertyNames(${D}).length <= ${N.maxProperties}`;let k=Object.getOwnPropertyNames(N.properties);for(let b of k){let v=O7.Encode(D,b),p=N.properties[b];if(N.required&&N.required.includes(b)){if(yield*A2(p,F,v),p2(p)||Y(p))yield`('${b}' in ${D})`}else{let f0=z1(p,F,v);yield s8.IsExactOptionalProperty(D,b,f0)}}if(N.additionalProperties===!1)if(N.required&&N.required.length===k.length)yield`Object.getOwnPropertyNames(${D}).length === ${k.length}`;else{let b=`[${k.map((v)=>`'${v}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${D}).every(key => ${b}.includes(key))`}if(typeof N.additionalProperties==="object"){let b=z1(N.additionalProperties,F,`${D}[key]`),v=`[${k.map((p)=>`'${p}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${D}).every(key => ${v}.includes(key) || ${b}))`}}function*Q0(N,F,D){yield`${D} instanceof Promise`}function*g(N,F,D){if(yield s8.IsRecordLike(D),i(N.minProperties))yield`Object.getOwnPropertyNames(${D}).length >= ${N.minProperties}`;if(i(N.maxProperties))yield`Object.getOwnPropertyNames(${D}).length <= ${N.maxProperties}`;let[k,b]=Object.entries(N.patternProperties)[0],v=d5(`${new RegExp(k)}`),p=z1(b,F,"value"),f0=o0(N.additionalProperties)?z1(N.additionalProperties,F,D):N.additionalProperties===!1?"false":"true",I1=`(${v}.test(key) ? ${p} : ${f0})`;yield`(Object.entries(${D}).every(([key, value]) => ${I1}))`}function*x(N,F,D){let k=j0(N,F);if(J1.functions.has(N.$ref))return yield`${R1(N.$ref)}(${D})`;yield*A2(k,F,D)}function*f(N,F,D){let k=d5(`${new RegExp(N.source,N.flags)};`);if(yield`(typeof ${D} === 'string')`,i(N.maxLength))yield`${D}.length <= ${N.maxLength}`;if(i(N.minLength))yield`${D}.length >= ${N.minLength}`;yield`${k}.test(${D})`}function*C(N,F,D){if(yield`(typeof ${D} === 'string')`,i(N.maxLength))yield`${D}.length <= ${N.maxLength}`;if(i(N.minLength))yield`${D}.length >= ${N.minLength}`;if(N.pattern!==void 0)yield`${d5(`${new RegExp(N.pattern)};`)}.test(${D})`;if(N.format!==void 0)yield`format('${N.format}', ${D})`}function*l(N,F,D){yield`(typeof ${D} === 'symbol')`}function*$0(N,F,D){yield`(typeof ${D} === 'string')`,yield`${d5(`${new RegExp(N.pattern)};`)}.test(${D})`}function*H0(N,F,D){yield`${R1(N.$ref)}(${D})`}function*A0(N,F,D){if(yield`Array.isArray(${D})`,N.items===void 0)return yield`${D}.length === 0`;yield`(${D}.length === ${N.maxItems})`;for(let k=0;k<N.items.length;k++)yield`${z1(N.items[k],F,`${D}[${k}]`)}`}function*B5(N,F,D){yield`${D} === undefined`}function*S0(N,F,D){yield`(${N.anyOf.map((b)=>z1(b,F,D)).join(" || ")})`}function*o1(N,F,D){if(yield`${D} instanceof Uint8Array`,i(N.maxByteLength))yield`(${D}.length <= ${N.maxByteLength})`;if(i(N.minByteLength))yield`(${D}.length >= ${N.minByteLength})`}function*I2(N,F,D){yield"true"}function*T2(N,F,D){yield s8.IsVoidLike(D)}function*_5(N,F,D){let k=J1.instances.size;J1.instances.set(k,N),yield`kind('${N[K]}', ${k}, ${D})`}function*A2(N,F,D,k=!0){let b=D0(N.$id)?[...F,N]:F,v=N;if(k&&D0(N.$id)){let p=R1(N.$id);if(J1.functions.has(p))return yield`${p}(${D})`;else{J1.functions.set(p,"<deferred>");let f0=d1(p,N,F,"value",!1);return J1.functions.set(p,f0),yield`${p}(${D})`}}switch(v[K]){case"Any":return yield*X(v,b,D);case"Argument":return yield*Q(v,b,D);case"Array":return yield*W(v,b,D);case"AsyncIterator":return yield*J(v,b,D);case"BigInt":return yield*G(v,b,D);case"Boolean":return yield*M(v,b,D);case"Constructor":return yield*U(v,b,D);case"Date":return yield*H(v,b,D);case"Function":return yield*B(v,b,D);case"Import":return yield*A(v,b,D);case"Integer":return yield*O(v,b,D);case"Intersect":return yield*w(v,b,D);case"Iterator":return yield*q(v,b,D);case"Literal":return yield*L(v,b,D);case"Never":return yield*j(v,b,D);case"Not":return yield*h(v,b,D);case"Null":return yield*V(v,b,D);case"Number":return yield*I(v,b,D);case"Object":return yield*o(v,b,D);case"Promise":return yield*Q0(v,b,D);case"Record":return yield*g(v,b,D);case"Ref":return yield*x(v,b,D);case"RegExp":return yield*f(v,b,D);case"String":return yield*C(v,b,D);case"Symbol":return yield*l(v,b,D);case"TemplateLiteral":return yield*$0(v,b,D);case"This":return yield*H0(v,b,D);case"Tuple":return yield*A0(v,b,D);case"Undefined":return yield*B5(v,b,D);case"Union":return yield*S0(v,b,D);case"Uint8Array":return yield*o1(v,b,D);case"Unknown":return yield*I2(v,b,D);case"Void":return yield*T2(v,b,D);default:if(!D1.Has(v[K]))throw new dJ(N);return yield*_5(v,b,D)}}let J1={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function z1(N,F,D,k=!0){return`(${[...A2(N,F,D,k)].join(" && ")})`}function R1(N){return`check_${MY.Encode(N)}`}function d5(N){let F=`local_${J1.variables.size}`;return J1.variables.set(F,`const ${F} = ${N}`),F}function d1(N,F,D,k,b=!0){let[v,p]=[`
`,(q5)=>"".padStart(q5," ")],f0=R5("value","any"),I1=q8("boolean"),P1=[...A2(F,D,k,b)].map((q5)=>`${p(4)}${q5}`).join(` &&${v}`);return`function ${N}(${f0})${I1} {${v}${p(2)}return (${v}${P1}${v}${p(2)})
}`}function R5(N,F){let D=J1.language==="typescript"?`: ${F}`:"";return`${N}${D}`}function q8(N){return J1.language==="typescript"?`: ${N}`:""}function c5(N,F,D){let k=d1("check",N,F,"value"),b=R5("value","any"),v=q8("boolean"),p=[...J1.functions.values()],f0=[...J1.variables.values()],I1=D0(N.$id)?`return function check(${b})${v} {
  return ${R1(N.$id)}(value)
}`:`return ${k}`;return[...f0,...p,I1].join(`
`)}function d(...N){let F={language:"javascript"},[D,k,b]=N.length===2&&a(N[1])?[N[0],N[1],F]:N.length===2&&!a(N[1])?[N[0],[],N[1]]:N.length===3?[N[0],N[1],N[2]]:N.length===1?[N[0],[],F]:[null,[],F];if(J1.language=b.language,J1.variables.clear(),J1.functions.clear(),J1.instances.clear(),!o0(D))throw new HY(D);for(let v of k)if(!o0(v))throw new HY(v);return c5(D,k,b)}$.Code=d;function E(N,F=[]){let D=d(N,F,{language:"javascript"}),k=globalThis.Function("kind","format","hash",D),b=new Map(J1.instances);function v(P1,q5,x2){if(!D1.Has(P1)||!b.has(q5))return!1;let Gq=D1.Get(P1),Mq=b.get(q5);return Gq(Mq,x2)}function p(P1,q5){if(!b0.Has(P1))return!1;return b0.Get(P1)(q5)}function f0(P1){return j8(P1)}let I1=k(v,p,f0);return new hJ(N,F,I1,D)}$.Compile=E})(K2||(K2={}));var AF=Object.create,{getPrototypeOf:wF,defineProperty:rG,getOwnPropertyNames:OF}=Object,DF=Object.prototype.hasOwnProperty,o7=($,Y,X)=>{X=$!=null?AF(wF($)):{};let Q=Y||!$||!$.__esModule?rG(X,"default",{value:$,enumerable:!0}):X;for(let W of OF($))if(!DF.call(Q,W))rG(Q,W,{get:()=>$[W],enumerable:!0});return Q},_M=($,Y)=>()=>(Y||$((Y={exports:{}}).exports,Y),Y.exports);var LF=_M(($)=>{Object.defineProperty($,"__esModule",{value:!0}),$.parse=M,$.serialize=B;var Y=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,X=/^[\u0021-\u003A\u003C-\u007E]*$/,Q=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,W=/^[\u0020-\u003A\u003D-\u007E]*$/,J=Object.prototype.toString,G=(()=>{let w=function(){};return w.prototype=Object.create(null),w})();function M(w,q){let L=new G,j=w.length;if(j<2)return L;let h=q?.decode||A,V=0;do{let I=w.indexOf("=",V);if(I===-1)break;let o=w.indexOf(";",V),Q0=o===-1?j:o;if(I>Q0){V=w.lastIndexOf(";",I-1)+1;continue}let g=U(w,V,I),x=H(w,I,g),f=w.slice(g,x);if(L[f]===void 0){let C=U(w,I+1,Q0),l=H(w,Q0,C),$0=h(w.slice(C,l));L[f]=$0}V=Q0+1}while(V<j);return L}function U(w,q,L){do{let j=w.charCodeAt(q);if(j!==32&&j!==9)return q}while(++q<L);return L}function H(w,q,L){while(q>L){let j=w.charCodeAt(--q);if(j!==32&&j!==9)return q+1}return L}function B(w,q,L){let j=L?.encode||encodeURIComponent;if(!Y.test(w))throw new TypeError(`argument name is invalid: ${w}`);let h=j(q);if(!X.test(h))throw new TypeError(`argument val is invalid: ${q}`);let V=w+"="+h;if(!L)return V;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);V+="; Max-Age="+L.maxAge}if(L.domain){if(!Q.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);V+="; Domain="+L.domain}if(L.path){if(!W.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);V+="; Path="+L.path}if(L.expires){if(!O(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);V+="; Expires="+L.expires.toUTCString()}if(L.httpOnly)V+="; HttpOnly";if(L.secure)V+="; Secure";if(L.partitioned)V+="; Partitioned";if(L.priority)switch(typeof L.priority==="string"?L.priority.toLowerCase():void 0){case"low":V+="; Priority=Low";break;case"medium":V+="; Priority=Medium";break;case"high":V+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite==="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"none":V+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return V}function A(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch(q){return w}}function O(w){return J.call(w)==="[object Date]"}}),iY=_M(($,Y)=>{var X=12,Q=0,W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function J(U){var H=U.indexOf("%");if(H===-1)return U;var B=U.length,A="",O=0,w=0,q=H,L=X;while(H>-1&&H<B){var j=M(U[H+1],4),h=M(U[H+2],0),V=j|h,I=W[V];if(L=W[256+L+I],w=w<<6|V&W[364+I],L===X)A+=U.slice(O,q),A+=w<=65535?String.fromCharCode(w):String.fromCharCode(55232+(w>>10),56320+(w&1023)),w=0,O=H+3,H=q=U.indexOf("%",O);else if(L===Q)return null;else{if(H+=3,H<B&&U.charCodeAt(H)===37)continue;return null}}return A+U.slice(O)}var G={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function M(U,H){var B=G[U];return B===void 0?255:B<<H}Y.exports=J}),n6=($,Y)=>{let X=Y?.length?{}:null;if(X)for(let Q of Y)X[Q.part.charCodeAt(0)]=Q;return{part:$,store:null,inert:X,params:null,wildcardStore:null}},tG=($,Y)=>({...$,part:Y}),sG=($)=>({name:$,store:null,inert:null});class a6{config;root={};history=[];deferred=[];constructor($={}){if(this.config=$,$.lazy)this.find=this.lazyFind}static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g,optionalParams:/(\/:\w+\?)/g};lazyFind=($,Y)=>{if(!this.config.lazy)return this.find;return this.build(),this.find($,Y)};build(){if(!this.config.lazy)return;for(let[$,Y,X]of this.deferred)this.add($,Y,X,{lazy:!1,ignoreHistory:!0});this.deferred=[],this.find=($,Y)=>{let X=this.root[$];if(!X)return null;return k7(Y,Y.length,X,0)}}add($,Y,X,{ignoreError:Q=!1,ignoreHistory:W=!1,lazy:J=this.config.lazy}={}){if(J)return this.find=this.lazyFind,this.deferred.push([$,Y,X]),X;if(typeof Y!=="string")throw new TypeError("Route path must be a string");if(Y==="")Y="/";else if(Y[0]!=="/")Y=`/${Y}`;let G=Y[Y.length-1]==="*",M=Y.match(a6.regex.optionalParams);if(M){let O=Y.replaceAll("?","");this.add($,O,X,{ignoreError:Q,ignoreHistory:W,lazy:J});for(let w=0;w<M.length;w++){let q=Y.replace(M[w],"");this.add($,q,X,{ignoreError:!0,ignoreHistory:W,lazy:J})}return X}if(M)Y=Y.replaceAll("?","");if(this.history.find(([O,w,q])=>O===$&&w===Y))return X;if(G||M&&Y.charCodeAt(Y.length-1)===63)Y=Y.slice(0,-1);if(!W)this.history.push([$,Y,X]);let U=Y.split(a6.regex.static),H=Y.match(a6.regex.params)||[];if(U[U.length-1]==="")U.pop();let B;if(!this.root[$])B=this.root[$]=n6("/");else B=this.root[$];let A=0;for(let O=0;O<U.length;++O){let w=U[O];if(O>0){let q=H[A++].slice(1);if(B.params===null)B.params=sG(q);else if(B.params.name!==q)if(Q)return X;else throw new Error(`Cannot create route "${Y}" with parameter "${q}" because a route already exists with a different parameter name ("${B.params.name}") in the same location`);let L=B.params;if(L.inert===null){B=L.inert=n6(w);continue}B=L.inert}for(let q=0;;){if(q===w.length){if(q<B.part.length){let L=tG(B,B.part.slice(q));Object.assign(B,n6(w,[L]))}break}if(q===B.part.length){if(B.inert===null)B.inert={};let L=B.inert[w.charCodeAt(q)];if(L){B=L,w=w.slice(q),q=0;continue}let j=n6(w.slice(q));B.inert[w.charCodeAt(q)]=j,B=j;break}if(w[q]!==B.part[q]){let L=tG(B,B.part.slice(q)),j=n6(w.slice(q));Object.assign(B,n6(B.part.slice(0,q),[L,j])),B=j;break}++q}}if(A<H.length){let O=H[A].slice(1);if(B.params===null)B.params=sG(O);else if(B.params.name!==O)if(Q)return X;else throw new Error(`Cannot create route "${Y}" with parameter "${O}" because a route already exists with a different parameter name ("${B.params.name}") in the same location`);if(B.params.store===null)B.params.store=X;return B.params.store}if(G){if(B.wildcardStore===null)B.wildcardStore=X;return B.wildcardStore}if(B.store===null)B.store=X;return B.store}find($,Y){let X=this.root[$];if(!X)return null;return k7(Y,Y.length,X,0)}}var k7=($,Y,X,Q)=>{let W=X.part,J=W.length,G=Q+J;if(J>1){if(G>Y)return null;if(J<15){for(let M=1,U=Q+1;M<J;++M,++U)if(W.charCodeAt(M)!==$.charCodeAt(U))return null}else if($.slice(Q,G)!==W)return null}if(G===Y){if(X.store!==null)return{store:X.store,params:{}};if(X.wildcardStore!==null)return{store:X.wildcardStore,params:{"*":""}};return null}if(X.inert!==null){let M=X.inert[$.charCodeAt(G)];if(M!==void 0){let U=k7($,Y,M,G);if(U!==null)return U}}if(X.params!==null){let{store:M,name:U,inert:H}=X.params,B=$.indexOf("/",G);if(B!==G){if(B===-1||B>=Y){if(M!==null){let A={};return A[U]=$.substring(G,Y),{store:M,params:A}}}else if(H!==null){let A=k7($,Y,H,B);if(A!==null)return A.params[U]=$.substring(G,B),A}}}if(X.wildcardStore!==null)return{store:X.wildcardStore,params:{"*":$.substring(G,Y)}};return null},oY={date:RM,time:hY(!0),"date-time":aG(!0),"iso-time":hY(!1),"iso-date-time":aG(!1),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:PF,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:xF,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:CF,int32:{type:"number",validate:bF},int64:{type:"number",validate:IF},float:{type:"number",validate:$M},double:{type:"number",validate:$M},password:!0,binary:!0};function ZF($){return $%4===0&&($%100!==0||$%400===0)}var jF=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,KF=[0,31,28,31,30,31,30,31,31,30,31,30,31];function RM($){let Y=jF.exec($);if(!Y)return!1;let X=+Y[1],Q=+Y[2],W=+Y[3];return Q>=1&&Q<=12&&W>=1&&W<=(Q===2&&ZF(X)?29:KF[Q])}var FF=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function hY($){return function Y(X){let Q=FF.exec(X);if(!Q)return!1;let W=+Q[1],J=+Q[2],G=+Q[3],M=Q[4],U=Q[5]==="-"?-1:1,H=+(Q[6]||0),B=+(Q[7]||0);if(H>23||B>59||$&&!M)return!1;if(W<=23&&J<=59&&G<60)return!0;let A=J-B*U,O=W-H*U-(A<0?1:0);return(O===23||O===-1)&&(A===59||A===-1)&&G<61}}var PM=($)=>{if($.charCodeAt($.length-6)===32)return $.slice(0,-6)+"+"+$.slice(-5);return $},SF=/t|\s/i;function aG($){let Y=hY($);return function X(Q){let W=Q.split(SF);return W.length===2&&RM(W[0])&&Y(W[1])}}var _F=/\/|:/,RF=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function PF($){return _F.test($)&&RF.test($)}var eG=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function CF($){return eG.lastIndex=0,eG.test($)}var VF=-2147483648,EF=2147483647;function bF($){return Number.isInteger($)&&$<=EF&&$>=VF}function IF($){return Number.isInteger($)}function $M(){return!0}var TF=/[^\\]\\Z/;function xF($){if(TF.test($))return!1;try{return new RegExp($),!0}catch(Y){return!1}}var CM=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,VM=/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s\d{4}\s\d{2}:\d{2}:\d{2}\sGMT(?:\+|-)\d{4}\s\([^)]+\)/,EM=/^(?:(?:(?:(?:0?[1-9]|[12][0-9]|3[01])[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:19|20)\d{2})|(?:(?:19|20)\d{2}[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:0?[1-9]|[12][0-9]|3[01]))))(?:\s(?:1[012]|0?[1-9]):[0-5][0-9](?::[0-5][0-9])?(?:\s[AP]M)?)?$/,kF=oY.date,gF=oY["date-time"];if(!b0.Has("date"))b0.Set("date",($)=>{let Y=PM($).replace(/"/g,"");if(CM.test(Y)||VM.test(Y)||EM.test(Y)||kF(Y)){let X=new Date(Y);if(!Number.isNaN(X.getTime()))return!0}return!1});if(!b0.Has("date-time"))b0.Set("date-time",($)=>{let Y=$.replace(/"/g,"");if(CM.test(Y)||VM.test(Y)||EM.test(Y)||gF(Y)){let X=new Date(Y);if(!Number.isNaN(X.getTime()))return!0}return!1});Object.entries(oY).forEach(($)=>{let[Y,X]=$;if(!b0.Has(Y)){if(X instanceof RegExp)b0.Set(Y,(Q)=>X.test(Q));else if(typeof X==="function")b0.Set(Y,X)}});if(!b0.Has("numeric"))b0.Set("numeric",($)=>!!$&&!isNaN(+$));if(!b0.Has("integer"))b0.Set("integer",($)=>!!$&&Number.isInteger(+$));if(!b0.Has("boolean"))b0.Set("boolean",($)=>$==="true"||$==="false");if(!b0.Has("ObjectString"))b0.Set("ObjectString",($)=>{let Y=$.charCodeAt(0);if(Y===9||Y===10||Y===32)Y=$.trimStart().charCodeAt(0);if(Y!==123&&Y!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});if(!b0.Has("ArrayString"))b0.Set("ArrayString",($)=>{let Y=$.charCodeAt(0);if(Y===9||Y===10||Y===32)Y=$.trimStart().charCodeAt(0);if(Y!==123&&Y!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});var e6=typeof Bun!=="undefined",fF={aac:"audio/aac",abw:"application/x-abiword",ai:"application/postscript",arc:"application/octet-stream",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",dll:"application/octet-stream",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/javascript",json:"application/json",mid:"audio/midi",midi:"audio/midi",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpa:"video/mpeg",mpe:"video/mpeg",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",otf:"font/otf",png:"image/png",pdf:"application/pdf",ppt:"application/vnd.ms-powerpoint",rar:"application/x-rar-compressed",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"application/typescript",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/x-wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.ms-excel",xlsx_OLD:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3gp_DOES_NOT_CONTAIN_VIDEO":"audio/3gpp","3gp2":"video/3gpp2","3gp2_DOES_NOT_CONTAIN_VIDEO":"audio/3gpp2","7z":"application/x-7z-compressed"},vF=($)=>{let Y=$.lastIndexOf(".");if(Y===-1)return"";return $.slice(Y+1)};var bY,IY;class g7{path;value;stats;constructor($){if(this.path=$,e6)this.value=Bun.file($);else if(typeof window!=="undefined")console.warn("Browser environment does not support file");else if(!bY||!IY)try{this.value=import("fs").then((Y)=>{return bY=Y.createReadStream,Y.createReadStream($)}),this.stats=import("fs/promises").then((Y)=>{return IY=Y.stat,Y.stat($)})}catch{}else this.value=bY($),this.stats=IY($)}get type(){return fF[vF(this.path)]||"application/octet-stream"}get length(){if(e6)return this.value.size;return this.stats?.then(($)=>$.size)??0}}var f7="toJSON"in new Headers,YM=($,Y)=>{let X=new URL($);return X.pathname=Y,X.toString()},yF=($)=>typeof $==="function"&&/^\s*class\s+/.test($.toString())||$.toString&&$.toString().startsWith("[object ")&&$.toString()!=="[object Object]"||m0(Object.getPrototypeOf($)),TY=($)=>$&&typeof $==="object"&&!Array.isArray($),Q5=($,Y,X)=>{let Q=X?.skipKeys,W=X?.override??!0;if(!TY($)||!TY(Y))return $;for(let[J,G]of Object.entries(Y)){if(Q?.includes(J))continue;if(!TY(G)||!(J in $)||yF(G)){if(W||!(J in $))$[J]=G;continue}$[J]=Q5($[J],G,{skipKeys:Q,override:W})}return $},bM=($,Y)=>{let X=Q5(Object.assign({},$),Y,{skipKeys:["properties"]});if(X.properties)delete X.properties;return X},$1=($,Y)=>{if(!Y)return $;let X=[],Q=[];if($){if(!Array.isArray($))$=[$];for(let W of $)if(X.push(W),W.checksum)Q.push(W.checksum)}if(Y){if(!Array.isArray(Y))Y=[Y];for(let W of Y)if(!Q.includes(W.checksum))X.push(W)}return X},hF=["start","request","parse","transform","resolve","beforeHandle","afterHandle","mapResponse","afterResponse","trace","error","stop","body","headers","params","query","response","type","detail"],dF=hF.reduce(($,Y)=>($[Y]=!0,$),{}),IM=($,Y)=>{let X=(Q)=>typeof Q==="object"&&Object.keys(Q).every(nY);if(X($)&&X(Y))return Object.assign($,Y);else if($&&!X($)&&X(Y))return Object.assign({200:$},Y);return Y??$},X9=($,Y)=>{if(!$&&!Y)return{body:void 0,headers:void 0,params:void 0,query:void 0,cookie:void 0,response:void 0};return{body:Y?.body??$?.body,headers:Y?.headers??$?.headers,params:Y?.params??$?.params,query:Y?.query??$?.query,cookie:Y?.cookie??$?.cookie,response:IM($?.response,Y?.response)}},a2=($,Y)=>{if(!Object.values(Y).find((Q)=>Q!==void 0&&Q!==null))return{...$};let X={...$,...Y,body:Y?.body??$?.body,headers:Y?.headers??$?.headers,params:Y?.params??$?.params,query:Y?.query??$?.query,cookie:Y?.cookie??$?.cookie,response:IM($?.response,Y?.response),type:$?.type||Y?.type,detail:Q5(Y?.detail??{},$?.detail??{}),parse:$1($?.parse,Y?.parse),transform:$1($?.transform,Y?.transform),beforeHandle:$1($1(Z1($?.resolve,"resolve"),$?.beforeHandle),$1(Z1(Y.resolve,"resolve"),Y?.beforeHandle)),afterHandle:$1($?.afterHandle,Y?.afterHandle),mapResponse:$1($?.mapResponse,Y?.mapResponse),afterResponse:$1($?.afterResponse,Y?.afterResponse),trace:$1($?.trace,Y?.trace),error:$1($?.error,Y?.error)};if(X.resolve)delete X.resolve;return X},cF=($)=>{if($.parse&&!Array.isArray($.parse))$.parse=[$.parse];if($.transform&&!Array.isArray($.transform))$.transform=[$.transform];if($.afterHandle&&!Array.isArray($.afterHandle))$.afterHandle=[$.afterHandle];if($.mapResponse&&!Array.isArray($.mapResponse))$.mapResponse=[$.mapResponse];if($.afterResponse&&!Array.isArray($.afterResponse))$.afterResponse=[$.afterResponse];if($.trace&&!Array.isArray($.trace))$.trace=[$.trace];if($.error&&!Array.isArray($.error))$.error=[$.error];let Y=[];if($.resolve)Y=Z1(Array.isArray($.resolve)?$.resolve:[$.resolve],"resolve"),delete $.resolve;if($.beforeHandle)if(Y.length)Y=Y.concat(Array.isArray($.beforeHandle)?$.beforeHandle:[$.beforeHandle]);else Y=Array.isArray($.beforeHandle)?$.beforeHandle:[$.beforeHandle];if(Y.length)$.beforeHandle=Y;return $},mF=typeof Bun!=="undefined",tu=mF&&typeof Bun.hash==="function",t6=($)=>{let Y=9;for(let X=0;X<$.length;)Y=Math.imul(Y^$.charCodeAt(X++),387420489);return Y=Y^Y>>>9},J2=($,Y)=>{if(!Y)return;if(!Array.isArray(Y)){let Q=Y;if($&&!Q.checksum)Q.checksum=$;if(Q.scope==="scoped")Q.scope="local";return Q}let X=[...Y];for(let Q of X){if($&&!Q.checksum)Q.checksum=$;if(Q.scope==="scoped")Q.scope="local"}return X},XM=($,Y,X)=>{return{start:$1($.start,J2(X,Y?.start)),request:$1($.request,J2(X,Y?.request)),parse:$1($.parse,J2(X,Y?.parse)),transform:$1($.transform,J2(X,Y?.transform)),beforeHandle:$1($1(Z1($.resolve,"resolve"),$.beforeHandle),J2(X,$1(Z1(Y?.resolve,"resolve"),Y?.beforeHandle))),afterHandle:$1($.afterHandle,J2(X,Y?.afterHandle)),mapResponse:$1($.mapResponse,J2(X,Y?.mapResponse)),afterResponse:$1($.afterResponse,J2(X,Y?.afterResponse)),trace:$1($.trace,J2(X,Y?.trace)),error:$1($.error,J2(X,Y?.error)),stop:$1($.stop,J2(X,Y?.stop))}},uF=($,Y,{skipIfHasType:X=!1})=>{if(!$)return $;if(!Array.isArray($)){if(X)$.scope??=Y;else $.scope=Y;return $}for(let Q of $)if(X)Q.scope??=Y;else Q.scope=Y;return $},F8=($)=>{if(!$)return $;if(!Array.isArray($))switch($.scope){case"global":case"scoped":return{...$};default:return{fn:$}}let Y=[];for(let X of $)switch(X.scope){case"global":case"scoped":Y.push({...X});break}return Y},QM=($)=>{return{...$,type:$?.type,detail:$?.detail,parse:F8($?.parse),transform:F8($?.transform),beforeHandle:F8($?.beforeHandle),afterHandle:F8($?.afterHandle),mapResponse:F8($?.mapResponse),afterResponse:F8($?.afterResponse),error:F8($?.error),trace:F8($?.trace)}},n7={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},WM=Object.fromEntries(Object.entries(n7).map(([$,Y])=>[Y,$]));function lF($){let Y=$;while(Y.endsWith("="))Y=Y.slice(0,-1);return Y}var JM=new TextEncoder,v7=async($,Y)=>{if(typeof $!=="string")throw new TypeError("Cookie value must be provided as a string.");if(Y===null)throw new TypeError("Secret key must be provided.");let X=await crypto.subtle.importKey("raw",JM.encode(Y),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),Q=await crypto.subtle.sign("HMAC",X,JM.encode($));return $+"."+lF(Buffer.from(Q).toString("base64"))},GM=async($,Y)=>{if(typeof $!=="string")throw new TypeError("Signed cookie string must be provided.");if(Y===null)throw new TypeError("Secret key must be provided.");let X=$.slice(0,$.lastIndexOf("."));return await v7(X,Y)===$?X:!1},pF=($,Y,X)=>{if(!$||typeof $!=="object"||!Y)return;for(let[Q,W]of Object.entries(Y)){if(dF[Q]||!(Q in $))continue;let J=$[Q];if(typeof J==="function"){let G=J(W);if(typeof G==="object")for(let[M,U]of Object.entries(G))X(M)({fn:U})}delete Y[Q]}},iF=({globalHook:$,localHook:Y})=>(X)=>(Q,W)=>{if(typeof Q==="function")Q={fn:Q};if(X==="resolve")Q={...Q,subType:"resolve"};if(!Y[X])Y[X]=[];if(typeof Y[X]==="function")Y[X]=[Y[X]];if(!Array.isArray(Y[X]))Y[X]=[Y[X]];if("fn"in Q||Array.isArray(Q)){if(Array.isArray(Q))Y[X]=Y[X].concat(Q);else Y[X].push(Q);return}let{insert:J="after",stack:G="local"}=Q;if(typeof W==="function")W={fn:W};if(G==="global")if(!Array.isArray(W))if(J==="before")$[X].unshift(W);else $[X].push(W);else if(J==="before")$[X]=W.concat($[X]);else $[X]=$[X].concat(W);else if(!Array.isArray(W))if(J==="before")Y[X].unshift(W);else Y[X].push(W);else if(J==="before")Y[X]=W.concat(Y[X]);else Y[X]=Y[X].concat(W)},oF=($)=>{if(typeof $==="number")return $;if($.length<16){if($.trim().length===0)return null;let Y=Number($);if(Number.isNaN(Y))return null;return Y}if($.length===16){if($.trim().length===0)return null;let Y=Number($);if(Number.isNaN(Y)||Y.toString()!==$)return null;return Y}return null},nY=($)=>oF($)!==null;class TM{onError;onFinally;root=null;promises=[];constructor($=console.error,Y=()=>{}){this.onError=$,this.onFinally=Y}get size(){return this.promises.length}add($){if(this.promises.push($),this.root||=this.drain(),this.promises.length===1)this.then(this.onFinally);return $}async drain(){while(this.promises.length>0){try{await this.promises[0]}catch($){this.onError($)}this.promises.shift()}this.root=null}then($,Y){return(this.root??Promise.resolve()).then($,Y)}}var Z1=($,Y)=>{if(!$)return $;if(!Array.isArray($)){if(typeof $==="function"||typeof $==="string")return Y?{fn:$,subType:Y}:{fn:$};else if("fn"in $)return $}let X=[];for(let Q of $)if(typeof Q==="function"||typeof Q==="string")X.push(Y?{fn:Q,subType:Y}:{fn:Q});else if("fn"in Q)X.push(Q);return X},MM=($)=>{if($.start)$.start=Z1($.start);if($.request)$.request=Z1($.request);if($.parse)$.parse=Z1($.parse);if($.transform)$.transform=Z1($.transform);if($.beforeHandle)$.beforeHandle=Z1($.beforeHandle);if($.afterHandle)$.afterHandle=Z1($.afterHandle);if($.mapResponse)$.mapResponse=Z1($.mapResponse);if($.afterResponse)$.afterResponse=Z1($.afterResponse);if($.trace)$.trace=Z1($.trace);if($.error)$.error=Z1($.error);if($.stop)$.stop=Z1($.stop);return $},UM=($)=>{if($.start?.map)$.start=$.start.map((Y)=>Y.fn);if($.request?.map)$.request=$.request.map((Y)=>Y.fn);if($.parse?.map)$.parse=$.parse.map((Y)=>Y.fn);if($.transform?.map)$.transform=$.transform.map((Y)=>Y.fn);if($.beforeHandle?.map)$.beforeHandle=$.beforeHandle.map((Y)=>Y.fn);if($.afterHandle?.map)$.afterHandle=$.afterHandle.map((Y)=>Y.fn);if($.mapResponse?.map)$.mapResponse=$.mapResponse.map((Y)=>Y.fn);if($.afterResponse?.map)$.afterResponse=$.afterResponse.map((Y)=>Y.fn);if($.trace?.map)$.trace=$.trace.map((Y)=>Y.fn);else $.trace=[];if($.error?.map)$.error=$.error.map((Y)=>Y.fn);if($.stop?.map)$.stop=$.stop.map((Y)=>Y.fn);return $},HM=($)=>({body:$.body,cookie:$.cookie,headers:$.headers,query:$.query,set:$.set,server:$.server,path:$.path,route:$.route,url:$.url}),rY=($,Y=302)=>Response.redirect($,Y),J6=Symbol("ElysiaFormData"),z9=Symbol("ElysiaRequestId"),nF=($)=>{let Y=new FormData;if(Y[J6]={},$)for(let[X,Q]of Object.entries($)){if(Array.isArray(Q)){Y[J6][X]=[];for(let W of Q){if(Q instanceof File)Y.append(X,Q,Q.name);else if(Q instanceof g7)Y.append(X,Q.value,Q.value?.name);else Y.append(X,Q);Y[J6][X].push(Q)}continue}if(Q instanceof File)Y.append(X,Q,Q.name);else if(Q instanceof g7)Y.append(X,Q.value,Q.value?.name);else Y.append(X,Q);Y[J6][X]=Q}return Y},r7=()=>{let $=crypto.randomUUID();return $.slice(0,8)+$.slice(24,32)},BM=($)=>{if(!$.length)return[];let Y=[];for(let X=0;X<$.length;X++){let Q=$[X];if(Q.checksum){if(Y.includes(Q.checksum))$.splice(X,1),X--;Y.push(Q.checksum)}}return $},S8=($,Y="scoped")=>{if(!$)return;if(Y==="scoped"){for(let X of $)if("scope"in X&&X.scope==="local")X.scope="scoped";return}for(let X of $)if("scope"in X)X.scope="global"},W9=($)=>{if($.charCodeAt($.length-1)===47)return $.slice(0,$.length-1);return $+"/"},m0=($)=>{if(!$)return!1;for(let Y in $)return!0;return!1},J9=($,{dynamic:Y=!1}={})=>{let X=encodeURIComponent($).replace(/%2F/g,"/");if(Y)X=X.replace(/%3A/g,":").replace(/%3F/g,"?");return X},xM=(()=>{if(typeof Bun==="undefined")return!0;let $=Bun.version.split(".");if(+$[0]<1||+$[1]<2||+$[2]<14)return!1;return!0})();var qM=typeof Bun!=="undefined"?Bun.env:typeof process!=="undefined"?process?.env:void 0,y7=Symbol("ElysiaErrorCode"),q9=(qM?.NODE_ENV??qM?.ENV)==="production";class y1{code;response;constructor($,Y){let X=Y??($ in WM?WM[$]:$);this.code=n7[$]??$,this.response=X}}var h7=($,Y)=>new y1($,Y);class tY extends Error{code="NOT_FOUND";status=404;constructor($){super($??"NOT_FOUND")}}class kM extends Error{code="PARSE";status=400;constructor($){super("Bad Request",{cause:$})}}class dY extends Error{key;code="INVALID_COOKIE_SIGNATURE";status=400;constructor($,Y){super(Y??`"${$}" has invalid cookie signature`);this.key=$}}var M2=($)=>{if(!$)return{summary:void 0};let{message:Y,path:X,value:Q,type:W}=$,J=X.slice(1).replaceAll("/","."),G=X==="";switch(W){case 42:return{...$,summary:G?"Value should not be provided":`Property '${J}' should not be provided`};case 45:return{...$,summary:G?"Value is missing":`Property '${J}' is missing`};case 50:let M=Y.indexOf("'"),U=Y.slice(M+1,Y.indexOf("'",M+1));return{...$,summary:G?"Value should be an email":`Property '${J}' should be ${U}`};case 54:return{...$,summary:`${Y.slice(0,9).trim()} property '${J}' to be ${Y.slice(8).trim()} but found: ${Q}`};case 62:let H=$.schema.anyOf.map((B)=>`'${B?.format??B.type}'`).join(", ");return{...$,summary:G?`Value should be one of ${H}`:`Property '${J}' should be one of: ${H}`};default:return{summary:Y,...$}}};class U9 extends Error{property;expected;message;code="INVALID_FILE_TYPE";status=422;constructor($,Y,X=`"${$}" has invalid file type`){super(X);this.property=$,this.expected=Y,this.message=X,Object.setPrototypeOf(this,U9.prototype)}toResponse($){if(q9)return new Response(JSON.stringify({type:"validation",on:"body"}),{status:422,headers:{...$,"content-type":"application/json"}});return new Response(JSON.stringify({type:"validation",on:"body",summary:"Invalid file type",message:this.message,property:this.property,expected:this.expected}),{status:422,headers:{...$,"content-type":"application/json"}})}}class g0 extends Error{type;validator;value;code="VALIDATION";status=422;constructor($,Y,X,Q){if(X&&typeof X==="object"&&X instanceof y1)X=X.response;let W=Q?.First()||(q9?void 0:("Errors"in Y)?Y.Errors(X).First():C0.Errors(Y,X).First()),J=W?.schema?.message||W?.schema?.error!==void 0?typeof W.schema.error==="function"?W.schema.error({type:$,validator:Y,value:X,get errors(){return[...Y.Errors(X)].map(M2)}}):W.schema.error:void 0,G=W?.path||"root",M="";if(J!==void 0)M=typeof J==="object"?JSON.stringify(J):J+"";else if(q9)M=JSON.stringify({type:"validation",on:$,summary:M2(W).summary,message:W?.message,found:X});else{let U=Y?.schema??Y,H="Errors"in Y?[...Y.Errors(X)].map(M2):[...C0.Errors(Y,X)].map(M2),B;try{B=C0.Create(U)}catch(A){B={type:"Could not create expected value",message:A?.message,error:A}}M=JSON.stringify({type:"validation",on:$,summary:M2(W).summary,property:G,message:W?.message,expected:B,found:X,errors:H},null,2)}super(M);this.type=$,this.validator=Y,this.value=X,Object.setPrototypeOf(this,g0.prototype)}get all(){return"Errors"in this.validator?[...this.validator.Errors(this.value)].map(M2):[...C0.Errors(this.validator,this.value)].map(M2)}static simplifyModel($){let Y="schema"in $?$.schema:$;try{return C0.Create(Y)}catch{return Y}}get model(){return g0.simplifyModel(this.validator)}toResponse($){return new Response(this.message,{status:400,headers:{...$,"content-type":"application/json"}})}}var V7=($,Y)=>{try{return JSON.parse($)}catch{throw new g0("property",Y,$)}};function t7($,Y){if(!D1.Has($))D1.Set($,Y);return(X={})=>J7({...X,[K]:$})}var Q6=($)=>{try{let Y=K2.Compile($);return Y.Create=()=>C0.Create($),Y.Error=(X)=>new g0("property",$,X,Y.Errors(X)),Y}catch{return{Check:(Y)=>C0.Check($,Y),CheckThrow:(Y)=>{if(!C0.Check($,Y))throw new g0("property",$,Y,C0.Errors($,Y))},Decode:(Y)=>C0.Decode($,Y),Create:()=>C0.Create($),Error:(Y)=>new g0("property",$,Y,C0.Errors($,Y))}}},NM=($)=>{if(typeof $==="string")switch($.slice(-1)){case"k":return+$.slice(0,$.length-1)*1024;case"m":return+$.slice(0,$.length-1)*1048576;default:return+$}return $},d7=($,Y)=>{if($.startsWith(Y))return!0;return Y.charCodeAt(Y.length-1)===42&&Y.charCodeAt(Y.length-2)===47&&$.startsWith(Y.slice(0,-1))},zM=!1,rF=()=>{if(!zM)console.warn("[Elysia] Attempt to validate file type without 'file-type'. This may lead to security risks. We recommend installing 'file-type' to properly validate file extension."),zM=!0},sY=async()=>Promise.resolve().then(() => (nG(),oG)).then(($)=>{return c7=$.fileTypeFromBlob,c7}).catch(rF),c7,tF=($)=>{if(c7)return c7($);return sY().then((Y)=>{if(Y)return Y($)})},gM=async($,Y,X=$?.name??"")=>{if(Array.isArray($))return await Promise.all($.map((W)=>gM(W,Y,X))),!0;if(!$)return!1;let Q=await tF($);if(!Q)throw new U9(X,Y);if(typeof Y==="string"){if(!d7(Q.mime,Y))throw new U9(X,Y)}for(let W=0;W<Y.length;W++)if(d7(Q.mime,Y[W]))return!0;throw new U9(X,Y)},cY=($,Y)=>{if(Y instanceof g7)return!0;if(!(Y instanceof Blob))return!1;if($.minSize&&Y.size<NM($.minSize))return!1;if($.maxSize&&Y.size>NM($.maxSize))return!1;if($.extension){if(typeof $.extension==="string")return d7(Y.type,$.extension);for(let X=0;X<$.extension.length;X++)if(d7(Y.type,$.extension[X]))return!0;return!1}return!0},z=Object.assign({},i2);t7("UnionEnum",($,Y)=>(typeof Y==="number"||typeof Y==="string"||Y===null)&&$.enum.includes(Y));var sF=t7("Files",($,Y)=>{if(!Array.isArray(Y))return cY($,Y);if($.minItems&&Y.length<$.minItems)return!1;if($.maxItems&&Y.length>$.maxItems)return!1;for(let X=0;X<Y.length;X++)if(!cY($,Y[X]))return!1;return!0}),aF=t7("ElysiaForm",({compiler:$,...Y},X)=>{if(!(X instanceof FormData))return!1;if($){if(!(J6 in X))throw new g0("property",Y,X);if(!$.Check(X[J6]))throw $.Error(X[J6])}return!0}),G5={String:($)=>i2.String($),Numeric:($)=>{let Y=i2.Number($),X=Q6(Y);return z.Transform(z.Union([z.String({format:"numeric",default:0}),z.Number($)],$)).Decode((Q)=>{let W=+Q;if(isNaN(W))return Q;if($&&!X.Check(W))throw X.Error(Q);return W}).Encode((Q)=>Q)},Integer:($)=>{let Y=i2.Integer($),X=Q6(Y);return z.Transform(z.Union([z.String({format:"integer",default:0}),i2.Integer($)],$)).Decode((Q)=>{let W=+Q;if(!X.Check(W))throw X.Error(W);return W}).Encode((Q)=>Q)},Date:($)=>{let Y=i2.Date($),X=Q6(Y),Q=$?.default?new Date($.default):void 0;return z.Transform(z.Union([i2.Date($),z.String({format:"date-time",default:Q?.toISOString()}),z.String({format:"date",default:Q?.toISOString()}),z.Number({default:Q?.getTime()})],$)).Decode((W)=>{if(typeof W==="number"){let G=new Date(W);if(!X.Check(G))throw X.Error(G);return G}if(W instanceof Date)return W;let J=new Date(PM(W));if(!J||isNaN(J.getTime()))throw new g0("property",Y,J);if(!X.Check(J))throw X.Error(J);return J}).Encode((W)=>W.toISOString())},BooleanString:($)=>{let Y=i2.Boolean($),X=Q6(Y);return z.Transform(z.Union([z.Boolean($),z.String({format:"boolean",default:!1})],$)).Decode((Q)=>{if(typeof Q==="string")return Q==="true";if(Q!==void 0&&!X.Check(Q))throw X.Error(Q);return Q}).Encode((Q)=>Q)},ObjectString:($,Y)=>{let X=z.Object($,Y),Q=Q6(X),W=JSON.stringify(Q.Create());return z.Transform(z.Union([z.String({format:"ObjectString",default:W}),X])).Decode((J)=>{if(typeof J==="string"){if(J.charCodeAt(0)!==123)throw new g0("property",X,J);if(!Q.Check(J=V7(J,X)))throw Q.Error(J);return Q.Decode(J)}return J}).Encode((J)=>{let G;if(typeof J==="string")J=V7(G=J,X);if(!Q.Check(J))throw Q.Error(J);return G??JSON.stringify(J)})},ArrayString:($=z.String(),Y)=>{let X=z.Array($,Y),Q=Q6(X),W=(J,G=!1)=>{if(J.charCodeAt(0)===91){if(!Q.Check(J=V7(J,X)))throw Q.Error(J);return Q.Decode(J)}if(J.indexOf(",")!==-1){if(!Q.Check(J))throw Q.Error(J);return Q.Decode(J)}if(G)return J;throw new g0("property",X,J)};return z.Transform(z.Union([z.String({format:"ArrayString",default:Y?.default}),X])).Decode((J)=>{if(Array.isArray(J)){let G=[];for(let M=0;M<J.length;M++){let U=J[M];if(typeof U==="string"){let H=W(U,!0);if(Array.isArray(H))G=G.concat(H);else G.push(H);continue}G.push(U)}return G}if(typeof J==="string")return W(J);return J}).Encode((J)=>{let G;if(typeof J==="string")J=V7(G=J,X);if(!Q.Check(J))throw new g0("property",X,J);return G??JSON.stringify(J)})},File:t7("File",cY),Files:($={})=>z.Transform(sF($)).Decode((Y)=>{if(Array.isArray(Y))return Y;return[Y]}).Encode((Y)=>Y),Nullable:($,Y)=>z.Union([$,z.Null()],Y),MaybeEmpty:($,Y)=>z.Union([$,z.Null(),z.Undefined()],Y),Cookie:($,{domain:Y,expires:X,httpOnly:Q,maxAge:W,path:J,priority:G,sameSite:M,secure:U,secrets:H,sign:B,...A}={})=>{let O=z.Object($,A);return O.config={domain:Y,expires:X,httpOnly:Q,maxAge:W,path:J,priority:G,sameSite:M,secure:U,secrets:H,sign:B},O},UnionEnum:($,Y={})=>{let X=$.every((Q)=>typeof Q==="string")?{type:"string"}:$.every((Q)=>typeof Q==="number")?{type:"number"}:$.every((Q)=>Q===null)?{type:"null"}:{};if($.some((Q)=>typeof Q==="object"&&Q!==null))throw new Error("This type does not support objects or arrays");return{default:$[0],...Y,[K]:"UnionEnum",...X,enum:$}},NoValidate:($,Y=!0)=>{return $.noValidate=Y,$},Form:($,Y={})=>{let X=z.Object($,{default:nF({}),...Y}),Q=Q6(X);return z.Union([X,aF({compiler:Q})])}};z.BooleanString=G5.BooleanString;z.ObjectString=G5.ObjectString;z.ArrayString=G5.ArrayString;z.Numeric=G5.Numeric;z.Integer=G5.Integer;z.File=($)=>{if($?.type)sY();return G5.File({default:"File",...$,extension:$?.type,type:"string",format:"binary"})};z.Files=($)=>{if($?.type)sY();return G5.Files({...$,elysiaMeta:"Files",default:"Files",extension:$?.type,type:"array",items:{...$,default:"Files",type:"string",format:"binary"}})};z.Nullable=($)=>G5.Nullable($);z.MaybeEmpty=G5.MaybeEmpty;z.Cookie=G5.Cookie;z.Date=G5.Date;z.UnionEnum=G5.UnionEnum;z.NoValidate=G5.NoValidate;z.Form=G5.Form;var eF=($)=>{if($.startsWith("async"))$=$.slice(5);$=$.trimStart();let Y=-1;if($.charCodeAt(0)===40){if(Y=$.indexOf("=>",$.indexOf(")")),Y!==-1){let W=Y;while(W>0)if($.charCodeAt(--W)===41)break;let J=$.slice(Y+2);if(J.charCodeAt(0)===32)J=J.trimStart();return[$.slice(1,W),J,{isArrowReturn:J.charCodeAt(0)!==123}]}}if(/^(\w+)=>/g.test($)){if(Y=$.indexOf("=>"),Y!==-1){let W=$.slice(Y+2);if(W.charCodeAt(0)===32)W=W.trimStart();return[$.slice(0,Y),W,{isArrowReturn:W.charCodeAt(0)!==123}]}}if($.startsWith("function")){Y=$.indexOf("(");let W=$.indexOf(")");return[$.slice(Y+1,W),$.slice(W+2),{isArrowReturn:!1}]}let X=$.indexOf("(");if(X!==-1){let W=$.indexOf(`
`,2),J=$.slice(0,W),G=J.lastIndexOf(")")+1,M=$.slice(W+1);return[J.slice(X,G),"{"+M,{isArrowReturn:!1}]}let Q=$.split(`
`,2);return[Q[0],Q[1],{isArrowReturn:!1}]},$S=($)=>{let Y=$.indexOf("{");if(Y===-1)return[-1,0];let X=Y+1,Q=1;for(;X<$.length;X++){let W=$.charCodeAt(X);if(W===123)Q++;else if(W===125)Q--;if(Q===0)break}if(Q!==0)return[0,$.length];return[Y,X+1]},YS=($)=>{let Y=$.lastIndexOf("}");if(Y===-1)return[-1,0];let X=Y-1,Q=1;for(;X>=0;X--){let W=$.charCodeAt(X);if(W===125)Q++;else if(W===123)Q--;if(Q===0)break}if(Q!==0)return[-1,0];return[X,Y+1]},fM=($)=>{while(!0){let Y=$.indexOf(":");if(Y===-1)break;let X=$.indexOf(",",Y);if(X===-1)X=$.indexOf("}",Y)-1;if(X===-2)X=$.length;$=$.slice(0,Y)+$.slice(X)}return $},vM=($)=>{let Y=!1;if($.charCodeAt(0)===40)$=$.slice(1,-1);if($.charCodeAt(0)===123)Y=!0,$=$.slice(1,-1);$=$.replace(/( |\t|\n)/g,"").trim();let X=[];while(!0){let[W,J]=$S($);if(W===-1)break;if(X.push($.slice(0,W-1)),$.charCodeAt(J)===44)J++;$=$.slice(J)}if($=fM($),$)X=X.concat($.split(","));let Q=Object.create(null);for(let W of X){if(W.indexOf(",")===-1){Q[W]=!0;continue}for(let J of W.split(","))Q[J.trim()]=!0}return{hasParenthesis:Y,parameters:Q}},XS=($,Y)=>{let{parameters:X,hasParenthesis:Q}=vM($);if(X.query)Y.query=!0;if(X.headers)Y.headers=!0;if(X.body)Y.body=!0;if(X.cookie)Y.cookie=!0;if(X.set)Y.set=!0;if(X.server)Y.server=!0;if(X.route)Y.route=!0;if(X.url)Y.url=!0;if(X.path)Y.path=!0;if(Q)return`{ ${Object.keys(X).join(", ")} }`;return Object.keys(X).join(", ")},AM=($,Y,X)=>{let Q=new RegExp(`${$.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}[\\n\\t,; ]`);if(X!==void 0)Q.lastIndex=X;let W=Q.exec(Y);return W?W.index:-1},yM=($,Y,X=0)=>{if(X>5)return[];let Q=[],W=Y;while(!0){let J=AM(" = "+$,W);if(J===-1)J=AM("="+$,W);if(J===-1){let H=W.indexOf(" = "+$);if(H===-1)H=W.indexOf("="+$);if(H+3+$.length!==W.length)break;J=H}let G=W.slice(0,J),M=G.lastIndexOf(" "),U=G.slice(M!==-1?M+1:-1);if(U==="}"){let[H,B]=YS(G);Q.push(fM(W.slice(H,B))),W=W.slice(J+3+$.length);continue}while(U.charCodeAt(0)===44)U=U.slice(1);while(U.charCodeAt(0)===9)U=U.slice(1);if(!U.includes("("))Q.push(U);W=W.slice(J+3+$.length)}for(let J of Q){if(J.charCodeAt(0)===123)continue;let G=yM(J,Y);if(G.length>0)Q.push(...G)}return Q},QS=($)=>{if(!$)return;if($.charCodeAt(0)!==123)return $;if($=$.slice(2,-2),!$.includes(",")){if($.indexOf("...")!==-1)return $.slice($.indexOf("...")+3);return}let Y=$.indexOf("...");if(Y===-1)return;return $.slice(Y+3).trimEnd()},WS=($,Y,X)=>{let Q=(W,J)=>new RegExp(`${J}\\.(${W})|${J}\\["${W}"\\]|${J}\\['${W}'\\]`).test($);for(let W of Y){if(!W)continue;if(W.charCodeAt(0)===123){let J=vM(W).parameters;if(J.query)X.query=!0;if(J.headers)X.headers=!0;if(J.body)X.body=!0;if(J.cookie)X.cookie=!0;if(J.set)X.set=!0;if(J.server)X.server=!0;if(J.url)X.url=!0;if(J.route)X.route=!0;if(J.path)X.path=!0;continue}if(!X.query&&(Q("query",W)||$.includes("return "+W)||$.includes("return "+W+".query")))X.query=!0;if(!X.headers&&Q("headers",W))X.headers=!0;if(!X.body&&Q("body",W))X.body=!0;if(!X.cookie&&Q("cookie",W))X.cookie=!0;if(!X.set&&Q("set",W))X.set=!0;if(!X.server&&Q("server",W))X.server=!0;if(!X.route&&Q("route",W))X.route=!0;if(!X.url&&Q("url",W))X.url=!0;if(!X.path&&Q("path",W))X.path=!0;if(X.query&&X.headers&&X.body&&X.cookie&&X.set&&X.server&&X.route&&X.url&&X.path)break}return Y},JS=($,Y,X)=>{try{let Q=new RegExp(`\\w\\((.*?)?${$}`,"gs");Q.test(Y);let W=Y.charCodeAt(Q.lastIndex);if(W===41||W===44)return X.query=!0,X.headers=!0,X.body=!0,X.cookie=!0,X.set=!0,X.server=!0,X.url=!0,X.route=!0,X.path=!0,!0;return!1}catch(Q){return console.log("[Sucrose] warning: unexpected isContextPassToFunction error, you may continue development as usual but please report the following to maintainers:"),console.log("--- body ---"),console.log(Y),console.log("--- context ---"),console.log($),!0}},E7,T7={},wM=($=0)=>{if(E7)clearTimeout(E7);E7=setTimeout(()=>{if(T7={},E7=void 0,e6)Bun.gc(!1)},$)},mY=($,Y)=>{return{body:$.body||Y.body,cookie:$.cookie||Y.cookie,headers:$.headers||Y.headers,query:$.query||Y.query,set:$.set||Y.set,server:$.server||Y.server,url:$.url||Y.url,route:$.route||Y.route,path:$.path||Y.path}},N9=($,Y={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1,url:!1,route:!1,path:!1})=>{let X=[];if($.request?.length)X.push(...$.request);if($.beforeHandle?.length)X.push(...$.beforeHandle);if($.parse?.length)X.push(...$.parse);if($.error?.length)X.push(...$.error);if($.transform?.length)X.push(...$.transform);if($.afterHandle?.length)X.push(...$.afterHandle);if($.mapResponse?.length)X.push(...$.mapResponse);if($.afterResponse?.length)X.push(...$.afterResponse);if($.handler&&typeof $.handler==="function")X.push($.handler);for(let Q=0;Q<X.length;Q++){let W=X[Q];if(!W)continue;let J=typeof W==="object"?W.fn:W;if(typeof J!=="function")continue;let G=J.toString(),M=t6(G),U=T7[M];if(U){Y=mY(Y,U);continue}let H={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1,url:!1,route:!1,path:!1},[B,A]=eF(G),O=XS(B,H),w=QS(O);if(w){let q=yM(w,A.slice(1,-1));q.splice(0,-1,w);let L=A;if(L.charCodeAt(0)===123&&L.charCodeAt(A.length-1)===125)L=L.slice(1,-1);if(!JS(w,L,H))WS(L,q,H);if(!H.query&&L.includes("return "+w+".query"))H.query=!0}if(!T7[M])T7[M]=H;if(Y=mY(Y,H),Y.query&&Y.headers&&Y.body&&Y.cookie&&Y.set&&Y.server&&Y.url&&Y.route&&Y.path)break}return Y},hM=o7(LF(),1),GS=o7(iY(),1);class W8{name;jar;initial;constructor($,Y,X={}){this.name=$,this.jar=Y,this.initial=X}get cookie(){return this.jar[this.name]??this.initial}set cookie($){if(!(this.name in this.jar))this.jar[this.name]=this.initial;this.jar[this.name]=$}get setCookie(){if(!(this.name in this.jar))this.jar[this.name]=this.initial;return this.jar[this.name]}set setCookie($){this.cookie=$}get value(){return this.cookie.value}set value($){this.setCookie.value=$}get expires(){return this.cookie.expires}set expires($){this.setCookie.expires=$}get maxAge(){return this.cookie.maxAge}set maxAge($){this.setCookie.maxAge=$}get domain(){return this.cookie.domain}set domain($){this.setCookie.domain=$}get path(){return this.cookie.path}set path($){this.setCookie.path=$}get secure(){return this.cookie.secure}set secure($){this.setCookie.secure=$}get httpOnly(){return this.cookie.httpOnly}set httpOnly($){this.setCookie.httpOnly=$}get sameSite(){return this.cookie.sameSite}set sameSite($){this.setCookie.sameSite=$}get priority(){return this.cookie.priority}set priority($){this.setCookie.priority=$}get partitioned(){return this.cookie.partitioned}set partitioned($){this.setCookie.partitioned=$}get secrets(){return this.cookie.secrets}set secrets($){this.setCookie.secrets=$}update($){return this.setCookie=Object.assign(this.cookie,typeof $==="function"?$(this.cookie):$),this}set($){return this.setCookie=Object.assign({...this.initial,value:this.value},typeof $==="function"?$(this.cookie):$),this}remove(){if(this.value===void 0)return;return this.set({expires:new Date(0),maxAge:0,value:""}),this}toString(){return typeof this.value==="object"?JSON.stringify(this.value):this.value?.toString()??""}}var OM=($,Y,X)=>{if(!$.cookie)$.cookie={};return new Proxy(Y,{get(Q,W){if(W in Y)return new W8(W,$.cookie,Object.assign({},X??{},Y[W]));return new W8(W,$.cookie,Object.assign({},X))}})},dM=async($,Y,{secrets:X,sign:Q,...W}={})=>{if(!Y)return OM($,{},W);let J=typeof X==="string";if(Q&&Q!==!0&&!Array.isArray(Q))Q=[Q];let G={},M=hM.parse(Y);for(let[U,H]of Object.entries(M)){if(H===void 0)continue;let B=GS.default(H);if(Q===!0||Q?.includes(U)){if(!X)throw new Error("No secret is provided to cookie plugin");if(J){let A=await GM(B,X);if(A===!1)throw new dY(U);B=A}else{let A=!0;for(let O=0;O<X.length;O++){let w=await GM(B,X[O]);if(w!==!1){A=!0,B=w;break}}if(!A)throw new dY(U)}}G[U]={value:B}}return OM($,G,W)},cM=($)=>{if(!$||!m0($))return;let Y=[];for(let[X,Q]of Object.entries($)){if(!X||!Q)continue;let W=Q.value;if(W===void 0||W===null)continue;Y.push(hM.serialize(X,typeof W==="object"?JSON.stringify(W):W+"",Q))}if(Y.length===0)return;if(Y.length===1)return Y[0];return Y},n0=($,Y)=>{if(!e6&&$ instanceof Promise)return $.then((Q)=>n0(Q,Y));let X=$.size;if(!Y&&X||X&&Y&&Y.status!==206&&Y.status!==304&&Y.status!==412&&Y.status!==416){if(Y){if(Y.headers instanceof Headers){let Q={"accept-ranges":"bytes","content-range":`bytes 0-${X-1}/${X}`,"transfer-encoding":"chunked"};if(f7)Q=Y.headers.toJSON();else{Q={};for(let[W,J]of Y.headers.entries())if(W in Y.headers)Q[W]=J}return new Response($,{status:Y.status,headers:Q})}if(m0(Y.headers))return new Response($,{status:Y.status,headers:Object.assign({"accept-ranges":"bytes","content-range":`bytes 0-${X-1}/${X}`,"transfer-encoding":"chunked"},Y.headers)})}return new Response($,{headers:{"accept-ranges":"bytes","content-range":`bytes 0-${X-1}/${X}`,"transfer-encoding":"chunked"}})}return new Response($)},mM=($,Y)=>{if(!$)return $;$.delete("set-cookie");for(let X=0;X<Y.length;X++){let Q=Y[X].indexOf("=");$.append("set-cookie",`${Y[X].slice(0,Q)}=${Y[X].slice(Q+1)||""}`)}return $},E8=($,Y)=>{if(Y?.headers){if($){if(f7)Object.assign(Y.headers,$.headers.toJSON());else for(let[X,Q]of $.headers.entries())if(X in Y.headers)Y.headers[X]=Q}if(Y.status===200)Y.status=$.status;if(Y.headers["content-encoding"])delete Y.headers["content-encoding"];return Y}if(!$)return{headers:{},status:Y?.status??200};if(f7){if(Y={headers:$.headers.toJSON(),status:Y?.status??200},Y.headers["content-encoding"])delete Y.headers["content-encoding"];return Y}Y={headers:{},status:Y?.status??200};for(let[X,Q]of $.headers.entries()){if(X==="content-encoding")continue;if(X in Y.headers)Y.headers[X]=Q}return Y},aY=({mapResponse:$,mapCompactResponse:Y})=>async(X,Q,W)=>{let J=X.next();if(J instanceof Promise)J=await J;if(typeof J?.done==="undefined"||J?.done){if(Q)return $(J.value,Q,W);return Y(J.value,W)}let G=J.value&&typeof J.value?.stream?"text/event-stream":J.value&&typeof J.value==="object"?"application/json":"text/plain";if(Q?.headers){if(!Q.headers["transfer-encoding"])Q.headers["transfer-encoding"]="chunked";if(!Q.headers["content-type"])Q.headers["content-type"]=G;if(!Q.headers["cache-control"])Q.headers["cache-control"]="no-cache"}else Q={status:200,headers:{"content-type":G,"transfer-encoding":"chunked","cache-control":"no-cache",connection:"keep-alive"}};return new Response(new ReadableStream({async start(M){let U=!1;if(W?.signal?.addEventListener("abort",()=>{U=!0;try{M.close()}catch{}}),J.value!==void 0&&J.value!==null)if(J.value.toStream)M.enqueue(J.value.toStream());else if(typeof J.value==="object")try{M.enqueue(Buffer.from(JSON.stringify(J.value)))}catch{M.enqueue(Buffer.from(J.value.toString()))}else M.enqueue(Buffer.from(J.value.toString()));for await(let H of X){if(U)break;if(H===void 0||H===null)continue;if(H.toStream)M.enqueue(H.toStream());else if(typeof H==="object")try{M.enqueue(Buffer.from(JSON.stringify(H)))}catch{M.enqueue(Buffer.from(H.toString()))}else M.enqueue(Buffer.from(H.toString()));await new Promise((B)=>setTimeout(()=>B(),0))}try{M.close()}catch{}}}),Q)};async function*b8($){let Y=$.body;if(!Y)return;let X=Y.getReader(),Q=new TextDecoder;try{while(!0){let{done:W,value:J}=await X.read();if(W)break;yield Q.decode(J)}}finally{X.releaseLock()}}var s7=($)=>{if(typeof $.status==="string")$.status=n7[$.status];if($.cookie&&m0($.cookie)){let Y=cM($.cookie);if(Y)$.headers["set-cookie"]=Y}if($.headers["set-cookie"]&&Array.isArray($.headers["set-cookie"]))$.headers=mM(new Headers($.headers),$.headers["set-cookie"])},uM=($)=>{let Y=aY($);return(X,Q,W)=>{let J=!1;if(Q.headers instanceof Headers)for(let M of Q.headers.keys())if(M==="set-cookie"){if(J)continue;J=!0;for(let U of Q.headers.getSetCookie())X.headers.append("set-cookie",U)}else X.headers.append(M,Q.headers?.get(M)??"");else for(let M in Q.headers)X.headers.append(M,Q.headers[M]);let G=Q.status??200;if(X.status!==G&&G!==200&&(X.status<=300||X.status>400))return X.text().then((M)=>{let U=new Response(M,{headers:X.headers,status:Q.status});if(!U.headers.has("content-length")&&U.headers.get("transfer-encoding")==="chunked")return Y(b8(U),E8(U,Q),W);return U});if(!X.headers.has("content-length")&&X.headers.get("transfer-encoding")==="chunked")return Y(b8(X),E8(X,Q),W);return X}},W5=($,Y,X)=>{if(m0(Y.headers)||Y.status!==200||Y.cookie)switch(s7(Y),$?.constructor?.name){case"String":return Y.headers["content-type"]="text/plain",new Response($,Y);case"Array":case"Object":return Y.headers["content-type"]="application/json",new Response(JSON.stringify($),Y);case"ElysiaFile":return n0($.value);case"File":return n0($,Y);case"Blob":return n0($,Y);case"ElysiaCustomStatusResponse":return Y.status=$.code,W5($.response,Y,X);case"ReadableStream":if(!Y.headers["content-type"]?.startsWith("text/event-stream"))Y.headers["content-type"]="text/event-stream; charset=utf-8";return X?.signal?.addEventListener("abort",{handleEvent(){if(X?.signal&&!X?.signal?.aborted)$.cancel()}},{once:!0}),new Response($,Y);case void 0:if(!$)return new Response("",Y);return new Response(JSON.stringify($),Y);case"Response":return m7($,Y,X);case"Error":return R8($,Y);case"Promise":return $.then((Q)=>W5(Q,Y,X));case"Function":return W5($(),Y,X);case"Number":case"Boolean":return new Response($.toString(),Y);case"Cookie":if($ instanceof W8)return new Response($.value,Y);return new Response($?.toString(),Y);case"FormData":return new Response($,Y);default:if($ instanceof Response)return m7($,Y,X);if($ instanceof Promise)return $.then((Q)=>W5(Q,Y));if($ instanceof Error)return R8($,Y);if($ instanceof y1)return Y.status=$.code,W5($.response,Y,X);if(typeof $?.next==="function")return C8($,Y,X);if(typeof $?.then==="function")return $.then((Q)=>W5(Q,Y));if(typeof $?.toResponse==="function")return W5($.toResponse(),Y);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!Y.headers["Content-Type"])Y.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),Y)}}return new Response($,Y)}if($ instanceof Response&&!$.headers.has("content-length")&&$.headers.get("transfer-encoding")==="chunked")return C8(b8($),E8($,Y),X);if(typeof $?.next==="function"||$ instanceof ReadableStream)return C8($,Y,X);return X8($,X)},X5=($,Y,X)=>{if($===void 0||$===null)return;if(m0(Y.headers)||Y.status!==200||Y.cookie)switch(s7(Y),$?.constructor?.name){case"String":return Y.headers["content-type"]="text/plain",new Response($,Y);case"Array":case"Object":return Y.headers["content-type"]="application/json",new Response(JSON.stringify($),Y);case"ElysiaFile":return n0($.value);case"File":return n0($,Y);case"Blob":return n0($,Y);case"ElysiaCustomStatusResponse":return Y.status=$.code,X5($.response,Y,X);case"ReadableStream":if(!Y.headers["content-type"]?.startsWith("text/event-stream"))Y.headers["content-type"]="text/event-stream; charset=utf-8";return X?.signal?.addEventListener("abort",{handleEvent(){if(X?.signal&&!X?.signal?.aborted)$.cancel()}},{once:!0}),new Response($,Y);case void 0:if(!$)return;return new Response(JSON.stringify($),Y);case"Response":return m7($,Y,X);case"Promise":return $.then((Q)=>X5(Q,Y));case"Error":return R8($,Y);case"Function":return X5($(),Y);case"Number":case"Boolean":return new Response($.toString(),Y);case"FormData":return new Response($);case"Cookie":if($ instanceof W8)return new Response($.value,Y);return new Response($?.toString(),Y);default:if($ instanceof Response)return m7($,Y,X);if($ instanceof Promise)return $.then((Q)=>X5(Q,Y));if($ instanceof Error)return R8($,Y);if($ instanceof y1)return Y.status=$.code,X5($.response,Y,X);if(typeof $?.next==="function")return C8($,Y,X);if(typeof $?.then==="function")return $.then((Q)=>X5(Q,Y));if(typeof $?.toResponse==="function")return X5($.toResponse(),Y);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!Y.headers["Content-Type"])Y.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),Y)}}return new Response($,Y)}else switch($?.constructor?.name){case"String":return Y.headers["content-type"]="text/plain",new Response($);case"Array":case"Object":return Y.headers["content-type"]="application/json",new Response(JSON.stringify($),Y);case"ElysiaFile":return n0($.value);case"File":return n0($,Y);case"Blob":return n0($,Y);case"ElysiaCustomStatusResponse":return Y.status=$.code,X5($.response,Y,X);case"ReadableStream":return X?.signal?.addEventListener("abort",{handleEvent(){if(X?.signal&&!X?.signal?.aborted)$.cancel()}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":if(!$.headers.has("content-length")&&$.headers.get("transfer-encoding")==="chunked")return C8(b8($),E8($),X);return $;case"Promise":return $.then((Q)=>{let W=X5(Q,Y);if(W!==void 0)return W});case"Error":return R8($,Y);case"Function":return X8($(),X);case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof W8)return new Response($.value,Y);return new Response($?.toString(),Y);case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Q)=>X5(Q,Y));if($ instanceof Error)return R8($,Y);if($ instanceof y1)return Y.status=$.code,X5($.response,Y,X);if(typeof $?.next==="function")return C8($,Y,X);if(typeof $?.then==="function")return $.then((Q)=>X5(Q,Y));if(typeof $?.toResponse==="function")return X5($.toResponse(),Y);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!Y.headers["Content-Type"])Y.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),Y)}}return new Response($)}},X8=($,Y)=>{switch($?.constructor?.name){case"String":return new Response($,{headers:{"Content-Type":"text/plain"}});case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});case"ElysiaFile":return n0($.value);case"File":return n0($);case"Blob":return n0($);case"ElysiaCustomStatusResponse":return W5($.response,{status:$.code,headers:{}});case"ReadableStream":return Y?.signal?.addEventListener("abort",{handleEvent(){if(Y?.signal&&!Y?.signal?.aborted)$.cancel()}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":if($.headers.get("transfer-encoding")==="chunked")return C8(b8($),E8($),Y);return $;case"Error":return R8($);case"Promise":return $.then((X)=>X8(X,Y));case"Function":return X8($(),Y);case"Number":case"Boolean":return new Response($.toString());case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((X)=>X8(X,Y));if($ instanceof Error)return R8($);if($ instanceof y1)return W5($.response,{status:$.code,headers:{}});if(typeof $?.next==="function")return C8($,void 0,Y);if(typeof $?.then==="function")return $.then((X)=>W5(X,set));if(typeof $?.toResponse==="function")return X8($.toResponse());if("charCodeAt"in $){let X=$.charCodeAt(0);if(X===123||X===91)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}})}return new Response($)}},R8=($,Y)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:Y?.status!==200?Y?.status??500:500,headers:Y?.headers}),MS=($,Y,X={})=>{if(typeof $==="function")return;let Q=W5($,{headers:X});if(!Y.parse?.length&&!Y.transform?.length&&!Y.beforeHandle?.length&&!Y.afterHandle?.length)return Q.clone.bind(Q)},m7=uM({mapResponse:W5,mapCompactResponse:X8}),C8=aY({mapResponse:W5,mapCompactResponse:X8}),uY={name:"web-standard",isWebStandard:!0,handler:{mapResponse:W5,mapEarlyResponse:X5,mapCompactResponse:X8,createStaticHandler:MS},composeHandler:{mapResponseContext:"c.request",preferWebstandardHeaders:!0,headers:`c.headers={}
for(const [k,v] of c.request.headers.entries())c.headers[k]=v
`,parser:{json($){if($)return`try{c.body=await c.request.json()}catch{}
`;return`c.body=await c.request.json()
`},text(){return`c.body=await c.request.text()
`},urlencoded(){return`c.body=parseQuery(await c.request.text())
`},arrayBuffer(){return`c.body=await c.request.arrayBuffer()
`},formData($){let Y=`
c.body={}
`;if($)Y+="let form;try{form=await c.request.formData()}catch{}";else Y+=`const form=await c.request.formData()
`;return Y+`for(const key of form.keys()){if(c.body[key]) continue
const value=form.getAll(key)
if(value.length===1)c.body[key]=value[0]
else c.body[key]=value}`}}},composeGeneralHandler:{parameters:"r",createContext($){let Y="",X="",Q=$.setHeaders;for(let G of Object.keys($.decorator))Y+=`,'${G}':decorator['${G}']`;let W=$.config.handler?.standardHostname??!0,J=!!$.event.trace?.length;if(X+=`const u=r.url,s=u.indexOf('/',${W?11:7}),qi=u.indexOf('?',s+1)
let p
if(qi===-1)p=u.substring(s)
else p=u.substring(s, qi)
`,J)X+=`const id=randomId()
`;if(X+="const c={request:r,store,qi,path:p,url:u,redirect,error:status,status,set:{headers:",X+=Object.keys(Q??{}).length?"Object.assign({},app.setHeaders)":"Object.create(null)",X+=",status:200}",$.inference.server)X+=",get server(){return app.getServer()}";if(J)X+=",[ELYSIA_REQUEST_ID]:id";return X+=Y,X+=`}
`,X},error404($,Y){let X="if(route===null)return ";if(Y)X+=`app.handleError(c,notFound,false,${this.parameters})`;else X+=$?"new Response(error404Message,{status:c.set.status===200?404:c.set.status,headers:c.set.headers})":"error404.clone()";return{declare:Y?"":`const error404Message=notFound.message.toString()
const error404=new Response(error404Message,{status:404})
`,code:X}}},composeError:{mapResponseContext:"",validationError:"return new Response(error.message,{headers:Object.assign({'content-type':'application/json'},set.headers),status:set.status})",unknownError:"return new Response(error.message,{headers:set.headers,status:error.status??set.status??500})"},listen(){return()=>{throw new Error("WebStandard does not support listen, you might want to export default Elysia.fetch instead")}}},US=o7(iY(),1),u7=o7(iY(),1);function HS($,Y=0){let X=Object.create(null),Q=1,W=2,J=4,G=8,M=0,U=Y-1,H=U,B=$.length;for(let O=Y;O<B;O++)switch($.charCodeAt(O)){case 38:A(O),U=O,H=O,M=0;break;case 61:if(H<=U)H=O;else M|=8;break;case 43:if(H>U)M|=4;else M|=1;break;case 37:if(H>U)M|=8;else M|=2;break}return A(B),X;function A(O){let w=H>U,q=w?H:O;if(q<=U+1)return;let L=$.slice(U+1,q);if(M&1)L=L.replace(/\+/g," ");if(M&2)L=u7.default(L)||L;if(X[L]!==void 0)return;let j="";if(w){if(j=$.slice(H+1,O),M&4)j=j.replace(/\+/g," ");if(M&8)j=u7.default(j)||j}X[L]=j}}function x7($){let Y=Object.create(null),X=0,Q=1,W=2,J=4,G=8,M=$.length,U=-1,H=-1;for(let A=0;A<M;A++)switch($.charCodeAt(A)){case 38:B($,A),U=A,H=A,X=0;break;case 61:if(H<=U)H=A;else X|=G;break;case 43:if(H>U)X|=J;else X|=Q;break;case 37:if(H>U)X|=G;else X|=W;break}if(U<M)B($,M);return Y;function B(A,O){let w=H>U,q=w?H:O,L=A.slice(U+1,q);if(!w&&L.length===0)return;let j=L;if(X&Q)j=j.replace(/\+/g," ");if(X&W)j=u7.default(j)||j;let h="";if(w){let I=A.slice(H+1,O);if(X&J)I=I.replace(/\+/g," ");if(X&G)I=u7.default(I)||I;h=I}let V=Y[j];if(V===void 0)Y[j]=h;else if(Array.isArray(V))V.push(h);else Y[j]=[V,h]}}var a7=Symbol("ElysiaTrace"),e2=()=>{let{promise:$,resolve:Y}=Promise.withResolvers(),{promise:X,resolve:Q}=Promise.withResolvers(),{promise:W,resolve:J}=Promise.withResolvers(),G=[],M=[];return[(U)=>{if(U)G.push(U);return $},(U)=>{let H=[],B=[],A=null;for(let w=0;w<(U.total??0);w++){let{promise:q,resolve:L}=Promise.withResolvers(),{promise:j,resolve:h}=Promise.withResolvers(),{promise:V,resolve:I}=Promise.withResolvers(),o=[],Q0=[];H.push((g)=>{if(g)o.push(g);return q}),B.push((g)=>{let x={...g,end:j,error:V,index:w,onStop(f){if(f)Q0.push(f);return j}};L(x);for(let f=0;f<o.length;f++)o[f](x);return(f=null)=>{let C=performance.now();if(f)A=f;let l={end:C,error:f,get elapsed(){return C-g.begin}};for(let $0=0;$0<Q0.length;$0++)Q0[$0](l);h(C),I(f)}})}let O={...U,end:X,error:W,onEvent(w){for(let q=0;q<H.length;q++)H[q](w)},onStop(w){if(w)M.push(w);return X}};Y(O);for(let w=0;w<G.length;w++)G[w](O);return{resolveChild:B,resolve(w=null){let q=performance.now();if(!w&&A)w=A;let L={end:q,error:w,get elapsed(){return q-U.begin}};for(let j=0;j<M.length;j++)M[j](L);Q(q),J(w)}}}]},BS=($)=>{return(Y)=>{let[X,Q]=e2(),[W,J]=e2(),[G,M]=e2(),[U,H]=e2(),[B,A]=e2(),[O,w]=e2(),[q,L]=e2(),[j,h]=e2(),[V,I]=e2();return $({id:Y[z9],context:Y,set:Y.set,onRequest:X,onParse:W,onTransform:G,onBeforeHandle:U,onHandle:B,onAfterHandle:O,onMapResponse:j,onAfterResponse:V,onError:q,time:Date.now(),store:Y.store}),{request:Q,parse:J,transform:M,beforeHandle:H,handle:A,afterHandle:w,error:L,mapResponse:h,afterResponse:I}}},J5=Symbol.for("TypeBox.Kind"),qS=Symbol.for("TypeBox.Hint"),lM=($)=>/(\ |-|\t|\n)/.test($),pM=($,Y,X=!1)=>{if(typeof Y==="number")return`${$}[${Y}]`;if(lM(Y))return`${$}${X?"?.":""}["${Y}"]`;return`${$}${X?"?":""}.${Y}`},NS=($)=>lM($)?`"${$}"`:$,DM=($,Y=0,X)=>{if(X.type!=="string"||X.const||X.trusted)return $;let Q="";for(let W=Y-1;W>=0;W--)Q+=`d.h${W}(`;return Q+$+")".repeat(Y)},iM=($)=>{if(!$.allOf||J5 in $&&($[J5]!=="Intersect"||$.type!=="object"))return $;let{allOf:Y,...X}=$;if(X.properties={},J5 in X)X[J5]="Object";for(let Q of Y){if(Q.type!=="object")continue;let{properties:W,required:J,type:G,[J5]:M,...U}=Q;if(J)X.required=X.required?X.required.concat(J):J;Object.assign(X,U);for(let H in Q.properties)X.properties[H]=iM(Q.properties[H])}return X},zS=($,Y,X)=>{let Q=$.patternProperties["^(.*)$"]??$.patternProperties[Object.keys($.patternProperties)[0]];if(!Q)return Y;let W=X.array;return X.array++,`(()=>{const ar${W}s=Object.keys(${Y}),ar${W}v={};for(let i=0;i<ar${W}s.length;i++){const ar${W}p=${Y}[ar${W}s[i]];ar${W}v[ar${W}s[i]]=${$8(Q,`ar${W}p`,X)}}return ar${W}v})()`},AS=($,Y,X)=>{let Q=X.array;X.array++;let W=Y==="v"&&!X.unions.length,J="";if(!W)J="(()=>{";J+=`const ar${Q}v=[`;for(let G=0;G<$.length;G++){if(G!==0)J+=",";J+=$8($[G],pM(Y,G,X.parentIsOptional),X)}if(J+="];",!W)J+=`return ar${Q}v})()`;return J};function l7($,Y=new WeakMap){if($===null||typeof $!=="object"||typeof $==="function")return $;if(Y.has($))return Y.get($);if(Array.isArray($)){let X=new Array($.length);Y.set($,X);for(let Q=0;Q<$.length;Q++)X[Q]=l7($[Q],Y);return X}if(typeof $==="object"){let X=Object.keys($).concat(Object.getOwnPropertySymbols($)),Q={};for(let W of X)Q[W]=l7($[W],Y);return Q}return $}var wS=($,Y,X)=>{if(X.TypeCompiler===void 0){if(!X.typeCompilerWanred)console.warn(new Error("[exact-mirror] TypeBox's TypeCompiler is required to use Union")),X.typeCompilerWanred=!0;return Y}X.unionKeys[Y]=1;let Q=X.unions.length,W=X.unions[Q]=[],J=`(()=>{
`,G=(M)=>{if(!(J5 in M)||!M.$ref)return M;if(M[J5]==="This")return l7(X.definitions[M.$ref]);else if(M[J5]==="Ref")if(!X.modules)console.warn(new Error("[exact-mirror] modules is required when using nested cyclic reference"));else return X.modules.Import(M.$ref);return M};for(let M=0;M<$.length;M++){let U=G($[M]);if(Array.isArray(U.anyOf))for(let H=0;H<U.anyOf.length;H++)U.anyOf[H]=G(U.anyOf[H]);else if(U.items)if(Array.isArray(U.items))for(let H=0;H<U.items.length;H++)U.items[H]=G(U.items[H]);else U.items=G(U.items);W.push(K2.Compile(U)),J+=`if(d.unions[${Q}][${M}].Check(${Y})){return ${$8(U,Y,{...X,recursion:X.recursion+1,parentIsOptional:!0})}}
`}return J+=`return ${X.removeUnknownUnionType?"undefined":Y}})()`,J},$8=($,Y,X)=>{if(!$)return"";let Q=Y==="v"&&!X.unions.length;if(J5 in $&&$[J5]==="Import"&&$.$ref in $.$defs)return $8($.$defs[$.$ref],Y,{...X,definitions:Object.assign(X.definitions,$.$defs)});if(Q&&$.type!=="object"&&$.type!=="array"&&!$.anyOf)return`return ${DM("v",X.sanitize?.length,$)}`;if(X.recursion>=X.recursionLimit)return Y;let W="";if($.$id&&qS in $)X.definitions[$.$id]=$;switch($.type){case"object":if($[J5]==="Record"){W=zS($,Y,X);break}if($=iM($),W+="{",$.additionalProperties)W+=`...${Y}`;let J=Object.keys($.properties);for(let H=0;H<J.length;H++){let B=J[H],A=$.required&&!$.required.includes(B)||Array.isArray($.properties[B].anyOf),O=pM(Y,B,X.parentIsOptional);if(A){let q=X.array;if(Y.startsWith("ar")){let L=O.slice(O.indexOf(".")+1),j=X.optionalsInArray;if(j[q])j[q].push(L);else j[q]=[L]}else X.optionals.push(O)}let w=$.properties[B];if($.additionalProperties&&w.type!=="object")continue;if(H!==0)W+=",";W+=`${NS(B)}:${A?`${O}===undefined?undefined:`:""}${$8(w,O,{...X,recursion:X.recursion+1,parentIsOptional:A})}`}W+="}";break;case"array":if($.items.type!=="object"&&$.items.type!=="array")if(Array.isArray($.items)){W=AS($.items,Y,X);break}else if(Q)return"return v";else if(J5 in $.items&&$.items.$ref&&($.items[J5]==="Ref"||$.items[J5]==="This"))W=$8(l7(X.definitions[$.items.$ref]),Y,{...X,parentIsOptional:!0,recursion:X.recursion+1});else{W=Y;break}let G=X.array;X.array++;let M=Y;if(Q)W=`const ar${G}v=new Array(${Y}.length);`;else M=`ar${G}s`,W=`((${M})=>{const ar${G}v=new Array(${M}.length);`;W+=`for(let i=0;i<${M}.length;i++){const ar${G}p=${M}[i];ar${G}v[i]=${$8($.items,`ar${G}p`,X)}`;let U=X.optionalsInArray[G+1];if(U)for(let H=0;H<U.length;H++){let B=`ar${G}v[i].${U[H]}`;W+=`;if(${B}===undefined)delete ${B}`}if(W+="}",!Q)W+=`return ar${G}v})(${Y})`;break;default:if($.$ref&&$.$ref in X.definitions)return $8(X.definitions[$.$ref],Y,X);if(Array.isArray($.anyOf)){W=wS($.anyOf,Y,X);break}W=DM(Y,X.sanitize?.length,$);break}if(!Q)return W;if($.type==="array")return`${W}return ar0v`;W=`const x=${W}
`;for(let J=0;J<X.optionals.length;J++){let G=X.optionals[J],M=G.slice(1);if(W+=`if(${G}===undefined`,X.unionKeys[G])W+=`||x${M}===undefined`;W+=`)delete x${M.charCodeAt(0)!==63?"?":""}${M}
`}return`${W}return x`},LM=($,{TypeCompiler:Y,modules:X,definitions:Q,sanitize:W,recursionLimit:J=8,removeUnknownUnionType:G=!1}={})=>{let M=[];if(typeof W==="function")W=[W];let U=$8($,"v",{optionals:[],optionalsInArray:[],array:0,parentIsOptional:!1,unions:M,unionKeys:{},TypeCompiler:Y,modules:X,definitions:Q??X?.$defs??{},sanitize:W,recursion:0,recursionLimit:J,removeUnknownUnionType:G});if(!M.length&&!W?.length)return Function("v",U);let H;if(W?.length){H={};for(let B=0;B<W.length;B++)H[`h${B}`]=W[B]}return Function("d",`return function mirror(v){${U}}`)({unions:M,...H})},lY=($)=>{if(!$)return!1;if($?.[K]==="Import"&&$.References)return $.References().some(lY);if($.schema)$=$.schema;return!!$&&B1 in $},R2=($)=>{if(!$)return!1;let Y=$?.schema??$;if(Y[K]==="Import"&&$.References)return $.References().some(R2);if(Y.anyOf)return Y.anyOf.some(R2);if(Y.someOf)return Y.someOf.some(R2);if(Y.allOf)return Y.allOf.some(R2);if(Y.not)return Y.not.some(R2);if(Y.type==="object"){let X=Y.properties;if("additionalProperties"in Y)return Y.additionalProperties;if("patternProperties"in Y)return!1;for(let Q of Object.keys(X)){let W=X[Q];if(W.type==="object"){if(R2(W))return!0}else if(W.anyOf){for(let J=0;J<W.anyOf.length;J++)if(R2(W.anyOf[J]))return!0}return W.additionalProperties}return!1}if(Y.type==="array"&&Y.items&&!Array.isArray(Y.items))return R2(Y.items);return!1},_8=($,Y)=>{if(!Y)return!1;if(K in Y&&Y[K]===$)return!0;if(Y.type==="object"){let X=Y.properties;if(!X)return!1;for(let Q of Object.keys(X)){let W=X[Q];if(W.type==="object"){if(_8($,W))return!0}else if(W.anyOf){for(let J=0;J<W.anyOf.length;J++)if(_8($,W.anyOf[J]))return!0}if(K in W&&W[K]===$)return!0}return!1}return!!Y.properties&&K in Y.properties&&Y.properties[K]===$},H9=($,Y)=>{if(!Y)return;let X=Y.schema??Y;if(X[K]==="Import"&&Y.References)return Y.References().some((Q)=>H9($,Q));if(X.type==="object"){let Q=X.properties;if(!Q)return!1;for(let W of Object.keys(Q)){let J=Q[W];if($ in J)return!0;if(J.type==="object"){if(H9($,J))return!0}else if(J.anyOf){for(let G=0;G<J.anyOf.length;G++)if(H9($,J.anyOf[G]))return!0}}return!1}return $ in X},P2=($)=>{if(!$)return!1;if($.oneOf){for(let Y=0;Y<$.oneOf.length;Y++)if(P2($.oneOf[Y]))return!0}if($.anyOf){for(let Y=0;Y<$.anyOf.length;Y++)if(P2($.anyOf[Y]))return!0}if($.oneOf){for(let Y=0;Y<$.oneOf.length;Y++)if(P2($.oneOf[Y]))return!0}if($.allOf){for(let Y=0;Y<$.allOf.length;Y++)if(P2($.allOf[Y]))return!0}if($.not&&P2($.not))return!0;if($.type==="object"&&$.properties){let Y=$.properties;for(let X of Object.keys(Y)){let Q=Y[X];if(P2(Q))return!0;if(Q.type==="array"&&Q.items&&P2(Q.items))return!0}}if($.type==="array"&&$.items&&P2($.items))return!0;return $[K]==="Ref"&&"$ref"in $},G2=($)=>{if(!$)return!1;if($.$ref&&$.$defs&&$.$ref in $.$defs&&G2($.$defs[$.$ref]))return!0;if($.oneOf){for(let Y=0;Y<$.oneOf.length;Y++)if(G2($.oneOf[Y]))return!0}if($.anyOf){for(let Y=0;Y<$.anyOf.length;Y++)if(G2($.anyOf[Y]))return!0}if($.allOf){for(let Y=0;Y<$.allOf.length;Y++)if(G2($.allOf[Y]))return!0}if($.not&&G2($.not))return!0;if($.type==="object"&&$.properties){let Y=$.properties;for(let X of Object.keys(Y)){let Q=Y[X];if(G2(Q))return!0;if(Q.type==="array"&&Q.items&&G2(Q.items))return!0}}if($.type==="array"&&$.items&&G2($.items))return!0;return k0 in $},p7=($,Y,X={})=>{let Q=X;if(Q.root=!0,!Array.isArray(Y))return Y.original=$,E1($,Y,Q);for(let W of Y)W.original=$,$=E1($,W,Q);return $},E1=($,Y,X)=>{if(!$)return $;let Q=X.root;if(Y.untilObjectFound&&!Q&&$.type==="object")return $;let W=Y.from[K];if($.oneOf){for(let M=0;M<$.oneOf.length;M++)$.oneOf[M]=E1($.oneOf[M],Y,X);return $}if($.anyOf){for(let M=0;M<$.anyOf.length;M++)$.anyOf[M]=E1($.anyOf[M],Y,X);return $}if($.allOf){for(let M=0;M<$.allOf.length;M++)$.allOf[M]=E1($.allOf[M],Y,X);return $}if($.not)return E1($.not,Y,X);let J=Q&&!!Y.excludeRoot;if($[K]===W){let{anyOf:M,oneOf:U,allOf:H,not:B,properties:A,items:O,...w}=$,q=Y.to(w);if(!q)return $;let L,j=(V)=>{let I=h(V);if(I.$id)delete I.$id;return I},h=(V)=>{if(A&&V.type==="object"){let o={};for(let[Q0,g]of Object.entries(A))o[Q0]=E1(g,Y,{...X,root:!1});return{...w,...V,properties:o}}if(O&&V.type==="array")return{...w,...V,items:E1(O,Y,{...X,root:!1})};let I={...w,...V};if(delete I.required,A&&V.type==="string"&&V.format==="ObjectString"&&V.default==="{}")L=z.ObjectString(A,w),I.default=JSON.stringify(C0.Create(z.Object(A))),I.properties=A;if(O&&V.type==="string"&&V.format==="ArrayString"&&V.default==="[]")L=z.ArrayString(O,w),I.default=JSON.stringify(C0.Create(z.Array(O))),I.items=O;return I};if(J){if(A){let V={};for(let[I,o]of Object.entries(A))V[I]=E1(o,Y,{...X,root:!1});return{...w,properties:V}}else if(O?.map)return{...w,items:O.map((V)=>E1(V,Y,{...X,root:!1}))};return w}if(q.anyOf)for(let V=0;V<q.anyOf.length;V++)q.anyOf[V]=j(q.anyOf[V]);else if(q.oneOf)for(let V=0;V<q.oneOf.length;V++)q.oneOf[V]=j(q.oneOf[V]);else if(q.allOf)for(let V=0;V<q.allOf.length;V++)q.allOf[V]=j(q.allOf[V]);else if(q.not)q.not=j(q.not);if(L)q[k0]=L[k0];if(q.anyOf||q.oneOf||q.allOf||q.not)return q;if(A){let V={};for(let[I,o]of Object.entries(A))V[I]=E1(o,Y,{...X,root:!1});return{...w,...q,properties:V}}else if(O?.map)return{...w,...q,items:O.map((V)=>E1(V,Y,{...X,root:!1}))};return{...w,...q}}let G=$?.properties;if(G&&Q&&Y.rootOnly!==!0)for(let[M,U]of Object.entries(G))switch(U[K]){case W:let{anyOf:H,oneOf:B,allOf:A,not:O,type:w,...q}=U,L=Y.to(q);if(!L)return $;if(L.anyOf)for(let j=0;j<L.anyOf.length;j++)L.anyOf[j]={...q,...L.anyOf[j]};else if(L.oneOf)for(let j=0;j<L.oneOf.length;j++)L.oneOf[j]={...q,...L.oneOf[j]};else if(L.allOf)for(let j=0;j<L.allOf.length;j++)L.allOf[j]={...q,...L.allOf[j]};else if(L.not)L.not={...q,...L.not};G[M]={...q,...E1(q,Y,{...X,root:!1})};break;case"Object":case"Union":G[M]=E1(U,Y,{...X,root:!1});break;default:if(Array.isArray(U.items))for(let j=0;j<U.items.length;j++)U.items[j]=E1(U.items[j],Y,{...X,root:!1});else if(U.anyOf||U.oneOf||U.allOf||U.not)G[M]=E1(U,Y,{...X,root:!1});else if(U.type==="array")U.items=E1(U.items,Y,{...X,root:!1});break}return $},Q9=($)=>(Y)=>{if(typeof Y==="object")try{return C0.Clean($,Y)}catch{try{return C0.Clean($,Y)}catch{return Y}}return Y},S1=($,{models:Y={},dynamic:X=!1,modules:Q,normalize:W=!1,additionalProperties:J=!1,coerce:G=!1,additionalCoerce:M=[],validators:U,sanitize:H}={})=>{if(U=U?.filter((L)=>L),!$){if(!U?.length)return;$=U[0],U=U.slice(1)}let B=void 0,A=(L)=>{if(G)return p7(L,[{from:z.Number(),to:(j)=>z.Numeric(j),untilObjectFound:!0},{from:z.Boolean(),to:(j)=>z.BooleanString(j),untilObjectFound:!0},...Array.isArray(M)?M:[M]]);return p7(L,M)},O=(L)=>{let j;if(!L)return;if(typeof L!=="string")j=L;else{let V=L.endsWith("[]"),I=V?L.substring(0,L.length-2):L;if(j=Q?.Import(I)??Y[I],V)j=z.Array(j)}if(!j)return;let h;if(j[K]!=="Import"&&(h=P2(j))){let V=r7();if(B===void 0)B=h;j=z.Module({...Q?.$defs,[V]:j}).Import(V)}if(j[K]==="Import"){let V={};for(let[o,Q0]of Object.entries(j.$defs))V[o]=A(Q0);let I=j.$ref;j=z.Module(V).Import(I)}else if(G||M)j=A(j);return j},w=O($);if(U?.length){let L=!1,{schema:j,notObjects:h}=DS([w,...U.map(O)]);if(h){if(w=z.Intersect([...j?[j]:[],...h.map((V)=>{let I=O(V);if(I.type==="object"&&"additionalProperties"in I){if(!L&&I.additionalProperties===!1)L=!0;delete I.additionalProperties}return I})]),w.type==="object"&&L)w.additionalProperties=!1}}else if(w.type==="object"&&"additionalProperties"in w===!1)w.additionalProperties=J;if(X){let L={schema:w,references:"",checkFunc:()=>{},code:"",Check:(j)=>C0.Check(w,j),Errors:(j)=>C0.Errors(w,j),Code:()=>"",Clean:Q9(w),Decode:(j)=>C0.Decode(w,j),Encode:(j)=>C0.Encode(w,j),get hasAdditionalProperties(){if("~hasAdditionalProperties"in this)return this["~hasAdditionalProperties"];return this["~hasAdditionalProperties"]=R2(w)},get hasDefault(){if("~hasDefault"in this)return this["~hasDefault"];return this["~hasDefault"]=H9("default",w)},get isOptional(){if("~isOptional"in this)return this["~isOptional"];return this["~isOptional"]=lY(w)},get hasTransform(){if("~hasTransform"in this)return this["~hasTransform"];return this["~hasTransform"]=G2(w)},"~hasRef":B,get hasRef(){if("~hasRef"in this)return this["~hasRef"];return this["~hasRef"]=G2(w)}};if(w.config){if(L.config=w.config,L?.schema?.config)delete L.schema.config}if(W&&w.additionalProperties===!1)if(W===!0||W==="exactMirror")try{L.Clean=LM(w,{TypeCompiler:K2,sanitize:H?.(),modules:Q})}catch{console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.warn(w),L.Clean=Q9(w)}else L.Clean=Q9(w);return L.parse=(j)=>{try{return L.Decode(j)}catch(h){throw[...L.Errors(j)].map(M2)}},L.safeParse=(j)=>{try{return{success:!0,data:L.Decode(j),error:null}}catch(h){let V=[...q.Errors(j)].map(M2);return{success:!1,data:null,error:V[0]?.summary,errors:V}}},L}let q=K2.Compile(w,Object.values(Y));if(w.config){if(q.config=w.config,q?.schema?.config)delete q.schema.config}if(W===!0||W==="exactMirror")try{q.Clean=LM(w,{TypeCompiler:K2,sanitize:H?.(),modules:Q})}catch(L){console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.warn(w),q.Clean=Q9(w)}else q.Clean=Q9(w);return q.parse=(L)=>{try{return q.Decode(L)}catch(j){throw[...q.Errors(L)].map(M2)}},q.safeParse=(L)=>{try{return{success:!0,data:q.Decode(L),error:null}}catch(j){let h=[...q.Errors(L)].map(M2);return{success:!1,data:null,error:h[0]?.summary,errors:h}}},Object.assign(q,{get hasAdditionalProperties(){if("~hasAdditionalProperties"in this)return this["~hasAdditionalProperties"];return this["~hasAdditionalProperties"]=R2(q)},get hasDefault(){if("~hasDefault"in this)return this["~hasDefault"];return this["~hasDefault"]=H9("default",q)},get isOptional(){if("~isOptional"in this)return this["~isOptional"];return this["~isOptional"]=lY(q)},get hasTransform(){if("~hasTransform"in this)return this["~hasTransform"];return this["~hasTransform"]=G2(w)},get hasRef(){if("~hasRef"in this)return this["~hasRef"];return this["~hasRef"]=P2(w)},"~hasRef":B}),q},OS=($)=>$[K]==="Union"||!$.schema&&!!$.anyOf,DS=($)=>{if($.length===0)return{schema:void 0,notObjects:[]};if($.length===1)return $[0].type==="object"?{schema:$[0],notObjects:[]}:{schema:void 0,notObjects:$};let Y,X=[],Q=!1,W=!1;for(let J of $){if(J.type!=="object"){X.push(J);continue}if("additionalProperties"in J){if(J.additionalProperties===!0)Q=!0;else if(J.additionalProperties===!1)W=!0}if(!Y){Y=J;continue}Y={...Y,...J,properties:{...Y.properties,...J.properties},required:[...Y?.required??[],...J.required]}}if(Y){if(Y.required)Y.required=[...new Set(Y.required)];if(W)Y.additionalProperties=!1;else if(Q)Y.additionalProperties=!0}return{schema:Y,notObjects:X}},ZM=($,{models:Y={},modules:X,dynamic:Q=!1,normalize:W=!1,additionalProperties:J=!1,validators:G=[],sanitize:M})=>{if(G=G.filter((B)=>B),!$){if(!G?.length)return;$=G[0],G=G.slice(1)}let U;if(typeof $!=="string")U=$;else{let B=$.endsWith("[]"),A=B?$.substring(0,$.length-2):$;if(U=X.Import(A)??Y[A],B)U=z.Array(U)}if(!U)return;if(K in U)return{200:S1(U,{modules:X,models:Y,additionalProperties:J,dynamic:Q,normalize:W,coerce:!1,additionalCoerce:[],validators:G.map((B)=>B[200]),sanitize:M})};let H={};return Object.keys(U).forEach((B)=>{if(isNaN(+B))return;let A=U[+B];if(typeof A==="string"){if(A in Y){let O=Y[A];H[+B]=K in O?S1(O,{modules:X,models:Y,additionalProperties:J,dynamic:Q,normalize:W,coerce:!1,additionalCoerce:[],validators:G.map((w)=>w[+B]),sanitize:M}):O}return}H[+B]=K in A?S1(A,{modules:X,models:Y,additionalProperties:J,dynamic:Q,normalize:W,coerce:!1,additionalCoerce:[],validators:G.map((O)=>O[+B]),sanitize:M}):A}),H},xY,W6=()=>{if(!xY)xY=[{from:z.Object({}),to:()=>z.ObjectString({}),excludeRoot:!0},{from:z.Array(z.Any()),to:()=>z.ArrayString(z.Any())}];return xY},kY,pY=()=>{if(!kY)kY=[{from:z.Number(),to:($)=>z.Numeric($),rootOnly:!0},{from:z.Boolean(),to:($)=>z.BooleanString($),rootOnly:!0}];return kY},oM=({validator:$,modules:Y,defaultConfig:X={},config:Q,dynamic:W,models:J,validators:G,sanitize:M})=>{let U=S1($,{modules:Y,dynamic:W,models:J,additionalProperties:!0,coerce:!0,additionalCoerce:W6(),validators:G,sanitize:M});if(U)U.config=bM(U.config,Q);else U=S1(z.Cookie(z.Any()),{modules:Y,dynamic:W,models:J,additionalProperties:!0,validators:G,sanitize:M}),U.config=X;return U},b7=($)=>$[K]==="Import"&&$.$defs[$.$ref][K]==="Object"?$.$defs[$.$ref]:$,M1=($,Y)=>Y?$:"",LS=["json","text","urlencoded","arrayBuffer","formdata","application/json","text/plain","application/x-www-form-urlencoded","application/octet-stream","multipart/form-data"],eY=({context:$="c",trace:Y=[],addFn:X})=>{if(!Y.length)return()=>{return{resolveChild(){return()=>{}},resolve(){}}};for(let Q=0;Q<Y.length;Q++)X(`let report${Q},reportChild${Q},reportErr${Q},reportErrChild${Q};let trace${Q}=${$}[ELYSIA_TRACE]?.[${Q}]??trace[${Q}](${$});
`);return(Q,{name:W,total:J=0}={})=>{if(!W)W="anonymous";let G=Q==="error"?"reportErr":"report";for(let M=0;M<Y.length;M++)X(`${G}${M} = trace${M}.${Q}({id,event:'${Q}',name:'${W}',begin:performance.now(),total:${J}})
`);return{resolve(){for(let M=0;M<Y.length;M++)X(`${G}${M}.resolve()
`)},resolveChild(M){for(let U=0;U<Y.length;U++)X(`${G}Child${U}=${G}${U}.resolveChild?.shift()?.({id,event:'${Q}',name:'${M}',begin:performance.now()})
`);return(U)=>{for(let H=0;H<Y.length;H++)if(U)X(`if(${U} instanceof Error){${G}Child${H}?.(${U}) }else{${G}Child${H}?.()}`);else X(`${G}Child${H}?.()
`)}}}}},G9=({schema:$,name:Y,type:X,typeAlias:Q=X,normalize:W,ignoreTryCatch:J=!1})=>{if(!W||!$.Clean||$.hasAdditionalProperties)return"";if(W===!0||W==="exactMirror"){if(J)return`${Y}=validator.${Q}.Clean(${Y})
`;return`try{${Y}=validator.${Q}.Clean(${Y})
}catch{}`}if(W==="typebox")return`${Y}=validator.${Q}.Clean(${Y})
`;return""},ZS=({injectResponse:$="",normalize:Y=!1,validator:X,encodeSchema:Q=!1,isStaticResponse:W=!1,hasSanitize:J=!1})=>({validate:(G,M=`c.${G}`)=>`c.set.status=422;throw new ValidationError('${G}',validator.${G},${M})`,response:(G="r")=>{if(W)return"";let M=$+`
`;M+=`if(${G} instanceof ElysiaCustomStatusResponse){c.set.status=${G}.code
${G}=${G}.response}switch(c.set.status){`;for(let[U,H]of Object.entries(X.response)){M+=`
case ${U}:if(${G} instanceof Response)break
`;let B=H.schema?.noValidate===!0,A=B||J,O=({ignoreTryCatch:q=!1}={})=>G9({name:G,schema:H,type:"response",typeAlias:`response[${U}]`,normalize:Y,ignoreTryCatch:q});if(A)M+=O();let w=!A&&Y&&!B;if(Q&&H.hasTransform)M+=`try{${G}=validator.response[${U}].Encode(${G})
c.set.status=${U}}catch{`+(w?`try{
`+O({ignoreTryCatch:!0})+`${G}=validator.response[${U}].Encode(${G})
}catch{throw new ValidationError('response',validator.response[${U}],${G})}`:`throw new ValidationError('response',validator.response[${U}],${G})`)+"}";else{if(!A)M+=O();if(!B)M+=`if(validator.response[${U}].Check(${G})===false)throw new ValidationError('response',validator.response[${U}],${G})
c.set.status=${U}
`}M+=`break
`}return M+"}"}}),s6=($)=>{return($?.fn??$).constructor.name==="AsyncFunction"},jS=/=>\s?response\.clone\(/,KS=/(?:return|=>)\s?\S+\(|a(?:sync|wait)/,O1=($)=>{let Y=typeof $==="object";if(Y&&$.isAsync!==void 0)return $.isAsync;let X=Y?$.fn:$;if(X.constructor.name==="AsyncFunction")return!0;let Q=X.toString();if(jS.test(Q)){if(Y)$.isAsync=!1;return!1}let W=KS.test(Q);if(Y)$.isAsync=W;return W},B9=($)=>{let Y=typeof $==="object";if(Y&&$.hasReturn!==void 0)return $.hasReturn;let X=Y?$.fn.toString():typeof $==="string"?$.toString():$,Q=X.indexOf(")");if(X.charCodeAt(Q+2)===61&&X.charCodeAt(Q+5)!==123){if(Y)$.hasReturn=!0;return!0}let W=X.includes("return");if(Y)$.hasReturn=W;return W},I7=($)=>{let Y=$?.fn??$;return Y.constructor.name==="AsyncGeneratorFunction"||Y.constructor.name==="GeneratorFunction"},FS=({app:$,path:Y,method:X,hooks:Q,validator:W,handler:J,allowMeta:G=!1,inference:M})=>{let U=$["~adapter"].composeHandler,H=$["~adapter"].handler,B=typeof J==="function";if(!B){if(J=H.mapResponse(J,{headers:$.setHeaders??{}}),Q.parse?.length&&Q.transform?.length&&Q.beforeHandle?.length&&Q.afterHandle?.length){if(J instanceof Response)return Function("a",`"use strict";
return function(){return a.clone()}`)(J);return Function("a",`"use strict";
return function(){return a}`)(J)}}let A=B?"handler(c)":"handler",O=!!Q.afterResponse?.length,w=!!Q.trace?.length,q="";if(M=N9(Q,M),M=N9({handler:J},M),U.declare){let d=U.declare(M);if(d)q+=d}if(M.server)q+=`Object.defineProperty(c,'server',{get:function(){return getServer()}})
`;W.createBody?.(),W.createQuery?.(),W.createHeaders?.(),W.createParams?.(),W.createCookie?.(),W.createResponse?.();let L=!!W.body||!!W.headers||!!W.params||!!W.query||!!W.cookie||!!W.response,j=M.query||!!W.query,h=Q.parse?.length===1&&Q.parse[0].fn==="none",V=X!==""&&X!=="GET"&&X!=="HEAD"&&(M.body||!!W.body||!!Q.parse?.length)&&!h,I=$.setHeaders,o=I&&!!Object.keys(I).length,Q0=M.headers||!!W.headers||U.preferWebstandardHeaders!==!0&&M.body,g=M.cookie||!!W.cookie,x=W.cookie?.config?bM(W?.cookie?.config,$.config.cookie):$.config.cookie,f="",C=()=>{if(f)return f;if(x?.sign){if(!x.secrets)throw new Error(`t.Cookie required secret which is not set in (${X}) ${Y}.`);let d=!x.secrets?void 0:typeof x.secrets==="string"?x.secrets:x.secrets[0];if(f+=`const _setCookie = c.set.cookie
if(_setCookie){`,x.sign===!0)f+=`for(const [key, cookie] of Object.entries(_setCookie)){c.set.cookie[key].value=await signCookie(cookie.value,'${d}')}`;else for(let E of x.sign)f+=`if(_setCookie['${E}']?.value)c.set.cookie['${E}'].value=await signCookie(_setCookie['${E}'].value,'${d}')
`;f+=`}
`}return f},l=$.config.normalize,$0=$.config.encodeSchema,H0=ZS({normalize:l,validator:W,encodeSchema:$0,isStaticResponse:J instanceof Response,hasSanitize:!!$.config.sanitize});if(Q0)q+=U.headers;if(w)q+=`const id=c[ELYSIA_REQUEST_ID]
`;let A0=eY({trace:Q.trace,addFn:(d)=>{q+=d}});if(q+="try{",g){let d=(N,F)=>{let D=x?.[N]??F;if(!D)return typeof F==="string"?`${N}:"${F}",`:`${N}:${F},`;if(typeof D==="string")return`${N}:'${D}',`;if(D instanceof Date)return`${N}: new Date(${D.getTime()}),`;return`${N}:${D},`},E=x?`{secrets:${x.secrets!==void 0?typeof x.secrets==="string"?`'${x.secrets}'`:"["+x.secrets.reduce((N,F)=>N+`'${F}',`,"")+"]":"undefined"},sign:${x.sign===!0?!0:x.sign!==void 0?"["+x.sign.reduce((N,F)=>N+`'${F}',`,"")+"]":"undefined"},`+d("domain")+d("expires")+d("httpOnly")+d("maxAge")+d("path","/")+d("priority")+d("sameSite")+d("secure")+"}":"undefined";if(Q0)q+=`
c.cookie=await parseCookie(c.set,c.headers.cookie,${E})
`;else q+=`
c.cookie=await parseCookie(c.set,c.request.headers.get('cookie'),${E})
`}if(j){let d=[];if(W.query&&W.query.schema.type==="object"){let E=W.query.schema.properties;if(!W.query.hasAdditionalProperties)for(let[N,F]of Object.entries(E)){let D=F,k=D.type==="array"||!!D.anyOf?.some((p)=>p.type==="string"&&p.format==="ArrayString");if(D&&B1 in D&&D.type==="array"&&D.items)D=D.items;let{type:b,anyOf:v}=D;d.push({key:N,isArray:k,isNestedObjectArray:k&&D.items?.type==="object"||!!D.items?.anyOf?.some((p)=>p.type==="object"||p.type==="array"),isObject:b==="object"||v?.some((p)=>p.type==="string"&&p.format==="ArrayString"),anyOf:!!v})}}if(!d.length)q+="if(c.qi===-1){c.query={}}else{c.query=parseQueryFromURL(c.url,c.qi+1)}";else{q+=`if(c.qi!==-1){let url='&'+c.url.slice(c.qi+1)
`;let E=0;for(let{key:N,isArray:F,isObject:D,isNestedObjectArray:k,anyOf:b}of d){let v=(E===0?"let ":"")+`memory=url.indexOf('&${N}=')
let a${E}
`;if(F)if(q+=v,k)q+=`while(memory!==-1){const start=memory+${N.length+2}
memory=url.indexOf('&',start)
if(a${E}===undefined)
a${E}=''
else
a${E}+=','
let temp
if(memory===-1)temp=decodeURIComponent(url.slice(start).replace(/\\+/g,' '))
else temp=decodeURIComponent(url.slice(start, memory).replace(/\\+/g,' '))
const charCode=temp.charCodeAt(0)
if(charCode!==91&&charCode !== 123)
temp='"'+temp+'"'
a${E}+=temp
if(memory===-1)break
memory=url.indexOf('&${N}=',memory)
if(memory===-1)break}try{if(a${E}.charCodeAt(0)===91)a${E} = JSON.parse(a${E})
else
a${E}=JSON.parse('['+a${E}+']')}catch{}
`;else q+=`while(memory!==-1){const start=memory+${N.length+2}
memory=url.indexOf('&',start)
if(a${E}===undefined)a${E}=[]
if(memory===-1){const temp=decodeURIComponent(url.slice(start)).replace(/\\+/g,' ')
if(temp.includes(',')){a${E}=a${E}.concat(temp.split(','))}else{a${E}.push(decodeURIComponent(url.slice(start)).replace(/\\+/g,' '))}
break}else{const temp=decodeURIComponent(url.slice(start, memory)).replace(/\\+/g,' ')
if(temp.includes(',')){a${E}=a${E}.concat(temp.split(','))}else{a${E}.push(temp)}
}memory=url.indexOf('&${N}=',memory)
if(memory===-1) break
}`;else if(D)q+=v+`if(memory!==-1){const start=memory+${N.length+2}
memory=url.indexOf('&',start)
if(memory===-1)a${E}=decodeURIComponent(url.slice(start).replace(/\\+/g,' '))else a${E}=decodeURIComponent(url.slice(start,memory).replace(/\\+/g,' '))if(a${E}!==undefined)try{a${E}=JSON.parse(a${E})}catch{}}`;else{if(q+=v+`if(memory!==-1){const start=memory+${N.length+2}
memory=url.indexOf('&',start)
if(memory===-1)a${E}=decodeURIComponent(url.slice(start).replace(/\\+/g,' '))
else{a${E}=decodeURIComponent(url.slice(start,memory).replace(/\\+/g,' '))`,b)q+=`
let deepMemory=url.indexOf('&${N}=',memory)
if(deepMemory!==-1){a${E}=[a${E}]
let first=true
while(true){const start=deepMemory+${N.length+2}
if(first)first=false
else deepMemory = url.indexOf('&', start)
let value
if(deepMemory===-1)value=url.slice(start).replace(/\\+/g,' ')
else value=url.slice(start, deepMemory).replace(/\\+/g,' ')
value=decodeURIComponent(value)
if(value===null){if(deepMemory===-1){break}else{continue}}
const vStart=value.charCodeAt(0)
const vEnd=value.charCodeAt(value.length - 1)
if((vStart===91&&vEnd===93)||(vStart===123&&vEnd===125))
try{a${E}.push(JSON.parse(value))}catch{a${E}.push(value)}if(deepMemory===-1)break}}`;q+="}}"}E++,q+=`
`}q+="c.query={"+d.map(({key:N},F)=>`'${N}':a${F}`).join(",")+"}",q+=`} else c.query = {}
`}}let B5=typeof J==="function"&&O1(J),S0=w||Q.afterResponse?.length?"c.response= ":"",o1=g||V||B5||!!Q.parse?.length||!!Q.afterHandle?.some(O1)||!!Q.beforeHandle?.some(O1)||!!Q.transform?.some(O1)||!!Q.mapResponse?.some(O1),I2=(typeof J==="function"?I7(J):!1)||!!Q.beforeHandle?.some(I7)||!!Q.afterHandle?.some(I7)||!!Q.transform?.some(I7),T2=Object.keys(W.response??{}),_5=T2.length>1,A2=T2.length===0||T2.length===1&&T2[0]==="200",J1=M.cookie||M.set||Q0||w||_5||!A2||B&&o||I2,z1=(d="r")=>`return ${J1?"mapResponse":"mapCompactResponse"}(${S0}${d}${J1?",c.set":""}${R1})
`,R1=I2||U.mapResponseContext?`,${U.mapResponseContext}`:"";if(w||M.route)q+=`c.route=\`${Y}\`
`;let d5=A0("parse",{total:Q.parse?.length});if(V){let d=!!Q.parse?.length||M.body||W.body;if(U.parser.declare)q+=U.parser.declare;q+=`
try{`;let E=typeof Q.parse==="string"?Q.parse:Array.isArray(Q.parse)&&Q.parse.length===1?typeof Q.parse[0]==="string"?Q.parse[0]:typeof Q.parse[0].fn==="string"?Q.parse[0].fn:void 0:void 0;if(!E&&W.body&&!Q.parse?.length){let N=W.body.schema;if(N&&N.anyOf&&N[K]==="Union"&&N.anyOf?.length===2&&N.anyOf?.find((F)=>F[K]==="ElysiaForm"))E="formdata"}if(E&&LS.includes(E)){let N=A0("parse",{total:Q.parse?.length}),F=!!W.body?.isOptional;switch(E){case"json":case"application/json":q+=U.parser.json(F);break;case"text":case"text/plain":q+=U.parser.text(F);break;case"urlencoded":case"application/x-www-form-urlencoded":q+=U.parser.urlencoded(F);break;case"arrayBuffer":case"application/octet-stream":q+=U.parser.arrayBuffer(F);break;case"formdata":case"multipart/form-data":q+=U.parser.formData(F);break;default:if(E[0]in $["~parser"])q+=Q0?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",q+=`
if(contentType){const index=contentType.indexOf(';')
if(index!==-1)contentType=contentType.substring(0,index)}
else{contentType=''}c.contentType=contentType
let result=parser['${E}'](c, contentType)
if(result instanceof Promise)result=await result
if(result instanceof ElysiaCustomStatusResponse)throw result
if(result!==undefined)c.body=result
delete c.contentType
`;break}N.resolve()}else if(d){q+=`
`;let N=Q.parse?.length?"let":"const";q+=Q0?`${N} contentType=c.headers['content-type']
`:`${N} contentType=c.request.headers.get('content-type')
`;let F=!1;if(Q.parse?.length)q+=`if(contentType){
const index=contentType.indexOf(';')

if(index!==-1)contentType=contentType.substring(0,index)}else{contentType=''}let used=false
c.contentType=contentType
`;else{F=!0;let k=!!W.body?.isOptional;q+=`if(contentType)switch(contentType.charCodeAt(12)){
case 106:`+U.parser.json(k)+`break
case 120:`+U.parser.urlencoded(k)+`break
case 111:`+U.parser.arrayBuffer(k)+`break
case 114:`+U.parser.formData(k)+`break
default:if(contentType.charCodeAt(0)===116){`+U.parser.text(k)+`}break
}`}let D=A0("parse",{total:Q.parse?.length});if(Q.parse)for(let k=0;k<Q.parse.length;k++){let b=`bo${k}`;if(k!==0)q+=`
if(!used){`;if(typeof Q.parse[k].fn==="string"){let v=D.resolveChild(Q.parse[k].fn),p=!!W.body?.isOptional;switch(Q.parse[k].fn){case"json":case"application/json":F=!0,q+=U.parser.json(p);break;case"text":case"text/plain":F=!0,q+=U.parser.text(p);break;case"urlencoded":case"application/x-www-form-urlencoded":F=!0,q+=U.parser.urlencoded(p);break;case"arrayBuffer":case"application/octet-stream":F=!0,q+=U.parser.arrayBuffer(p);break;case"formdata":case"multipart/form-data":F=!0,q+=U.parser.formData(p);break;default:q+=`let ${b}=parser['${Q.parse[k].fn}'](c,contentType)
if(${b} instanceof Promise)${b}=await ${b}
if(${b}!==undefined){c.body=${b};used=true;}
`}v()}else{let v=D.resolveChild(Q.parse[k].fn.name);q+=`let ${b}=e.parse[${k}]
${b}=${b}(c,contentType)
if(${b} instanceof Promise)${b}=await ${b}
if(${b}!==undefined){c.body=${b};used=true}`,v()}if(k!==0)q+="}";if(F)break}if(D.resolve(),!F){let k=!!W.body?.isOptional;if(Q.parse?.length)q+=`
if(!used){
if(!contentType) throw new ParseError()
`;q+="switch(contentType){",q+=`case 'application/json':
`+U.parser.json(k)+`break
case 'text/plain':`+U.parser.text(k)+`break
case 'application/x-www-form-urlencoded':`+U.parser.urlencoded(k)+`break
case 'application/octet-stream':`+U.parser.arrayBuffer(k)+`break
case 'multipart/form-data':`+U.parser.formData(k)+`break
`;for(let b of Object.keys($["~parser"]))q+=`case '${b}':let bo${b}=parser['${b}'](c,contentType)
if(bo${b} instanceof Promise)bo${b}=await bo${b}
if(bo${b} instanceof ElysiaCustomStatusResponse)throw result
if(bo${b}!==undefined)c.body=bo${b}
break
`;if(Q.parse?.length)q+="}";q+="}"}if(Q.parse?.length)q+=`
delete c.contentType`}q+="}catch(error){throw new ParseError(error)}"}if(d5.resolve(),Q?.transform){let d=A0("transform",{total:Q.transform.length});if(Q.transform.length)q+=`let transformed
`;for(let E=0;E<Q.transform.length;E++){let N=Q.transform[E],F=d.resolveChild(N.fn.name);if(q+=O1(N)?`transformed=await e.transform[${E}](c)
`:`transformed=e.transform[${E}](c)
`,N.subType==="mapDerive")q+=`if(transformed instanceof ElysiaCustomStatusResponse)throw transformed
else{transformed.request=c.request
transformed.store=c.store
transformed.qi=c.qi
transformed.path=c.path
transformed.url=c.url
transformed.redirect=c.redirect
transformed.set=c.set
transformed.error=c.error
c=transformed}`;else q+=`if(transformed instanceof ElysiaCustomStatusResponse)throw transformed
else Object.assign(c,transformed)
`;F()}d.resolve()}let d1=[];if(W){if(W.headers){if(W.headers.hasDefault)for(let[d,E]of Object.entries(C0.Default(W.headers.schema,{}))){let N=typeof E==="object"?JSON.stringify(E):typeof E==="string"?`'${E}'`:E;if(N!==void 0)q+=`c.headers['${d}']??=${N}
`}if(q+=G9({name:"c.headers",schema:W.headers,type:"headers",normalize:l}),W.headers.isOptional)q+="if(isNotEmpty(c.headers)){";if(W.body?.schema?.noValidate!==!0)q+="if(validator.headers.Check(c.headers) === false){"+H0.validate("headers")+"}";if(W.headers.hasTransform)q+=`c.headers=validator.headers.Decode(c.headers)
`;if(W.headers.isOptional)q+="}"}if(W.params){if(W.params.hasDefault)for(let[d,E]of Object.entries(C0.Default(W.params.schema,{}))){let N=typeof E==="object"?JSON.stringify(E):typeof E==="string"?`'${E}'`:E;if(N!==void 0)q+=`c.params['${d}']??=${N}
`}if(W.params?.schema?.noValidate!==!0)q+="if(validator.params.Check(c.params)===false){"+H0.validate("params")+"}";if(W.params.hasTransform)q+=`c.params=validator.params.Decode(c.params)
`}if(W.query){if(W.query.hasDefault)for(let[d,E]of Object.entries(C0.Default(W.query.schema,{}))){let N=typeof E==="object"?JSON.stringify(E):typeof E==="string"?`'${E}'`:E;if(N!==void 0)q+=`if(c.query['${d}']===undefined)c.query['${d}']=${N}
`;q+=G9({name:"c.query",schema:W.query,type:"query",normalize:l})}if(W.query.isOptional)q+="if(isNotEmpty(c.query)){";if(W.query?.schema?.noValidate!==!0)q+="if(validator.query.Check(c.query)===false){"+H0.validate("query")+"}";if(W.query.hasTransform)q+=`c.query=validator.query.Decode(Object.assign({},c.query))
`;if(W.query.isOptional)q+="}"}if(V&&W.body){if(W.body.hasTransform||W.body.isOptional)q+=`const isNotEmptyObject=c.body&&(typeof c.body==="object"&&isNotEmpty(c.body))
`;let d=OS(W.body.schema),E=!1;if(W.body.hasDefault){let N=C0.Default(W.body.schema,W.body.schema.type==="object"||W.body.schema[K]==="Import"&&W.body.schema.$defs[W.body.schema.$ref][K]==="Object"?{}:void 0),F=b7(W.body.schema);if(!d&&N&&typeof N==="object"&&(_8("File",F)||_8("Files",F))){E=!0;for(let[k,b]of Object.entries(N))if(b==="File"||b==="Files")delete N[k];if(!m0(N))N=void 0}let D=typeof N==="object"?JSON.stringify(N):typeof N==="string"?`'${N}'`:N;if(N!==void 0&&N!==null)if(Array.isArray(N))q+=`if(!c.body)c.body=${D}
`;else if(typeof N==="object")q+=`c.body=Object.assign(${D},c.body)
`;else q+=`c.body=${D}
`;if(q+=G9({name:"c.body",schema:W.body,type:"body",normalize:l}),W.body?.schema?.noValidate!==!0)if(W.body.isOptional)q+="if(isNotEmptyObject&&validator.body.Check(c.body)===false){"+H0.validate("body")+"}";else q+="if(validator.body.Check(c.body)===false){"+H0.validate("body")+"}"}else if(q+=G9({name:"c.body",schema:W.body,type:"body",normalize:l}),W.body?.schema?.noValidate!==!0)if(W.body.isOptional)q+="if(isNotEmptyObject&&validator.body.Check(c.body)===false){"+H0.validate("body")+"}";else q+="if(validator.body.Check(c.body)===false){"+H0.validate("body")+"}";if(W.body.hasTransform)q+=`if(isNotEmptyObject)c.body=validator.body.Decode(c.body)
`;if(d&&W.body.schema.anyOf?.length){let N=Object.values(W.body.schema.anyOf);for(let F=0;F<N.length;F++){let D=N[F];if(_8("File",D)||_8("Files",D)){let k=S1(D,{modules:$.definitions.typebox,dynamic:!$.config.aot,models:$.definitions.type,normalize:$.config.normalize,additionalCoerce:pY(),sanitize:()=>$.config.sanitize});if(k){let b=d1.length===0,v=Object.entries(D.properties),p=b?`
`:" else ";p+=`if(fileUnions[${d1.length}].Check(c.body)){`;let f0="",I1=0;for(let P1=0;P1<v.length;P1++){let[q5,x2]=v[P1];if(!x2.extension||x2[K]!=="File"&&x2[K]!=="Files")continue;if(I1)f0+=",";f0+=`validateFileExtension(c.body.${q5},${JSON.stringify(x2.extension)},'body.${q5}')`,I1++}if(f0){if(I1===1)p+=`await ${f0}
`;else if(I1>1)p+=`await Promise.all([${f0}])
`;p+="}",q+=p,d1.push(k)}}}}}else if(E||!d&&(_8("File",b7(W.body.schema))||_8("Files",b7(W.body.schema)))){let N="",F=0;for(let[D,k]of Object.entries(b7(W.body.schema).properties)){if(!k.extension||k[K]!=="File"&&k[K]!=="Files")continue;if(F)N+=",";N+=`validateFileExtension(c.body.${D},${JSON.stringify(k.extension)},'body.${D}')`,F++}if(F)q+=`
`;if(F===1)q+=`await ${N}
`;else if(F>1)q+=`await Promise.all([${N}])
`}}if(W.cookie){let d=oM({modules:$.definitions.typebox,validator:W.cookie,defaultConfig:$.config.cookie,dynamic:!!$.config.aot,config:W.cookie?.config??{},models:$.definitions.type});if(q+=`const cookieValue={}
for(const [key,value] of Object.entries(c.cookie))cookieValue[key]=value.value
`,d.hasDefault)for(let[E,N]of Object.entries(C0.Default(d.schema,{})))q+=`cookieValue['${E}'] = ${typeof N==="object"?JSON.stringify(N):N}
`;if(d.isOptional)q+="if(isNotEmpty(c.cookie)){";if(W.body?.schema?.noValidate!==!0)q+="if(validator.cookie.Check(cookieValue)===false){"+H0.validate("cookie","cookieValue")+"}";if(d.hasTransform)q+=`for(const [key,value] of Object.entries(validator.cookie.Decode(cookieValue)))c.cookie[key].value=value
`;if(d.isOptional)q+="}"}}if(Q?.beforeHandle){let d=A0("beforeHandle",{total:Q.beforeHandle.length}),E=!1;for(let N=0;N<Q.beforeHandle.length;N++){let F=Q.beforeHandle[N],D=d.resolveChild(F.fn.name),k=B9(F);if(F.subType==="resolve"||F.subType==="mapResolve"){if(!E)E=!0,q+=`
let resolved
`;if(q+=O1(F)?`resolved=await e.beforeHandle[${N}](c);
`:`resolved=e.beforeHandle[${N}](c);
`,F.subType==="mapResolve")q+=`if(resolved instanceof ElysiaCustomStatusResponse)throw resolved
else{resolved.request=c.request
resolved.store=c.store
resolved.qi=c.qi
resolved.path=c.path
resolved.url=c.url
resolved.redirect=c.redirect
resolved.set=c.set
resolved.error=c.error
c=resolved}`;else q+=`if(resolved instanceof ElysiaCustomStatusResponse)throw resolved
else Object.assign(c, resolved)
`}else if(!k)q+=O1(F)?`await e.beforeHandle[${N}](c)
`:`e.beforeHandle[${N}](c)
`,D();else{if(q+=O1(F)?`be=await e.beforeHandle[${N}](c)
`:`be=e.beforeHandle[${N}](c)
`,D("be"),q+="if(be!==undefined){",d.resolve(),Q.afterHandle?.length){A0("handle",{name:B?J.name:void 0}).resolve();let v=A0("afterHandle",{total:Q.afterHandle.length});for(let p=0;p<Q.afterHandle.length;p++){let f0=Q.afterHandle[p],I1=B9(f0),P1=v.resolveChild(f0.fn.name);if(q+=`c.response = be
`,!I1)q+=O1(f0.fn)?`await e.afterHandle[${p}](c, be)
`:`e.afterHandle[${p}](c, be)
`;else q+=O1(f0.fn)?`af=await e.afterHandle[${p}](c)
`:`af=e.afterHandle[${p}](c)
`,q+=`if(af!==undefined) c.response=be=af
`;P1("af")}v.resolve()}if(W.response)q+=H0.response("be");let b=A0("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length){q+=`c.response=be
`;for(let v=0;v<Q.mapResponse.length;v++){let p=Q.mapResponse[v],f0=b.resolveChild(p.fn.name);q+=`if(mr===undefined){mr=${s6(p)?"await ":""}e.mapResponse[${v}](c)
if(mr!==undefined)be=c.response=mr}`,f0()}}b.resolve(),q+=C(),q+=`return mapEarlyResponse(${S0}be,c.set${R1})}
`}}d.resolve()}if(Q.afterHandle?.length){let d=A0("handle",{name:B?J.name:void 0});if(Q.afterHandle.length)q+=B5?`let r=c.response=await ${A}
`:`let r=c.response=${A}
`;else q+=B5?`let r=await ${A}
`:`let r=${A}
`;d.resolve();let E=A0("afterHandle",{total:Q.afterHandle.length});for(let F=0;F<Q.afterHandle.length;F++){let D=Q.afterHandle[F],k=B9(D),b=E.resolveChild(D.fn.name);if(!k)q+=O1(D.fn)?`await e.afterHandle[${F}](c)
`:`e.afterHandle[${F}](c)
`,b();else if(q+=O1(D.fn)?`af=await e.afterHandle[${F}](c)
`:`af=e.afterHandle[${F}](c)
`,b("af"),W.response)q+="if(af!==undefined){",E.resolve(),q+=H0.response("af"),q+="c.response=af}";else q+="if(af!==undefined){",E.resolve(),q+="c.response=af}"}if(E.resolve(),q+=`r=c.response
`,W.response)q+=H0.response();q+=C();let N=A0("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length)for(let F=0;F<Q.mapResponse.length;F++){let D=Q.mapResponse[F],k=N.resolveChild(D.fn.name);q+=`mr=${s6(D)?"await ":""}e.mapResponse[${F}](c)
if(mr!==undefined)r=c.response=mr
`,k()}N.resolve(),q+=z1()}else{let d=A0("handle",{name:B?J.name:void 0});if(W.response||Q.mapResponse?.length){if(q+=B5?`let r=await ${A}
`:`let r=${A}
`,d.resolve(),W.response)q+=H0.response();A0("afterHandle").resolve();let E=A0("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length){q+=`
c.response=r
`;for(let N=0;N<Q.mapResponse.length;N++){let F=Q.mapResponse[N],D=E.resolveChild(F.fn.name);q+=`
if(mr===undefined){mr=${s6(F)?"await ":""}e.mapResponse[${N}](c)
if(mr!==undefined)r=c.response=mr}
`,D()}}if(E.resolve(),q+=C(),J instanceof Response)q+=M.set?`if(isNotEmpty(c.set.headers)||c.set.status!==200||c.set.redirect||c.set.cookie)return mapResponse(${S0}${A}.clone(),c.set${R1})else return ${A}.clone()`:`return ${A}.clone()`,q+=`
`;else q+=z1()}else if(g||w){q+=B5?`let r=await ${A}
`:`let r=${A}
`,d.resolve(),A0("afterHandle").resolve();let E=A0("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length){q+=`c.response= r
`;for(let N=0;N<Q.mapResponse.length;N++){let F=Q.mapResponse[N],D=E.resolveChild(F.fn.name);q+=`if(mr===undefined){mr=${s6(F)?"await ":""}e.mapResponse[${N}](c)
if(mr!==undefined)r=c.response=mr}`,D()}}E.resolve(),q+=C()+z1()}else{d.resolve();let E=B5?`await ${A}`:A;if(A0("afterHandle").resolve(),J instanceof Response)q+=M.set?`if(isNotEmpty(c.set.headers)||c.set.status!==200||c.set.redirect||c.set.cookie)return mapResponse(${S0}${A}.clone(),c.set${R1})
else return ${A}.clone()
`:`return ${A}.clone()
`;else q+=z1(E)}}if(q+=`
}catch(error){`,!o1&&Q.error?.length)q+="return(async()=>{";if(q+=`const set=c.set
if(!set.status||set.status<300)set.status=error?.status||500
`,g)q+=C();if(w&&Q.trace)for(let d=0;d<Q.trace.length;d++)q+=`report${d}?.resolve(error);reportChild${d}?.(error)
`;let R5=A0("error",{total:Q.error?.length});if(Q.error?.length){if(q+=`c.error=error
`,L)q+=`if(error instanceof TypeBoxError){c.code="VALIDATION"
c.set.status=422}else{c.code=error.code??error[ERROR_CODE]??"UNKNOWN"}`;else q+=`c.code=error.code??error[ERROR_CODE]??"UNKNOWN"
`;q+=`let er
`;for(let d=0;d<Q.error.length;d++){let E=R5.resolveChild(Q.error[d].fn.name);if(O1(Q.error[d]))q+=`er=await e.error[${d}](c)
`;else q+=`er=e.error[${d}](c)
if(er instanceof Promise)er=await er
`;E();let N=A0("mapResponse",{total:Q.mapResponse?.length});if(Q.mapResponse?.length)for(let F=0;F<Q.mapResponse.length;F++){let D=Q.mapResponse[F],k=N.resolveChild(D.fn.name);q+=`c.response=er
er=e.mapResponse[${F}](c)
if(er instanceof Promise)er=await er
`,k()}if(N.resolve(),q+=`er=mapEarlyResponse(er,set${R1})
`,q+="if(er){",w&&Q.trace){for(let F=0;F<Q.trace.length;F++)q+=`report${F}.resolve()
`;R5.resolve()}q+="return er}"}}if(R5.resolve(),q+="return handleError(c,error,true)",!o1&&Q.error?.length)q+="})()";if(q+="}",O||w){if(q+="finally{ ",!o1)q+=";(async()=>{";let d=A0("afterResponse",{total:Q.afterResponse?.length});if(O&&Q.afterResponse)for(let E=0;E<Q.afterResponse.length;E++){let N=d.resolveChild(Q.afterResponse[E].fn.name);q+=`
await e.afterResponse[${E}](c)
`,N()}if(d.resolve(),!o1)q+="})()";q+="}"}let q8=U.inject?Object.keys(U.inject).join(",")+",":"",c5="const {handler,handleError,hooks:e, "+M1("validator,",L)+"mapResponse,mapCompactResponse,mapEarlyResponse,isNotEmpty,utils:{"+M1("parseQuery,",V)+M1("parseQueryFromURL,",j)+"},error:{"+M1("ValidationError,",L)+M1("ParseError",V)+"},validateFileExtension,schema,definitions,ERROR_CODE,"+M1("parseCookie,",g)+M1("signCookie,",g)+M1("decodeURIComponent,",j)+"ElysiaCustomStatusResponse,"+M1("ELYSIA_TRACE,",w)+M1("ELYSIA_REQUEST_ID,",w)+M1("parser,",Q.parse?.length)+M1("getServer,",M.server)+M1("fileUnions,",d1.length)+q8+M1("TypeBoxError",L)+`}=hooks
const trace=e.trace
return ${o1?"async ":""}function handle(c){`;if(Q.beforeHandle?.length)c5+=`let be
`;if(Q.afterHandle?.length)c5+=`let af
`;if(Q.mapResponse?.length)c5+=`let mr
`;if(G)c5+=`c.schema=schema
c.defs=definitions
`;q=c5+q+"}",c5="";try{return Function("hooks",`"use strict";
`+q)({handler:J,hooks:UM({...Q}),validator:L?W:void 0,handleError:$.handleError,mapResponse:H.mapResponse,mapCompactResponse:H.mapCompactResponse,mapEarlyResponse:H.mapEarlyResponse,isNotEmpty:m0,utils:{parseQuery:V?x7:void 0,parseQueryFromURL:j?HS:void 0},error:{ValidationError:L?g0:void 0,ParseError:V?kM:void 0},validateFileExtension:gM,schema:$.router.history,definitions:$.definitions.type,ERROR_CODE:y7,parseCookie:g?dM:void 0,signCookie:g?v7:void 0,decodeURIComponent:j?US.default:void 0,ElysiaCustomStatusResponse:y1,ELYSIA_TRACE:w?a7:void 0,ELYSIA_REQUEST_ID:w?z9:void 0,getServer:()=>$.getServer(),fileUnions:d1.length?d1:void 0,TypeBoxError:L?n:void 0,parser:$["~parser"],...U.inject})}catch(d){let E=UM(Q);console.log("[Composer] failed to generate optimized handler"),console.log("---"),console.log({handler:typeof J==="function"?J.toString():J,instruction:q,hooks:{...E,transform:E?.transform?.map?.((N)=>N.toString()),resolve:E?.resolve?.map?.((N)=>N.toString()),beforeHandle:E?.beforeHandle?.map?.((N)=>N.toString()),afterHandle:E?.afterHandle?.map?.((N)=>N.toString()),mapResponse:E?.mapResponse?.map?.((N)=>N.toString()),parse:E?.parse?.map?.((N)=>N.toString()),error:E?.error?.map?.((N)=>N.toString()),afterResponse:E?.afterResponse?.map?.((N)=>N.toString()),stop:E?.stop?.map?.((N)=>N.toString())},validator:W,definitions:$.definitions.type,error:d}),console.log("---"),process.exit(1)}},nM=($,Y)=>{let X="",Q=eY({trace:$.event.trace,addFn:Y??((W)=>{X+=W})})("request",{total:$.event.request?.length});if($.event.request?.length){X+="try{";for(let W=0;W<$.event.request.length;W++){let J=$.event.request[W],G=B9(J),M=O1(J),U=Q.resolveChild($.event.request[W].fn.name);if(G)X+=`re=mapEarlyResponse(${M?"await ":""}onRequest[${W}](c),c.set)
`,U("re"),X+=`if(re!==undefined)return re
`;else X+=`${M?"await ":""}onRequest[${W}](c)
`,U()}X+="}catch(error){return app.handleError(c,error,false)}"}return Q.resolve(),X},rM=($,Y="map")=>{let X=$.extender.higherOrderFunctions;if(!X.length)return"return "+Y;let Q=$["~adapter"].composeGeneralHandler,W=Y;for(let J=0;J<X.length;J++)W=`hoc[${J}](${W},${Q.parameters})`;return`return function hocMap(${Q.parameters}){return ${W}(${Q.parameters})}`},gY=($)=>{let Y=$["~adapter"].composeGeneralHandler;$.router.http.build();let X=Y.error404(!!$.event.request?.length,!!$.event.error?.length),Q=$.event.trace?.length,W="",J=$.router,G=J.http.root.WS?`const route=router.find(r.method === "GET" && r.headers.get('upgrade')==='websocket'?'WS':r.method,p)`:"const route=router.find(r.method,p)";G+=J.http.root.ALL?`??router.find("ALL",p)
`:`
`,G+=X.code,G+=`
c.params=route.params
if(route.store.handler)return route.store.handler(c)
return route.store.compile()(c)
`;let M="";for(let[A,O]of Object.entries(J.static)){if(M+=`case'${A}':`,$.config.strictPath!==!0)M+=`case'${W9(A)}':`;let w=J9(A);if(A!==w)M+=`case'${w}':`;if(M+="switch(r.method){","GET"in O||"WS"in O){if(M+="case 'GET':","WS"in O)M+=`if(r.headers.get('upgrade')==='websocket')return ht[${O.WS}].composed(c)
`;if("GET"in O)M+=`return ht[${O.GET}].composed(c)
`}for(let[q,L]of Object.entries(O)){if(q==="ALL"||q==="GET"||q==="WS")continue;M+=`case '${q}':return ht[${L}].composed(c)
`}if("ALL"in O)M+=`default:return ht[${O.ALL}].composed(c)
`;else M+=`default:break map
`;M+="}"}let U=!!$.event.request?.some(O1),H=Y.inject?Object.keys(Y.inject).join(",")+",":"";if(W+=`
const {app,mapEarlyResponse,NotFoundError,randomId,handleError,status,redirect,`+M1("ELYSIA_TRACE,",Q)+M1("ELYSIA_REQUEST_ID,",Q)+H+`}=data
const store=app.singleton.store
const decorator=app.singleton.decorator
const staticRouter=app.router.static.http
const ht=app.router.history
const router=app.router.http
const trace=app.event.trace?.map(x=>typeof x==='function'?x:x.fn)??[]
const notFound=new NotFoundError()
const hoc=app.extender.higherOrderFunctions.map(x=>x.fn)
`,$.event.request?.length)W+=`const onRequest=app.event.request.map(x=>x.fn)
`;if(W+=X.declare,$.event.trace?.length)W+="const "+$.event.trace.map((A,O)=>`tr${O}=app.event.trace[${O}].fn`).join(",")+`
`;if(W+=`${U?"async ":""}function map(${Y.parameters}){`,$.event.request?.length)W+=`let re
`;if(W+=Y.createContext($),$.event.trace?.length)W+="c[ELYSIA_TRACE]=["+$.event.trace.map((A,O)=>`tr${O}(c)`).join(",")+`]
`;if(W+=nM($),M)W+=`
map: switch(p){
`+M+"}";W+=G+`}
`+rM($),$.handleError=tM($);let B=Function("data",`"use strict";
`+W)({app:$,mapEarlyResponse:$["~adapter"].handler.mapEarlyResponse,NotFoundError:tY,randomId:r7,handleError:$.handleError,status:h7,redirect:rY,ELYSIA_TRACE:Q?a7:void 0,ELYSIA_REQUEST_ID:Q?z9:void 0,...Y.inject});if(e6)Bun.gc(!1);return B},tM=($)=>{let Y=$.event,X="",Q=$["~adapter"].composeError,W=Q.inject?Object.keys(Q.inject).join(",")+",":"",J=!!$.event.trace?.length;if(X+="const {mapResponse,ERROR_CODE,ElysiaCustomStatusResponse,"+M1("onError,",$.event.error)+M1("afterResponse,",$.event.afterResponse)+M1("trace,",$.event.trace)+M1("onMapResponse,",$.event.mapResponse)+M1("ELYSIA_TRACE,",J)+M1("ELYSIA_REQUEST_ID,",J)+W+`}=inject
`,X+=`return ${$.event.error?.find(O1)||$.event.mapResponse?.find(O1)?"async ":""}function(context,error,skipGlobal){`,X+="",J)X+=`const id=context[ELYSIA_REQUEST_ID]
`;let G=eY({context:"context",trace:Y.trace,addFn:(B)=>{X+=B}});if(X+=`const set=context.set
let _r
if(!context.code)context.code=error.code??error[ERROR_CODE]
if(!(context.error instanceof Error))context.error=error
if(error instanceof ElysiaCustomStatusResponse){set.status=error.status=error.code
error.message=error.response}`,Q.declare)X+=Q.declare;let M=J||!!Y.afterResponse?.length||!!Y.afterResponse?.length?"context.response = ":"";if($.event.error)for(let B=0;B<$.event.error.length;B++){let A=$.event.error[B],O=`${O1(A)?"await ":""}onError[${B}](context)
`;if(X+="if(skipGlobal!==true){",B9(A)){X+=`_r=${O}
if(_r!==undefined){if(_r instanceof Response)return mapResponse(_r,set${Q.mapResponseContext})
if(_r instanceof ElysiaCustomStatusResponse){error.status=error.code
error.message = error.response}if(set.status===200||!set.status)set.status=error.status
`;let w=G("mapResponse",{total:Y.mapResponse?.length,name:"context"});if(Y.mapResponse?.length)for(let q=0;q<Y.mapResponse.length;q++){let L=Y.mapResponse[q],j=w.resolveChild(L.fn.name);X+=`context.response=_r_r=${s6(L)?"await ":""}onMapResponse[${q}](context)
`,j()}w.resolve(),X+=`return mapResponse(${M}_r,set${Q.mapResponseContext})}`}else X+=O;X+="}"}X+=`if(error.constructor.name==="ValidationError"||error.constructor.name==="TransformDecodeError"){
if(error.error)error=error.error
set.status=error.status??422
`+Q.validationError+`
}
`,X+=`if(error instanceof Error){
if(typeof error.toResponse==='function')return context.response=error.toResponse()
`+Q.unknownError+`
}`;let U=G("mapResponse",{total:Y.mapResponse?.length,name:"context"});if(X+=`
if(!context.response)context.response=error.message??error
`,Y.mapResponse?.length){X+=`let mr
`;for(let B=0;B<Y.mapResponse.length;B++){let A=Y.mapResponse[B],O=U.resolveChild(A.fn.name);X+=`if(mr===undefined){mr=${s6(A)?"await ":""}onMapResponse[${B}](context)
if(mr!==undefined)error=context.response=mr}`,O()}}U.resolve(),X+=`
return mapResponse(${M}error,set${Q.mapResponseContext})}`;let H=(B)=>typeof B==="function"?B:B.fn;return Function("inject",`"use strict";
`+X)({mapResponse:$["~adapter"].handler.mapResponse,ERROR_CODE:y7,ElysiaCustomStatusResponse:y1,onError:$.event.error?.map(H),afterResponse:$.event.afterResponse?.map(H),trace:$.event.trace?.map(H),onMapResponse:$.event.mapResponse?.map(H),ELYSIA_TRACE:J?a7:void 0,ELYSIA_REQUEST_ID:J?z9:void 0,...Q.inject})},p1=($,Y,X)=>{if(m0(Y.headers)||Y.status!==200||Y.cookie)switch(s7(Y),$?.constructor?.name){case"String":return new Response($,Y);case"Array":case"Object":return Y.headers["content-type"]="application/json",new Response(JSON.stringify($),Y);case"ElysiaFile":return n0($.value);case"File":return n0($,Y);case"Blob":return n0($,Y);case"ElysiaCustomStatusResponse":return Y.status=$.code,p1($.response,Y,X);case"ReadableStream":if(!Y.headers["content-type"]?.startsWith("text/event-stream"))Y.headers["content-type"]="text/event-stream; charset=utf-8";return X?.signal?.addEventListener("abort",{handleEvent(){if(X?.signal&&!X?.signal?.aborted)$.cancel()}},{once:!0}),new Response($,Y);case void 0:if(!$)return new Response("",Y);return new Response(JSON.stringify($),Y);case"Response":return i7($,Y,X);case"Error":return P8($,Y);case"Promise":return $.then((Q)=>p1(Q,Y,X));case"Function":return p1($(),Y,X);case"Number":case"Boolean":return new Response($.toString(),Y);case"Cookie":if($ instanceof W8)return new Response($.value,Y);return new Response($?.toString(),Y);case"FormData":return new Response($,Y);default:if($ instanceof Response)return i7($,Y,X);if($ instanceof Promise)return $.then((Q)=>p1(Q,Y));if($ instanceof Error)return P8($,Y);if($ instanceof y1)return Y.status=$.code,p1($.response,Y,X);if(typeof $?.next==="function")return V8($,Y,X);if(typeof $?.then==="function")return $.then((Q)=>p1(Q,Y));if(typeof $?.toResponse==="function")return p1($.toResponse(),Y);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!Y.headers["Content-Type"])Y.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),Y)}}return new Response($,Y)}if($ instanceof Response&&!$.headers.has("content-length")&&$.headers.get("transfer-encoding")==="chunked")return V8(b8($),E8($,Y),X);if(typeof $?.next==="function"||$ instanceof ReadableStream)return V8($,Y,X);return Q8($,X)},l1=($,Y,X)=>{if($===void 0||$===null)return;if(m0(Y.headers)||Y.status!==200||Y.cookie)switch(s7(Y),$?.constructor?.name){case"String":return new Response($,Y);case"Array":case"Object":return Y.headers["content-type"]="application/json",new Response(JSON.stringify($),Y);case"ElysiaFile":return n0($.value);case"File":return n0($,Y);case"Blob":return n0($,Y);case"ElysiaCustomStatusResponse":return Y.status=$.code,l1($.response,Y,X);case"ReadableStream":if(!Y.headers["content-type"]?.startsWith("text/event-stream"))Y.headers["content-type"]="text/event-stream; charset=utf-8";return X?.signal?.addEventListener("abort",{handleEvent(){if(X?.signal&&!X?.signal?.aborted)$.cancel()}},{once:!0}),new Response($,Y);case void 0:if(!$)return;return new Response(JSON.stringify($),Y);case"Response":return i7($,Y,X);case"Promise":return $.then((Q)=>l1(Q,Y));case"Error":return P8($,Y);case"Function":return l1($(),Y);case"Number":case"Boolean":return new Response($.toString(),Y);case"FormData":return new Response($);case"Cookie":if($ instanceof W8)return new Response($.value,Y);return new Response($?.toString(),Y);default:if($ instanceof Response)return i7($,Y,X);if($ instanceof Promise)return $.then((Q)=>l1(Q,Y));if($ instanceof Error)return P8($,Y);if($ instanceof y1)return Y.status=$.code,l1($.response,Y,X);if(typeof $?.next==="function")return V8($,Y,X);if(typeof $?.then==="function")return $.then((Q)=>l1(Q,Y));if(typeof $?.toResponse==="function")return l1($.toResponse(),Y);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!Y.headers["Content-Type"])Y.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),Y)}}return new Response($,Y)}else switch($?.constructor?.name){case"String":return new Response($);case"Array":case"Object":return Y.headers["content-type"]="application/json",new Response(JSON.stringify($),Y);case"ElysiaFile":return n0($.value);case"File":return n0($,Y);case"Blob":return n0($,Y);case"ElysiaCustomStatusResponse":return Y.status=$.code,l1($.response,Y,X);case"ReadableStream":return X?.signal?.addEventListener("abort",{handleEvent(){if(X?.signal&&!X?.signal?.aborted)$.cancel()}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":if(!$.headers.has("content-length")&&$.headers.get("transfer-encoding")==="chunked")return V8(b8($),E8($),X);return $;case"Promise":return $.then((Q)=>{let W=l1(Q,Y);if(W!==void 0)return W});case"Error":return P8($,Y);case"Function":return Q8($(),X);case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof W8)return new Response($.value,Y);return new Response($?.toString(),Y);case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Q)=>l1(Q,Y));if($ instanceof Error)return P8($,Y);if($ instanceof y1)return Y.status=$.code,l1($.response,Y,X);if(typeof $?.next==="function")return V8($,Y,X);if(typeof $?.then==="function")return $.then((Q)=>l1(Q,Y));if(typeof $?.toResponse==="function")return l1($.toResponse(),Y);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!Y.headers["Content-Type"])Y.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),Y)}}return new Response($)}},Q8=($,Y)=>{switch($?.constructor?.name){case"String":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});case"ElysiaFile":return n0($.value);case"File":return n0($);case"Blob":return n0($);case"ElysiaCustomStatusResponse":return p1($.response,{status:$.code,headers:{}});case"ReadableStream":return Y?.signal?.addEventListener("abort",{handleEvent(){if(Y?.signal&&!Y?.signal?.aborted)$.cancel()}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":if($.headers.get("transfer-encoding")==="chunked")return V8(b8($),E8($),Y);return $;case"Error":return P8($);case"Promise":return $.then((X)=>Q8(X,Y));case"Function":return Q8($(),Y);case"Number":case"Boolean":return new Response($.toString());case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((X)=>Q8(X,Y));if($ instanceof Error)return P8($);if($ instanceof y1)return p1($.response,{status:$.code,headers:{}});if(typeof $?.next==="function")return V8($,void 0,Y);if(typeof $?.then==="function")return $.then((X)=>p1(X,set));if(typeof $?.toResponse==="function")return Q8($.toResponse());if("charCodeAt"in $){let X=$.charCodeAt(0);if(X===123||X===91)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}})}return new Response($)}},P8=($,Y)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:Y?.status!==200?Y?.status??500:500,headers:Y?.headers}),SS=($,Y,X={})=>{if(typeof $==="function")return;let Q=p1($,{headers:X});if(!Y.parse?.length&&!Y.transform?.length&&!Y.beforeHandle?.length&&!Y.afterHandle?.length)return Q.clone.bind(Q)},i7=uM({mapResponse:p1,mapCompactResponse:Q8}),V8=aY({mapResponse:p1,mapCompactResponse:Q8}),Y8=($,Y)=>Y?$:"",jM=($,Y,X,Q=!1)=>{let W="",J=$.setHeaders,G=!!$.event.trace?.length;if(G)W+=`const id=randomId()
`;let M=/[:*]/.test(Y.path),U=`const u=request.url,s=u.indexOf('/',${$.config.handler?.standardHostname??!0?11:7}),qi=u.indexOf('?', s + 1)
`;if(X.query)W+=U;let H=!X.path?"":!M?`path:'${Y.path}',`:"get path(){"+(X.query?"":U)+`if(qi===-1)return u.substring(s)
return u.substring(s,qi)
},`;if(W+=Y8("const c=",!Q)+"{request,store,"+Y8("qi,",X.query)+Y8("params:request.params,",M)+H+Y8("url:request.url,",G||X.url||X.query)+"redirect,error:status,status,set:{headers:"+(m0(J)?"Object.assign({},app.setHeaders)":"Object.create(null)")+",status:200}",X.server)W+=",get server(){return app.getServer()}";if(G)W+=",[ELYSIA_REQUEST_ID]:id";{let B="";for(let A of Object.keys($.singleton.decorator))B+=`,'${A}':decorator['${A}']`;W+=B}return W+=`}
`,W},fY=($,Y)=>{let X=!!$.event.trace?.length,Q=!!$.extender.higherOrderFunctions.length,W=N9(Y.hooks,$.inference);W=N9({handler:Y.handler},W);let J="const handler=data.handler,app=data.app,store=data.store,decorator=data.decorator,redirect=data.redirect,route=data.route,mapEarlyResponse=data.mapEarlyResponse,"+Y8("randomId=data.randomId,",X)+Y8("ELYSIA_REQUEST_ID=data.ELYSIA_REQUEST_ID,",X)+Y8("ELYSIA_TRACE=data.ELYSIA_TRACE,",X)+Y8("trace=data.trace,",X)+Y8("hoc=data.hoc,",Q)+`status=data.status
`;if($.event.request?.length)J+=`const onRequest=app.event.request.map(x=>x.fn)
`;if(J+=`${$.event.request?.find(O1)?"async":""} function map(request){`,X||W.query||$.event.request?.length)J+=jM($,Y,W),J+=nM($),J+="return handler(c)}";else J+=`return handler(${jM($,Y,W,!0)})}`;return J+=rM($),Function("data",J)({app:$,handler:Y.compile?.()??Y.composed,redirect:rY,status:h7,hoc:$.extender.higherOrderFunctions.map((G)=>G.fn),store:$.store,decorator:$.decorator,route:Y.path,randomId:X?r7:void 0,ELYSIA_TRACE:X?a7:void 0,ELYSIA_REQUEST_ID:X?z9:void 0,trace:X?$.event.trace?.map((G)=>G?.fn??G):void 0,mapEarlyResponse:l1})},_S=($,Y,X={})=>{if(typeof $==="function"||$ instanceof Blob)return;if(typeof $==="object"&&$?.toString()==="[object HTMLBundle]")return()=>$;let Q=p1($,{headers:X});if(!Y.parse?.length&&!Y.transform?.length&&!Y.beforeHandle?.length&&!Y.afterHandle?.length){if(Q instanceof Promise)return Q.then((W)=>{if(!W)return;if(!W.headers.has("content-type"))W.headers.append("content-type","text/plain");return W.clone()});if(!Q.headers.has("content-type"))Q.headers.append("content-type","text/plain");return Q.clone.bind(Q)}},KM={open($){$.data.open?.($)},message($,Y){$.data.message?.($,Y)},drain($){$.data.drain?.($)},close($,Y,X){$.data.close?.($,Y,X)}};class M9{raw;data;body;validator;["~types"];get id(){return this.data.id}constructor($,Y,X=void 0){this.raw=$,this.data=Y,this.body=X,this.validator=$.data?.validator,this.sendText=$.sendText.bind($),this.sendBinary=$.sendBinary.bind($),this.close=$.close.bind($),this.terminate=$.terminate.bind($),this.publishText=$.publishText.bind($),this.publishBinary=$.publishBinary.bind($),this.subscribe=$.subscribe.bind($),this.unsubscribe=$.unsubscribe.bind($),this.isSubscribed=$.isSubscribed.bind($),this.cork=$.cork.bind($),this.remoteAddress=$.remoteAddress,this.binaryType=$.binaryType,this.data=$.data,this.send=this.send.bind(this),this.ping=this.ping.bind(this),this.pong=this.pong.bind(this),this.publish=this.publish.bind(this)}send($,Y){if(Buffer.isBuffer($))return this.raw.send($,Y);if(this.validator?.Check($)===!1)return this.raw.send(new g0("message",this.validator,$).message);if(typeof $==="object")$=JSON.stringify($);return this.raw.send($,Y)}ping($){if(Buffer.isBuffer($))return this.raw.ping($);if(this.validator?.Check($)===!1)return this.raw.send(new g0("message",this.validator,$).message);if(typeof $==="object")$=JSON.stringify($);return this.raw.ping($)}pong($){if(Buffer.isBuffer($))return this.raw.pong($);if(this.validator?.Check($)===!1)return this.raw.send(new g0("message",this.validator,$).message);if(typeof $==="object")$=JSON.stringify($);return this.raw.pong($)}publish($,Y,X){if(Buffer.isBuffer(Y))return this.raw.publish($,Y,X);if(this.validator?.Check(Y)===!1)return this.raw.send(new g0("message",this.validator,Y).message);if(typeof Y==="object")Y=JSON.stringify(Y);return this.raw.publish($,Y,X)}sendText;sendBinary;close;terminate;publishText;publishBinary;subscribe;unsubscribe;isSubscribed;cork;remoteAddress;binaryType;get readyState(){return this.raw.readyState}}var RS=($)=>{let Y=typeof $==="function"?[$]:$;return async function X(Q,W){if(typeof W==="string"){let J=W?.charCodeAt(0);if(J===34||J===47||J===91||J===123)try{W=JSON.parse(W)}catch{}else if(nY(W))W=+W;else if(W==="true")W=!0;else if(W==="false")W=!1;else if(W==="null")W=null}if(Y)for(let J=0;J<Y.length;J++){let G=Y[J](Q,W);if(G instanceof Promise)G=await G;if(G!==void 0)return G}return W}},PS=($)=>{let Y=(X,Q)=>{if(Q instanceof Promise)return Q.then((G)=>Y(X,G));if(Buffer.isBuffer(Q))return X.send(Q.toString());if(Q===void 0)return;let W=(G)=>{if($?.Check(G)===!1)return X.send(new g0("message",$,G).message);if(typeof G==="object")return X.send(JSON.stringify(G));X.send(G)};if(typeof Q?.next!=="function")return void W(Q);let J=Q.next();if(J instanceof Promise)return(async()=>{let G=await J;if($?.Check(G)===!1)return X.send(new g0("message",$,G).message);if(W(G.value),!G.done)for await(let M of Q)W(M)})();if(W(J.value),!J.done)for(let G of Q)W(G)};return Y},CS=/:.+?\?(?=\/|$)/,sM=($)=>{let Y=CS.exec($);if(!Y)return[$];let X=[],Q=$.slice(0,Y.index),W=Y[0].slice(0,-1),J=$.slice(Y.index+Y[0].length);X.push(Q.slice(0,-1)),X.push(Q+W);for(let G of sM(J)){if(!G)continue;if(!G.startsWith("/:"))X.push(Q.slice(0,-1)+G);X.push(Q+W+G)}return X},aM={GET:!0,HEAD:!0,OPTIONS:!0,DELETE:!0,PATCH:!0,POST:!0,PUT:!0},vY=($)=>{if(!$.config.aot||!$.config.systemRouter)return;let Y={},X=(W,J)=>{if(Y[W.path]){if(!Y[W.path][W.method])Y[W.path][W.method]=J}else Y[W.path]={[W.method]:J}},Q=$.routeTree;for(let W of $.router.history){if(typeof W.handler!=="function")continue;let J=W.method;if(J==="GET"&&`WS_${W.path}`in Q||J==="WS"||W.path.charCodeAt(W.path.length-1)===42||!(J in aM))continue;if(J==="ALL"){if(!(`WS_${W.path}`in Q))Y[W.path]=W.hooks?.config?.mount?W.hooks.trace||$.event.trace||$.extender.higherOrderFunctions?fY($,W):W.hooks.mount||W.handler:W.handler;continue}let G,M=$.config.precompile?fY($,W):(U)=>{if(G)return G(U);return(G=fY($,W))(U)};for(let U of sM(W.path))X({method:J,path:U},M)}return Y},r6=($,Y)=>{if(!Y)return $;for(let X of Object.keys(Y)){if($[X]===Y[X])continue;if(!$[X]){$[X]=Y[X];continue}if($[X]&&Y[X]){if(typeof $[X]==="function"||$[X]instanceof Response){$[X]=Y[X];continue}$[X]={...$[X],...Y[X]}}}return $},VS={...uY,name:"bun",handler:{mapResponse:p1,mapEarlyResponse:l1,mapCompactResponse:Q8,createStaticHandler:SS,createNativeStaticHandler:_S},composeHandler:{...uY.composeHandler,headers:f7?`c.headers=c.request.headers.toJSON()
`:`c.headers={}
for(const [k,v] of c.request.headers.entries())c.headers[k]=v
`},listen($){return(Y,X)=>{if(typeof Bun==="undefined")throw new Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");if($.compile(),typeof Y==="string"){if(!nY(Y))throw new Error("Port must be a numeric value");Y=parseInt(Y)}let Q=(J,{withAsync:G=!1}={})=>{let M={},U=[];for(let[H,B]of Object.entries(J))if(xM){if(!B)continue;for(let[A,O]of Object.entries(B)){if(!O||!(A in aM))continue;if(O instanceof Promise){if(G){if(!M[H])M[H]={};U.push(O.then((w)=>{if(w instanceof Response)M[H][A]=w}))}continue}if(!(O instanceof Response))continue;if(!M[H])M[H]={};M[H][A]=O}}else{if(!B)continue;if(B instanceof Promise){if(G){if(!M[H])M[H]={};U.push(B.then((A)=>{if(A instanceof Response)M[H]=A}))}continue}if(!(B instanceof Response))continue;M[H]=B}if(G)return Promise.all(U).then(()=>M);return M},W=typeof Y==="object"?{development:!q9,reusePort:!0,...$.config.serve||{},...Y||{},routes:r6(r6(Q($.router.response),vY($)),$.config.serve?.routes),websocket:{...$.config.websocket||{},...KM||{}},fetch:$.fetch}:{development:!q9,reusePort:!0,...$.config.serve||{},routes:r6(r6(Q($.router.response),vY($)),$.config.serve?.routes),websocket:{...$.config.websocket||{},...KM||{}},port:Y,fetch:$.fetch};if($.server=Bun.serve(W),$.event.start)for(let J=0;J<$.event.start.length;J++)$.event.start[J].fn($);if(X)X($.server);process.on("beforeExit",()=>{if($.server){if($.server.stop?.(),$.server=null,$.event.stop)for(let J=0;J<$.event.stop.length;J++)$.event.stop[J].fn($)}}),$.promisedModules.then(async()=>{$.server?.reload({...W,fetch:$.fetch,routes:r6(r6(await Q($.router.response,{withAsync:!0}),vY($)),$.config.serve?.routes)}),Bun?.gc(!1)})}},ws($,Y,X){let{parse:Q,body:W,response:J,...G}=X,M=S1(W,{modules:$.definitions.typebox,models:$.definitions.type,normalize:$.config.normalize}),U=S1(J,{modules:$.definitions.typebox,models:$.definitions.type,normalize:$.config.normalize});$.route("WS",Y,async(H)=>{let B=$.getServer(),{set:A,path:O,qi:w,headers:q,query:L,params:j}=H;if(H.validator=U,X.upgrade){if(typeof X.upgrade==="function"){let g=X.upgrade(H);if(g instanceof Promise)await g}else if(X.upgrade)Object.assign(A.headers,X.upgrade)}if(A.cookie&&m0(A.cookie)){let g=cM(A.cookie);if(g)A.headers["set-cookie"]=g}if(A.headers["set-cookie"]&&Array.isArray(A.headers["set-cookie"]))A.headers=mM(new Headers(A.headers),A.headers["set-cookie"]);let h=PS(U),V=RS(Q),I,o=[...Array.isArray(X.error)?X.error:[X.error],...($.event.error??[]).map((g)=>typeof g==="function"?g:g.fn)].filter((g)=>g),Q0=!o.length?()=>{}:async(g,x)=>{for(let f of o){let C=f(Object.assign(H,{error:x}));if(C instanceof Promise)C=await C;if(await h(g,C),C)break}};if(B?.upgrade(H.request,{headers:m0(A.headers)?A.headers:void 0,data:{...H,get id(){if(I)return I;return I=r7()},validator:U,ping(g){X.ping?.(g)},pong(g){X.pong?.(g)},open(g){try{h(g,X.open?.(new M9(g,H)))}catch(x){Q0(g,x)}},message:async(g,x)=>{let f=await V(g,x);if(M?.Check(f)===!1)return void g.send(new g0("message",M,f).message);try{h(g,X.message?.(new M9(g,H,f),f))}catch(C){Q0(g,C)}},drain(g){try{h(g,X.drain?.(new M9(g,H)))}catch(x){Q0(g,x)}},close(g,x,f){try{h(g,X.close?.(new M9(g,H),x,f))}catch(C){Q0(g,C)}}}}))return;return A.status=400,"Expected a websocket connection"},{...G,websocket:X})}},FM=e6?Bun.env:typeof process!=="undefined"&&process?.env?process.env:{},yY=($,Y)=>{for(let[X,Q]of Object.entries($.schema.properties))Y[X]??=Q.default},SM=($)=>{let{mapResponse:Y,mapEarlyResponse:X}=$["~adapter"].handler;return async(Q)=>{let W=Q.url,J=W.indexOf("/",11),G=W.indexOf("?",J+1),M=G===-1?W.substring(J):W.substring(J,G),U={cookie:{},status:200,headers:{}},H=Object.assign({},$.singleton.decorator,{set:U,store:$.singleton.store,request:Q,path:M,qi:G,error:h7,status:h7,redirect:rY});try{if($.event.request)for(let x=0;x<$.event.request.length;x++){let f=$.event.request[x].fn,C=f(H);if(C instanceof Promise)C=await C;if(C=X(C,U),C)return H.response=C}let B=$.router.dynamic.find(Q.method,M)??$.router.dynamic.find("ALL",M);if(!B)throw new tY;let{handle:A,hooks:O,validator:w,content:q,route:L}=B.store,j;if(Q.method!=="GET"&&Q.method!=="HEAD")if(q)switch(q){case"application/json":j=await Q.json();break;case"text/plain":j=await Q.text();break;case"application/x-www-form-urlencoded":j=x7(await Q.text());break;case"application/octet-stream":j=await Q.arrayBuffer();break;case"multipart/form-data":j={};let x=await Q.formData();for(let f of x.keys()){if(j[f])continue;let C=x.getAll(f);if(C.length===1)j[f]=C[0];else j[f]=C}break}else{let x=Q.headers.get("content-type");if(x){let f=x.indexOf(";");if(f!==-1)x=x.slice(0,f);if(H.contentType=x,O.parse)for(let C=0;C<O.parse.length;C++){let l=O.parse[C].fn,$0=l(H,x);if($0 instanceof Promise)$0=await $0;if($0){j=$0;break}}if(delete H.contentType,j===void 0)switch(x){case"application/json":j=await Q.json();break;case"text/plain":j=await Q.text();break;case"application/x-www-form-urlencoded":j=x7(await Q.text());break;case"application/octet-stream":j=await Q.arrayBuffer();break;case"multipart/form-data":j={};let C=await Q.formData();for(let l of C.keys()){if(j[l])continue;let $0=C.getAll(l);if($0.length===1)j[l]=$0[0];else j[l]=$0}break}}}H.route=L,H.body=j,H.params=B?.params||void 0,H.query=G===-1?{}:x7(W.substring(G+1)),H.headers={};for(let[x,f]of Q.headers.entries())H.headers[x]=f;let h=Object.assign({},$.config?.cookie,w?.cookie?.config),V=Q.headers.get("cookie");H.cookie=await dM(H.set,V,h?{secrets:h.secrets!==void 0?typeof h.secrets==="string"?h.secrets:h.secrets.join(","):void 0,sign:h.sign===!0?!0:h.sign!==void 0?typeof h.sign==="string"?h.sign:h.sign.join(","):void 0}:void 0);let I=w?.createHeaders?.();if(I)yY(I,H.headers);let o=w?.createParams?.();if(o)yY(o,H.params);let Q0=w?.createQuery?.();if(Q0)yY(Q0,H.query);if(O.transform)for(let x=0;x<O.transform.length;x++){let f=O.transform[x],C=f.fn(H);if(C instanceof Promise)C=await C;if(C instanceof y1){let l=X(C,H.set);if(l)return H.response=l}if(f.subType==="derive")Object.assign(H,C)}if(w){if(I){let x=structuredClone(H.headers);for(let[f,C]of Q.headers)x[f]=C;if(w.headers.Check(x)===!1)throw new g0("header",w.headers,x)}else if(w.headers?.Decode)H.headers=w.headers.Decode(H.headers);if(o?.Check(H.params)===!1)throw new g0("params",w.params,H.params);else if(w.params?.Decode)H.params=w.params.Decode(H.params);if(Q0?.Check(H.query)===!1)throw new g0("query",w.query,H.query);else if(w.query?.Decode)H.query=w.query.Decode(H.query);if(w.createCookie?.()){let x={};for(let[f,C]of Object.entries(H.cookie))x[f]=C.value;if(w.cookie.Check(x)===!1)throw new g0("cookie",w.cookie,x);else if(w.cookie?.Decode)x=w.cookie.Decode(x)}if(w.createBody?.()?.Check(j)===!1)throw new g0("body",w.body,j);else if(w.body?.Decode)H.body=w.body.Decode(j)}if(O.beforeHandle)for(let x=0;x<O.beforeHandle.length;x++){let f=O.beforeHandle[x],C=f.fn(H);if(C instanceof Promise)C=await C;if(C instanceof y1){let l=X(C,H.set);if(l)return H.response=l}if(f.subType==="resolve"){Object.assign(H,C);continue}if(C!==void 0){if(H.response=C,O.afterHandle)for(let $0=0;$0<O.afterHandle.length;$0++){let H0=O.afterHandle[$0].fn(H);if(H0 instanceof Promise)H0=await H0;if(H0)C=H0}let l=X(C,H.set);if(l)return H.response=l}}let g=typeof A==="function"?A(H):A;if(g instanceof Promise)g=await g;if(O.afterHandle)if(!O.afterHandle.length){let x=g instanceof y1?g.code:U.status?typeof U.status==="string"?n7[U.status]:U.status:200,f=w?.createResponse?.()?.[x];if(f?.Check(g)===!1)throw new g0("response",f,g);else if(f?.Decode)g=f.Decode(g)}else{H.response=g;for(let x=0;x<O.afterHandle.length;x++){let f=O.afterHandle[x].fn(H);if(f instanceof Promise)f=await f;let C=X(f,H.set);if(C!==void 0){let l=w?.response?.[C.status];if(l?.Check(C)===!1)throw new g0("response",l,C);else if(l?.Decode)g=l.Decode(g);return H.response=C}}}if(H.set.cookie&&h?.sign){let x=!h.secrets?void 0:typeof h.secrets==="string"?h.secrets:h.secrets[0];if(h.sign===!0)for(let[f,C]of Object.entries(H.set.cookie))H.set.cookie[f].value=await v7(C.value,"${secret}");else{let f=w?.cookie?.schema?.properties;for(let C of h.sign){if(!(C in f))continue;if(H.set.cookie[C]?.value)H.set.cookie[C].value=await v7(H.set.cookie[C].value,x)}}}return Y(H.response=g,H.set)}catch(B){let A=B instanceof q7&&B.error?B.error:B;return $.handleError(H,A)}finally{if($.event.afterResponse)for(let B of $.event.afterResponse)await B.fn(H)}}},ES=($)=>{let{mapResponse:Y}=$["~adapter"].handler;return async(X,Q)=>{let W=Object.assign(X,{error:Q,code:Q.code});if(W.set=X.set,$.event.error)for(let J=0;J<$.event.error.length;J++){let G=$.event.error[J].fn(W);if(G instanceof Promise)G=await G;if(G!==void 0&&G!==null)return X.response=Y(G,X.set)}return new Response(typeof Q.cause==="string"?Q.cause:Q.message,{headers:X.set.headers,status:Q.status??500})}};class V0{config;server=null;dependencies={};"~Prefix"="";"~Singleton"=null;"~Definitions"=null;"~Metadata"=null;"~Ephemeral"=null;"~Volatile"=null;"~Routes"=null;singleton={decorator:{},store:{},derive:{},resolve:{}};get store(){return this.singleton.store}get decorator(){return this.singleton.decorator}definitions={typebox:z.Module({}),type:{},error:{}};extender={macros:[],higherOrderFunctions:[]};validator={global:null,scoped:null,local:null,getCandidate(){if(!this.global&&!this.scoped&&!this.local)return{body:void 0,headers:void 0,params:void 0,query:void 0,cookie:void 0,response:void 0};return X9(X9(this.global,this.scoped),this.local)}};standaloneValidator={global:null,scoped:null,local:null};event={};telemetry;router={"~http":void 0,get http(){if(!this["~http"])this["~http"]=new a6({lazy:!0});return this["~http"]},"~dynamic":void 0,get dynamic(){if(!this["~dynamic"])this["~dynamic"]=new a6;return this["~dynamic"]},static:{},response:{},history:[]};routeTree={};get routes(){return this.router.history}getGlobalRoutes(){return this.router.history}getGlobalDefinitions(){return this.definitions}inference={body:!1,cookie:!1,headers:!1,query:!1,set:!1,server:!1,path:!1,route:!1,url:!1};getServer(){return this.server}getParent(){return null}"~parser"={};_promisedModules;get promisedModules(){if(!this._promisedModules)this._promisedModules=new TM(console.error,()=>{});return this._promisedModules}constructor($={}){if($.tags)if(!$.detail)$.detail={tags:$.tags};else $.detail.tags=$.tags;if(this.config={prefix:"",aot:FM.ELYSIA_AOT!=="false",nativeStaticResponse:!0,systemRouter:!0,encodeSchema:!0,normalize:!0,...$,cookie:{path:"/",...$?.cookie},experimental:$?.experimental??{},seed:$?.seed===void 0?"":$?.seed},this["~adapter"]=$.adapter??(typeof Bun!=="undefined"?VS:uY),$?.analytic&&($?.name||$?.seed!==void 0))this.telemetry={stack:new Error().stack}}"~adapter";env($,Y=FM){if(S1($,{modules:this.definitions.typebox,dynamic:!0,additionalProperties:!0,coerce:!0,sanitize:()=>this.config.sanitize}).Check(Y)===!1){let X=new g0("env",$,Y);throw new Error(X.all.map((Q)=>Q.summary).join(`
`))}return this}wrap($){return this.extender.higherOrderFunctions.push({checksum:t6(JSON.stringify({name:this.config.name,seed:this.config.seed,content:$.toString()})),fn:$}),this}applyMacro($){if(this.extender.macros.length){let Y=iF({globalHook:this.event,localHook:$}),X={events:{global:this.event,local:$},get onParse(){return Y("parse")},get onTransform(){return Y("transform")},get onBeforeHandle(){return Y("beforeHandle")},get onAfterHandle(){return Y("afterHandle")},get mapResponse(){return Y("mapResponse")},get onAfterResponse(){return Y("afterResponse")},get onError(){return Y("error")}};for(let Q of this.extender.macros)pF(Q.fn(X),$,Y)}}get models(){let $={};for(let Y of Object.keys(this.definitions.type))$[Y]=S1(this.definitions.typebox.Import(Y));return $.modules=this.definitions.typebox,$}add($,Y,X,Q,W,J){let G=W?.skipPrefix??!1,M=W?.allowMeta??!1;if(Q??={},J===void 0){if(J=[],this.standaloneValidator.local)J=J.concat(this.standaloneValidator.local);if(this.standaloneValidator.scoped)J=J.concat(this.standaloneValidator.scoped);if(this.standaloneValidator.global)J=J.concat(this.standaloneValidator.global)}if(Y!==""&&Y.charCodeAt(0)!==47)Y="/"+Y;if(this.config.prefix&&!G)Y=this.config.prefix+Y;if(Q?.type)switch(Q.type){case"text":Q.type="text/plain";break;case"json":Q.type="application/json";break;case"formdata":Q.type="multipart/form-data";break;case"urlencoded":Q.type="application/x-www-form-urlencoded";break;case"arrayBuffer":Q.type="application/octet-stream";break;default:break}let U=this.validator.getCandidate(),H={body:Q?.body??U?.body,headers:Q?.headers??U?.headers,params:Q?.params??U?.params,query:Q?.query??U?.query,cookie:Q?.cookie??U?.cookie,response:Q?.response??U?.response},B=this.config.precompile===!0||typeof this.config.precompile==="object"&&this.config.precompile.compose===!0,A=()=>{let C=this.definitions.type,l=!this.config.aot,$0=this.config.normalize,H0=this.definitions.typebox,A0=()=>this.config.sanitize,B5=()=>{if(H.cookie||J.find((S0)=>S0.cookie))return oM({modules:H0,validator:H.cookie,defaultConfig:this.config.cookie,config:H.cookie?.config??{},dynamic:l,models:C,validators:J.map((S0)=>S0.cookie),sanitize:A0})};return B?{body:S1(H.body,{modules:H0,dynamic:l,models:C,normalize:$0,additionalCoerce:pY(),validators:J.map((S0)=>S0.body),sanitize:A0}),headers:S1(H.headers,{modules:H0,dynamic:l,models:C,additionalProperties:!0,coerce:!0,additionalCoerce:W6(),validators:J.map((S0)=>S0.headers),sanitize:A0}),params:S1(H.params,{modules:H0,dynamic:l,models:C,coerce:!0,additionalCoerce:W6(),validators:J.map((S0)=>S0.params),sanitize:A0}),query:S1(H.query,{modules:H0,dynamic:l,models:C,normalize:$0,coerce:!0,additionalCoerce:W6(),validators:J.map((S0)=>S0.query),sanitize:A0}),cookie:B5(),response:ZM(H.response,{modules:H0,dynamic:l,models:C,normalize:$0,validators:J.map((S0)=>S0.response),sanitize:A0})}:{createBody(){if(this.body)return this.body;return this.body=S1(H.body,{modules:H0,dynamic:l,models:C,normalize:$0,additionalCoerce:pY(),validators:J.map((S0)=>S0.body),sanitize:A0})},createHeaders(){if(this.headers)return this.headers;return this.headers=S1(H.headers,{modules:H0,dynamic:l,models:C,additionalProperties:!$0,coerce:!0,additionalCoerce:W6(),validators:J.map((S0)=>S0.headers),sanitize:A0})},createParams(){if(this.params)return this.params;return this.params=S1(H.params,{modules:H0,dynamic:l,models:C,coerce:!0,additionalCoerce:W6(),validators:J.map((S0)=>S0.params),sanitize:A0})},createQuery(){if(this.query)return this.query;return this.query=S1(H.query,{modules:H0,dynamic:l,models:C,coerce:!0,additionalCoerce:W6(),validators:J.map((S0)=>S0.query),sanitize:A0})},createCookie(){if(this.cookie)return this.cookie;return this.cookie=B5()},createResponse(){if(this.response)return this.response;return this.response=ZM(H.response,{modules:H0,dynamic:l,models:C,normalize:$0,validators:J.map((S0)=>S0.response),sanitize:A0})}}};if(U.body||U.cookie||U.headers||U.params||U.query||U.response)Q=a2(Q,U);if(Q.tags)if(!Q.detail)Q.detail={tags:Q.tags};else Q.detail.tags=Q.tags;if(m0(this.config.detail))Q.detail=Q5(Object.assign({},this.config.detail),Q.detail);this.applyMacro(Q);let O=m0(this.event)?a2(this.event,MM(Q)):cF(MM(Q));if(this.config.aot===!1){let C=A();this.router.dynamic.add($,Y,{validator:C,hooks:O,content:Q?.type,handle:X,route:Y});let l=J9(Y,{dynamic:!0});if(Y!==l)this.router.dynamic.add($,l,{validator:C,hooks:O,content:Q?.type,handle:X,route:Y});if(this.config.strictPath===!1){let $0=W9(Y);this.router.dynamic.add($,$0,{validator:C,hooks:O,content:Q?.type,handle:X,route:Y});let H0=J9($0);if($0!==H0)this.router.dynamic.add($,$0,{validator:C,hooks:O,content:Q?.type,handle:X,route:Y})}this.router.history.push({method:$,path:Y,composed:null,handler:X,compile:void 0,hooks:O,standaloneValidators:J});return}let w=this["~adapter"].handler,q=typeof X!=="function"?()=>{let C=w.createNativeStaticHandler?.(X,O,this.setHeaders);return C instanceof Promise?C.then((l)=>{if(l)return l}):C?.()}:void 0,L=this.config.nativeStaticResponse===!0,j=(C)=>{if(!L||!q)return;if(xM)if(this.router.response[C])this.router.response[C][$]=q();else this.router.response[C]={[$]:q()};else this.router.response[C]=q()};j(Y);let h,V=()=>{if(h)return h;return h=FS({app:this,path:Y,method:$,hooks:O,validator:A(),handler:typeof X!=="function"&&typeof w.createStaticHandler!=="function"?()=>X:X,allowMeta:M,inference:this.inference})},I;if(`${$}_${Y}`in this.routeTree)for(let C=0;C<this.router.history.length;C++){let l=this.router.history[C];if(l.path===Y&&l.method===$){I=C;break}}else this.routeTree[`${$}_${Y}`]=this.router.history.length;let o=I??this.router.history.length,Q0=B?V():(C)=>(this.router.history[o].composed=V())(C);if(I!==void 0)this.router.history[I]=Object.assign({method:$,path:Y,composed:Q0,compile:V,handler:X,hooks:O},J.length?{standaloneValidators:J}:void 0,Q.webSocket?{websocket:Q.websocket}:void 0);else this.router.history.push(Object.assign({method:$,path:Y,composed:Q0,compile:V,handler:X,hooks:O},J.length?{standaloneValidators:J}:void 0,Q.webSocket?{websocket:Q.websocket}:void 0));let g={handler:B?Q0:void 0,compile(){return this.handler=V()}},x=this.router.static,f=Y.indexOf(":")===-1&&Y.indexOf("*")===-1;if($==="WS"){if(f){if(Y in x)x[Y][$]=o;else x[Y]={[$]:o};return}if(this.router.http.add("WS",Y,g),!this.config.strictPath)this.router.http.add("WS",W9(Y),g);let C=J9(Y,{dynamic:!0});if(Y!==C)this.router.http.add("WS",C,g);return}if(f){if(Y in x)x[Y][$]=o;else x[Y]={[$]:o};if(!this.config.strictPath)j(W9(Y))}else{if(this.router.http.add($,Y,g),!this.config.strictPath){let l=W9(Y);j(l),this.router.http.add($,l,g)}let C=J9(Y,{dynamic:!0});if(Y!==C)this.router.http.add($,C,g),j(C)}}setHeaders;headers($){if(!$)return this;if(!this.setHeaders)this.setHeaders={};return this.setHeaders=Q5(this.setHeaders,$),this}onStart($){return this.on("start",$),this}onRequest($){return this.on("request",$),this}onParse($,Y){if(!Y){if(typeof $==="string")return this.on("parse",this["~parser"][$]);return this.on("parse",$)}return this.on($,"parse",Y)}parser($,Y){return this["~parser"][$]=Y,this}onTransform($,Y){if(!Y)return this.on("transform",$);return this.on($,"transform",Y)}resolve($,Y){if(!Y)Y=$,$={as:"local"};let X={subType:"resolve",fn:Y};return this.onBeforeHandle($,X)}mapResolve($,Y){if(!Y)Y=$,$={as:"local"};let X={subType:"mapResolve",fn:Y};return this.onBeforeHandle($,X)}onBeforeHandle($,Y){if(!Y)return this.on("beforeHandle",$);return this.on($,"beforeHandle",Y)}onAfterHandle($,Y){if(!Y)return this.on("afterHandle",$);return this.on($,"afterHandle",Y)}mapResponse($,Y){if(!Y)return this.on("mapResponse",$);return this.on($,"mapResponse",Y)}onAfterResponse($,Y){if(!Y)return this.on("afterResponse",$);return this.on($,"afterResponse",Y)}trace($,Y){if(!Y)Y=$,$={as:"local"};if(!Array.isArray(Y))Y=[Y];for(let X of Y)this.on($,"trace",BS(X));return this}error($,Y){switch(typeof $){case"string":return Y.prototype[y7]=$,this.definitions.error[$]=Y,this;case"function":return this.definitions.error=$(this.definitions.error),this}for(let[X,Q]of Object.entries($))Q.prototype[y7]=X,this.definitions.error[X]=Q;return this}onError($,Y){if(!Y)return this.on("error",$);return this.on($,"error",Y)}onStop($){return this.on("stop",$),this}on($,Y,X){let Q;switch(typeof $){case"string":Q=$,X=Y;break;case"object":if(Q=Y,!Array.isArray(Y)&&typeof Y==="object")X=Y;break}if(Array.isArray(X))X=Z1(X);else if(typeof X==="function")X=[{fn:X}];else X=[X];let W=X;for(let J of W)if(J.scope=typeof $==="string"?"local":$?.as??"local",Q==="resolve"||Q==="derive")J.subType=Q;if(Q!=="trace")this.inference=N9({[Q]:W.map((J)=>J.fn)},this.inference);for(let J of W){let G=uF(J,"global",{skipIfHasType:!0});switch(Q){case"start":this.event.start??=[],this.event.start.push(G);break;case"request":this.event.request??=[],this.event.request.push(G);break;case"parse":this.event.parse??=[],this.event.parse.push(G);break;case"transform":this.event.transform??=[],this.event.transform.push(G);break;case"derive":this.event.transform??=[],this.event.transform.push(Z1(G,"derive"));break;case"beforeHandle":this.event.beforeHandle??=[],this.event.beforeHandle.push(G);break;case"resolve":this.event.beforeHandle??=[],this.event.beforeHandle.push(Z1(G,"resolve"));break;case"afterHandle":this.event.afterHandle??=[],this.event.afterHandle.push(G);break;case"mapResponse":this.event.mapResponse??=[],this.event.mapResponse.push(G);break;case"afterResponse":this.event.afterResponse??=[],this.event.afterResponse.push(G);break;case"trace":this.event.trace??=[],this.event.trace.push(G);break;case"error":this.event.error??=[],this.event.error.push(G);break;case"stop":this.event.stop??=[],this.event.stop.push(G);break}}return this}as($){if(S8(this.event.parse,$),S8(this.event.transform,$),S8(this.event.beforeHandle,$),S8(this.event.afterHandle,$),S8(this.event.mapResponse,$),S8(this.event.afterResponse,$),S8(this.event.trace,$),S8(this.event.error,$),$==="scoped")this.validator.scoped=X9(this.validator.scoped,this.validator.local),this.validator.local=null;else if($==="global")this.validator.global=X9(this.validator.global,X9(this.validator.scoped,this.validator.local)),this.validator.scoped=null,this.validator.local=null;return this}group($,Y,X){let Q=new V0({...this.config,prefix:""});Q.singleton={...this.singleton},Q.definitions={...this.definitions},Q.getServer=()=>this.getServer(),Q.inference=HM(this.inference),Q.extender={...this.extender},Q["~parser"]=this["~parser"],Q.standaloneValidator={local:[...this.standaloneValidator.local??[]],scoped:[...this.standaloneValidator.scoped??[]],global:[...this.standaloneValidator.global??[]]};let W=typeof Y==="object",J=(W?X:Y)(Q);if(this.singleton=Q5(this.singleton,Q.singleton),this.definitions=Q5(this.definitions,Q.definitions),J.event.request?.length)this.event.request=[...this.event.request||[],...J.event.request||[]];if(J.event.mapResponse?.length)this.event.mapResponse=[...this.event.mapResponse||[],...J.event.mapResponse||[]];return this.model(J.definitions.type),Object.values(Q.router.history).forEach(({method:G,path:M,handler:U,hooks:H,standaloneValidators:B})=>{if(M=(W?"":this.config.prefix)+$+M,W){let A=Y,O=H;this.add(G,M,U,a2(A,{...O||{},error:!O.error?J.event.error:Array.isArray(O.error)?[...O.error??[],...J.event.error??[]]:[O.error,...J.event.error??[]]}),void 0,B)}else this.add(G,M,U,a2(H,{error:J.event.error}),{skipPrefix:!0},B)}),this}guard($,Y){if(!Y){if(typeof $==="object"){if(this.applyMacro($),$.detail)if(this.config.detail)this.config.detail=Q5(Object.assign({},this.config.detail),$.detail);else this.config.detail=$.detail;if($.tags)if(!this.config.detail)this.config.detail={tags:$.tags};else this.config.detail.tags=$.tags;let W=$.as??"local";if($.schema==="standalone"){if(!this.standaloneValidator[W])this.standaloneValidator[W]=[];let J=$?.response||typeof $?.response==="string"||$?.response&&K in $.response?{200:$.response}:$?.response;return this.standaloneValidator[W].push({body:$.body,headers:$.headers,params:$.params,query:$.query,response:J,cookie:$.cookie}),this}if(this.validator[W]={body:$.body??this.validator[W]?.body,headers:$.headers??this.validator[W]?.headers,params:$.params??this.validator[W]?.params,query:$.query??this.validator[W]?.query,response:$.response??this.validator[W]?.response,cookie:$.cookie??this.validator[W]?.cookie},$.parse)this.on({as:W},"parse",$.parse);if($.transform)this.on({as:W},"transform",$.transform);if($.derive)this.on({as:W},"derive",$.derive);if($.beforeHandle)this.on({as:W},"beforeHandle",$.beforeHandle);if($.resolve)this.on({as:W},"resolve",$.resolve);if($.afterHandle)this.on({as:W},"afterHandle",$.afterHandle);if($.mapResponse)this.on({as:W},"mapResponse",$.mapResponse);if($.afterResponse)this.on({as:W},"afterResponse",$.afterResponse);if($.error)this.on({as:W},"error",$.error);return this}return this.guard({},$)}let X=new V0({...this.config,prefix:""});X.singleton={...this.singleton},X.definitions={...this.definitions},X.inference=HM(this.inference),X.extender={...this.extender};let Q=Y(X);if(this.singleton=Q5(this.singleton,X.singleton),this.definitions=Q5(this.definitions,X.definitions),Q.getServer=()=>this.server,Q.event.request?.length)this.event.request=[...this.event.request||[],...Q.event.request||[]];if(Q.event.mapResponse?.length)this.event.mapResponse=[...this.event.mapResponse||[],...Q.event.mapResponse||[]];return this.model(Q.definitions.type),Object.values(X.router.history).forEach(({method:W,path:J,handler:G,hooks:M})=>{this.add(W,J,G,a2($,{...M||{},error:!M.error?Q.event.error:Array.isArray(M.error)?[...M.error??[],...Q.event.error??[]]:[M.error,...Q.event.error??[]]}))}),this}use($){if(Array.isArray($)){let Y=this;for(let X of $)Y=Y.use(X);return Y}if($ instanceof Promise)return this.promisedModules.add($.then((Y)=>{if(typeof Y==="function")return Y(this);if(Y instanceof V0)return this._use(Y).compile();if(Y.constructor.name==="Elysia")return this._use(Y).compile();if(typeof Y.default==="function")return Y.default(this);if(Y.default instanceof V0)return this._use(Y.default);if(Y.constructor.name==="Elysia")return this._use(Y.default);if(Y.constructor.name==="_Elysia")return this._use(Y.default);try{return this._use(Y.default)}catch(X){throw console.error('Invalid plugin type. Expected Elysia instance, function, or module with "default" as Elysia instance or function that returns Elysia instance.'),X}}).then((Y)=>{if(Y&&typeof Y.compile==="function")Y.compile();return Y})),this;return this._use($)}propagatePromiseModules($){if($.promisedModules.size<=0)return this;for(let Y of $.promisedModules.promises)this.promisedModules.add(Y.then((X)=>{if(!X)return;let Q=this._use(X);if(Q instanceof Promise)return Q.then((W)=>{if(W)W.compile();else X.compile()});return X.compile()}));return this}_use($){if(typeof $==="function"){let Q=$(this);if(Q instanceof Promise)return this.promisedModules.add(Q.then((W)=>{if(W instanceof V0){W.getServer=()=>this.getServer(),W.getGlobalRoutes=()=>this.getGlobalRoutes(),W.getGlobalDefinitions=()=>this.getGlobalDefinitions(),W.model(this.definitions.type),W.error(this.definitions.error);for(let{method:J,path:G,handler:M,hooks:U,standaloneValidators:H}of Object.values(W.router.history))this.add(J,G,M,m0(W.event.error)?a2(U,{error:W.event.error}):U,void 0,H);if(W===this)return;return this.propagatePromiseModules(W),W}if(typeof W==="function")return W(this);if(typeof W.default==="function")return W.default(this);return this._use(W)}).then((W)=>{if(W&&typeof W.compile==="function")W.compile();return W})),this;return Q}this.propagatePromiseModules($);let Y=$.config.name,X=$.config.seed;if($.getParent=()=>this,$.getServer=()=>this.getServer(),$.getGlobalRoutes=()=>this.getGlobalRoutes(),$.getGlobalDefinitions=()=>this.getGlobalDefinitions(),$.standaloneValidator?.scoped)if(this.standaloneValidator.local)this.standaloneValidator.local=this.standaloneValidator.local.concat($.standaloneValidator.scoped);else this.standaloneValidator.local=$.standaloneValidator.scoped;if($.standaloneValidator?.global)if(this.standaloneValidator.global)this.standaloneValidator.global=this.standaloneValidator.global.concat($.standaloneValidator.global);else this.standaloneValidator.global=$.standaloneValidator.global;if(m0($["~parser"]))this["~parser"]={...$["~parser"],...this["~parser"]};if($.setHeaders)this.headers($.setHeaders);if(Y){if(!(Y in this.dependencies))this.dependencies[Y]=[];let Q=X!==void 0?t6(Y+JSON.stringify(X)):0;if(!this.dependencies[Y].some(({checksum:W})=>Q===W))this.extender.macros=this.extender.macros.concat($.extender.macros),this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat($.extender.higherOrderFunctions)}else{if($.extender.macros.length)this.extender.macros=this.extender.macros.concat($.extender.macros);if($.extender.higherOrderFunctions.length)this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat($.extender.higherOrderFunctions)}if(BM(this.extender.macros),$.extender.higherOrderFunctions.length){BM(this.extender.higherOrderFunctions);let Q=[];for(let W=0;W<this.extender.higherOrderFunctions.length;W++){let J=this.extender.higherOrderFunctions[W];if(J.checksum){if(Q.includes(J.checksum))this.extender.higherOrderFunctions.splice(W,1),W--;Q.push(J.checksum)}}Q.length=0}if(this.inference=mY(this.inference,$.inference),m0($.singleton.decorator))this.decorate($.singleton.decorator);if(m0($.singleton.store))this.state($.singleton.store);if(m0($.definitions.type))this.model($.definitions.type);if(m0($.definitions.error))this.error($.definitions.error);if(m0($.definitions.error))$.extender.macros=this.extender.macros.concat($.extender.macros);for(let{method:Q,path:W,handler:J,hooks:G,standaloneValidators:M}of Object.values($.router.history))this.add(Q,W,J,m0($.event.error)?a2(G,{error:$.event.error}):G,void 0,M);if(Y){if(!(Y in this.dependencies))this.dependencies[Y]=[];let Q=X!==void 0?t6(Y+JSON.stringify(X)):0;if(this.dependencies[Y].some(({checksum:W})=>Q===W))return this;if(this.dependencies[Y].push(this.config?.analytic?{name:$.config.name,seed:$.config.seed,checksum:Q,dependencies:$.dependencies,stack:$.telemetry?.stack,routes:$.router.history,decorators:$.singleton,store:$.singleton.store,error:$.definitions.error,derive:$.event.transform?.filter((W)=>W?.subType==="derive").map((W)=>({fn:W.toString(),stack:new Error().stack??""})),resolve:$.event.transform?.filter((W)=>W?.subType==="resolve").map((W)=>({fn:W.toString(),stack:new Error().stack??""}))}:{name:$.config.name,seed:$.config.seed,checksum:Q,dependencies:$.dependencies}),m0($.event))this.event=XM(this.event,QM($.event),Q)}else if(m0($.event))this.event=XM(this.event,QM($.event));if($.validator.global)this.validator.global=a2(this.validator.global,{...$.validator.global});if($.validator.scoped)this.validator.local=a2(this.validator.local,{...$.validator.scoped});return this}macro($){if(typeof $==="function"){let Y={checksum:t6(JSON.stringify({name:this.config.name,seed:this.config.seed,content:$.toString()})),fn:$};this.extender.macros.push(Y)}else if(typeof $==="object"){for(let X of Object.keys($))if(typeof $[X]==="object"){let Q={...$[X]};$[X]=(W)=>{if(W===!0)return Q}}let Y={checksum:t6(JSON.stringify({name:this.config.name,seed:this.config.seed,content:Object.entries($).map(([X,Q])=>`${X}+${Q}`).join(",")})),fn:()=>$};this.extender.macros.push(Y)}return this}mount($,Y,X){if($ instanceof V0||typeof $==="function"||$.length===0||$==="/"){let G=typeof $==="function"?$:$ instanceof V0?$.compile().fetch:Y instanceof V0?Y.compile().fetch:typeof Y==="function"?Y:(()=>{throw new Error("Invalid handler")})(),M=({request:U,path:H})=>G(new Request(YM(U.url,H),{method:U.method,headers:U.headers,signal:U.signal,credentials:U.credentials,referrerPolicy:U.referrerPolicy,duplex:U.duplex,redirect:U.redirect,mode:U.mode,keepalive:U.keepalive,integrity:U.integrity,body:U.body}));return this.route("ALL","/*",M,{parse:"none",...X,detail:{...X?.detail,hide:!0},config:{mount:G}}),this}let Q=Y instanceof V0?Y.compile().fetch:typeof Y==="function"?Y:(()=>{throw new Error("Invalid handler")})(),W=$.length-($.endsWith("*")?1:0),J=({request:G,path:M})=>Q(new Request(YM(G.url,M.slice(W)||"/"),{method:G.method,headers:G.headers,signal:G.signal,credentials:G.credentials,referrerPolicy:G.referrerPolicy,duplex:G.duplex,redirect:G.redirect,mode:G.mode,keepalive:G.keepalive,integrity:G.integrity,body:G.body}));return this.route("ALL",$,J,{parse:"none",...X,detail:{...X?.detail,hide:!0},config:{mount:Q}}),this.route("ALL",$+($.endsWith("/")?"*":"/*"),J,{parse:"none",...X,detail:{...X?.detail,hide:!0},config:{mount:Q}}),this}get($,Y,X){return this.add("GET",$,Y,X),this}post($,Y,X){return this.add("POST",$,Y,X),this}put($,Y,X){return this.add("PUT",$,Y,X),this}patch($,Y,X){return this.add("PATCH",$,Y,X),this}delete($,Y,X){return this.add("DELETE",$,Y,X),this}options($,Y,X){return this.add("OPTIONS",$,Y,X),this}all($,Y,X){return this.add("ALL",$,Y,X),this}head($,Y,X){return this.add("HEAD",$,Y,X),this}connect($,Y,X){return this.add("CONNECT",$,Y,X),this}route($,Y,X,Q){return this.add($.toUpperCase(),Y,X,Q,Q?.config),this}ws($,Y){if(this["~adapter"].ws)this["~adapter"].ws(this,$,Y);else console.warn("Current adapter doesn't support WebSocket");return this}state($,Y,X){if(Y===void 0)X=$,$={as:"append"},Y="";else if(X===void 0){if(typeof $==="string")X=Y,Y=$,$={as:"append"};else if(typeof $==="object")X=Y,Y=""}let{as:Q}=$;if(typeof Y!=="string")return this;switch(typeof X){case"object":if(!X||!m0(X))return this;if(Y){if(Y in this.singleton.store)this.singleton.store[Y]=Q5(this.singleton.store[Y],X,{override:Q==="override"});else this.singleton.store[Y]=X;return this}if(X===null)return this;return this.singleton.store=Q5(this.singleton.store,X,{override:Q==="override"}),this;case"function":if(Y){if(Q==="override"||!(Y in this.singleton.store))this.singleton.store[Y]=X}else this.singleton.store=X(this.singleton.store);return this;default:if(Q==="override"||!(Y in this.singleton.store))this.singleton.store[Y]=X;return this}}decorate($,Y,X){if(Y===void 0)X=$,$={as:"append"},Y="";else if(X===void 0){if(typeof $==="string")X=Y,Y=$,$={as:"append"};else if(typeof $==="object")X=Y,Y=""}let{as:Q}=$;if(typeof Y!=="string")return this;switch(typeof X){case"object":if(Y){if(Y in this.singleton.decorator)this.singleton.decorator[Y]=Q5(this.singleton.decorator[Y],X,{override:Q==="override"});else this.singleton.decorator[Y]=X;return this}if(X===null)return this;return this.singleton.decorator=Q5(this.singleton.decorator,X,{override:Q==="override"}),this;case"function":if(Y){if(Q==="override"||!(Y in this.singleton.decorator))this.singleton.decorator[Y]=X}else this.singleton.decorator=X(this.singleton.decorator);return this;default:if(Q==="override"||!(Y in this.singleton.decorator))this.singleton.decorator[Y]=X;return this}}derive($,Y){if(!Y)Y=$,$={as:"local"};let X={subType:"derive",fn:Y};return this.onTransform($,X)}model($,Y){switch(typeof $){case"object":let X={},Q=Object.entries($);if(!Q.length)return this;for(let[G,M]of Q){if(G in this.definitions.type)continue;X[G]=this.definitions.type[G]=M,X[G].$id??=`#/components/schemas/${G}`}return this.definitions.typebox=z.Module({...this.definitions.typebox.$defs,...X}),this;case"function":let W=$(this.definitions.type);return this.definitions.type=W,this.definitions.typebox=z.Module(W),this;case"string":if(!Y)break;let J={...Y,id:Y.$id??`#/components/schemas/${$}`};return this.definitions.type[$]=Y,this.definitions.typebox=z.Module({...this.definitions.typebox.$defs,...J}),this}return this.definitions.type[$]=Y,this.definitions.typebox=z.Module({...this.definitions.typebox.$defs,[$]:Y}),this}Ref($){return z.Ref($)}mapDerive($,Y){if(!Y)Y=$,$={as:"local"};let X={subType:"mapDerive",fn:Y};return this.onTransform($,X)}affix($,Y,X){if(X==="")return this;let Q=["_","-"," "],W=(U)=>U[0].toUpperCase()+U.slice(1),J=$==="prefix"?(U,H)=>Q.includes(U.at(-1)??"")?U+H:U+W(H):Q.includes(X.at(-1)??"")?(U,H)=>H+U:(U,H)=>H+W(U),G=(U)=>{let H={};switch(U){case"decorator":for(let B in this.singleton.decorator)H[J(X,B)]=this.singleton.decorator[B];this.singleton.decorator=H;break;case"state":for(let B in this.singleton.store)H[J(X,B)]=this.singleton.store[B];this.singleton.store=H;break;case"model":for(let B in this.definitions.type)H[J(X,B)]=this.definitions.type[B];this.definitions.type=H;break;case"error":for(let B in this.definitions.error)H[J(X,B)]=this.definitions.error[B];this.definitions.error=H;break}},M=Array.isArray(Y)?Y:[Y];for(let U of M.some((H)=>H==="all")?["decorator","state","model","error"]:M)G(U);return this}prefix($,Y){return this.affix("prefix",$,Y)}suffix($,Y){return this.affix("suffix",$,Y)}compile(){if(this["~adapter"].isWebStandard){if(this.fetch=this.config.aot?gY(this):SM(this),typeof this.server?.reload==="function")this.server.reload({...this.server||{},fetch:this.fetch});return this}if(typeof this.server?.reload==="function")this.server.reload(this.server||{});return this._handle=gY(this),this}handle=async($)=>this.fetch($);fetch=($)=>{return(this.fetch=this.config.aot?gY(this):SM(this))($)};handleError=async($,Y)=>{return(this.handleError=this.config.aot?tM(this):ES(this))($,Y)};listen=($,Y)=>{if(this["~adapter"].listen(this)($,Y),this.promisedModules.size)wM(5000);return this.promisedModules.then(()=>{wM(1000)}),this};stop=async($)=>{if(!this.server)throw new Error("Elysia isn't running. Call `app.listen` to start the server.");if(this.server){if(this.server.stop($),this.server=null,this.event.stop?.length)for(let Y=0;Y<this.event.stop.length;Y++)this.event.stop[Y].fn(this)}};get modules(){return this.promisedModules}}var eM=`/* basic theme */
:root {
  --scalar-text-decoration: underline;
  --scalar-text-decoration-hover: underline;
}
.light-mode,
.light-mode .dark-mode {
  --scalar-background-1: #f9f9f9;
  --scalar-background-2: #f1f1f1;
  --scalar-background-3: #e7e7e7;
  --scalar-background-card: #fff;

  --scalar-color-1: #2a2f45;
  --scalar-color-2: #757575;
  --scalar-color-3: #8e8e8e;

  --scalar-color-accent: var(--scalar-color-1);
  --scalar-background-accent: var(--scalar-background-3);

  --scalar-border-color: rgba(0, 0, 0, 0.1);
}
.dark-mode {
  --scalar-background-1: #131313;
  --scalar-background-2: #1d1d1d;
  --scalar-background-3: #272727;
  --scalar-background-card: #1d1d1d;

  --scalar-color-1: rgba(255, 255, 255, 0.9);
  --scalar-color-2: rgba(255, 255, 255, 0.62);
  --scalar-color-3: rgba(255, 255, 255, 0.44);

  --scalar-color-accent: var(--scalar-color-1);
  --scalar-background-accent: var(--scalar-background-3);

  --scalar-border-color: #2a2b2a;
}
/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-hover-color: currentColor;

  --scalar-sidebar-item-active-background: var(--scalar-background-accent);
  --scalar-sidebar-color-active: var(--scalar-color-accent);

  --scalar-sidebar-search-background: transparent;
  --scalar-sidebar-search-color: var(--scalar-color-3);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
}
/* advanced */
.light-mode .dark-mode,
.light-mode {
  --scalar-color-green: #069061;
  --scalar-color-red: #ef0006;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #0082d0;
  --scalar-color-orange: #fb892c;
  --scalar-color-purple: #5203d1;

  --scalar-button-1: rgba(0, 0, 0, 1);
  --scalar-button-1-hover: rgba(0, 0, 0, 0.8);
  --scalar-button-1-color: rgba(255, 255, 255, 0.9);
}
.dark-mode {
  --scalar-color-green: #00b648;
  --scalar-color-red: #dd2f2c;
  --scalar-color-yellow: #ffc90d;
  --scalar-color-blue: #4eb3ec;
  --scalar-color-orange: #ff8d4d;
  --scalar-color-purple: #b191f9;

  --scalar-button-1: rgba(255, 255, 255, 1);
  --scalar-button-1-hover: rgba(255, 255, 255, 0.9);
  --scalar-button-1-color: black;
}

.scalar-api-client__item,
.scalar-card,
.dark-mode .dark-mode.scalar-card {
  --scalar-background-1: var(--scalar-background-card);
  --scalar-background-2: var(--scalar-background-1);
  --scalar-background-3: var(--scalar-background-1);
}
.dark-mode .dark-mode.scalar-card {
  --scalar-background-3: var(--scalar-background-3);
}
.t-doc__sidebar {
  --scalar-color-green: var(--scalar-color-1);
  --scalar-color-red: var(--scalar-color-1);
  --scalar-color-yellow: var(--scalar-color-1);
  --scalar-color-blue: var(--scalar-color-1);
  --scalar-color-orange: var(--scalar-color-1);
  --scalar-color-purple: var(--scalar-color-1);
}
.light-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-blue), transparent 70%);
}
.dark-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-blue), transparent 50%);
}
`;var $U=`/* basic theme */
:root {
  --scalar-text-decoration: underline;
  --scalar-text-decoration-hover: underline;
}
.light-mode {
  --scalar-background-1: #f0f2f5;
  --scalar-background-2: #eaecf0;
  --scalar-background-3: #e0e2e6;
  --scalar-border-color: rgb(213 213 213);

  --scalar-color-1: rgb(9, 9, 11);
  --scalar-color-2: rgb(113, 113, 122);
  --scalar-color-3: rgba(25, 25, 28, 0.5);

  --scalar-color-accent: var(--scalar-color-1);
  --scalar-background-accent: #8ab4f81f;
}
.light-mode .scalar-card.dark-mode,
.dark-mode {
  --scalar-background-1: #000e23;
  --scalar-background-2: #01132e;
  --scalar-background-3: #03193b;
  --scalar-border-color: #2e394c;

  --scalar-color-1: #fafafa;
  --scalar-color-2: rgb(161, 161, 170);
  --scalar-color-3: rgba(255, 255, 255, 0.533);

  --scalar-color-accent: var(--scalar-color-1);
  --scalar-background-accent: #8ab4f81f;

  --scalar-code-language-color-supersede: var(--scalar-color-1);
}
/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-hover-color: currentColor;

  --scalar-sidebar-item-active-background: var(--scalar-background-3);
  --scalar-sidebar-color-active: var(--scalar-color-accent);

  --scalar-sidebar-search-background: rgba(255, 255, 255, 0.1);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
  --scalar-sidebar-search-color: var(--scalar-color-3);
  z-index: 1;
}
.light-mode .t-doc__sidebar {
  --scalar-sidebar-search-background: white;
}
/* advanced */
.light-mode {
  --scalar-color-green: #069061;
  --scalar-color-red: #ef0006;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #0082d0;
  --scalar-color-orange: #fb892c;
  --scalar-color-purple: #5203d1;

  --scalar-button-1: rgba(0, 0, 0, 1);
  --scalar-button-1-hover: rgba(0, 0, 0, 0.8);
  --scalar-button-1-color: rgba(255, 255, 255, 0.9);
}
.dark-mode {
  --scalar-color-green: rgba(69, 255, 165, 0.823);
  --scalar-color-red: #ff8589;
  --scalar-color-yellow: #ffcc4d;
  --scalar-color-blue: #6bc1fe;
  --scalar-color-orange: #f98943;
  --scalar-color-purple: #b191f9;

  --scalar-button-1: rgba(255, 255, 255, 1);
  --scalar-button-1-hover: rgba(255, 255, 255, 0.9);
  --scalar-button-1-color: black;
}
/* Custom theme */
/* Document header */
@keyframes headerbackground {
  from {
    background: transparent;
    backdrop-filter: none;
  }
  to {
    background: var(--header-background-1);
    backdrop-filter: blur(12px);
  }
}
.dark-mode h2.t-editor__heading,
.dark-mode .t-editor__page-title h1,
.dark-mode h1.section-header:not(::selection),
.dark-mode .markdown h1,
.dark-mode .markdown h2,
.dark-mode .markdown h3,
.dark-mode .markdown h4,
.dark-mode .markdown h5,
.dark-mode .markdown h6 {
  -webkit-text-fill-color: transparent;
  background-image: linear-gradient(to right bottom, rgb(255, 255, 255) 30%, rgba(255, 255, 255, 0.38));
  -webkit-background-clip: text;
  background-clip: text;
}
/* Hero Section Flare */
.section-flare-item:nth-of-type(1) {
  --c1: #ffffff;
  --c2: #babfd8;
  --c3: #2e8bb2;
  --c4: #1a8593;
  --c5: #0a143e;
  --c6: #0a0f52;
  --c7: #2341b8;

  --solid: var(--c1), var(--c2), var(--c3), var(--c4), var(--c5), var(--c6), var(--c7);
  --solid-wrap: var(--solid), var(--c1);
  --trans:
    var(--c1), transparent, var(--c2), transparent, var(--c3),
    transparent, var(--c4), transparent, var(--c5), transparent, var(--c6),
    transparent, var(--c7);
  --trans-wrap: var(--trans), transparent, var(--c1);

  background: radial-gradient(circle, var(--trans)), conic-gradient(from 180deg, var(--trans-wrap)),
    radial-gradient(circle, var(--trans)), conic-gradient(var(--solid-wrap));
  width: 70vw;
  height: 700px;
  border-radius: 50%;
  filter: blur(100px);
  z-index: 0;
  right: 0;
  position: absolute;
  transform: rotate(-45deg);
  top: -300px;
  opacity: 0.3;
}
.section-flare-item:nth-of-type(3) {
  --star-color: #6b9acc;
  --star-color2: #446b8d;
  --star-color3: #3e5879;
  background-image: radial-gradient(2px 2px at 20px 30px, var(--star-color2), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 40px 70px, var(--star-color), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 50px 160px, var(--star-color3), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 90px 40px, var(--star-color), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 130px 80px, var(--star-color), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 160px 120px, var(--star-color3), rgba(0, 0, 0, 0));
  background-repeat: repeat;
  background-size: 200px 200px;
  width: 100%;
  height: 100%;
  mask-image: radial-gradient(ellipse at 100% 0%, black 40%, transparent 70%);
}
.section-flare {
  top: -150px !important;
  height: 100vh;
  background: linear-gradient(#000, var(--scalar-background-1));
  width: 100vw;
  overflow-x: hidden;
}
.light-mode .section-flare {
  display: none;
}
.light-mode .scalar-card {
  --scalar-background-1: #fff;
  --scalar-background-2: #fff;
  --scalar-background-3: #fff;
}

*::selection {
  background-color: color-mix(in srgb, var(--scalar-color-blue), transparent 60%);
}
`;var YU=`/* basic theme */
:root {
  --scalar-text-decoration: underline;
  --scalar-text-decoration-hover: underline;
}
.light-mode {
  --scalar-color-1: rgb(9, 9, 11);
  --scalar-color-2: rgb(113, 113, 122);
  --scalar-color-3: rgba(25, 25, 28, 0.5);
  --scalar-color-accent: var(--scalar-color-1);

  --scalar-background-1: #fff;
  --scalar-background-2: #f4f4f5;
  --scalar-background-3: #e3e3e6;
  --scalar-background-accent: #8ab4f81f;

  --scalar-border-color: rgb(228, 228, 231);
  --scalar-code-language-color-supersede: var(--scalar-color-1);
}
.dark-mode {
  --scalar-color-1: #fafafa;
  --scalar-color-2: rgb(161, 161, 170);
  --scalar-color-3: rgba(255, 255, 255, 0.533);
  --scalar-color-accent: var(--scalar-color-1);

  --scalar-background-1: #09090b;
  --scalar-background-2: #18181b;
  --scalar-background-3: #2c2c30;
  --scalar-background-accent: #8ab4f81f;

  --scalar-border-color: rgba(255, 255, 255, 0.16);
  --scalar-code-language-color-supersede: var(--scalar-color-1);
}

/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-color: currentColor;
  --scalar-sidebar-item-hover-background: var(--scalar-background-2);

  --scalar-sidebar-item-active-background: var(--scalar-background-3);
  --scalar-sidebar-color-active: var(--scalar-color-accent);

  --scalar-sidebar-search-background: transparent;
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
  --scalar-sidebar-search-color: var(--scalar-color-3);
}
.light-mode .t-doc__sidebar {
  --scalar-sidebar-item-active-background: var(--scalar-background-2);
}
/* advanced */
.light-mode {
  --scalar-color-green: #069061;
  --scalar-color-red: #ef0006;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #0082d0;
  --scalar-color-orange: #fb892c;
  --scalar-color-purple: #5203d1;

  --scalar-button-1: rgba(0, 0, 0, 1);
  --scalar-button-1-hover: rgba(0, 0, 0, 0.8);
  --scalar-button-1-color: rgba(255, 255, 255, 0.9);
}
.dark-mode {
  --scalar-color-green: rgba(69, 255, 165, 0.823);
  --scalar-color-red: #ff8589;
  --scalar-color-yellow: #ffcc4d;
  --scalar-color-blue: #6bc1fe;
  --scalar-color-orange: #f98943;
  --scalar-color-purple: #b191f9;

  --scalar-button-1: rgba(255, 255, 255, 1);
  --scalar-button-1-hover: rgba(255, 255, 255, 0.9);
  --scalar-button-1-color: black;
}
/* Custom theme */
.dark-mode h2.t-editor__heading,
.dark-mode .t-editor__page-title h1,
.dark-mode h1.section-header:not(::selection),
.dark-mode .markdown h1,
.dark-mode .markdown h2,
.dark-mode .markdown h3,
.dark-mode .markdown h4,
.dark-mode .markdown h5,
.dark-mode .markdown h6 {
  -webkit-text-fill-color: transparent;
  background-image: linear-gradient(to right bottom, rgb(255, 255, 255) 30%, rgba(255, 255, 255, 0.38));
  -webkit-background-clip: text;
  background-clip: text;
}
.examples .scalar-card-footer {
  --scalar-background-3: transparent;
  padding-top: 0;
}
/* Hero section flare */
.section-flare {
  width: 100vw;
  height: 550px;
  position: absolute;
}
.section-flare-item:nth-of-type(1) {
  position: absolute;
  width: 100vw;
  height: 550px;
  --stripesDark: repeating-linear-gradient(100deg, #000 0%, #000 7%, transparent 10%, transparent 12%, #000 16%);
  --rainbow: repeating-linear-gradient(100deg, #fff 10%, #fff 16%, #fff 22%, #fff 30%);
  background-image: var(--stripesDark), var(--rainbow);
  background-size: 300%, 200%;
  background-position: 50% 50%, 50% 50%;
  filter: invert(100%);
  -webkit-mask-image: radial-gradient(ellipse at 100% 0%, black 40%, transparent 70%);
  mask-image: radial-gradient(ellipse at 100% 0%, black 40%, transparent 70%);
  pointer-events: none;
  opacity: 0.07;
}
.dark-mode .section-flare-item:nth-of-type(1) {
  background-image: var(--stripesDark), var(--rainbow);
  filter: opacity(50%) saturate(200%);
  opacity: 0.25;
  height: 350px;
}
.section-flare-item:nth-of-type(1):after {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background-image: var(--stripesDark), var(--rainbow);
  background-size: 200%, 100%;
  background-attachment: fixed;
  mix-blend-mode: difference;
}
.dark-mode .section-flare:after {
  background-image: var(--stripesDark), var(--rainbow);
}
.section-flare-item:nth-of-type(2) {
  --star-color: #fff;
  --star-color2: #fff;
  --star-color3: #fff;
  width: 100%;
  height: 100%;
  position: absolute;
  background-image: radial-gradient(2px 2px at 20px 30px, var(--star-color2), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 40px 70px, var(--star-color), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 50px 160px, var(--star-color3), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 90px 40px, var(--star-color), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 130px 80px, var(--star-color), rgba(0, 0, 0, 0)),
    radial-gradient(2px 2px at 160px 120px, var(--star-color3), rgba(0, 0, 0, 0));
  background-repeat: repeat;
  background-size: 200px 200px;
  mask-image: radial-gradient(ellipse at 100% 0%, black 40%, transparent 70%);
  opacity: 0.2;
}
.light-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-blue), transparent 70%);
}
.dark-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-blue), transparent 50%);
}
`;var XU=`/* basic theme */
.light-mode {
  --scalar-background-1: #fff;
  --scalar-background-2: #f6f6f6;
  --scalar-background-3: #e7e7e7;
  --scalar-background-accent: #8ab4f81f;

  --scalar-color-1: #2a2f45;
  --scalar-color-2: #757575;
  --scalar-color-3: #8e8e8e;

  --scalar-color-accent: #0099ff;
  --scalar-border-color: #dfdfdf;
}
.dark-mode {
  --scalar-background-1: #0f0f0f;
  --scalar-background-2: #1a1a1a;
  --scalar-background-3: #272727;

  --scalar-color-1: #e7e7e7;
  --scalar-color-2: #a4a4a4;
  --scalar-color-3: #797979;

  --scalar-color-accent: #3ea6ff;
  --scalar-background-accent: #3ea6ff1f;

  --scalar-border-color: #2d2d2d;
}
/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-hover-color: currentColor;

  --scalar-sidebar-item-active-background: var(--scalar-background-2);
  --scalar-sidebar-color-active: var(--scalar-color-1);

  --scalar-sidebar-indent-border: var(--scalar-sidebar-border-color);
  --scalar-sidebar-indent-border-hover: var(--scalar-sidebar-border-color);
  --scalar-sidebar-indent-border-active: var(--scalar-sidebar-border-color);

  --scalar-sidebar-search-background: transparent;
  --scalar-sidebar-search-color: var(--scalar-color-3);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
}
/* advanced */
.light-mode {
  --scalar-color-green: #069061;
  --scalar-color-red: #ef0006;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #0082d0;
  --scalar-color-orange: #fb892c;
  --scalar-color-purple: #5203d1;

  --scalar-button-1: rgba(0, 0, 0, 1);
  --scalar-button-1-hover: rgba(0, 0, 0, 0.8);
  --scalar-button-1-color: rgba(255, 255, 255, 0.9);

  --scalar-color-danger: color-mix(in srgb, var(--scalar-color-red), var(--scalar-color-1) 20%);

  --scalar-background-alert: color-mix(in srgb, var(--scalar-color-orange), var(--scalar-background-1) 95%);
  --scalar-background-danger: color-mix(in srgb, var(--scalar-color-red), var(--scalar-background-1) 95%);
}
.dark-mode {
  --scalar-color-green: #00b648;
  --scalar-color-red: #dc1b19;
  --scalar-color-yellow: #ffc90d;
  --scalar-color-blue: #4eb3ec;
  --scalar-color-orange: #ff8d4d;
  --scalar-color-purple: #b191f9;

  --scalar-button-1: rgba(255, 255, 255, 1);
  --scalar-button-1-hover: rgba(255, 255, 255, 0.9);
  --scalar-button-1-color: black;

  --scalar-color-danger: color-mix(in srgb, var(--scalar-color-red), var(--scalar-background-1) 20%);

  --scalar-background-alert: color-mix(in srgb, var(--scalar-color-orange), var(--scalar-background-1) 95%);
  --scalar-background-danger: color-mix(in srgb, var(--scalar-color-red), var(--scalar-background-1) 95%);
}
@supports (color: color(display-p3 1 1 1)) {
  .light-mode {
    --scalar-color-accent: color(display-p3 0.0 0.6 1.0 / 1.0);
    --scalar-color-green: color(display-p3 0.023529 0.564706 0.380392 / 1.0);
    --scalar-color-red: color(display-p3 0.937255 0.0 0.023529 / 1.0);
    --scalar-color-yellow: color(display-p3 0.929412 0.745098 0.12549 / 1.0);
    --scalar-color-blue: color(display-p3 0.0 0.509804 0.815686 / 1.0);
    --scalar-color-orange: color(display-p3 0.984314 0.537255 0.172549 / 1.0);
    --scalar-color-purple: color(display-p3 0.321569 0.011765 0.819608 / 1.0);
  }
  .dark-mode {
    --scalar-color-accent: color(display-p3 0.243137 0.65098 1.0 / 1.0);
    --scalar-color-green: color(display-p3 0.0 0.713725 0.282353 / 1.0);
    --scalar-color-red: color(display-p3 0.862745 0.105882 0.098039 / 1.0);
    --scalar-color-yellow: color(display-p3 1.0 0.788235 0.05098 / 1.0);
    --scalar-color-blue: color(display-p3 0.305882 0.701961 0.92549 / 1.0);
    --scalar-color-orange: color(display-p3 1.0 0.552941 0.301961 / 1.0);
    --scalar-color-purple: color(display-p3 0.694118 0.568627 0.976471 / 1.0);
  }
}
`;var e7=`.light-mode {
  --scalar-color-1: #2a2f45;
  --scalar-color-2: #757575;
  --scalar-color-3: #8e8e8e;
  --scalar-color-accent: #f06292;

  --scalar-background-1: #fff;
  --scalar-background-2: #f6f6f6;
  --scalar-background-3: #e7e7e7;

  --scalar-border-color: rgba(0, 0, 0, 0.1);
}
.dark-mode {
  --scalar-color-1: rgba(255, 255, 255, 0.9);
  --scalar-color-2: rgba(156, 163, 175, 1);
  --scalar-color-3: rgba(255, 255, 255, 0.44);
  --scalar-color-accent: #f06292;

  --scalar-background-1: #111728;
  --scalar-background-2: #1e293b;
  --scalar-background-3: #334155;
  --scalar-background-accent: #f062921f;

  --scalar-border-color: rgba(255, 255, 255, 0.1);
}

/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-hover-color: currentColor;

  --scalar-sidebar-item-active-background: #f062921f;
  --scalar-sidebar-color-active: var(--scalar-color-accent);

  --scalar-sidebar-search-background: transparent;
  --scalar-sidebar-search-color: var(--scalar-color-3);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
}

/* advanced */
.light-mode {
  --scalar-button-1: rgb(49 53 56);
  --scalar-button-1-color: #fff;
  --scalar-button-1-hover: rgb(28 31 33);

  --scalar-color-green: #069061;
  --scalar-color-red: #ef0006;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #0082d0;
  --scalar-color-orange: #fb892c;
  --scalar-color-purple: #5203d1;

  --scalar-scrollbar-color: rgba(0, 0, 0, 0.18);
  --scalar-scrollbar-color-active: rgba(0, 0, 0, 0.36);
}
.dark-mode {
  --scalar-button-1: #f6f6f6;
  --scalar-button-1-color: #000;
  --scalar-button-1-hover: #e7e7e7;

  --scalar-color-green: #a3ffa9;
  --scalar-color-red: #ffa3a3;
  --scalar-color-yellow: #fffca3;
  --scalar-color-blue: #a5d6ff;
  --scalar-color-orange: #e2ae83;
  --scalar-color-purple: #d2a8ff;

  --scalar-scrollbar-color: rgba(255, 255, 255, 0.24);
  --scalar-scrollbar-color-active: rgba(255, 255, 255, 0.48);
}
.section-flare {
  width: 100%;
  height: 400px;
  position: absolute;
}
.section-flare-item:first-of-type:before {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  --stripes: repeating-linear-gradient(100deg, #fff 0%, #fff 0%, transparent 2%, transparent 12%, #fff 17%);
  --stripesDark: repeating-linear-gradient(100deg, #000 0%, #000 0%, transparent 10%, transparent 12%, #000 17%);
  --rainbow: repeating-linear-gradient(100deg, #60a5fa 10%, #e879f9 16%, #5eead4 22%, #60a5fa 30%);
  contain: strict;
  contain-intrinsic-size: 100vw 40vh;
  background-image: var(--stripesDark), var(--rainbow);
  background-size: 300%, 200%;
  background-position: 50% 50%, 50% 50%;
  filter: opacity(20%) saturate(200%);
  -webkit-mask-image: radial-gradient(ellipse at 100% 0%, black 40%, transparent 70%);
  mask-image: radial-gradient(ellipse at 100% 0%, black 40%, transparent 70%);
  pointer-events: none;
}
.section-flare-item:first-of-type:after {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background-image: var(--stripes), var(--rainbow);
  background-size: 200%, 100%;
  background-attachment: fixed;
  mix-blend-mode: difference;
  background-image: var(--stripesDark), var(--rainbow);
  pointer-events: none;
}
.light-mode .section-flare-item:first-of-type:after,
.light-mode .section-flare-item:first-of-type:before {
  background-image: var(--stripes), var(--rainbow);
  filter: opacity(4%) saturate(200%);
}
`;var QU=`.light-mode {
  color-scheme: light;
  --scalar-color-1: #1c1e21;
  --scalar-color-2: #757575;
  --scalar-color-3: #8e8e8e;
  --scalar-color-disabled: #b4b1b1;
  --scalar-color-ghost: #a7a7a7;
  --scalar-color-accent: #2f8555;
  --scalar-background-1: #fff;
  --scalar-background-2: #f5f5f5;
  --scalar-background-3: #ededed;
  --scalar-background-4: rgba(0, 0, 0, 0.06);
  --scalar-background-accent: #2f85551f;

  --scalar-border-color: rgba(0, 0, 0, 0.1);
  --scalar-scrollbar-color: rgba(0, 0, 0, 0.18);
  --scalar-scrollbar-color-active: rgba(0, 0, 0, 0.36);
  --scalar-lifted-brightness: 1;
  --scalar-backdrop-brightness: 1;

  --scalar-shadow-1: 0 1px 3px 0 rgba(0, 0, 0, 0.11);
  --scalar-shadow-2: rgba(0, 0, 0, 0.08) 0px 13px 20px 0px, rgba(0, 0, 0, 0.08) 0px 3px 8px 0px, #eeeeed 0px 0 0 1px;

  --scalar-button-1: rgb(49 53 56);
  --scalar-button-1-color: #fff;
  --scalar-button-1-hover: rgb(28 31 33);

  --scalar-color-green: #007300;
  --scalar-color-red: #af272b;
  --scalar-color-yellow: #b38200;
  --scalar-color-blue: #3b8ba5;
  --scalar-color-orange: #fb892c;
  --scalar-color-purple: #5203d1;
}

.dark-mode {
  color-scheme: dark;
  --scalar-color-1: rgba(255, 255, 255, 0.9);
  --scalar-color-2: rgba(255, 255, 255, 0.62);
  --scalar-color-3: rgba(255, 255, 255, 0.44);
  --scalar-color-disabled: rgba(255, 255, 255, 0.34);
  --scalar-color-ghost: rgba(255, 255, 255, 0.26);
  --scalar-color-accent: #27c2a0;
  --scalar-background-1: #1b1b1d;
  --scalar-background-2: #242526;
  --scalar-background-3: #3b3b3b;
  --scalar-background-4: rgba(255, 255, 255, 0.06);
  --scalar-background-accent: #27c2a01f;

  --scalar-border-color: rgba(255, 255, 255, 0.1);
  --scalar-scrollbar-color: rgba(255, 255, 255, 0.24);
  --scalar-scrollbar-color-active: rgba(255, 255, 255, 0.48);
  --scalar-lifted-brightness: 1.45;
  --scalar-backdrop-brightness: 0.5;

  --scalar-shadow-1: 0 1px 3px 0 rgb(0, 0, 0, 0.1);
  --scalar-shadow-2: rgba(15, 15, 15, 0.2) 0px 3px 6px, rgba(15, 15, 15, 0.4) 0px 9px 24px, 0 0 0 1px
    rgba(255, 255, 255, 0.1);

  --scalar-button-1: #f6f6f6;
  --scalar-button-1-color: #000;
  --scalar-button-1-hover: #e7e7e7;

  --scalar-color-green: #26b226;
  --scalar-color-red: #fb565b;
  --scalar-color-yellow: #ffc426;
  --scalar-color-blue: #6ecfef;
  --scalar-color-orange: #ff8d4d;
  --scalar-color-purple: #b191f9;
}
`;var WU=`/* basic theme */
.light-mode {
  --scalar-color-1: #2a2f45;
  --scalar-color-2: #757575;
  --scalar-color-3: #8e8e8e;
  --scalar-color-accent: #7070ff;

  --scalar-background-1: #fff;
  --scalar-background-2: #f6f6f6;
  --scalar-background-3: #e7e7e7;
  --scalar-background-accent: #7070ff1f;

  --scalar-border-color: rgba(0, 0, 0, 0.1);

  --scalar-code-language-color-supersede: var(--scalar-color-3);
}
.dark-mode {
  --scalar-color-1: #f7f8f8;
  --scalar-color-2: rgb(180, 188, 208);
  --scalar-color-3: #b4bcd099;
  --scalar-color-accent: #828fff;

  --scalar-background-1: #000212;
  --scalar-background-2: #0d0f1e;
  --scalar-background-3: #232533;
  --scalar-background-accent: #8ab4f81f;

  --scalar-border-color: #313245;
  --scalar-code-language-color-supersede: var(--scalar-color-3);
}
/* Document Sidebar */
.light-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-item-hover-color: currentColor;
  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-active-background: var(--scalar-background-accent);
  --scalar-sidebar-border-color: var(--scalar-border-color);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-color-active: var(--scalar-color-accent);
  --scalar-sidebar-search-background: rgba(0, 0, 0, 0.05);
  --scalar-sidebar-search-border-color: 1px solid rgba(0, 0, 0, 0.05);
  --scalar-sidebar-search-color: var(--scalar-color-3);
  --scalar-background-2: rgba(0, 0, 0, 0.03);
}
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-item-hover-color: currentColor;
  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-active-background: rgba(255, 255, 255, 0.1);
  --scalar-sidebar-border-color: var(--scalar-border-color);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-color-active: var(--scalar-color-accent);
  --scalar-sidebar-search-background: rgba(255, 255, 255, 0.1);
  --scalar-sidebar-search-border-color: 1px solid rgba(255, 255, 255, 0.05);
  --scalar-sidebar-search-color: var(--scalar-color-3);
}
/* advanced */
.light-mode {
  --scalar-color-green: #069061;
  --scalar-color-red: #ef0006;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #0082d0;
  --scalar-color-orange: #fb892c;
  --scalar-color-purple: #5203d1;

  --scalar-button-1: rgba(0, 0, 0, 1);
  --scalar-button-1-hover: rgba(0, 0, 0, 0.8);
  --scalar-button-1-color: rgba(255, 255, 255, 0.9);
}
.dark-mode {
  --scalar-color-green: #00b648;
  --scalar-color-red: #dc1b19;
  --scalar-color-yellow: #ffc90d;
  --scalar-color-blue: #4eb3ec;
  --scalar-color-orange: #ff8d4d;
  --scalar-color-purple: #b191f9;

  --scalar-button-1: rgba(255, 255, 255, 1);
  --scalar-button-1-hover: rgba(255, 255, 255, 0.9);
  --scalar-button-1-color: black;
}
/* Custom Theme */
.dark-mode h2.t-editor__heading,
.dark-mode .t-editor__page-title h1,
.dark-mode h1.section-header:not(::selection),
.dark-mode .markdown h1,
.dark-mode .markdown h2,
.dark-mode .markdown h3,
.dark-mode .markdown h4,
.dark-mode .markdown h5,
.dark-mode .markdown h6 {
  -webkit-text-fill-color: transparent;
  background-image: linear-gradient(to right bottom, rgb(255, 255, 255) 30%, rgba(255, 255, 255, 0.38));
  -webkit-background-clip: text;
  background-clip: text;
}
.sidebar-search {
  backdrop-filter: blur(12px);
}
@keyframes headerbackground {
  from {
    background: transparent;
    backdrop-filter: none;
  }
  to {
    background: var(--header-background-1);
    backdrop-filter: blur(12px);
  }
}
.dark-mode .scalar-card {
  background: rgba(255, 255, 255, 0.05) !important;
}
.dark-mode .scalar-card * {
  --scalar-background-2: transparent !important;
  --scalar-background-1: transparent !important;
}
.light-mode .dark-mode.scalar-card *,
.light-mode .dark-mode.scalar-card {
  --scalar-background-1: #0d0f1e !important;
  --scalar-background-2: #0d0f1e !important;
  --scalar-background-3: #191b29 !important;
}
.light-mode .dark-mode.scalar-card {
  background: #191b29 !important;
}
.badge {
  box-shadow: 0 0 0 1px var(--scalar-border-color);
  margin-right: 6px;
}

.table-row.required-parameter .table-row-item:nth-of-type(2):after {
  background: transparent;
  box-shadow: none;
}
/* Hero Section Flare */
.section-flare {
  width: 100vw;
  background: radial-gradient(ellipse 80% 50% at 50% -20%, rgba(120, 119, 198, 0.3), transparent);
  height: 100vh;
}
.light-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-accent), transparent 70%);
}
.dark-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-accent), transparent 50%);
}
`;var JU=`/* basic theme */
:root {
  --scalar-text-decoration: underline;
  --scalar-text-decoration-hover: underline;
}
.light-mode {
  --scalar-background-1: #f9f6f0;
  --scalar-background-2: #f2efe8;
  --scalar-background-3: #e9e7e2;
  --scalar-border-color: rgba(203, 165, 156, 0.6);

  --scalar-color-1: #c75549;
  --scalar-color-2: #c75549;
  --scalar-color-3: #c75549;

  --scalar-color-accent: #c75549;
  --scalar-background-accent: #dcbfa81f;

  --scalar-code-language-color-supersede: var(--scalar-color-1);
}
.dark-mode {
  --scalar-background-1: #140507;
  --scalar-background-2: #20090c;
  --scalar-background-3: #321116;
  --scalar-border-color: #3c3031;

  --scalar-color-1: rgba(255, 255, 255, 0.9);
  --scalar-color-2: rgba(255, 255, 255, 0.62);
  --scalar-color-3: rgba(255, 255, 255, 0.44);

  --scalar-color-accent: rgba(255, 255, 255, 0.9);
  --scalar-background-accent: #441313;

  --scalar-code-language-color-supersede: var(--scalar-color-1);
}

/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-color: currentColor;
  --scalar-sidebar-item-hover-background: var(--scalar-background-2);

  --scalar-sidebar-item-active-background: var(--scalar-background-3);
  --scalar-sidebar-color-active: var(--scalar-color-accent);

  --scalar-sidebar-search-background: rgba(255, 255, 255, 0.1);
  --scalar-sidebar-search-color: var(--scalar-color-3);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
  z-index: 1;
}
/* advanced */
.light-mode {
  --scalar-color-green: #09533a;
  --scalar-color-red: #aa181d;
  --scalar-color-yellow: #ab8d2b;
  --scalar-color-blue: #19689a;
  --scalar-color-orange: #b26c34;
  --scalar-color-purple: #4c2191;

  --scalar-button-1: rgba(0, 0, 0, 1);
  --scalar-button-1-hover: rgba(0, 0, 0, 0.8);
  --scalar-button-1-color: rgba(255, 255, 255, 0.9);
}
.dark-mode {
  --scalar-color-green: rgba(69, 255, 165, 0.823);
  --scalar-color-red: #ff8589;
  --scalar-color-yellow: #ffcc4d;
  --scalar-color-blue: #6bc1fe;
  --scalar-color-orange: #f98943;
  --scalar-color-purple: #b191f9;

  --scalar-button-1: rgba(255, 255, 255, 1);
  --scalar-button-1-hover: rgba(255, 255, 255, 0.9);
  --scalar-button-1-color: black;
}
/* Custom Theme */
.dark-mode h2.t-editor__heading,
.dark-mode .t-editor__page-title h1,
.dark-mode h1.section-header:not(::selection),
.dark-mode .markdown h1,
.dark-mode .markdown h2,
.dark-mode .markdown h3,
.dark-mode .markdown h4,
.dark-mode .markdown h5,
.dark-mode .markdown h6 {
  -webkit-text-fill-color: transparent;
  background-image: linear-gradient(to right bottom, rgb(255, 255, 255) 30%, rgba(255, 255, 255, 0.38));
  -webkit-background-clip: text;
  background-clip: text;
}
.light-mode .t-doc__sidebar {
  --scalar-sidebar-search-background: white;
}
.examples .scalar-card-footer {
  --scalar-background-3: transparent;
  padding-top: 0;
}
/* Hero section flare */
.section-flare {
  overflow-x: hidden;
  height: 100vh;
  left: initial;
}
.section-flare-item:nth-of-type(1) {
  background: #d25019;
  position: relative;
  top: -150px;
  right: -400px;
  width: 80vw;
  height: 500px;
  margin-top: -150px;
  border-radius: 50%;
  filter: blur(100px);
  z-index: 0;
}
.light-mode .section-flare {
  display: none;
}
*::selection {
  background-color: color-mix(in srgb, var(--scalar-color-red), transparent 75%);
}
`;var GU=`.light-mode {
  color-scheme: light;
  --scalar-color-1: #000000;
  --scalar-color-2: #000000;
  --scalar-color-3: #000000;
  --scalar-color-accent: #645b0f;
  --scalar-background-1: #ccc9b3;
  --scalar-background-2: #c2bfaa;
  --scalar-background-3: #b8b5a1;
  --scalar-background-accent: #000000;

  --scalar-border-color: rgba(0, 0, 0, 0.2);
  --scalar-scrollbar-color: rgba(0, 0, 0, 0.18);
  --scalar-scrollbar-color-active: rgba(0, 0, 0, 0.36);
  --scalar-lifted-brightness: 1;
  --scalar-backdrop-brightness: 1;

  --scalar-shadow-1: 0 1px 3px 0 rgba(0, 0, 0, 0.11);
  --scalar-shadow-2: rgba(0, 0, 0, 0.08) 0px 13px 20px 0px, rgba(0, 0, 0, 0.08) 0px 3px 8px 0px,
    var(--scalar-border-color) 0px 0 0 1px;

  --scalar-button-1: rgb(49 53 56);
  --scalar-button-1-color: #fff;
  --scalar-button-1-hover: rgb(28 31 33);

  --scalar-color-red: #b91c1c;
  --scalar-color-orange: #a16207;
  --scalar-color-green: #047857;
  --scalar-color-blue: #1d4ed8;
  --scalar-color-orange: #c2410c;
  --scalar-color-purple: #6d28d9;
}

.dark-mode {
  color-scheme: dark;
  --scalar-color-1: #fffef3;
  --scalar-color-2: #fffef3;
  --scalar-color-3: #fffef3;
  --scalar-color-accent: #c3b531;
  --scalar-background-1: #313332;
  --scalar-background-2: #393b3a;
  --scalar-background-3: #414342;
  --scalar-background-accent: #fffef3;

  --scalar-border-color: #505452;
  --scalar-scrollbar-color: rgba(255, 255, 255, 0.24);
  --scalar-scrollbar-color-active: rgba(255, 255, 255, 0.48);
  --scalar-lifted-brightness: 1.45;
  --scalar-backdrop-brightness: 0.5;

  --scalar-shadow-1: 0 1px 3px 0 rgba(0, 0, 0, 0.11);
  --scalar-shadow-2: rgba(15, 15, 15, 0.2) 0px 3px 6px, rgba(15, 15, 15, 0.4) 0px 9px 24px, 0 0 0 1px
    rgba(255, 255, 255, 0.1);

  --scalar-button-1: #f6f6f6;
  --scalar-button-1-color: #000;
  --scalar-button-1-hover: #e7e7e7;

  --scalar-color-green: #00b648;
  --scalar-color-red: #dc1b19;
  --scalar-color-yellow: #ffc90d;
  --scalar-color-blue: #4eb3ec;
  --scalar-color-orange: #ff8d4d;
  --scalar-color-purple: #b191f9;
}

/* Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-hover-color: currentColor;

  --scalar-sidebar-item-active-background: var(--scalar-background-3);
  --scalar-sidebar-color-active: var(--scalar-color-1);

  --scalar-sidebar-search-background: transparent;
  --scalar-sidebar-search-color: var(--scalar-color-3);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
}
*::selection {
  background-color: color-mix(in srgb, var(--scalar-color-accent), transparent 80%);
}
`;var MU=`/* basic theme */
.light-mode {
  --scalar-background-1: #fff;
  --scalar-background-2: #f5f6f8;
  --scalar-background-3: #eceef1;

  --scalar-color-1: #2a2f45;
  --scalar-color-2: #757575;
  --scalar-color-3: #8e8e8e;

  --scalar-color-accent: #5469d4;
  --scalar-background-accent: #5469d41f;

  --scalar-border-color: rgba(215, 215, 206, 0.68);
}
.dark-mode {
  --scalar-background-1: #15171c;
  --scalar-background-2: #1c1e24;
  --scalar-background-3: #22252b;

  --scalar-color-1: #fafafa;
  --scalar-color-2: #c9ced8;
  --scalar-color-3: #8c99ad;

  --scalar-color-accent: #5469d4;
  --scalar-background-accent: #5469d41f;

  --scalar-border-color: #3f4145;
}
/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-color: currentColor;
  --scalar-sidebar-item-hover-background: var(--scalar-background-3);

  --scalar-sidebar-item-active-background: var(--scalar-background-accent);
  --scalar-sidebar-color-active: var(--scalar-color-accent);

  --scalar-sidebar-search-background: var(--scalar-background-1);
  --scalar-sidebar-search-color: var(--scalar-color-3);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
}

/* advanced */
.light-mode {
  --scalar-color-green: #17803d;
  --scalar-color-red: #e10909;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #1763a6;
  --scalar-color-orange: #e25b09;
  --scalar-color-purple: #5c3993;

  --scalar-button-1: rgba(0, 0, 0, 1);
  --scalar-button-1-hover: rgba(0, 0, 0, 0.8);
  --scalar-button-1-color: rgba(255, 255, 255, 0.9);
}
.dark-mode {
  --scalar-color-green: #30a159;
  --scalar-color-red: #dc1b19;
  --scalar-color-yellow: #eec644;
  --scalar-color-blue: #2b7abf;
  --scalar-color-orange: #f07528;
  --scalar-color-purple: #7a59b1;

  --scalar-button-1: rgba(255, 255, 255, 1);
  --scalar-button-1-hover: rgba(255, 255, 255, 0.9);
  --scalar-button-1-color: black;
}
.light-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-accent), transparent 70%);
}
.dark-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-accent), transparent 50%);
}
`;var UU=`/* basic theme */
.light-mode {
  --scalar-background-1: #f3f3ee;
  --scalar-background-2: #e8e8e3;
  --scalar-background-3: #e4e4df;
  --scalar-border-color: rgba(215, 215, 206, 0.85);

  --scalar-color-1: #2a2f45;
  --scalar-color-2: #757575;
  --scalar-color-3: #8e8e8e;

  --scalar-color-accent: #1763a6;
  --scalar-background-accent: #1f648e1f;
}
.dark-mode {
  --scalar-background-1: #09090b;
  --scalar-background-2: #18181b;
  --scalar-background-3: #2c2c30;
  --scalar-border-color: rgba(255, 255, 255, 0.17);

  --scalar-color-1: #fafafa;
  --scalar-color-2: rgb(161, 161, 170);
  --scalar-color-3: rgba(255, 255, 255, 0.533);

  --scalar-color-accent: #4eb3ec;
  --scalar-background-accent: #8ab4f81f;
}
/* Document Sidebar */
.light-mode .t-doc__sidebar,
.dark-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-border-color: var(--scalar-border-color);

  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-hover-color: currentColor;

  --scalar-sidebar-item-active-background: var(--scalar-background-3);
  --scalar-sidebar-color-active: var(--scalar-color-1);

  --scalar-sidebar-search-background: var(--scalar-background-1);
  --scalar-sidebar-search-border-color: var(--scalar-border-color);
  --scalar-sidebar-search-color: var(--scalar-color-3);
}

/* advanced */
.light-mode {
  --scalar-color-green: #17803d;
  --scalar-color-red: #e10909;
  --scalar-color-yellow: #edbe20;
  --scalar-color-blue: #1763a6;
  --scalar-color-orange: #e25b09;
  --scalar-color-purple: #5c3993;

  --scalar-button-1: rgba(0, 0, 0, 1);
  --scalar-button-1-hover: rgba(0, 0, 0, 0.8);
  --scalar-button-1-color: rgba(255, 255, 255, 0.9);
}
.dark-mode {
  --scalar-color-green: #30a159;
  --scalar-color-red: #dc1b19;
  --scalar-color-yellow: #eec644;
  --scalar-color-blue: #2b7abf;
  --scalar-color-orange: #f07528;
  --scalar-color-purple: #7a59b1;

  --scalar-button-1: rgba(255, 255, 255, 1);
  --scalar-button-1-hover: rgba(255, 255, 255, 0.9);
  --scalar-button-1-color: black;
}
.dark-mode h2.t-editor__heading,
.dark-mode .t-editor__page-title h1,
.dark-mode h1.section-header:not(::selection),
.dark-mode .markdown h1,
.dark-mode .markdown h2,
.dark-mode .markdown h3,
.dark-mode .markdown h4,
.dark-mode .markdown h5,
.dark-mode .markdown h6 {
  -webkit-text-fill-color: transparent;
  background-image: linear-gradient(to right bottom, rgb(255, 255, 255) 30%, rgba(255, 255, 255, 0.38));
  -webkit-background-clip: text;
  background-clip: text;
}
.light-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-accent), transparent 70%);
}
.dark-mode *::selection {
  background-color: color-mix(in srgb, var(--scalar-color-accent), transparent 50%);
}
`;var HU=`.light-mode {
  color-scheme: light;
  --scalar-color-1: #584c27;
  --scalar-color-2: #616161;
  --scalar-color-3: #a89f84;
  --scalar-color-accent: #b58900;
  --scalar-background-1: #fdf6e3;
  --scalar-background-2: #eee8d5;
  --scalar-background-3: #ddd6c1;
  --scalar-background-accent: #b589001f;

  --scalar-border-color: #ded8c8;
  --scalar-scrollbar-color: rgba(0, 0, 0, 0.18);
  --scalar-scrollbar-color-active: rgba(0, 0, 0, 0.36);
  --scalar-lifted-brightness: 1;
  --scalar-backdrop-brightness: 1;

  --scalar-shadow-1: 0 1px 3px 0 rgba(0, 0, 0, 0.11);
  --scalar-shadow-2: rgba(0, 0, 0, 0.08) 0px 13px 20px 0px, rgba(0, 0, 0, 0.08) 0px 3px 8px 0px, #eeeeed 0px 0 0 1px;

  --scalar-button-1: rgb(49 53 56);
  --scalar-button-1-color: #fff;
  --scalar-button-1-hover: rgb(28 31 33);

  --scalar-color-red: #b91c1c;
  --scalar-color-orange: #a16207;
  --scalar-color-green: #047857;
  --scalar-color-blue: #1d4ed8;
  --scalar-color-orange: #c2410c;
  --scalar-color-purple: #6d28d9;
}

.dark-mode {
  color-scheme: dark;
  --scalar-color-1: #fff;
  --scalar-color-2: #cccccc;
  --scalar-color-3: #6d8890;
  --scalar-color-accent: #007acc;
  --scalar-background-1: #00212b;
  --scalar-background-2: #012b36;
  --scalar-background-3: #004052;
  --scalar-background-accent: #015a6f;

  --scalar-border-color: #2f4851;
  --scalar-scrollbar-color: rgba(255, 255, 255, 0.24);
  --scalar-scrollbar-color-active: rgba(255, 255, 255, 0.48);
  --scalar-lifted-brightness: 1.45;
  --scalar-backdrop-brightness: 0.5;

  --scalar-shadow-1: 0 1px 3px 0 rgb(0, 0, 0, 0.1);
  --scalar-shadow-2: rgba(15, 15, 15, 0.2) 0px 3px 6px, rgba(15, 15, 15, 0.4) 0px 9px 24px, 0 0 0 1px
    rgba(255, 255, 255, 0.1);

  --scalar-button-1: #f6f6f6;
  --scalar-button-1-color: #000;
  --scalar-button-1-hover: #e7e7e7;

  --scalar-color-green: #00b648;
  --scalar-color-red: #dc1b19;
  --scalar-color-yellow: #ffc90d;
  --scalar-color-blue: #4eb3ec;
  --scalar-color-orange: #ff8d4d;
  --scalar-color-purple: #b191f9;
}

/* Sidebar */
.light-mode .t-doc__sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-item-hover-color: currentColor;
  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-active-background: var(--scalar-background-accent);
  --scalar-sidebar-border-color: var(--scalar-border-color);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-color-active: var(--scalar-color-accent);
  --scalar-sidebar-search-background: var(--scalar-background-2);
  --scalar-sidebar-search-border-color: var(--scalar-sidebar-search-background);
  --scalar-sidebar-search--color: var(--scalar-color-3);
}

.dark-mode .sidebar {
  --scalar-sidebar-background-1: var(--scalar-background-1);
  --scalar-sidebar-item-hover-color: currentColor;
  --scalar-sidebar-item-hover-background: var(--scalar-background-2);
  --scalar-sidebar-item-active-background: var(--scalar-background-accent);
  --scalar-sidebar-border-color: var(--scalar-border-color);
  --scalar-sidebar-color-1: var(--scalar-color-1);
  --scalar-sidebar-color-2: var(--scalar-color-2);
  --scalar-sidebar-color-active: var(--scalar-sidebar-color-1);
  --scalar-sidebar-search-background: var(--scalar-background-2);
  --scalar-sidebar-search-border-color: var(--scalar-sidebar-search-background);
  --scalar-sidebar-search--color: var(--scalar-color-3);
}
*::selection {
  background-color: color-mix(in srgb, var(--scalar-color-accent), transparent 70%);
}
`;var S={};k2(S,{void:()=>z_,util:()=>z0,unknown:()=>q_,union:()=>D_,undefined:()=>U_,tuple:()=>j_,transformer:()=>b_,symbol:()=>M_,string:()=>LU,strictObject:()=>O_,setErrorMap:()=>TS,set:()=>S_,record:()=>K_,quotelessJson:()=>bS,promise:()=>E_,preprocess:()=>x_,pipeline:()=>k_,ostring:()=>g_,optional:()=>I_,onumber:()=>f_,oboolean:()=>v_,objectUtil:()=>$X,object:()=>w_,number:()=>ZU,nullable:()=>T_,null:()=>H_,never:()=>N_,nativeEnum:()=>V_,nan:()=>W_,map:()=>F_,makeIssue:()=>A9,literal:()=>P_,lazy:()=>R_,late:()=>X_,isValid:()=>I8,isDirty:()=>Y$,isAsync:()=>Y4,isAborted:()=>$$,intersection:()=>Z_,instanceof:()=>Q_,getParsedType:()=>C2,getErrorMap:()=>$4,function:()=>__,enum:()=>C_,effect:()=>b_,discriminatedUnion:()=>L_,defaultErrorMap:()=>J8,datetimeRegex:()=>wU,date:()=>G_,custom:()=>DU,coerce:()=>y_,boolean:()=>jU,bigint:()=>J_,array:()=>A_,any:()=>B_,addIssueToContext:()=>c,ZodVoid:()=>O9,ZodUnknown:()=>T8,ZodUnion:()=>M4,ZodUndefined:()=>J4,ZodType:()=>M0,ZodTuple:()=>E2,ZodTransformer:()=>N2,ZodSymbol:()=>w9,ZodString:()=>U2,ZodSet:()=>H6,ZodSchema:()=>M0,ZodRecord:()=>D9,ZodReadonly:()=>A4,ZodPromise:()=>B6,ZodPipeline:()=>j9,ZodParsedType:()=>y,ZodOptional:()=>B2,ZodObject:()=>Y1,ZodNumber:()=>x8,ZodNullable:()=>M8,ZodNull:()=>G4,ZodNever:()=>V2,ZodNativeEnum:()=>q4,ZodNaN:()=>Z9,ZodMap:()=>L9,ZodLiteral:()=>B4,ZodLazy:()=>H4,ZodIssueCode:()=>T,ZodIntersection:()=>U4,ZodFunction:()=>Q4,ZodFirstPartyTypeKind:()=>e,ZodError:()=>M5,ZodEnum:()=>g8,ZodEffects:()=>N2,ZodDiscriminatedUnion:()=>X$,ZodDefault:()=>N4,ZodDate:()=>M6,ZodCatch:()=>z4,ZodBranded:()=>Q$,ZodBoolean:()=>W4,ZodBigInt:()=>k8,ZodArray:()=>H2,ZodAny:()=>U6,Schema:()=>M0,ParseStatus:()=>b1,OK:()=>h1,NEVER:()=>h_,INVALID:()=>r,EMPTY_PATH:()=>xS,DIRTY:()=>G6,BRAND:()=>Y_});var z0;(function($){$.assertEqual=(W)=>{};function Y(W){}$.assertIs=Y;function X(W){throw new Error}$.assertNever=X,$.arrayToEnum=(W)=>{let J={};for(let G of W)J[G]=G;return J},$.getValidEnumValues=(W)=>{let J=$.objectKeys(W).filter((M)=>typeof W[W[M]]!=="number"),G={};for(let M of J)G[M]=W[M];return $.objectValues(G)},$.objectValues=(W)=>{return $.objectKeys(W).map(function(J){return W[J]})},$.objectKeys=typeof Object.keys==="function"?(W)=>Object.keys(W):(W)=>{let J=[];for(let G in W)if(Object.prototype.hasOwnProperty.call(W,G))J.push(G);return J},$.find=(W,J)=>{for(let G of W)if(J(G))return G;return},$.isInteger=typeof Number.isInteger==="function"?(W)=>Number.isInteger(W):(W)=>typeof W==="number"&&Number.isFinite(W)&&Math.floor(W)===W;function Q(W,J=" | "){return W.map((G)=>typeof G==="string"?`'${G}'`:G).join(J)}$.joinValues=Q,$.jsonStringifyReplacer=(W,J)=>{if(typeof J==="bigint")return J.toString();return J}})(z0||(z0={}));var $X;(function($){$.mergeShapes=(Y,X)=>{return{...Y,...X}}})($X||($X={}));var y=z0.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),C2=($)=>{switch(typeof $){case"undefined":return y.undefined;case"string":return y.string;case"number":return Number.isNaN($)?y.nan:y.number;case"boolean":return y.boolean;case"function":return y.function;case"bigint":return y.bigint;case"symbol":return y.symbol;case"object":if(Array.isArray($))return y.array;if($===null)return y.null;if($.then&&typeof $.then==="function"&&$.catch&&typeof $.catch==="function")return y.promise;if(typeof Map!=="undefined"&&$ instanceof Map)return y.map;if(typeof Set!=="undefined"&&$ instanceof Set)return y.set;if(typeof Date!=="undefined"&&$ instanceof Date)return y.date;return y.object;default:return y.unknown}};var T=z0.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),bS=($)=>{return JSON.stringify($,null,2).replace(/"([^"]+)":/g,"$1:")};class M5 extends Error{get errors(){return this.issues}constructor($){super();this.issues=[],this.addIssue=(X)=>{this.issues=[...this.issues,X]},this.addIssues=(X=[])=>{this.issues=[...this.issues,...X]};let Y=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,Y);else this.__proto__=Y;this.name="ZodError",this.issues=$}format($){let Y=$||function(W){return W.message},X={_errors:[]},Q=(W)=>{for(let J of W.issues)if(J.code==="invalid_union")J.unionErrors.map(Q);else if(J.code==="invalid_return_type")Q(J.returnTypeError);else if(J.code==="invalid_arguments")Q(J.argumentsError);else if(J.path.length===0)X._errors.push(Y(J));else{let G=X,M=0;while(M<J.path.length){let U=J.path[M];if(M!==J.path.length-1)G[U]=G[U]||{_errors:[]};else G[U]=G[U]||{_errors:[]},G[U]._errors.push(Y(J));G=G[U],M++}}};return Q(this),X}static assert($){if(!($ instanceof M5))throw new Error(`Not a ZodError: ${$}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,z0.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten($=(Y)=>Y.message){let Y={},X=[];for(let Q of this.issues)if(Q.path.length>0)Y[Q.path[0]]=Y[Q.path[0]]||[],Y[Q.path[0]].push($(Q));else X.push($(Q));return{formErrors:X,fieldErrors:Y}}get formErrors(){return this.flatten()}}M5.create=($)=>{return new M5($)};var IS=($,Y)=>{let X;switch($.code){case T.invalid_type:if($.received===y.undefined)X="Required";else X=`Expected ${$.expected}, received ${$.received}`;break;case T.invalid_literal:X=`Invalid literal value, expected ${JSON.stringify($.expected,z0.jsonStringifyReplacer)}`;break;case T.unrecognized_keys:X=`Unrecognized key(s) in object: ${z0.joinValues($.keys,", ")}`;break;case T.invalid_union:X="Invalid input";break;case T.invalid_union_discriminator:X=`Invalid discriminator value. Expected ${z0.joinValues($.options)}`;break;case T.invalid_enum_value:X=`Invalid enum value. Expected ${z0.joinValues($.options)}, received '${$.received}'`;break;case T.invalid_arguments:X="Invalid function arguments";break;case T.invalid_return_type:X="Invalid function return type";break;case T.invalid_date:X="Invalid date";break;case T.invalid_string:if(typeof $.validation==="object")if("includes"in $.validation){if(X=`Invalid input: must include "${$.validation.includes}"`,typeof $.validation.position==="number")X=`${X} at one or more positions greater than or equal to ${$.validation.position}`}else if("startsWith"in $.validation)X=`Invalid input: must start with "${$.validation.startsWith}"`;else if("endsWith"in $.validation)X=`Invalid input: must end with "${$.validation.endsWith}"`;else z0.assertNever($.validation);else if($.validation!=="regex")X=`Invalid ${$.validation}`;else X="Invalid";break;case T.too_small:if($.type==="array")X=`Array must contain ${$.exact?"exactly":$.inclusive?"at least":"more than"} ${$.minimum} element(s)`;else if($.type==="string")X=`String must contain ${$.exact?"exactly":$.inclusive?"at least":"over"} ${$.minimum} character(s)`;else if($.type==="number")X=`Number must be ${$.exact?"exactly equal to ":$.inclusive?"greater than or equal to ":"greater than "}${$.minimum}`;else if($.type==="date")X=`Date must be ${$.exact?"exactly equal to ":$.inclusive?"greater than or equal to ":"greater than "}${new Date(Number($.minimum))}`;else X="Invalid input";break;case T.too_big:if($.type==="array")X=`Array must contain ${$.exact?"exactly":$.inclusive?"at most":"less than"} ${$.maximum} element(s)`;else if($.type==="string")X=`String must contain ${$.exact?"exactly":$.inclusive?"at most":"under"} ${$.maximum} character(s)`;else if($.type==="number")X=`Number must be ${$.exact?"exactly":$.inclusive?"less than or equal to":"less than"} ${$.maximum}`;else if($.type==="bigint")X=`BigInt must be ${$.exact?"exactly":$.inclusive?"less than or equal to":"less than"} ${$.maximum}`;else if($.type==="date")X=`Date must be ${$.exact?"exactly":$.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number($.maximum))}`;else X="Invalid input";break;case T.custom:X="Invalid input";break;case T.invalid_intersection_types:X="Intersection results could not be merged";break;case T.not_multiple_of:X=`Number must be a multiple of ${$.multipleOf}`;break;case T.not_finite:X="Number must be finite";break;default:X=Y.defaultError,z0.assertNever($)}return{message:X}},J8=IS;var BU=J8;function TS($){BU=$}function $4(){return BU}var A9=($)=>{let{data:Y,path:X,errorMaps:Q,issueData:W}=$,J=[...X,...W.path||[]],G={...W,path:J};if(W.message!==void 0)return{...W,path:J,message:W.message};let M="",U=Q.filter((H)=>!!H).slice().reverse();for(let H of U)M=H(G,{data:Y,defaultError:M}).message;return{...W,path:J,message:M}},xS=[];function c($,Y){let X=$4(),Q=A9({issueData:Y,data:$.data,path:$.path,errorMaps:[$.common.contextualErrorMap,$.schemaErrorMap,X,X===J8?void 0:J8].filter((W)=>!!W)});$.common.issues.push(Q)}class b1{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray($,Y){let X=[];for(let Q of Y){if(Q.status==="aborted")return r;if(Q.status==="dirty")$.dirty();X.push(Q.value)}return{status:$.value,value:X}}static async mergeObjectAsync($,Y){let X=[];for(let Q of Y){let W=await Q.key,J=await Q.value;X.push({key:W,value:J})}return b1.mergeObjectSync($,X)}static mergeObjectSync($,Y){let X={};for(let Q of Y){let{key:W,value:J}=Q;if(W.status==="aborted")return r;if(J.status==="aborted")return r;if(W.status==="dirty")$.dirty();if(J.status==="dirty")$.dirty();if(W.value!=="__proto__"&&(typeof J.value!=="undefined"||Q.alwaysSet))X[W.value]=J.value}return{status:$.value,value:X}}}var r=Object.freeze({status:"aborted"}),G6=($)=>({status:"dirty",value:$}),h1=($)=>({status:"valid",value:$}),$$=($)=>$.status==="aborted",Y$=($)=>$.status==="dirty",I8=($)=>$.status==="valid",Y4=($)=>typeof Promise!=="undefined"&&$ instanceof Promise;var u;(function($){$.errToObj=(Y)=>typeof Y==="string"?{message:Y}:Y||{},$.toString=(Y)=>typeof Y==="string"?Y:Y?.message})(u||(u={}));class q2{constructor($,Y,X,Q){this._cachedPath=[],this.parent=$,this.data=Y,this._path=X,this._key=Q}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var qU=($,Y)=>{if(I8(Y))return{success:!0,data:Y.value};else{if(!$.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let X=new M5($.common.issues);return this._error=X,this._error}}}};function X0($){if(!$)return{};let{errorMap:Y,invalid_type_error:X,required_error:Q,description:W}=$;if(Y&&(X||Q))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(Y)return{errorMap:Y,description:W};return{errorMap:(G,M)=>{let{message:U}=$;if(G.code==="invalid_enum_value")return{message:U??M.defaultError};if(typeof M.data==="undefined")return{message:U??Q??M.defaultError};if(G.code!=="invalid_type")return{message:M.defaultError};return{message:U??X??M.defaultError}},description:W}}class M0{get description(){return this._def.description}_getType($){return C2($.data)}_getOrReturnCtx($,Y){return Y||{common:$.parent.common,data:$.data,parsedType:C2($.data),schemaErrorMap:this._def.errorMap,path:$.path,parent:$.parent}}_processInputParams($){return{status:new b1,ctx:{common:$.parent.common,data:$.data,parsedType:C2($.data),schemaErrorMap:this._def.errorMap,path:$.path,parent:$.parent}}}_parseSync($){let Y=this._parse($);if(Y4(Y))throw new Error("Synchronous parse encountered promise.");return Y}_parseAsync($){let Y=this._parse($);return Promise.resolve(Y)}parse($,Y){let X=this.safeParse($,Y);if(X.success)return X.data;throw X.error}safeParse($,Y){let X={common:{issues:[],async:Y?.async??!1,contextualErrorMap:Y?.errorMap},path:Y?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:$,parsedType:C2($)},Q=this._parseSync({data:$,path:X.path,parent:X});return qU(X,Q)}"~validate"($){let Y={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:$,parsedType:C2($)};if(!this["~standard"].async)try{let X=this._parseSync({data:$,path:[],parent:Y});return I8(X)?{value:X.value}:{issues:Y.common.issues}}catch(X){if(X?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;Y.common={issues:[],async:!0}}return this._parseAsync({data:$,path:[],parent:Y}).then((X)=>I8(X)?{value:X.value}:{issues:Y.common.issues})}async parseAsync($,Y){let X=await this.safeParseAsync($,Y);if(X.success)return X.data;throw X.error}async safeParseAsync($,Y){let X={common:{issues:[],contextualErrorMap:Y?.errorMap,async:!0},path:Y?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:$,parsedType:C2($)},Q=this._parse({data:$,path:X.path,parent:X}),W=await(Y4(Q)?Q:Promise.resolve(Q));return qU(X,W)}refine($,Y){let X=(Q)=>{if(typeof Y==="string"||typeof Y==="undefined")return{message:Y};else if(typeof Y==="function")return Y(Q);else return Y};return this._refinement((Q,W)=>{let J=$(Q),G=()=>W.addIssue({code:T.custom,...X(Q)});if(typeof Promise!=="undefined"&&J instanceof Promise)return J.then((M)=>{if(!M)return G(),!1;else return!0});if(!J)return G(),!1;else return!0})}refinement($,Y){return this._refinement((X,Q)=>{if(!$(X))return Q.addIssue(typeof Y==="function"?Y(X,Q):Y),!1;else return!0})}_refinement($){return new N2({schema:this,typeName:e.ZodEffects,effect:{type:"refinement",refinement:$}})}superRefine($){return this._refinement($)}constructor($){this.spa=this.safeParseAsync,this._def=$,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(Y)=>this["~validate"](Y)}}optional(){return B2.create(this,this._def)}nullable(){return M8.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return H2.create(this)}promise(){return B6.create(this,this._def)}or($){return M4.create([this,$],this._def)}and($){return U4.create(this,$,this._def)}transform($){return new N2({...X0(this._def),schema:this,typeName:e.ZodEffects,effect:{type:"transform",transform:$}})}default($){let Y=typeof $==="function"?$:()=>$;return new N4({...X0(this._def),innerType:this,defaultValue:Y,typeName:e.ZodDefault})}brand(){return new Q$({typeName:e.ZodBranded,type:this,...X0(this._def)})}catch($){let Y=typeof $==="function"?$:()=>$;return new z4({...X0(this._def),innerType:this,catchValue:Y,typeName:e.ZodCatch})}describe($){return new this.constructor({...this._def,description:$})}pipe($){return j9.create(this,$)}readonly(){return A4.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var kS=/^c[^\s-]{8,}$/i,gS=/^[0-9a-z]+$/,fS=/^[0-9A-HJKMNP-TV-Z]{26}$/i,vS=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,yS=/^[a-z0-9_-]{21}$/i,hS=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,dS=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,cS=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,mS="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",YX,uS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,lS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,pS=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,iS=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,oS=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nS=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,zU="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",rS=new RegExp(`^${zU}$`);function AU($){let Y="[0-5]\\d";if($.precision)Y=`${Y}\\.\\d{${$.precision}}`;else if($.precision==null)Y=`${Y}(\\.\\d+)?`;let X=$.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${Y})${X}`}function tS($){return new RegExp(`^${AU($)}$`)}function wU($){let Y=`${zU}T${AU($)}`,X=[];if(X.push($.local?"Z?":"Z"),$.offset)X.push("([+-]\\d{2}:?\\d{2})");return Y=`${Y}(${X.join("|")})`,new RegExp(`^${Y}$`)}function sS($,Y){if((Y==="v4"||!Y)&&uS.test($))return!0;if((Y==="v6"||!Y)&&pS.test($))return!0;return!1}function aS($,Y){if(!hS.test($))return!1;try{let[X]=$.split("."),Q=X.replace(/-/g,"+").replace(/_/g,"/").padEnd(X.length+(4-X.length%4)%4,"="),W=JSON.parse(atob(Q));if(typeof W!=="object"||W===null)return!1;if("typ"in W&&W?.typ!=="JWT")return!1;if(!W.alg)return!1;if(Y&&W.alg!==Y)return!1;return!0}catch{return!1}}function eS($,Y){if((Y==="v4"||!Y)&&lS.test($))return!0;if((Y==="v6"||!Y)&&iS.test($))return!0;return!1}class U2 extends M0{_parse($){if(this._def.coerce)$.data=String($.data);if(this._getType($)!==y.string){let W=this._getOrReturnCtx($);return c(W,{code:T.invalid_type,expected:y.string,received:W.parsedType}),r}let X=new b1,Q=void 0;for(let W of this._def.checks)if(W.kind==="min"){if($.data.length<W.value)Q=this._getOrReturnCtx($,Q),c(Q,{code:T.too_small,minimum:W.value,type:"string",inclusive:!0,exact:!1,message:W.message}),X.dirty()}else if(W.kind==="max"){if($.data.length>W.value)Q=this._getOrReturnCtx($,Q),c(Q,{code:T.too_big,maximum:W.value,type:"string",inclusive:!0,exact:!1,message:W.message}),X.dirty()}else if(W.kind==="length"){let J=$.data.length>W.value,G=$.data.length<W.value;if(J||G){if(Q=this._getOrReturnCtx($,Q),J)c(Q,{code:T.too_big,maximum:W.value,type:"string",inclusive:!0,exact:!0,message:W.message});else if(G)c(Q,{code:T.too_small,minimum:W.value,type:"string",inclusive:!0,exact:!0,message:W.message});X.dirty()}}else if(W.kind==="email"){if(!cS.test($.data))Q=this._getOrReturnCtx($,Q),c(Q,{validation:"email",code:T.invalid_string,message:W.message}),X.dirty()}else if(W.kind==="emoji"){if(!YX)YX=new RegExp(mS,"u");if(!YX.test($.data))Q=this._getOrReturnCtx($,Q),c(Q,{validation:"emoji",code:T.invalid_string,message:W.message}),X.dirty()}else if(W.kind==="uuid"){if(!vS.test($.data))Q=this._getOrReturnCtx($,Q),c(Q,{validation:"uuid",code:T.invalid_string,message:W.message}),X.dirty()}else if(W.kind==="nanoid"){if(!yS.test($.data))Q=this._getOrReturnCtx($,Q),c(Q,{validation:"nanoid",code:T.invalid_string,message:W.message}),X.dirty()}else if(W.kind==="cuid"){if(!kS.test($.data))Q=this._getOrReturnCtx($,Q),c(Q,{validation:"cuid",code:T.invalid_string,message:W.message}),X.dirty()}else if(W.kind==="cuid2"){if(!gS.test($.data))Q=this._getOrReturnCtx($,Q),c(Q,{validation:"cuid2",code:T.invalid_string,message:W.message}),X.dirty()}else if(W.kind==="ulid"){if(!fS.test($.data))Q=this._getOrReturnCtx($,Q),c(Q,{validation:"ulid",code:T.invalid_string,message:W.message}),X.dirty()}else if(W.kind==="url")try{new URL($.data)}catch{Q=this._getOrReturnCtx($,Q),c(Q,{validation:"url",code:T.invalid_string,message:W.message}),X.dirty()}else if(W.kind==="regex"){if(W.regex.lastIndex=0,!W.regex.test($.data))Q=this._getOrReturnCtx($,Q),c(Q,{validation:"regex",code:T.invalid_string,message:W.message}),X.dirty()}else if(W.kind==="trim")$.data=$.data.trim();else if(W.kind==="includes"){if(!$.data.includes(W.value,W.position))Q=this._getOrReturnCtx($,Q),c(Q,{code:T.invalid_string,validation:{includes:W.value,position:W.position},message:W.message}),X.dirty()}else if(W.kind==="toLowerCase")$.data=$.data.toLowerCase();else if(W.kind==="toUpperCase")$.data=$.data.toUpperCase();else if(W.kind==="startsWith"){if(!$.data.startsWith(W.value))Q=this._getOrReturnCtx($,Q),c(Q,{code:T.invalid_string,validation:{startsWith:W.value},message:W.message}),X.dirty()}else if(W.kind==="endsWith"){if(!$.data.endsWith(W.value))Q=this._getOrReturnCtx($,Q),c(Q,{code:T.invalid_string,validation:{endsWith:W.value},message:W.message}),X.dirty()}else if(W.kind==="datetime"){if(!wU(W).test($.data))Q=this._getOrReturnCtx($,Q),c(Q,{code:T.invalid_string,validation:"datetime",message:W.message}),X.dirty()}else if(W.kind==="date"){if(!rS.test($.data))Q=this._getOrReturnCtx($,Q),c(Q,{code:T.invalid_string,validation:"date",message:W.message}),X.dirty()}else if(W.kind==="time"){if(!tS(W).test($.data))Q=this._getOrReturnCtx($,Q),c(Q,{code:T.invalid_string,validation:"time",message:W.message}),X.dirty()}else if(W.kind==="duration"){if(!dS.test($.data))Q=this._getOrReturnCtx($,Q),c(Q,{validation:"duration",code:T.invalid_string,message:W.message}),X.dirty()}else if(W.kind==="ip"){if(!sS($.data,W.version))Q=this._getOrReturnCtx($,Q),c(Q,{validation:"ip",code:T.invalid_string,message:W.message}),X.dirty()}else if(W.kind==="jwt"){if(!aS($.data,W.alg))Q=this._getOrReturnCtx($,Q),c(Q,{validation:"jwt",code:T.invalid_string,message:W.message}),X.dirty()}else if(W.kind==="cidr"){if(!eS($.data,W.version))Q=this._getOrReturnCtx($,Q),c(Q,{validation:"cidr",code:T.invalid_string,message:W.message}),X.dirty()}else if(W.kind==="base64"){if(!oS.test($.data))Q=this._getOrReturnCtx($,Q),c(Q,{validation:"base64",code:T.invalid_string,message:W.message}),X.dirty()}else if(W.kind==="base64url"){if(!nS.test($.data))Q=this._getOrReturnCtx($,Q),c(Q,{validation:"base64url",code:T.invalid_string,message:W.message}),X.dirty()}else z0.assertNever(W);return{status:X.value,value:$.data}}_regex($,Y,X){return this.refinement((Q)=>$.test(Q),{validation:Y,code:T.invalid_string,...u.errToObj(X)})}_addCheck($){return new U2({...this._def,checks:[...this._def.checks,$]})}email($){return this._addCheck({kind:"email",...u.errToObj($)})}url($){return this._addCheck({kind:"url",...u.errToObj($)})}emoji($){return this._addCheck({kind:"emoji",...u.errToObj($)})}uuid($){return this._addCheck({kind:"uuid",...u.errToObj($)})}nanoid($){return this._addCheck({kind:"nanoid",...u.errToObj($)})}cuid($){return this._addCheck({kind:"cuid",...u.errToObj($)})}cuid2($){return this._addCheck({kind:"cuid2",...u.errToObj($)})}ulid($){return this._addCheck({kind:"ulid",...u.errToObj($)})}base64($){return this._addCheck({kind:"base64",...u.errToObj($)})}base64url($){return this._addCheck({kind:"base64url",...u.errToObj($)})}jwt($){return this._addCheck({kind:"jwt",...u.errToObj($)})}ip($){return this._addCheck({kind:"ip",...u.errToObj($)})}cidr($){return this._addCheck({kind:"cidr",...u.errToObj($)})}datetime($){if(typeof $==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:$});return this._addCheck({kind:"datetime",precision:typeof $?.precision==="undefined"?null:$?.precision,offset:$?.offset??!1,local:$?.local??!1,...u.errToObj($?.message)})}date($){return this._addCheck({kind:"date",message:$})}time($){if(typeof $==="string")return this._addCheck({kind:"time",precision:null,message:$});return this._addCheck({kind:"time",precision:typeof $?.precision==="undefined"?null:$?.precision,...u.errToObj($?.message)})}duration($){return this._addCheck({kind:"duration",...u.errToObj($)})}regex($,Y){return this._addCheck({kind:"regex",regex:$,...u.errToObj(Y)})}includes($,Y){return this._addCheck({kind:"includes",value:$,position:Y?.position,...u.errToObj(Y?.message)})}startsWith($,Y){return this._addCheck({kind:"startsWith",value:$,...u.errToObj(Y)})}endsWith($,Y){return this._addCheck({kind:"endsWith",value:$,...u.errToObj(Y)})}min($,Y){return this._addCheck({kind:"min",value:$,...u.errToObj(Y)})}max($,Y){return this._addCheck({kind:"max",value:$,...u.errToObj(Y)})}length($,Y){return this._addCheck({kind:"length",value:$,...u.errToObj(Y)})}nonempty($){return this.min(1,u.errToObj($))}trim(){return new U2({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new U2({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new U2({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(($)=>$.kind==="datetime")}get isDate(){return!!this._def.checks.find(($)=>$.kind==="date")}get isTime(){return!!this._def.checks.find(($)=>$.kind==="time")}get isDuration(){return!!this._def.checks.find(($)=>$.kind==="duration")}get isEmail(){return!!this._def.checks.find(($)=>$.kind==="email")}get isURL(){return!!this._def.checks.find(($)=>$.kind==="url")}get isEmoji(){return!!this._def.checks.find(($)=>$.kind==="emoji")}get isUUID(){return!!this._def.checks.find(($)=>$.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(($)=>$.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(($)=>$.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(($)=>$.kind==="cuid2")}get isULID(){return!!this._def.checks.find(($)=>$.kind==="ulid")}get isIP(){return!!this._def.checks.find(($)=>$.kind==="ip")}get isCIDR(){return!!this._def.checks.find(($)=>$.kind==="cidr")}get isBase64(){return!!this._def.checks.find(($)=>$.kind==="base64")}get isBase64url(){return!!this._def.checks.find(($)=>$.kind==="base64url")}get minLength(){let $=null;for(let Y of this._def.checks)if(Y.kind==="min"){if($===null||Y.value>$)$=Y.value}return $}get maxLength(){let $=null;for(let Y of this._def.checks)if(Y.kind==="max"){if($===null||Y.value<$)$=Y.value}return $}}U2.create=($)=>{return new U2({checks:[],typeName:e.ZodString,coerce:$?.coerce??!1,...X0($)})};function $_($,Y){let X=($.toString().split(".")[1]||"").length,Q=(Y.toString().split(".")[1]||"").length,W=X>Q?X:Q,J=Number.parseInt($.toFixed(W).replace(".","")),G=Number.parseInt(Y.toFixed(W).replace(".",""));return J%G/10**W}class x8 extends M0{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse($){if(this._def.coerce)$.data=Number($.data);if(this._getType($)!==y.number){let W=this._getOrReturnCtx($);return c(W,{code:T.invalid_type,expected:y.number,received:W.parsedType}),r}let X=void 0,Q=new b1;for(let W of this._def.checks)if(W.kind==="int"){if(!z0.isInteger($.data))X=this._getOrReturnCtx($,X),c(X,{code:T.invalid_type,expected:"integer",received:"float",message:W.message}),Q.dirty()}else if(W.kind==="min"){if(W.inclusive?$.data<W.value:$.data<=W.value)X=this._getOrReturnCtx($,X),c(X,{code:T.too_small,minimum:W.value,type:"number",inclusive:W.inclusive,exact:!1,message:W.message}),Q.dirty()}else if(W.kind==="max"){if(W.inclusive?$.data>W.value:$.data>=W.value)X=this._getOrReturnCtx($,X),c(X,{code:T.too_big,maximum:W.value,type:"number",inclusive:W.inclusive,exact:!1,message:W.message}),Q.dirty()}else if(W.kind==="multipleOf"){if($_($.data,W.value)!==0)X=this._getOrReturnCtx($,X),c(X,{code:T.not_multiple_of,multipleOf:W.value,message:W.message}),Q.dirty()}else if(W.kind==="finite"){if(!Number.isFinite($.data))X=this._getOrReturnCtx($,X),c(X,{code:T.not_finite,message:W.message}),Q.dirty()}else z0.assertNever(W);return{status:Q.value,value:$.data}}gte($,Y){return this.setLimit("min",$,!0,u.toString(Y))}gt($,Y){return this.setLimit("min",$,!1,u.toString(Y))}lte($,Y){return this.setLimit("max",$,!0,u.toString(Y))}lt($,Y){return this.setLimit("max",$,!1,u.toString(Y))}setLimit($,Y,X,Q){return new x8({...this._def,checks:[...this._def.checks,{kind:$,value:Y,inclusive:X,message:u.toString(Q)}]})}_addCheck($){return new x8({...this._def,checks:[...this._def.checks,$]})}int($){return this._addCheck({kind:"int",message:u.toString($)})}positive($){return this._addCheck({kind:"min",value:0,inclusive:!1,message:u.toString($)})}negative($){return this._addCheck({kind:"max",value:0,inclusive:!1,message:u.toString($)})}nonpositive($){return this._addCheck({kind:"max",value:0,inclusive:!0,message:u.toString($)})}nonnegative($){return this._addCheck({kind:"min",value:0,inclusive:!0,message:u.toString($)})}multipleOf($,Y){return this._addCheck({kind:"multipleOf",value:$,message:u.toString(Y)})}finite($){return this._addCheck({kind:"finite",message:u.toString($)})}safe($){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:u.toString($)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:u.toString($)})}get minValue(){let $=null;for(let Y of this._def.checks)if(Y.kind==="min"){if($===null||Y.value>$)$=Y.value}return $}get maxValue(){let $=null;for(let Y of this._def.checks)if(Y.kind==="max"){if($===null||Y.value<$)$=Y.value}return $}get isInt(){return!!this._def.checks.find(($)=>$.kind==="int"||$.kind==="multipleOf"&&z0.isInteger($.value))}get isFinite(){let $=null,Y=null;for(let X of this._def.checks)if(X.kind==="finite"||X.kind==="int"||X.kind==="multipleOf")return!0;else if(X.kind==="min"){if(Y===null||X.value>Y)Y=X.value}else if(X.kind==="max"){if($===null||X.value<$)$=X.value}return Number.isFinite(Y)&&Number.isFinite($)}}x8.create=($)=>{return new x8({checks:[],typeName:e.ZodNumber,coerce:$?.coerce||!1,...X0($)})};class k8 extends M0{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse($){if(this._def.coerce)try{$.data=BigInt($.data)}catch{return this._getInvalidInput($)}if(this._getType($)!==y.bigint)return this._getInvalidInput($);let X=void 0,Q=new b1;for(let W of this._def.checks)if(W.kind==="min"){if(W.inclusive?$.data<W.value:$.data<=W.value)X=this._getOrReturnCtx($,X),c(X,{code:T.too_small,type:"bigint",minimum:W.value,inclusive:W.inclusive,message:W.message}),Q.dirty()}else if(W.kind==="max"){if(W.inclusive?$.data>W.value:$.data>=W.value)X=this._getOrReturnCtx($,X),c(X,{code:T.too_big,type:"bigint",maximum:W.value,inclusive:W.inclusive,message:W.message}),Q.dirty()}else if(W.kind==="multipleOf"){if($.data%W.value!==BigInt(0))X=this._getOrReturnCtx($,X),c(X,{code:T.not_multiple_of,multipleOf:W.value,message:W.message}),Q.dirty()}else z0.assertNever(W);return{status:Q.value,value:$.data}}_getInvalidInput($){let Y=this._getOrReturnCtx($);return c(Y,{code:T.invalid_type,expected:y.bigint,received:Y.parsedType}),r}gte($,Y){return this.setLimit("min",$,!0,u.toString(Y))}gt($,Y){return this.setLimit("min",$,!1,u.toString(Y))}lte($,Y){return this.setLimit("max",$,!0,u.toString(Y))}lt($,Y){return this.setLimit("max",$,!1,u.toString(Y))}setLimit($,Y,X,Q){return new k8({...this._def,checks:[...this._def.checks,{kind:$,value:Y,inclusive:X,message:u.toString(Q)}]})}_addCheck($){return new k8({...this._def,checks:[...this._def.checks,$]})}positive($){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:u.toString($)})}negative($){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:u.toString($)})}nonpositive($){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:u.toString($)})}nonnegative($){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:u.toString($)})}multipleOf($,Y){return this._addCheck({kind:"multipleOf",value:$,message:u.toString(Y)})}get minValue(){let $=null;for(let Y of this._def.checks)if(Y.kind==="min"){if($===null||Y.value>$)$=Y.value}return $}get maxValue(){let $=null;for(let Y of this._def.checks)if(Y.kind==="max"){if($===null||Y.value<$)$=Y.value}return $}}k8.create=($)=>{return new k8({checks:[],typeName:e.ZodBigInt,coerce:$?.coerce??!1,...X0($)})};class W4 extends M0{_parse($){if(this._def.coerce)$.data=Boolean($.data);if(this._getType($)!==y.boolean){let X=this._getOrReturnCtx($);return c(X,{code:T.invalid_type,expected:y.boolean,received:X.parsedType}),r}return h1($.data)}}W4.create=($)=>{return new W4({typeName:e.ZodBoolean,coerce:$?.coerce||!1,...X0($)})};class M6 extends M0{_parse($){if(this._def.coerce)$.data=new Date($.data);if(this._getType($)!==y.date){let W=this._getOrReturnCtx($);return c(W,{code:T.invalid_type,expected:y.date,received:W.parsedType}),r}if(Number.isNaN($.data.getTime())){let W=this._getOrReturnCtx($);return c(W,{code:T.invalid_date}),r}let X=new b1,Q=void 0;for(let W of this._def.checks)if(W.kind==="min"){if($.data.getTime()<W.value)Q=this._getOrReturnCtx($,Q),c(Q,{code:T.too_small,message:W.message,inclusive:!0,exact:!1,minimum:W.value,type:"date"}),X.dirty()}else if(W.kind==="max"){if($.data.getTime()>W.value)Q=this._getOrReturnCtx($,Q),c(Q,{code:T.too_big,message:W.message,inclusive:!0,exact:!1,maximum:W.value,type:"date"}),X.dirty()}else z0.assertNever(W);return{status:X.value,value:new Date($.data.getTime())}}_addCheck($){return new M6({...this._def,checks:[...this._def.checks,$]})}min($,Y){return this._addCheck({kind:"min",value:$.getTime(),message:u.toString(Y)})}max($,Y){return this._addCheck({kind:"max",value:$.getTime(),message:u.toString(Y)})}get minDate(){let $=null;for(let Y of this._def.checks)if(Y.kind==="min"){if($===null||Y.value>$)$=Y.value}return $!=null?new Date($):null}get maxDate(){let $=null;for(let Y of this._def.checks)if(Y.kind==="max"){if($===null||Y.value<$)$=Y.value}return $!=null?new Date($):null}}M6.create=($)=>{return new M6({checks:[],coerce:$?.coerce||!1,typeName:e.ZodDate,...X0($)})};class w9 extends M0{_parse($){if(this._getType($)!==y.symbol){let X=this._getOrReturnCtx($);return c(X,{code:T.invalid_type,expected:y.symbol,received:X.parsedType}),r}return h1($.data)}}w9.create=($)=>{return new w9({typeName:e.ZodSymbol,...X0($)})};class J4 extends M0{_parse($){if(this._getType($)!==y.undefined){let X=this._getOrReturnCtx($);return c(X,{code:T.invalid_type,expected:y.undefined,received:X.parsedType}),r}return h1($.data)}}J4.create=($)=>{return new J4({typeName:e.ZodUndefined,...X0($)})};class G4 extends M0{_parse($){if(this._getType($)!==y.null){let X=this._getOrReturnCtx($);return c(X,{code:T.invalid_type,expected:y.null,received:X.parsedType}),r}return h1($.data)}}G4.create=($)=>{return new G4({typeName:e.ZodNull,...X0($)})};class U6 extends M0{constructor(){super(...arguments);this._any=!0}_parse($){return h1($.data)}}U6.create=($)=>{return new U6({typeName:e.ZodAny,...X0($)})};class T8 extends M0{constructor(){super(...arguments);this._unknown=!0}_parse($){return h1($.data)}}T8.create=($)=>{return new T8({typeName:e.ZodUnknown,...X0($)})};class V2 extends M0{_parse($){let Y=this._getOrReturnCtx($);return c(Y,{code:T.invalid_type,expected:y.never,received:Y.parsedType}),r}}V2.create=($)=>{return new V2({typeName:e.ZodNever,...X0($)})};class O9 extends M0{_parse($){if(this._getType($)!==y.undefined){let X=this._getOrReturnCtx($);return c(X,{code:T.invalid_type,expected:y.void,received:X.parsedType}),r}return h1($.data)}}O9.create=($)=>{return new O9({typeName:e.ZodVoid,...X0($)})};class H2 extends M0{_parse($){let{ctx:Y,status:X}=this._processInputParams($),Q=this._def;if(Y.parsedType!==y.array)return c(Y,{code:T.invalid_type,expected:y.array,received:Y.parsedType}),r;if(Q.exactLength!==null){let J=Y.data.length>Q.exactLength.value,G=Y.data.length<Q.exactLength.value;if(J||G)c(Y,{code:J?T.too_big:T.too_small,minimum:G?Q.exactLength.value:void 0,maximum:J?Q.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:Q.exactLength.message}),X.dirty()}if(Q.minLength!==null){if(Y.data.length<Q.minLength.value)c(Y,{code:T.too_small,minimum:Q.minLength.value,type:"array",inclusive:!0,exact:!1,message:Q.minLength.message}),X.dirty()}if(Q.maxLength!==null){if(Y.data.length>Q.maxLength.value)c(Y,{code:T.too_big,maximum:Q.maxLength.value,type:"array",inclusive:!0,exact:!1,message:Q.maxLength.message}),X.dirty()}if(Y.common.async)return Promise.all([...Y.data].map((J,G)=>{return Q.type._parseAsync(new q2(Y,J,Y.path,G))})).then((J)=>{return b1.mergeArray(X,J)});let W=[...Y.data].map((J,G)=>{return Q.type._parseSync(new q2(Y,J,Y.path,G))});return b1.mergeArray(X,W)}get element(){return this._def.type}min($,Y){return new H2({...this._def,minLength:{value:$,message:u.toString(Y)}})}max($,Y){return new H2({...this._def,maxLength:{value:$,message:u.toString(Y)}})}length($,Y){return new H2({...this._def,exactLength:{value:$,message:u.toString(Y)}})}nonempty($){return this.min(1,$)}}H2.create=($,Y)=>{return new H2({type:$,minLength:null,maxLength:null,exactLength:null,typeName:e.ZodArray,...X0(Y)})};function X4($){if($ instanceof Y1){let Y={};for(let X in $.shape){let Q=$.shape[X];Y[X]=B2.create(X4(Q))}return new Y1({...$._def,shape:()=>Y})}else if($ instanceof H2)return new H2({...$._def,type:X4($.element)});else if($ instanceof B2)return B2.create(X4($.unwrap()));else if($ instanceof M8)return M8.create(X4($.unwrap()));else if($ instanceof E2)return E2.create($.items.map((Y)=>X4(Y)));else return $}class Y1 extends M0{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let $=this._def.shape(),Y=z0.objectKeys($);return this._cached={shape:$,keys:Y},this._cached}_parse($){if(this._getType($)!==y.object){let U=this._getOrReturnCtx($);return c(U,{code:T.invalid_type,expected:y.object,received:U.parsedType}),r}let{status:X,ctx:Q}=this._processInputParams($),{shape:W,keys:J}=this._getCached(),G=[];if(!(this._def.catchall instanceof V2&&this._def.unknownKeys==="strip")){for(let U in Q.data)if(!J.includes(U))G.push(U)}let M=[];for(let U of J){let H=W[U],B=Q.data[U];M.push({key:{status:"valid",value:U},value:H._parse(new q2(Q,B,Q.path,U)),alwaysSet:U in Q.data})}if(this._def.catchall instanceof V2){let U=this._def.unknownKeys;if(U==="passthrough")for(let H of G)M.push({key:{status:"valid",value:H},value:{status:"valid",value:Q.data[H]}});else if(U==="strict"){if(G.length>0)c(Q,{code:T.unrecognized_keys,keys:G}),X.dirty()}else if(U==="strip");else throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let U=this._def.catchall;for(let H of G){let B=Q.data[H];M.push({key:{status:"valid",value:H},value:U._parse(new q2(Q,B,Q.path,H)),alwaysSet:H in Q.data})}}if(Q.common.async)return Promise.resolve().then(async()=>{let U=[];for(let H of M){let B=await H.key,A=await H.value;U.push({key:B,value:A,alwaysSet:H.alwaysSet})}return U}).then((U)=>{return b1.mergeObjectSync(X,U)});else return b1.mergeObjectSync(X,M)}get shape(){return this._def.shape()}strict($){return u.errToObj,new Y1({...this._def,unknownKeys:"strict",...$!==void 0?{errorMap:(Y,X)=>{let Q=this._def.errorMap?.(Y,X).message??X.defaultError;if(Y.code==="unrecognized_keys")return{message:u.errToObj($).message??Q};return{message:Q}}}:{}})}strip(){return new Y1({...this._def,unknownKeys:"strip"})}passthrough(){return new Y1({...this._def,unknownKeys:"passthrough"})}extend($){return new Y1({...this._def,shape:()=>({...this._def.shape(),...$})})}merge($){return new Y1({unknownKeys:$._def.unknownKeys,catchall:$._def.catchall,shape:()=>({...this._def.shape(),...$._def.shape()}),typeName:e.ZodObject})}setKey($,Y){return this.augment({[$]:Y})}catchall($){return new Y1({...this._def,catchall:$})}pick($){let Y={};for(let X of z0.objectKeys($))if($[X]&&this.shape[X])Y[X]=this.shape[X];return new Y1({...this._def,shape:()=>Y})}omit($){let Y={};for(let X of z0.objectKeys(this.shape))if(!$[X])Y[X]=this.shape[X];return new Y1({...this._def,shape:()=>Y})}deepPartial(){return X4(this)}partial($){let Y={};for(let X of z0.objectKeys(this.shape)){let Q=this.shape[X];if($&&!$[X])Y[X]=Q;else Y[X]=Q.optional()}return new Y1({...this._def,shape:()=>Y})}required($){let Y={};for(let X of z0.objectKeys(this.shape))if($&&!$[X])Y[X]=this.shape[X];else{let W=this.shape[X];while(W instanceof B2)W=W._def.innerType;Y[X]=W}return new Y1({...this._def,shape:()=>Y})}keyof(){return OU(z0.objectKeys(this.shape))}}Y1.create=($,Y)=>{return new Y1({shape:()=>$,unknownKeys:"strip",catchall:V2.create(),typeName:e.ZodObject,...X0(Y)})};Y1.strictCreate=($,Y)=>{return new Y1({shape:()=>$,unknownKeys:"strict",catchall:V2.create(),typeName:e.ZodObject,...X0(Y)})};Y1.lazycreate=($,Y)=>{return new Y1({shape:$,unknownKeys:"strip",catchall:V2.create(),typeName:e.ZodObject,...X0(Y)})};class M4 extends M0{_parse($){let{ctx:Y}=this._processInputParams($),X=this._def.options;function Q(W){for(let G of W)if(G.result.status==="valid")return G.result;for(let G of W)if(G.result.status==="dirty")return Y.common.issues.push(...G.ctx.common.issues),G.result;let J=W.map((G)=>new M5(G.ctx.common.issues));return c(Y,{code:T.invalid_union,unionErrors:J}),r}if(Y.common.async)return Promise.all(X.map(async(W)=>{let J={...Y,common:{...Y.common,issues:[]},parent:null};return{result:await W._parseAsync({data:Y.data,path:Y.path,parent:J}),ctx:J}})).then(Q);else{let W=void 0,J=[];for(let M of X){let U={...Y,common:{...Y.common,issues:[]},parent:null},H=M._parseSync({data:Y.data,path:Y.path,parent:U});if(H.status==="valid")return H;else if(H.status==="dirty"&&!W)W={result:H,ctx:U};if(U.common.issues.length)J.push(U.common.issues)}if(W)return Y.common.issues.push(...W.ctx.common.issues),W.result;let G=J.map((M)=>new M5(M));return c(Y,{code:T.invalid_union,unionErrors:G}),r}}get options(){return this._def.options}}M4.create=($,Y)=>{return new M4({options:$,typeName:e.ZodUnion,...X0(Y)})};var G8=($)=>{if($ instanceof H4)return G8($.schema);else if($ instanceof N2)return G8($.innerType());else if($ instanceof B4)return[$.value];else if($ instanceof g8)return $.options;else if($ instanceof q4)return z0.objectValues($.enum);else if($ instanceof N4)return G8($._def.innerType);else if($ instanceof J4)return[void 0];else if($ instanceof G4)return[null];else if($ instanceof B2)return[void 0,...G8($.unwrap())];else if($ instanceof M8)return[null,...G8($.unwrap())];else if($ instanceof Q$)return G8($.unwrap());else if($ instanceof A4)return G8($.unwrap());else if($ instanceof z4)return G8($._def.innerType);else return[]};class X$ extends M0{_parse($){let{ctx:Y}=this._processInputParams($);if(Y.parsedType!==y.object)return c(Y,{code:T.invalid_type,expected:y.object,received:Y.parsedType}),r;let X=this.discriminator,Q=Y.data[X],W=this.optionsMap.get(Q);if(!W)return c(Y,{code:T.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[X]}),r;if(Y.common.async)return W._parseAsync({data:Y.data,path:Y.path,parent:Y});else return W._parseSync({data:Y.data,path:Y.path,parent:Y})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create($,Y,X){let Q=new Map;for(let W of Y){let J=G8(W.shape[$]);if(!J.length)throw new Error(`A discriminator value for key \`${$}\` could not be extracted from all schema options`);for(let G of J){if(Q.has(G))throw new Error(`Discriminator property ${String($)} has duplicate value ${String(G)}`);Q.set(G,W)}}return new X$({typeName:e.ZodDiscriminatedUnion,discriminator:$,options:Y,optionsMap:Q,...X0(X)})}}function XX($,Y){let X=C2($),Q=C2(Y);if($===Y)return{valid:!0,data:$};else if(X===y.object&&Q===y.object){let W=z0.objectKeys(Y),J=z0.objectKeys($).filter((M)=>W.indexOf(M)!==-1),G={...$,...Y};for(let M of J){let U=XX($[M],Y[M]);if(!U.valid)return{valid:!1};G[M]=U.data}return{valid:!0,data:G}}else if(X===y.array&&Q===y.array){if($.length!==Y.length)return{valid:!1};let W=[];for(let J=0;J<$.length;J++){let G=$[J],M=Y[J],U=XX(G,M);if(!U.valid)return{valid:!1};W.push(U.data)}return{valid:!0,data:W}}else if(X===y.date&&Q===y.date&&+$===+Y)return{valid:!0,data:$};else return{valid:!1}}class U4 extends M0{_parse($){let{status:Y,ctx:X}=this._processInputParams($),Q=(W,J)=>{if($$(W)||$$(J))return r;let G=XX(W.value,J.value);if(!G.valid)return c(X,{code:T.invalid_intersection_types}),r;if(Y$(W)||Y$(J))Y.dirty();return{status:Y.value,value:G.data}};if(X.common.async)return Promise.all([this._def.left._parseAsync({data:X.data,path:X.path,parent:X}),this._def.right._parseAsync({data:X.data,path:X.path,parent:X})]).then(([W,J])=>Q(W,J));else return Q(this._def.left._parseSync({data:X.data,path:X.path,parent:X}),this._def.right._parseSync({data:X.data,path:X.path,parent:X}))}}U4.create=($,Y,X)=>{return new U4({left:$,right:Y,typeName:e.ZodIntersection,...X0(X)})};class E2 extends M0{_parse($){let{status:Y,ctx:X}=this._processInputParams($);if(X.parsedType!==y.array)return c(X,{code:T.invalid_type,expected:y.array,received:X.parsedType}),r;if(X.data.length<this._def.items.length)return c(X,{code:T.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r;if(!this._def.rest&&X.data.length>this._def.items.length)c(X,{code:T.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Y.dirty();let W=[...X.data].map((J,G)=>{let M=this._def.items[G]||this._def.rest;if(!M)return null;return M._parse(new q2(X,J,X.path,G))}).filter((J)=>!!J);if(X.common.async)return Promise.all(W).then((J)=>{return b1.mergeArray(Y,J)});else return b1.mergeArray(Y,W)}get items(){return this._def.items}rest($){return new E2({...this._def,rest:$})}}E2.create=($,Y)=>{if(!Array.isArray($))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new E2({items:$,typeName:e.ZodTuple,rest:null,...X0(Y)})};class D9 extends M0{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse($){let{status:Y,ctx:X}=this._processInputParams($);if(X.parsedType!==y.object)return c(X,{code:T.invalid_type,expected:y.object,received:X.parsedType}),r;let Q=[],W=this._def.keyType,J=this._def.valueType;for(let G in X.data)Q.push({key:W._parse(new q2(X,G,X.path,G)),value:J._parse(new q2(X,X.data[G],X.path,G)),alwaysSet:G in X.data});if(X.common.async)return b1.mergeObjectAsync(Y,Q);else return b1.mergeObjectSync(Y,Q)}get element(){return this._def.valueType}static create($,Y,X){if(Y instanceof M0)return new D9({keyType:$,valueType:Y,typeName:e.ZodRecord,...X0(X)});return new D9({keyType:U2.create(),valueType:$,typeName:e.ZodRecord,...X0(Y)})}}class L9 extends M0{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse($){let{status:Y,ctx:X}=this._processInputParams($);if(X.parsedType!==y.map)return c(X,{code:T.invalid_type,expected:y.map,received:X.parsedType}),r;let Q=this._def.keyType,W=this._def.valueType,J=[...X.data.entries()].map(([G,M],U)=>{return{key:Q._parse(new q2(X,G,X.path,[U,"key"])),value:W._parse(new q2(X,M,X.path,[U,"value"]))}});if(X.common.async){let G=new Map;return Promise.resolve().then(async()=>{for(let M of J){let U=await M.key,H=await M.value;if(U.status==="aborted"||H.status==="aborted")return r;if(U.status==="dirty"||H.status==="dirty")Y.dirty();G.set(U.value,H.value)}return{status:Y.value,value:G}})}else{let G=new Map;for(let M of J){let{key:U,value:H}=M;if(U.status==="aborted"||H.status==="aborted")return r;if(U.status==="dirty"||H.status==="dirty")Y.dirty();G.set(U.value,H.value)}return{status:Y.value,value:G}}}}L9.create=($,Y,X)=>{return new L9({valueType:Y,keyType:$,typeName:e.ZodMap,...X0(X)})};class H6 extends M0{_parse($){let{status:Y,ctx:X}=this._processInputParams($);if(X.parsedType!==y.set)return c(X,{code:T.invalid_type,expected:y.set,received:X.parsedType}),r;let Q=this._def;if(Q.minSize!==null){if(X.data.size<Q.minSize.value)c(X,{code:T.too_small,minimum:Q.minSize.value,type:"set",inclusive:!0,exact:!1,message:Q.minSize.message}),Y.dirty()}if(Q.maxSize!==null){if(X.data.size>Q.maxSize.value)c(X,{code:T.too_big,maximum:Q.maxSize.value,type:"set",inclusive:!0,exact:!1,message:Q.maxSize.message}),Y.dirty()}let W=this._def.valueType;function J(M){let U=new Set;for(let H of M){if(H.status==="aborted")return r;if(H.status==="dirty")Y.dirty();U.add(H.value)}return{status:Y.value,value:U}}let G=[...X.data.values()].map((M,U)=>W._parse(new q2(X,M,X.path,U)));if(X.common.async)return Promise.all(G).then((M)=>J(M));else return J(G)}min($,Y){return new H6({...this._def,minSize:{value:$,message:u.toString(Y)}})}max($,Y){return new H6({...this._def,maxSize:{value:$,message:u.toString(Y)}})}size($,Y){return this.min($,Y).max($,Y)}nonempty($){return this.min(1,$)}}H6.create=($,Y)=>{return new H6({valueType:$,minSize:null,maxSize:null,typeName:e.ZodSet,...X0(Y)})};class Q4 extends M0{constructor(){super(...arguments);this.validate=this.implement}_parse($){let{ctx:Y}=this._processInputParams($);if(Y.parsedType!==y.function)return c(Y,{code:T.invalid_type,expected:y.function,received:Y.parsedType}),r;function X(G,M){return A9({data:G,path:Y.path,errorMaps:[Y.common.contextualErrorMap,Y.schemaErrorMap,$4(),J8].filter((U)=>!!U),issueData:{code:T.invalid_arguments,argumentsError:M}})}function Q(G,M){return A9({data:G,path:Y.path,errorMaps:[Y.common.contextualErrorMap,Y.schemaErrorMap,$4(),J8].filter((U)=>!!U),issueData:{code:T.invalid_return_type,returnTypeError:M}})}let W={errorMap:Y.common.contextualErrorMap},J=Y.data;if(this._def.returns instanceof B6){let G=this;return h1(async function(...M){let U=new M5([]),H=await G._def.args.parseAsync(M,W).catch((O)=>{throw U.addIssue(X(M,O)),U}),B=await Reflect.apply(J,this,H);return await G._def.returns._def.type.parseAsync(B,W).catch((O)=>{throw U.addIssue(Q(B,O)),U})})}else{let G=this;return h1(function(...M){let U=G._def.args.safeParse(M,W);if(!U.success)throw new M5([X(M,U.error)]);let H=Reflect.apply(J,this,U.data),B=G._def.returns.safeParse(H,W);if(!B.success)throw new M5([Q(H,B.error)]);return B.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...$){return new Q4({...this._def,args:E2.create($).rest(T8.create())})}returns($){return new Q4({...this._def,returns:$})}implement($){return this.parse($)}strictImplement($){return this.parse($)}static create($,Y,X){return new Q4({args:$?$:E2.create([]).rest(T8.create()),returns:Y||T8.create(),typeName:e.ZodFunction,...X0(X)})}}class H4 extends M0{get schema(){return this._def.getter()}_parse($){let{ctx:Y}=this._processInputParams($);return this._def.getter()._parse({data:Y.data,path:Y.path,parent:Y})}}H4.create=($,Y)=>{return new H4({getter:$,typeName:e.ZodLazy,...X0(Y)})};class B4 extends M0{_parse($){if($.data!==this._def.value){let Y=this._getOrReturnCtx($);return c(Y,{received:Y.data,code:T.invalid_literal,expected:this._def.value}),r}return{status:"valid",value:$.data}}get value(){return this._def.value}}B4.create=($,Y)=>{return new B4({value:$,typeName:e.ZodLiteral,...X0(Y)})};function OU($,Y){return new g8({values:$,typeName:e.ZodEnum,...X0(Y)})}class g8 extends M0{_parse($){if(typeof $.data!=="string"){let Y=this._getOrReturnCtx($),X=this._def.values;return c(Y,{expected:z0.joinValues(X),received:Y.parsedType,code:T.invalid_type}),r}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has($.data)){let Y=this._getOrReturnCtx($),X=this._def.values;return c(Y,{received:Y.data,code:T.invalid_enum_value,options:X}),r}return h1($.data)}get options(){return this._def.values}get enum(){let $={};for(let Y of this._def.values)$[Y]=Y;return $}get Values(){let $={};for(let Y of this._def.values)$[Y]=Y;return $}get Enum(){let $={};for(let Y of this._def.values)$[Y]=Y;return $}extract($,Y=this._def){return g8.create($,{...this._def,...Y})}exclude($,Y=this._def){return g8.create(this.options.filter((X)=>!$.includes(X)),{...this._def,...Y})}}g8.create=OU;class q4 extends M0{_parse($){let Y=z0.getValidEnumValues(this._def.values),X=this._getOrReturnCtx($);if(X.parsedType!==y.string&&X.parsedType!==y.number){let Q=z0.objectValues(Y);return c(X,{expected:z0.joinValues(Q),received:X.parsedType,code:T.invalid_type}),r}if(!this._cache)this._cache=new Set(z0.getValidEnumValues(this._def.values));if(!this._cache.has($.data)){let Q=z0.objectValues(Y);return c(X,{received:X.data,code:T.invalid_enum_value,options:Q}),r}return h1($.data)}get enum(){return this._def.values}}q4.create=($,Y)=>{return new q4({values:$,typeName:e.ZodNativeEnum,...X0(Y)})};class B6 extends M0{unwrap(){return this._def.type}_parse($){let{ctx:Y}=this._processInputParams($);if(Y.parsedType!==y.promise&&Y.common.async===!1)return c(Y,{code:T.invalid_type,expected:y.promise,received:Y.parsedType}),r;let X=Y.parsedType===y.promise?Y.data:Promise.resolve(Y.data);return h1(X.then((Q)=>{return this._def.type.parseAsync(Q,{path:Y.path,errorMap:Y.common.contextualErrorMap})}))}}B6.create=($,Y)=>{return new B6({type:$,typeName:e.ZodPromise,...X0(Y)})};class N2 extends M0{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===e.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse($){let{status:Y,ctx:X}=this._processInputParams($),Q=this._def.effect||null,W={addIssue:(J)=>{if(c(X,J),J.fatal)Y.abort();else Y.dirty()},get path(){return X.path}};if(W.addIssue=W.addIssue.bind(W),Q.type==="preprocess"){let J=Q.transform(X.data,W);if(X.common.async)return Promise.resolve(J).then(async(G)=>{if(Y.value==="aborted")return r;let M=await this._def.schema._parseAsync({data:G,path:X.path,parent:X});if(M.status==="aborted")return r;if(M.status==="dirty")return G6(M.value);if(Y.value==="dirty")return G6(M.value);return M});else{if(Y.value==="aborted")return r;let G=this._def.schema._parseSync({data:J,path:X.path,parent:X});if(G.status==="aborted")return r;if(G.status==="dirty")return G6(G.value);if(Y.value==="dirty")return G6(G.value);return G}}if(Q.type==="refinement"){let J=(G)=>{let M=Q.refinement(G,W);if(X.common.async)return Promise.resolve(M);if(M instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return G};if(X.common.async===!1){let G=this._def.schema._parseSync({data:X.data,path:X.path,parent:X});if(G.status==="aborted")return r;if(G.status==="dirty")Y.dirty();return J(G.value),{status:Y.value,value:G.value}}else return this._def.schema._parseAsync({data:X.data,path:X.path,parent:X}).then((G)=>{if(G.status==="aborted")return r;if(G.status==="dirty")Y.dirty();return J(G.value).then(()=>{return{status:Y.value,value:G.value}})})}if(Q.type==="transform")if(X.common.async===!1){let J=this._def.schema._parseSync({data:X.data,path:X.path,parent:X});if(!I8(J))return r;let G=Q.transform(J.value,W);if(G instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:Y.value,value:G}}else return this._def.schema._parseAsync({data:X.data,path:X.path,parent:X}).then((J)=>{if(!I8(J))return r;return Promise.resolve(Q.transform(J.value,W)).then((G)=>({status:Y.value,value:G}))});z0.assertNever(Q)}}N2.create=($,Y,X)=>{return new N2({schema:$,typeName:e.ZodEffects,effect:Y,...X0(X)})};N2.createWithPreprocess=($,Y,X)=>{return new N2({schema:Y,effect:{type:"preprocess",transform:$},typeName:e.ZodEffects,...X0(X)})};class B2 extends M0{_parse($){if(this._getType($)===y.undefined)return h1(void 0);return this._def.innerType._parse($)}unwrap(){return this._def.innerType}}B2.create=($,Y)=>{return new B2({innerType:$,typeName:e.ZodOptional,...X0(Y)})};class M8 extends M0{_parse($){if(this._getType($)===y.null)return h1(null);return this._def.innerType._parse($)}unwrap(){return this._def.innerType}}M8.create=($,Y)=>{return new M8({innerType:$,typeName:e.ZodNullable,...X0(Y)})};class N4 extends M0{_parse($){let{ctx:Y}=this._processInputParams($),X=Y.data;if(Y.parsedType===y.undefined)X=this._def.defaultValue();return this._def.innerType._parse({data:X,path:Y.path,parent:Y})}removeDefault(){return this._def.innerType}}N4.create=($,Y)=>{return new N4({innerType:$,typeName:e.ZodDefault,defaultValue:typeof Y.default==="function"?Y.default:()=>Y.default,...X0(Y)})};class z4 extends M0{_parse($){let{ctx:Y}=this._processInputParams($),X={...Y,common:{...Y.common,issues:[]}},Q=this._def.innerType._parse({data:X.data,path:X.path,parent:{...X}});if(Y4(Q))return Q.then((W)=>{return{status:"valid",value:W.status==="valid"?W.value:this._def.catchValue({get error(){return new M5(X.common.issues)},input:X.data})}});else return{status:"valid",value:Q.status==="valid"?Q.value:this._def.catchValue({get error(){return new M5(X.common.issues)},input:X.data})}}removeCatch(){return this._def.innerType}}z4.create=($,Y)=>{return new z4({innerType:$,typeName:e.ZodCatch,catchValue:typeof Y.catch==="function"?Y.catch:()=>Y.catch,...X0(Y)})};class Z9 extends M0{_parse($){if(this._getType($)!==y.nan){let X=this._getOrReturnCtx($);return c(X,{code:T.invalid_type,expected:y.nan,received:X.parsedType}),r}return{status:"valid",value:$.data}}}Z9.create=($)=>{return new Z9({typeName:e.ZodNaN,...X0($)})};var Y_=Symbol("zod_brand");class Q$ extends M0{_parse($){let{ctx:Y}=this._processInputParams($),X=Y.data;return this._def.type._parse({data:X,path:Y.path,parent:Y})}unwrap(){return this._def.type}}class j9 extends M0{_parse($){let{status:Y,ctx:X}=this._processInputParams($);if(X.common.async)return(async()=>{let W=await this._def.in._parseAsync({data:X.data,path:X.path,parent:X});if(W.status==="aborted")return r;if(W.status==="dirty")return Y.dirty(),G6(W.value);else return this._def.out._parseAsync({data:W.value,path:X.path,parent:X})})();else{let Q=this._def.in._parseSync({data:X.data,path:X.path,parent:X});if(Q.status==="aborted")return r;if(Q.status==="dirty")return Y.dirty(),{status:"dirty",value:Q.value};else return this._def.out._parseSync({data:Q.value,path:X.path,parent:X})}}static create($,Y){return new j9({in:$,out:Y,typeName:e.ZodPipeline})}}class A4 extends M0{_parse($){let Y=this._def.innerType._parse($),X=(Q)=>{if(I8(Q))Q.value=Object.freeze(Q.value);return Q};return Y4(Y)?Y.then((Q)=>X(Q)):X(Y)}unwrap(){return this._def.innerType}}A4.create=($,Y)=>{return new A4({innerType:$,typeName:e.ZodReadonly,...X0(Y)})};function NU($,Y){let X=typeof $==="function"?$(Y):typeof $==="string"?{message:$}:$;return typeof X==="string"?{message:X}:X}function DU($,Y={},X){if($)return U6.create().superRefine((Q,W)=>{let J=$(Q);if(J instanceof Promise)return J.then((G)=>{if(!G){let M=NU(Y,Q),U=M.fatal??X??!0;W.addIssue({code:"custom",...M,fatal:U})}});if(!J){let G=NU(Y,Q),M=G.fatal??X??!0;W.addIssue({code:"custom",...G,fatal:M})}return});return U6.create()}var X_={object:Y1.lazycreate},e;(function($){$.ZodString="ZodString",$.ZodNumber="ZodNumber",$.ZodNaN="ZodNaN",$.ZodBigInt="ZodBigInt",$.ZodBoolean="ZodBoolean",$.ZodDate="ZodDate",$.ZodSymbol="ZodSymbol",$.ZodUndefined="ZodUndefined",$.ZodNull="ZodNull",$.ZodAny="ZodAny",$.ZodUnknown="ZodUnknown",$.ZodNever="ZodNever",$.ZodVoid="ZodVoid",$.ZodArray="ZodArray",$.ZodObject="ZodObject",$.ZodUnion="ZodUnion",$.ZodDiscriminatedUnion="ZodDiscriminatedUnion",$.ZodIntersection="ZodIntersection",$.ZodTuple="ZodTuple",$.ZodRecord="ZodRecord",$.ZodMap="ZodMap",$.ZodSet="ZodSet",$.ZodFunction="ZodFunction",$.ZodLazy="ZodLazy",$.ZodLiteral="ZodLiteral",$.ZodEnum="ZodEnum",$.ZodEffects="ZodEffects",$.ZodNativeEnum="ZodNativeEnum",$.ZodOptional="ZodOptional",$.ZodNullable="ZodNullable",$.ZodDefault="ZodDefault",$.ZodCatch="ZodCatch",$.ZodPromise="ZodPromise",$.ZodBranded="ZodBranded",$.ZodPipeline="ZodPipeline",$.ZodReadonly="ZodReadonly"})(e||(e={}));var Q_=($,Y={message:`Input not instance of ${$.name}`})=>DU((X)=>X instanceof $,Y),LU=U2.create,ZU=x8.create,W_=Z9.create,J_=k8.create,jU=W4.create,G_=M6.create,M_=w9.create,U_=J4.create,H_=G4.create,B_=U6.create,q_=T8.create,N_=V2.create,z_=O9.create,A_=H2.create,w_=Y1.create,O_=Y1.strictCreate,D_=M4.create,L_=X$.create,Z_=U4.create,j_=E2.create,K_=D9.create,F_=L9.create,S_=H6.create,__=Q4.create,R_=H4.create,P_=B4.create,C_=g8.create,V_=q4.create,E_=B6.create,b_=N2.create,I_=B2.create,T_=M8.create,x_=N2.createWithPreprocess,k_=j9.create,g_=()=>LU().optional(),f_=()=>ZU().optional(),v_=()=>jU().optional(),y_={string:($)=>U2.create({...$,coerce:!0}),number:($)=>x8.create({...$,coerce:!0}),boolean:($)=>W4.create({...$,coerce:!0}),bigint:($)=>k8.create({...$,coerce:!0}),date:($)=>M6.create({...$,coerce:!0})};var h_=r;var d_=S.object({name:S.string().regex(/^x-/),component:S.unknown()}),KU=S.function().returns(S.object({name:S.string(),extensions:S.array(d_)}));var FU=[["--theme-","--scalar-"],["--sidebar-","--scalar-sidebar-"]],c_=FU.map(([$])=>$);function W$($){if(!c_.some((X)=>$.includes(X)))return $;return console.warn("DEPRECATION WARNING: It looks like you're using legacy CSS variables in your custom CSS string. Please migrate them to use the updated prefixes. See https://github.com/scalar/scalar/blob/main/documentation/themes.md#theme-prefix-changes"),FU.reduce((X,[Q,W])=>X.replaceAll(Q,W),$)}var m_=S.enum(["alternate","default","moon","purple","solarized","bluePlanet","deepSpace","saturn","kepler","elysiajs","fastify","mars","none"]),u_=S.enum(["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"]),l_=S.enum(["adonisjs","docusaurus","dotnet","elysiajs","express","fastapi","fastify","go","hono","html","laravel","litestar","nestjs","nextjs","nitro","nuxt","platformatic","react","rust","vue"]).nullable(),_U=S.object({url:S.string().optional(),content:S.union([S.string(),S.record(S.any()),S.function().returns(S.record(S.any())),S.null()]).optional(),title:S.string().optional(),slug:S.string().optional()}),p_=S.object({basePath:S.string()}),RU=S.object({url:S.string().optional(),content:S.union([S.string(),S.record(S.any()),S.function().returns(S.record(S.any())),S.null()]).optional(),title:S.string().optional(),slug:S.string().optional(),spec:_U.optional(),authentication:S.any().optional(),baseServerURL:S.string().optional(),hideClientButton:S.boolean().optional().default(!1).catch(!1),proxyUrl:S.string().optional(),searchHotKey:u_.optional(),servers:S.array(S.any()).optional(),showSidebar:S.boolean().optional().default(!0).catch(!0),theme:m_.optional().default("default").catch("default"),_integration:l_.optional(),onRequestSent:S.function().args(S.string()).returns(S.void()).optional()}),SU="https://api.scalar.com/request-proxy",QX="https://proxy.scalar.com",i_=RU.merge(S.object({layout:S.enum(["modern","classic"]).optional().default("modern").catch("modern"),proxy:S.string().optional(),plugins:S.array(KU).optional(),isEditable:S.boolean().optional().default(!1).catch(!1),isLoading:S.boolean().optional().default(!1).catch(!1),hideModels:S.boolean().optional().default(!1).catch(!1),hideDownloadButton:S.boolean().optional().default(!1).catch(!1),hideTestRequestButton:S.boolean().optional().default(!1).catch(!1),hideSearch:S.boolean().optional().default(!1).catch(!1),darkMode:S.boolean().optional(),forceDarkModeState:S.enum(["dark","light"]).optional(),hideDarkModeToggle:S.boolean().optional().default(!1).catch(!1),metaData:S.any().optional(),favicon:S.string().optional(),hiddenClients:S.union([S.record(S.union([S.boolean(),S.array(S.string())])),S.array(S.string()),S.literal(!0)]).optional(),defaultHttpClient:S.object({targetKey:S.custom(),clientKey:S.string()}).optional(),customCss:S.string().optional(),onSpecUpdate:S.function().args(S.string()).returns(S.void()).optional(),onServerChange:S.function().args(S.string()).returns(S.void()).optional(),onDocumentSelect:S.function().returns(S.void().or(S.void().promise())).optional(),onLoaded:S.function().returns(S.void().or(S.void().promise())).optional(),onShowMore:S.function().args(S.string()).returns(S.void().or(S.void().promise())).optional(),onSidebarClick:S.function().args(S.string()).returns(S.void().or(S.void().promise())).optional(),pathRouting:p_.optional(),generateHeadingSlug:S.function().args(S.object({slug:S.string().default("headingSlug")})).returns(S.string()).optional(),generateModelSlug:S.function().args(S.object({name:S.string().default("modelName")})).returns(S.string()).optional(),generateTagSlug:S.function().args(S.object({name:S.string().default("tagName")})).returns(S.string()).optional(),generateOperationSlug:S.function().args(S.object({path:S.string(),operationId:S.string().optional(),method:S.string(),summary:S.string().optional()})).returns(S.string()).optional(),generateWebhookSlug:S.function().args(S.object({name:S.string(),method:S.string().optional()})).returns(S.string()).optional(),redirect:S.function().args(S.string()).returns(S.string().nullable().optional()).optional(),withDefaultFonts:S.boolean().optional().default(!0).catch(!0),defaultOpenAllTags:S.boolean().optional(),tagsSorter:S.union([S.literal("alpha"),S.function().args(S.any(),S.any()).returns(S.number())]).optional(),operationsSorter:S.union([S.literal("alpha"),S.literal("method"),S.function().args(S.any(),S.any()).returns(S.number())]).optional()})),o_=($)=>{let Y={...$};if(Y.spec?.url)console.warn("[DEPRECATED] You're using the deprecated 'spec.url' attribute. Remove the spec prefix and move the 'url' attribute to the top level."),Y.url=Y.spec.url,delete Y.spec;if(Y.spec?.content)console.warn("[DEPRECATED] You're using the deprecated 'spec.content' attribute. Remove the spec prefix and move the 'content' attribute to the top level."),Y.content=Y.spec.content,delete Y.spec;if(Y.customCss)Y.customCss=W$(Y.customCss);if(Y.proxy){if(console.warn("[DEPRECATED] You're using the deprecated 'proxy' attribute, rename it to 'proxyUrl' or update the package."),!Y.proxyUrl)Y.proxyUrl=Y.proxy;delete Y.proxy}if(Y.proxyUrl===SU)console.warn(`[DEPRECATED] Warning: configuration.proxyUrl points to our old proxy (${SU}).`),console.warn(`[DEPRECATED] We are overwriting the value and use the new proxy URL (${QX}) instead.`),console.warn(`[DEPRECATED] Action Required: You should manually update your configuration to use the new URL (${QX}). Read more: https://github.com/scalar/scalar`),Y.proxyUrl=QX;return Y},n_=i_.transform(o_);var r_=S.object({cdn:S.string().optional().default("https://cdn.jsdelivr.net/npm/@scalar/api-reference"),pageTitle:S.string().optional().default("Scalar API Reference")});var t_={alternate:eM,default:XU,moon:GU,elysiajs:e7,fastify:QU,purple:MU,solarized:HU,bluePlanet:$U,deepSpace:YU,saturn:UU,kepler:WU,mars:JU};var Fp=Object.keys(t_);function WX($){return"type"in $||"properties"in $||"items"in $}function s_($,Y){return($==="createdAt"||$==="updatedAt")&&"anyOf"in Y&&Array.isArray(Y.anyOf)}function VU($){if(!WX($)||typeof $!=="object"||$===null)return $;let Y={...$};return Object.entries(Y).forEach(([X,Q])=>{if(WX(Q))if(s_(X,Q)){let W=Q.anyOf?.find((J)=>WX(J)&&J.format==="date-time");if(W){let J={type:"string",format:"date-time",default:W.default};Y[X]=J}}else Y[X]=VU(Q)}),Y}var a_=($,Y,X,Q,W)=>{let J=JSON.parse(Q);if(J.components&&J.components.schemas)J.components.schemas=Object.fromEntries(Object.entries(J.components.schemas).map(([M,U])=>[M,VU(U)]));let G=JSON.stringify(J);return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>${$.title}</title>
    <meta
        name="description"
        content="${$.description}"
    />
    <meta
        name="og:description"
        content="${$.description}"
    />
    ${W&&typeof X==="string"?`
    <style>
        @media (prefers-color-scheme: dark) {
            body {
                background-color: #222;
                color: #faf9a;
            }
            .swagger-ui {
                filter: invert(92%) hue-rotate(180deg);
            }

            .swagger-ui .microlight {
                filter: invert(100%) hue-rotate(180deg);
            }
        }
    </style>`:""}
    ${typeof X==="string"?`<link rel="stylesheet" href="${X}" />`:`<link rel="stylesheet" media="(prefers-color-scheme: light)" href="${X.light}" />
<link rel="stylesheet" media="(prefers-color-scheme: dark)" href="${X.dark}" />`}
</head>
<body>
    <div id="swagger-ui"></div>
    <script src="https://unpkg.com/swagger-ui-dist@${Y}/swagger-ui-bundle.js" crossorigin></script>
    <script>
        window.onload = () => {
            window.ui = SwaggerUIBundle(${G});
        };
    </script>
</body>
</html>`},e_=($,Y,X,Q)=>`<!doctype html>
<html>
  <head>
    <title>${$.title}</title>
    <meta
        name="description"
        content="${$.description}"
    />
    <meta
        name="og:description"
        content="${$.description}"
    />
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
    <style>
      body {
        margin: 0;
      }
    </style>
    <style>
      ${X.customCss??e7}
    </style>
  </head>
  <body>
    <script
      id="api-reference"
      data-url="${X.spec?.url}"
      data-configuration='${JSON.stringify(X)}'
    >
    </script>
    <script src="${Q?Q:`https://cdn.jsdelivr.net/npm/@scalar/api-reference@${Y}/dist/browser/standalone.min.js`}" crossorigin></script>
  </body>
</html>`,Cp=Symbol.for("TypeBox.Transform"),Vp=Symbol.for("TypeBox.Readonly"),Ep=Symbol.for("TypeBox.Optional"),bp=Symbol.for("TypeBox.Hint"),GX=Symbol.for("TypeBox.Kind"),$3=($)=>$.split("/").map((Y)=>{if(Y.startsWith(":")){if(Y=Y.slice(1,Y.length),Y.endsWith("?"))Y=Y.slice(0,-1);Y=`{${Y}}`}return Y}).join("/"),JX=($,Y,X)=>{if(Y===void 0)return[];if(typeof Y==="string")if(Y in X)Y=X[Y];else throw new Error(`Can't find model ${Y}`);return Object.entries(Y?.properties??[]).map(([Q,W])=>{let{type:J=void 0,description:G,examples:M,...U}=W;return{description:G,examples:M,schema:{type:J,...U},in:$,name:Q,required:Y.required?.includes(Q)??!1}})},K9=($,Y)=>{if(typeof Y==="object"&&["void","undefined","null"].includes(Y.type))return;let X={};for(let Q of $)X[Q]={schema:typeof Y==="string"?{$ref:`#/components/schemas/${Y}`}:("$ref"in Y)&&(GX in Y)&&Y[GX]==="Ref"?{...Y,$ref:`#/components/schemas/${Y.$ref}`}:p7({...Y},{from:z.Ref(""),to:({$ref:W,...J})=>{if(!W.startsWith("#/components/schemas/"))return z.Ref(`#/components/schemas/${W}`,J);return z.Ref(W,J)}})};return X},PU=($)=>$.charAt(0).toUpperCase()+$.slice(1),Y3=($,Y)=>{let X=$.toLowerCase();if(Y==="/")return X+"Index";for(let Q of Y.split("/"))if(Q.charCodeAt(0)===123)X+="By"+PU(Q.slice(1,-1));else X+=PU(Q);return X},w4=($)=>{if(!$)return;if(typeof $==="string")return $;if(Array.isArray($))return[...$];return{...$}},CU=({schema:$,path:Y,method:X,hook:Q,models:W})=>{if(Q=w4(Q),Q.parse&&!Array.isArray(Q.parse))Q.parse=[Q.parse];let J=Q.parse?.map((w)=>{switch(typeof w){case"string":return w;case"object":if(w&&typeof w?.fn!=="string")return;switch(w?.fn){case"json":case"application/json":return"application/json";case"text":case"text/plain":return"text/plain";case"urlencoded":case"application/x-www-form-urlencoded":return"application/x-www-form-urlencoded";case"arrayBuffer":case"application/octet-stream":return"application/octet-stream";case"formdata":case"multipart/form-data":return"multipart/form-data"}}}).filter((w)=>w!==void 0);if(!J||J.length===0)J=["application/json","multipart/form-data","text/plain"];Y=$3(Y);let G=typeof J==="string"?[J]:J??["application/json"],M=w4(Q?.body),U=w4(Q?.params),H=w4(Q?.headers),B=w4(Q?.query),A=w4(Q?.response);if(typeof A==="object")if(GX in A){let{type:w,properties:q,required:L,additionalProperties:j,patternProperties:h,$ref:V,...I}=A;A={"200":{...I,description:I.description,content:K9(G,w==="object"||w==="array"?{type:w,properties:q,patternProperties:h,items:A.items,required:L}:A)}}}else Object.entries(A).forEach(([w,q])=>{if(typeof q==="string"){if(!W[q])return;let{type:L,properties:j,required:h,additionalProperties:V,patternProperties:I,...o}=W[q];A[w]={...o,description:o.description,content:K9(G,q)}}else{let{type:L,properties:j,required:h,additionalProperties:V,patternProperties:I,...o}=q;A[w]={...o,description:o.description,content:K9(G,L==="object"||L==="array"?{type:L,properties:j,patternProperties:I,items:q.items,required:h}:q)}}});else if(typeof A==="string"){if(!(A in W))return;let{type:w,properties:q,required:L,$ref:j,additionalProperties:h,patternProperties:V,...I}=W[A];A={"200":{...I,content:K9(G,A)}}}let O=[...JX("header",H,W),...JX("path",U,W),...JX("query",B,W)];$[Y]={...$[Y]?$[Y]:{},[X.toLowerCase()]:{...H||U||B||M?{parameters:O}:{},...A?{responses:A}:{},operationId:Q?.detail?.operationId??Y3(X,Y),...Q?.detail,...M?{requestBody:{required:!0,content:K9(G,typeof M==="string"?{$ref:`#/components/schemas/${M}`}:M)}}:null}}},X3=($,{excludeStaticFile:Y=!0,exclude:X=[]})=>{let Q={};for(let[W,J]of Object.entries($))if(!X.some((G)=>{if(typeof G==="string")return W===G;return G.test(W)})&&!W.includes("*")&&(Y?!W.includes("."):!0))Object.keys(J).forEach((G)=>{let M=J[G];if(W.includes("{")){if(!M.parameters)M.parameters=[];M.parameters=[...W.split("/").filter((U)=>U.startsWith("{")&&!M.parameters.find((H)=>H.in==="path"&&H.name===U.slice(1,U.length-1))).map((U)=>({schema:{type:"string"},in:"path",name:U.slice(1,U.length-1),required:!0})),...M.parameters]}if(!M.responses)M.responses={200:{}}}),Q[W]=J;return Q},EU=({provider:$="scalar",scalarVersion:Y="latest",scalarCDN:X="",scalarConfig:Q={},documentation:W={},version:J="5.9.0",excludeStaticFile:G=!0,path:M="/swagger",specPath:U=`${M}/json`,exclude:H=[],swaggerOptions:B={},theme:A=`https://unpkg.com/swagger-ui-dist@${J}/swagger-ui.css`,autoDarkMode:O=!0,excludeMethods:w=["OPTIONS"],excludeTags:q=[]}={})=>{let L={},j=0;if(!J)J=`https://unpkg.com/swagger-ui-dist@${J}/swagger-ui.css`;let h={title:"Elysia Documentation",description:"Development documentation",version:"0.0.0",...W.info},V=M.startsWith("/")?M.slice(1):M,I=new V0({name:"@elysiajs/swagger"}),o=new Response($==="swagger-ui"?a_(h,J,A,JSON.stringify({url:U,dom_id:"#swagger-ui",...B},(Q0,g)=>typeof g==="function"?void 0:g),O):e_(h,Y,{spec:{...Q.spec,url:U},...Q,_integration:"elysiajs"},X),{headers:{"content-type":"text/html; charset=utf8"}});return I.get(M,o,{detail:{hide:!0}}).get(U,function Q0(){let g=I.getGlobalRoutes();if(g.length!==j){let x=["GET","PUT","POST","DELETE","OPTIONS","HEAD","PATCH","TRACE"];j=g.length,g.forEach((f)=>{if(f.hooks?.detail?.hide===!0)return;if(w.includes(f.method))return;if(x.includes(f.method)===!1&&f.method!=="ALL")return;if(f.method==="ALL")x.forEach((C)=>{CU({schema:L,hook:f.hooks,method:C,path:f.path,models:I.getGlobalDefinitions?.().type,contentType:f.hooks.type})});else CU({schema:L,hook:f.hooks,method:f.method,path:f.path,models:I.getGlobalDefinitions?.().type,contentType:f.hooks.type})})}return{openapi:"3.0.3",...{...W,tags:W.tags?.filter((x)=>!q?.includes(x?.name)),info:{title:"Elysia Documentation",description:"Development documentation",version:"0.0.0",...W.info}},paths:{...X3(L,{excludeStaticFile:G,exclude:Array.isArray(H)?H:[H]}),...W.paths},components:{...W.components,schemas:{...I.getGlobalDefinitions?.().type,...W.components?.schemas}}}},{detail:{hide:!0}}),I};var y5=R4(vX(),1),Fi=y5.default.Client,rB=y5.default.Pool,Si=y5.default.Connection,_i=y5.default.types,Ri=y5.default.Query,Pi=y5.default.DatabaseError,Ci=y5.default.escapeIdentifier,Vi=y5.default.escapeLiteral,Ei=y5.default.Result,bi=y5.default.TypeOverrides,Ii=y5.default.defaults;var O$=($)=>({PORT:parseInt(process.env.PORT||"3000"),ENVIRONMENT:process.env.ENVIRONMENT||"development",DB_URL:process.env.DATABASE_URL,APP:$});var tB=O$(new V0),t=new rB({connectionString:tB.DB_URL,ssl:tB.ENVIRONMENT==="production"?{rejectUnauthorized:!1}:!1});t.query("SELECT NOW()").then(()=>console.log("\uD83D\uDFE2 PostgreSQL connected")).catch(($)=>console.error("\uD83D\uDD34 PostgreSQL connection error",$));var sB=new V0({prefix:"/health"}).get("/",()=>({status:"ok"}),{detail:{tags:["Health"],description:"Health check b\xE1sico",responses:{200:{description:"Servicio en funcionamiento"}}}}).get("/db",async()=>{let{rows:$}=await t.query("SELECT NOW() as time");return{db_time:$[0].time}},{detail:{tags:["Health"],description:"Verifica conexi\xF3n a la base de datos",responses:{200:{description:"Hora actual de la base de datos"}}}}).get("/tables",async()=>{let{rows:$}=await t.query(`
      SELECT table_name 
      FROM information_schema.tables 
      WHERE table_schema = 'public'
      ORDER BY table_name
    `);return{tables:$.map((Y)=>Y.table_name)}},{detail:{tags:["Health"],description:"Lista todas las tablas en la base de datos",responses:{200:{description:"Listado de tablas",content:{"application/json":{example:{tables:["academico","unidad_academica"]}}}}}}}).get("/tables-detailed",async()=>{let{rows:$}=await t.query(`
      SELECT 
        table_name,
        column_name,
        data_type,
        is_nullable,
        character_maximum_length
      FROM information_schema.columns
      WHERE table_schema = 'public'
      ORDER BY table_name, ordinal_position
    `);return{tables:$.reduce((X,Q)=>{if(!X[Q.table_name])X[Q.table_name]=[];return X[Q.table_name].push({column:Q.column_name,type:Q.data_type,nullable:Q.is_nullable==="YES",max_length:Q.character_maximum_length}),X},{})}},{detail:{tags:["Health"],description:"Estructura detallada de todas las tablas",responses:{200:{description:"Metadatos de las tablas",content:{"application/json":{example:{tables:{academico:[{column:"id_academico",type:"integer",nullable:!1,max_length:null},{column:"nombre",type:"character varying",nullable:!0,max_length:255}]}}}}}}}});var D$=z.Object({id_academico:z.Number(),nombre:z.String(),email:z.String({format:"email"}),a_materno:z.String(),a_paterno:z.String()}),b2={async create($){let{rows:Y}=await t.query(`INSERT INTO academico (nombre, email, a_materno, a_paterno) 
       VALUES ($1, $2, $3, $4) 
       RETURNING *`,[$.nombre,$.email,$.a_materno,$.a_paterno]);return Y[0]},async getAll(){let{rows:$}=await t.query("SELECT * FROM academico ORDER BY id_academico");return $},async getById($){let{rows:Y}=await t.query("SELECT * FROM academico WHERE id_academico = $1",[$]);return Y[0]||null},async update($,Y){let X=[],Q=[],W=1;for(let[M,U]of Object.entries(Y))if(U!==void 0)X.push(`${M} = $${W}`),Q.push(U),W++;if(X.length===0)throw new Error("No hay campos para actualizar");let J=`
      UPDATE academico 
      SET ${X.join(", ")} 
      WHERE id_academico = $${W} 
      RETURNING *
    `,{rows:G}=await t.query(J,[...Q,$]);return G[0]||null},async delete($){let{rowCount:Y}=await t.query("DELETE FROM academico WHERE id_academico = $1",[$]);return Y!=null&&Y>0},async searchByName($){let{rows:Y}=await t.query(`SELECT * FROM academico 
       WHERE nombre ILIKE $1 OR a_paterno ILIKE $1 OR a_materno ILIKE $1`,[`%${$}%`]);return Y}};var aB=new V0({prefix:"/academicos"}).get("/",async()=>{return await b2.getAll()},{detail:{tags:["Acad\xE9micos"],description:"Obtiene todos los registros acad\xE9micos",responses:{200:{description:"Lista de acad\xE9micos obtenida exitosamente"}}}}).get("/:id",async({params:{id:$}})=>{return await b2.getById(Number($))??{error:"Acad\xE9mico no encontrado",status:404}},{params:z.Object({id:z.Numeric()}),detail:{tags:["Acad\xE9micos"],description:"Obtiene un acad\xE9mico espec\xEDfico por ID",responses:{200:{description:"Acad\xE9mico encontrado"},404:{description:"Acad\xE9mico no encontrado"}}}}).post("/",async({body:$,set:Y})=>{try{let X=await b2.create($);return Y.status=201,X}catch(X){return Y.status=400,{error:"Error al insertar acad\xE9mico",details:X instanceof Error?X.message:"Error desconocido"}}},{body:z.Omit(D$,["id_academico"]),detail:{tags:["Acad\xE9micos"],description:"Crea un nuevo registro acad\xE9mico",responses:{201:{description:"Acad\xE9mico creado exitosamente"},400:{description:"Datos inv\xE1lidos"}}}}).put("/:id",async({params:{id:$},body:Y,set:X})=>{try{let Q=await b2.update(Number($),Y);if(!Q)return X.status=404,{error:"Acad\xE9mico no encontrado"};return Q}catch(Q){return X.status=400,{error:"Error al actualizar acad\xE9mico",details:Q instanceof Error?Q.message:"Error desconocido"}}},{params:z.Object({id:z.Numeric()}),body:z.Omit(D$,["id_academico"]),detail:{tags:["Acad\xE9micos"],description:"Actualiza completamente un acad\xE9mico",responses:{200:{description:"Acad\xE9mico actualizado exitosamente"},400:{description:"Datos inv\xE1lidos"},404:{description:"Acad\xE9mico no encontrado"}}}}).patch("/:id",async({params:{id:$},body:Y,set:X})=>{try{let Q=await b2.update(Number($),Y);if(!Q)return X.status=404,{error:"Acad\xE9mico no encontrado"};return Q}catch(Q){return X.status=400,{error:"Error al actualizar acad\xE9mico",details:Q instanceof Error?Q.message:"Error desconocido"}}},{params:z.Object({id:z.Numeric()}),body:z.Partial(z.Omit(D$,["id_academico"])),detail:{tags:["Acad\xE9micos"],description:"Actualiza parcialmente un acad\xE9mico",responses:{200:{description:"Acad\xE9mico actualizado exitosamente"},400:{description:"Datos inv\xE1lidos"},404:{description:"Acad\xE9mico no encontrado"}}}}).delete("/:id",async({params:{id:$},set:Y})=>{if(!await b2.delete(Number($)))return Y.status=404,{error:"Acad\xE9mico no encontrado"};return{success:!0,message:"Acad\xE9mico eliminado correctamente"}},{params:z.Object({id:z.Numeric()}),detail:{tags:["Acad\xE9micos"],description:"Elimina un acad\xE9mico",responses:{200:{description:"Acad\xE9mico eliminado exitosamente"},404:{description:"Acad\xE9mico no encontrado"}}}}).get("/buscar/:termino",async({params:{termino:$}})=>{let Y=await b2.searchByName($);return Y.length>0?Y:{message:"No se encontraron acad\xE9micos con ese criterio"}},{params:z.Object({termino:z.String()}),detail:{tags:["Acad\xE9micos"],description:"Busca acad\xE9micos por nombre o apellido",responses:{200:{description:"Resultados de b\xFAsqueda"}}}});var nC=z.Object({id_unidad:z.Number(),nombre:z.String({minLength:3,maxLength:100})}),L$=z.Omit(nC,["id_unidad"]),H8={async create($){let{rows:Y}=await t.query(`INSERT INTO unidadacademica (nombre) 
       VALUES ($1) 
       RETURNING *`,[$.nombre]);return Y[0]},async getAll(){let{rows:$}=await t.query("SELECT * FROM unidadacademica ORDER BY id_unidad");return $},async getById($){let{rows:Y}=await t.query("SELECT * FROM unidadacademica WHERE id_unidad = $1",[$]);return Y[0]||null},async update($,Y){let X=Object.entries(Y).filter(([G,M])=>M!==void 0);if(X.length===0)throw new Error("No hay campos v\xE1lidos para actualizar");let Q=X.map(([G],M)=>`${G} = $${M+1}`).join(", "),W=X.map(([G,M])=>M),{rows:J}=await t.query(`UPDATE unidadacademica 
       SET ${Q} 
       WHERE id_unidad = $${X.length+1} 
       RETURNING *`,[...W,$]);return J[0]||null},async delete($){let{rowCount:Y}=await t.query("DELETE FROM unidadacademica WHERE id_unidad = $1",[$]);return Y!=null&&Y>0},async searchByName($){let{rows:Y}=await t.query(`SELECT * FROM unidadacademica 
       WHERE nombre ILIKE $1
       ORDER BY id_unidad`,[`%${$}%`]);return Y}};var eB=new V0({prefix:"/unidades"}).post("/",async({body:$,set:Y})=>{try{let X=await H8.create($);return Y.status=201,X}catch(X){return Y.status=400,{error:"Error al crear unidad acad\xE9mica",details:X instanceof Error?X.message:String(X)}}},{body:L$,detail:{tags:["Unidades Acad\xE9micas"],description:"Crea una nueva unidad acad\xE9mica",responses:{201:{description:"Unidad creada exitosamente"},400:{description:"Datos inv\xE1lidos"}}}}).get("/",async()=>{return await H8.getAll()},{detail:{tags:["Unidades Acad\xE9micas"],description:"Obtiene todas las unidades acad\xE9micas",responses:{200:{description:"Lista de unidades acad\xE9micas"}}}}).get("/:id",async({params:{id:$},set:Y})=>{let X=await H8.getById(Number($));if(!X)return Y.status=404,{error:"Unidad acad\xE9mica no encontrada"};return X},{params:z.Object({id:z.Numeric()}),detail:{tags:["Unidades Acad\xE9micas"],description:"Obtiene una unidad acad\xE9mica por su ID",responses:{200:{description:"Unidad acad\xE9mica encontrada"},404:{description:"Unidad no encontrada"}}}}).put("/:id",async({params:{id:$},body:Y,set:X})=>{try{let Q=await H8.update(Number($),Y);if(!Q)return X.status=404,{error:"Unidad acad\xE9mica no encontrada"};return Q}catch(Q){return X.status=400,{error:"Error al actualizar unidad acad\xE9mica",details:Q instanceof Error?Q.message:String(Q)}}},{params:z.Object({id:z.Numeric()}),body:L$,detail:{tags:["Unidades Acad\xE9micas"],description:"Actualiza todos los campos de una unidad acad\xE9mica",responses:{200:{description:"Unidad actualizada exitosamente"},400:{description:"Datos inv\xE1lidos"},404:{description:"Unidad no encontrada"}}}}).patch("/:id",async({params:{id:$},body:Y,set:X})=>{try{let Q=await H8.update(Number($),Y);if(!Q)return X.status=404,{error:"Unidad acad\xE9mica no encontrada"};return Q}catch(Q){return X.status=400,{error:"Error al actualizar unidad acad\xE9mica",details:Q instanceof Error?Q.message:String(Q)}}},{params:z.Object({id:z.Numeric()}),body:z.Partial(L$),detail:{tags:["Unidades Acad\xE9micas"],description:"Actualiza campos espec\xEDficos de una unidad acad\xE9mica",responses:{200:{description:"Unidad actualizada exitosamente"},400:{description:"Datos inv\xE1lidos"},404:{description:"Unidad no encontrada"}}}}).delete("/:id",async({params:{id:$},set:Y})=>{if(!await H8.delete(Number($)))return Y.status=404,{error:"Unidad acad\xE9mica no encontrada"};return{success:!0}},{params:z.Object({id:z.Numeric()}),detail:{tags:["Unidades Acad\xE9micas"],description:"Elimina una unidad acad\xE9mica",responses:{200:{description:"Unidad eliminada exitosamente"},404:{description:"Unidad no encontrada"}}}}).get("/buscar/:nombre",async({params:{nombre:$}})=>{return await H8.searchByName($)},{params:z.Object({nombre:z.String()}),detail:{tags:["Unidades Acad\xE9micas"],description:"Busca unidades acad\xE9micas por nombre",responses:{200:{description:"Resultados de b\xFAsqueda"}}}});var Z$=z.Object({id_apoyo:z.Number(),tipo:z.String(),detalle:z.String()}),z2={async create($){let{rows:Y}=await t.query(`INSERT INTO apoyo (tipo, detalle) 
       VALUES ($1, $2) 
       RETURNING *`,[$.tipo,$.detalle]);return Y[0]},async getAll(){let{rows:$}=await t.query("SELECT * FROM apoyo ORDER BY id_apoyo");return $},async getById($){let{rows:Y}=await t.query("SELECT * FROM apoyo WHERE id_apoyo = $1",[$]);return Y[0]||null},async update($,Y){let X=[],Q=[],W=1;for(let[M,U]of Object.entries(Y))if(U!==void 0)X.push(`${M} = $${W}`),Q.push(U),W++;if(X.length===0)throw new Error("No hay campos para actualizar");let J=`
      UPDATE apoyo 
      SET ${X.join(", ")} 
      WHERE id_apoyo = $${W} 
      RETURNING *
    `,{rows:G}=await t.query(J,[...Q,$]);return G[0]||null},async delete($){let{rowCount:Y}=await t.query("DELETE FROM apoyo WHERE id_apoyo = $1",[$]);return Y!=null&&Y>0},async searchByType($){let{rows:Y}=await t.query(`SELECT * FROM apoyo 
       WHERE tipo ILIKE $1`,[`%${$}%`]);return Y},async searchByDetail($){let{rows:Y}=await t.query(`SELECT * FROM apoyo 
       WHERE detalle ILIKE $1`,[`%${$}%`]);return Y}};var $q=new V0({prefix:"/apoyos"}).get("/",async()=>{return await z2.getAll()},{detail:{tags:["Apoyos"],description:"Obtiene todos los registros de apoyo",responses:{200:{description:"Lista de apoyos obtenida exitosamente"}}}}).get("/:id",async({params:{id:$}})=>{return await z2.getById(Number($))??{error:"Apoyo no encontrado",status:404}},{params:z.Object({id:z.Numeric()}),detail:{tags:["Apoyos"],description:"Obtiene un apoyo espec\xEDfico por ID",responses:{200:{description:"Apoyo encontrado"},404:{description:"Apoyo no encontrado"}}}}).post("/",async({body:$,set:Y})=>{try{let X=await z2.create($);return Y.status=201,X}catch(X){return Y.status=400,{error:"Error al insertar apoyo",details:X instanceof Error?X.message:"Error desconocido"}}},{body:z.Omit(Z$,["id_apoyo"]),detail:{tags:["Apoyos"],description:"Crea un nuevo registro de apoyo",responses:{201:{description:"Apoyo creado exitosamente"},400:{description:"Datos inv\xE1lidos"}}}}).put("/:id",async({params:{id:$},body:Y,set:X})=>{try{let Q=await z2.update(Number($),Y);if(!Q)return X.status=404,{error:"Apoyo no encontrado"};return Q}catch(Q){return X.status=400,{error:"Error al actualizar apoyo",details:Q instanceof Error?Q.message:"Error desconocido"}}},{params:z.Object({id:z.Numeric()}),body:z.Omit(Z$,["id_apoyo"]),detail:{tags:["Apoyos"],description:"Actualiza completamente un apoyo",responses:{200:{description:"Apoyo actualizado exitosamente"},400:{description:"Datos inv\xE1lidos"},404:{description:"Apoyo no encontrado"}}}}).patch("/:id",async({params:{id:$},body:Y,set:X})=>{try{let Q=await z2.update(Number($),Y);if(!Q)return X.status=404,{error:"Apoyo no encontrado"};return Q}catch(Q){return X.status=400,{error:"Error al actualizar apoyo",details:Q instanceof Error?Q.message:"Error desconocido"}}},{params:z.Object({id:z.Numeric()}),body:z.Partial(z.Omit(Z$,["id_apoyo"])),detail:{tags:["Apoyos"],description:"Actualiza parcialmente un apoyo",responses:{200:{description:"Apoyo actualizado exitosamente"},400:{description:"Datos inv\xE1lidos"},404:{description:"Apoyo no encontrado"}}}}).delete("/:id",async({params:{id:$},set:Y})=>{if(!await z2.delete(Number($)))return Y.status=404,{error:"Apoyo no encontrado"};return{success:!0,message:"Apoyo eliminado correctamente"}},{params:z.Object({id:z.Numeric()}),detail:{tags:["Apoyos"],description:"Elimina un apoyo",responses:{200:{description:"Apoyo eliminado exitosamente"},404:{description:"Apoyo no encontrado"}}}}).get("/buscar/tipo/:tipo",async({params:{tipo:$}})=>{let Y=await z2.searchByType($);return Y.length>0?Y:{message:"No se encontraron apoyos con ese tipo"}},{params:z.Object({tipo:z.String()}),detail:{tags:["Apoyos"],description:"Busca apoyos por tipo",responses:{200:{description:"Resultados de b\xFAsqueda"}}}}).get("/buscar/detalle/:detalle",async({params:{detalle:$}})=>{let Y=await z2.searchByDetail($);return Y.length>0?Y:{message:"No se encontraron apoyos con ese detalle"}},{params:z.Object({detalle:z.String()}),detail:{tags:["Apoyos"],description:"Busca apoyos por contenido del detalle",responses:{200:{description:"Resultados de b\xFAsqueda"}}}});var j$=z.Object({id_convocatoria:z.Number(),nombre:z.String(),tipo:z.Number(),institucion:z.Number()}),h5={async create($){let{rows:Y}=await t.query(`INSERT INTO convocatoria (nombre, tipo, institucion) 
       VALUES ($1, $2, $3) 
       RETURNING *`,[$.nombre,$.tipo,$.institucion]);return Y[0]},async getAll(){let{rows:$}=await t.query("SELECT * FROM convocatoria ORDER BY id_convocatoria");return $},async getById($){let{rows:Y}=await t.query("SELECT * FROM convocatoria WHERE id_convocatoria = $1",[$]);return Y[0]||null},async update($,Y){let X=[],Q=[],W=1;for(let[M,U]of Object.entries(Y))if(U!==void 0)X.push(`${M} = $${W}`),Q.push(U),W++;if(X.length===0)throw new Error("No hay campos para actualizar");let J=`
      UPDATE convocatoria 
      SET ${X.join(", ")} 
      WHERE id_convocatoria = $${W} 
      RETURNING *
    `,{rows:G}=await t.query(J,[...Q,$]);return G[0]||null},async delete($){let{rowCount:Y}=await t.query("DELETE FROM convocatoria WHERE id_convocatoria = $1",[$]);return Y!=null&&Y>0},async searchByName($){let{rows:Y}=await t.query(`SELECT * FROM convocatoria 
       WHERE nombre ILIKE $1`,[`%${$}%`]);return Y},async getByType($){let{rows:Y}=await t.query("SELECT * FROM convocatoria WHERE tipo = $1",[$]);return Y},async getByInstitution($){let{rows:Y}=await t.query("SELECT * FROM convocatoria WHERE institucion = $1",[$]);return Y}};var Yq=new V0({prefix:"/convocatorias"}).get("/",async()=>{return await h5.getAll()},{detail:{tags:["Convocatorias"],description:"Obtiene todas las convocatorias",responses:{200:{description:"Lista de convocatorias obtenida exitosamente"}}}}).get("/:id",async({params:{id:$}})=>{return await h5.getById(Number($))??{error:"Convocatoria no encontrada",status:404}},{params:z.Object({id:z.Numeric()}),detail:{tags:["Convocatorias"],description:"Obtiene una convocatoria espec\xEDfica por ID",responses:{200:{description:"Convocatoria encontrada"},404:{description:"Convocatoria no encontrada"}}}}).post("/",async({body:$,set:Y})=>{try{let X=await h5.create($);return Y.status=201,X}catch(X){return Y.status=400,{error:"Error al crear convocatoria",details:X instanceof Error?X.message:"Error desconocido"}}},{body:z.Omit(j$,["id_convocatoria"]),detail:{tags:["Convocatorias"],description:"Crea una nueva convocatoria",responses:{201:{description:"Convocatoria creada exitosamente"},400:{description:"Datos inv\xE1lidos"}}}}).put("/:id",async({params:{id:$},body:Y,set:X})=>{try{let Q=await h5.update(Number($),Y);if(!Q)return X.status=404,{error:"Convocatoria no encontrada"};return Q}catch(Q){return X.status=400,{error:"Error al actualizar convocatoria",details:Q instanceof Error?Q.message:"Error desconocido"}}},{params:z.Object({id:z.Numeric()}),body:z.Omit(j$,["id_convocatoria"]),detail:{tags:["Convocatorias"],description:"Actualiza completamente una convocatoria",responses:{200:{description:"Convocatoria actualizada exitosamente"},400:{description:"Datos inv\xE1lidos"},404:{description:"Convocatoria no encontrada"}}}}).patch("/:id",async({params:{id:$},body:Y,set:X})=>{try{let Q=await h5.update(Number($),Y);if(!Q)return X.status=404,{error:"Convocatoria no encontrada"};return Q}catch(Q){return X.status=400,{error:"Error al actualizar convocatoria",details:Q instanceof Error?Q.message:"Error desconocido"}}},{params:z.Object({id:z.Numeric()}),body:z.Partial(z.Omit(j$,["id_convocatoria"])),detail:{tags:["Convocatorias"],description:"Actualiza parcialmente una convocatoria",responses:{200:{description:"Convocatoria actualizada exitosamente"},400:{description:"Datos inv\xE1lidos"},404:{description:"Convocatoria no encontrada"}}}}).delete("/:id",async({params:{id:$},set:Y})=>{if(!await h5.delete(Number($)))return Y.status=404,{error:"Convocatoria no encontrada"};return{success:!0,message:"Convocatoria eliminada correctamente"}},{params:z.Object({id:z.Numeric()}),detail:{tags:["Convocatorias"],description:"Elimina una convocatoria",responses:{200:{description:"Convocatoria eliminada exitosamente"},404:{description:"Convocatoria no encontrada"}}}}).get("/buscar/nombre/:nombre",async({params:{nombre:$}})=>{let Y=await h5.searchByName($);return Y.length>0?Y:{message:"No se encontraron convocatorias con ese nombre"}},{params:z.Object({nombre:z.String()}),detail:{tags:["Convocatorias"],description:"Busca convocatorias por nombre",responses:{200:{description:"Resultados de b\xFAsqueda"}}}}).get("/tipo/:tipo",async({params:{tipo:$}})=>{let Y=await h5.getByType(Number($));return Y.length>0?Y:{message:"No se encontraron convocatorias de ese tipo"}},{params:z.Object({tipo:z.Numeric()}),detail:{tags:["Convocatorias"],description:"Obtiene convocatorias por tipo",responses:{200:{description:"Resultados obtenidos"}}}}).get("/institucion/:institucion",async({params:{institucion:$}})=>{let Y=await h5.getByInstitution(Number($));return Y.length>0?Y:{message:"No se encontraron convocatorias para esa instituci\xF3n"}},{params:z.Object({institucion:z.Numeric()}),detail:{tags:["Convocatorias"],description:"Obtiene convocatorias por instituci\xF3n",responses:{200:{description:"Resultados obtenidos"}}}});var y8=z.Object({id_cuestionario:z.Number(),pregunta:z.String()}),h8={async create($){let{rows:Y}=await t.query(`INSERT INTO cuestionario (pregunta) 
       VALUES ($1) 
       RETURNING *`,[$.pregunta]);return Y[0]},async getAll(){let{rows:$}=await t.query("SELECT * FROM cuestionario ORDER BY id_cuestionario");return $},async getById($){let{rows:Y}=await t.query("SELECT * FROM cuestionario WHERE id_cuestionario = $1",[$]);return Y[0]||null},async update($,Y){let X=[],Q=[],W=1;for(let[M,U]of Object.entries(Y))if(U!==void 0)X.push(`${M} = $${W}`),Q.push(U),W++;if(X.length===0)throw new Error("No hay campos para actualizar");let J=`
      UPDATE cuestionario 
      SET ${X.join(", ")} 
      WHERE id_cuestionario = $${W} 
      RETURNING *
    `,{rows:G}=await t.query(J,[...Q,$]);return G[0]||null},async delete($){let{rowCount:Y}=await t.query("DELETE FROM cuestionario WHERE id_cuestionario = $1",[$]);return Y!=null&&Y>0},async searchByQuestion($){let{rows:Y}=await t.query(`SELECT * FROM cuestionario 
       WHERE pregunta ILIKE $1`,[`%${$}%`]);return Y}};var Xq=new V0({prefix:"/cuestionarios"}).post("/",async({body:$})=>{return await h8.create($)},{body:z.Omit(y8,["id_cuestionario"]),response:y8,detail:{tags:["Cuestionarios"],description:"Crear un nuevo cuestionario"}}).get("/",async()=>{return await h8.getAll()},{response:z.Array(y8),detail:{tags:["Cuestionarios"],description:"Obtener todos los cuestionarios"}}).get("/:id",async({params:{id:$}})=>{let Y=await h8.getById(Number($));if(!Y)throw new Error("Cuestionario no encontrado");return Y},{params:z.Object({id:z.Numeric()}),response:y8,detail:{tags:["Cuestionarios"],description:"Obtener un cuestionario por su ID"}}).patch("/:id",async({params:{id:$},body:Y})=>{let X=await h8.update(Number($),Y);if(!X)throw new Error("Cuestionario no encontrado");return X},{params:z.Object({id:z.Numeric()}),body:z.Partial(z.Omit(y8,["id_cuestionario"])),response:y8,detail:{tags:["Cuestionarios"],description:"Actualizar un cuestionario existente"}}).delete("/:id",async({params:{id:$}})=>{if(!await h8.delete(Number($)))throw new Error("Cuestionario no encontrado");return{message:"Cuestionario eliminado correctamente"}},{params:z.Object({id:z.Numeric()}),response:z.Object({message:z.String()}),detail:{tags:["Cuestionarios"],description:"Eliminar un cuestionario"}}).get("/buscar/:pregunta",async({params:{pregunta:$}})=>{return await h8.searchByQuestion($)},{params:z.Object({pregunta:z.String()}),response:z.Array(y8),detail:{tags:["Cuestionarios"],description:"Buscar cuestionarios por texto en la pregunta"}});var z6=z.Object({id:z.Number(),nombre_investigador:z.Number(),escuela:z.Number(),respuesta_1:z.Optional(z.String()),respuesta_2:z.Optional(z.String()),respuesta_3:z.Optional(z.String()),respuesta_4:z.Optional(z.String()),respuesta_5:z.Optional(z.String()),respuesta_6:z.Optional(z.String()),respuesta_7:z.Optional(z.String()),respuesta_8:z.Optional(z.String()),respuesta_9:z.Optional(z.String()),fecha_creacion:z.Date()}),B8={async create($){let{rows:Y}=await t.query(`INSERT INTO cuestionario_respuestas (
        nombre_investigador, escuela, respuesta_1, respuesta_2, respuesta_3,
        respuesta_4, respuesta_5, respuesta_6, respuesta_7, respuesta_8, respuesta_9
      ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11)
      RETURNING *`,[$.nombre_investigador,$.escuela,$.respuesta_1,$.respuesta_2,$.respuesta_3,$.respuesta_4,$.respuesta_5,$.respuesta_6,$.respuesta_7,$.respuesta_8,$.respuesta_9]);return Y[0]},async getAll(){let{rows:$}=await t.query("SELECT * FROM cuestionario_respuestas ORDER BY id");return $},async getById($){let{rows:Y}=await t.query("SELECT * FROM cuestionario_respuestas WHERE id = $1",[$]);return Y[0]||null},async update($,Y){let X=[],Q=[],W=1;for(let[M,U]of Object.entries(Y))if(U!==void 0)X.push(`${M} = $${W}`),Q.push(U),W++;if(X.length===0)throw new Error("No hay campos para actualizar");let J=`
      UPDATE cuestionario_respuestas
      SET ${X.join(", ")}
      WHERE id = $${W}
      RETURNING *
    `,{rows:G}=await t.query(J,[...Q,$]);return G[0]||null},async delete($){let{rowCount:Y}=await t.query("DELETE FROM cuestionario_respuestas WHERE id = $1",[$]);return Y!=null&&Y>0},async getByInvestigador($){let{rows:Y}=await t.query("SELECT * FROM cuestionario_respuestas WHERE nombre_investigador = $1",[$]);return Y},async getByEscuela($){let{rows:Y}=await t.query("SELECT * FROM cuestionario_respuestas WHERE escuela = $1",[$]);return Y}};var Qq=new V0({prefix:"/respuestas-cuestionario"}).post("/",async({body:$})=>{return await B8.create({nombre_investigador:$.nombre_investigador,escuela:$.escuela,respuesta_1:$.respuesta_1??null,respuesta_2:$.respuesta_2??null,respuesta_3:$.respuesta_3??null,respuesta_4:$.respuesta_4??null,respuesta_5:$.respuesta_5??null,respuesta_6:$.respuesta_6??null,respuesta_7:$.respuesta_7??null,respuesta_8:$.respuesta_8??null,respuesta_9:$.respuesta_9??null})},{body:z.Object({nombre_investigador:z.Number(),escuela:z.Number(),respuesta_1:z.Optional(z.Union([z.String(),z.Null()])),respuesta_2:z.Optional(z.Union([z.String(),z.Null()])),respuesta_3:z.Optional(z.Union([z.String(),z.Null()])),respuesta_4:z.Optional(z.Union([z.String(),z.Null()])),respuesta_5:z.Optional(z.Union([z.String(),z.Null()])),respuesta_6:z.Optional(z.Union([z.String(),z.Null()])),respuesta_7:z.Optional(z.Union([z.String(),z.Null()])),respuesta_8:z.Optional(z.Union([z.String(),z.Null()])),respuesta_9:z.Optional(z.Union([z.String(),z.Null()]))}),response:z6,detail:{tags:["Respuestas Cuestionario"],description:"Registrar nuevas respuestas a un cuestionario"}}).get("/",async()=>{return await B8.getAll()},{response:z.Array(z6),detail:{tags:["Respuestas Cuestionario"],description:"Obtener todas las respuestas registradas"}}).get("/:id",async({params:{id:$}})=>{let Y=await B8.getById(Number($));if(!Y)throw new Error("Respuesta no encontrada");return Y},{params:z.Object({id:z.Numeric()}),response:z6,detail:{tags:["Respuestas Cuestionario"],description:"Obtener una respuesta espec\xEDfica por ID"}}).patch("/:id",async({params:{id:$},body:Y})=>{let X=await B8.update(Number($),{...Y,respuesta_1:Y.respuesta_1??null,respuesta_2:Y.respuesta_2??null,respuesta_3:Y.respuesta_3??null,respuesta_4:Y.respuesta_4??null,respuesta_5:Y.respuesta_5??null,respuesta_6:Y.respuesta_6??null,respuesta_7:Y.respuesta_7??null,respuesta_8:Y.respuesta_8??null,respuesta_9:Y.respuesta_9??null});if(!X)throw new Error("Respuesta no encontrada");return X},{params:z.Object({id:z.Numeric()}),body:z.Partial(z.Object({nombre_investigador:z.Number(),escuela:z.Number(),respuesta_1:z.Optional(z.Union([z.String(),z.Null()])),respuesta_2:z.Optional(z.Union([z.String(),z.Null()])),respuesta_3:z.Optional(z.Union([z.String(),z.Null()])),respuesta_4:z.Optional(z.Union([z.String(),z.Null()])),respuesta_5:z.Optional(z.Union([z.String(),z.Null()])),respuesta_6:z.Optional(z.Union([z.String(),z.Null()])),respuesta_7:z.Optional(z.Union([z.String(),z.Null()])),respuesta_8:z.Optional(z.Union([z.String(),z.Null()])),respuesta_9:z.Optional(z.Union([z.String(),z.Null()]))})),response:z6,detail:{tags:["Respuestas Cuestionario"],description:"Actualizar una respuesta existente"}}).delete("/:id",async({params:{id:$}})=>{if(!await B8.delete(Number($)))throw new Error("Respuesta no encontrada");return{message:"Respuesta eliminada correctamente"}},{params:z.Object({id:z.Numeric()}),response:z.Object({message:z.String()}),detail:{tags:["Respuestas Cuestionario"],description:"Eliminar un cuestionario"}}).get("/investigador/:id",async({params:{id:$}})=>{return await B8.getByInvestigador(Number($))},{params:z.Object({id:z.Numeric()}),response:z.Array(z6),detail:{tags:["Respuestas Cuestionario"],description:"Obtener respuestas por ID de investigador"}}).get("/escuela/:id",async({params:{id:$}})=>{return await B8.getByEscuela(Number($))},{params:z.Object({id:z.Numeric()}),response:z.Array(z6),detail:{tags:["Respuestas Cuestionario"],description:"Obtener respuestas por ID de escuela"}});var Wq=new V0().use(sB).use(aB).use(eB).use(Yq).use(Xq).use(Qq).use($q);var A6=new V0,Jq=O$(A6);if(Jq.ENVIRONMENT==="development")A6.use(EU({path:"/docs",documentation:{info:{title:"API Proyectos I+D - Bun + Elysia",version:"1.0.0",description:"API para gesti\xF3n de datos acad\xE9micos"},tags:[{name:"Health",description:"Health checks del sistema"},{name:"Acad\xE9micos",description:"Gesti\xF3n de datos de acad\xE9micos"}],components:{schemas:{Academico:{type:"object",properties:{id_academico:{type:"number",example:103},nombre:{type:"string",example:"ABDON"},email:{type:"string",format:"email",example:"abdon.cifuentes@pucv.cl"},a_materno:{type:"string",example:"VALENZUELA"},a_paterno:{type:"string",example:"CIFUENTES"}}},Unidad_Academica:{type:"object",properties:{id_unidad:{type:"number",example:103},nombre:{type:"string",example:"Ing Civil Mecanica"}}}}}}}));A6.use(Wq).listen(Jq.PORT);console.log(`\uD83E\uDD8A Elysia running at ${A6.server?.hostname}:${A6.server?.port}`);console.log(`\uD83D\uDCDA Swagger docs: http://${A6.server?.hostname}:${A6.server?.port}/docs`);
